(function(){var e;$(document).ready(function(){return e.init()}),e={init:function(){return this.initializeRatingsForm(),this.initializeRecommend(),this.initializeCompanyField(),this.initializeOTRecommend(),this.addValidation()},initializeRatingsForm:function(){var e;return["#jrate1","#jrate2","#jrate3","#jrate4","#jrate5","#jrate6"].forEach(function(e){return $(e).barrating({theme:$(e).data("theme")||"css-stars",initialRating:0,onSelect:function(){return $("#new_review").validate().element(e)}}),$(e+"+.br-widget").after('<span id="'+e.substr(1)+'-text" class="jrate-label"></span>'),$(e+"+.br-widget a").hover(function(){return $(e+"-text").text($("form.review-form").data("star-hint")[$(this).data("rating-value")])},function(){return $(e+"-text").text("")})}),$("#jrate1").change((e=this,function(){return $(".hide-on-init").is(":hidden")&&$(".hide-on-init").show(),$("#jrate1").val()>=3?e.autoSelectRecommendedYes():e.autoSelectRecommendedNo()}))},initializeRecommend:function(){return $(".recommend").click(function(){var e;return $(".recommend").removeClass("active"),$(this).addClass("active"),e=$(this).hasClass("yes")?"true":"false",$("[name='review[recommend]']").val(e),$("form.review-form").validate().element('form.review-form [name="review[recommend]"]')})},initializeOTRecommend:function(){return $(".overtime-recommend").click(function(){var e;return $(".overtime-recommend").removeClass("active"),$(this).addClass("active"),"true"===(e=$(this).hasClass("yes")?"true":$(this).hasClass("no")?"false":"none")&&($(".overtime-recommend-text").css("display","block"),$(".overtime-no-recommend-text").css("display","none"),$("#review_unhappy_with_overtime_reason").addClass("ignore"),$("#review_happy_with_overtime_reason").removeClass("ignore")),"false"===e&&($(".overtime-no-recommend-text").css("display","block"),$(".overtime-recommend-text").css("display","none"),$("#review_unhappy_with_overtime_reason").removeClass("ignore"),$("#review_happy_with_overtime_reason").addClass("ignore")),"none"===e&&($(".overtime-no-recommend-text").css("display","none"),$(".overtime-recommend-text").css("display","none"),$("#review_happy_with_overtime_reason").addClass("ignore"),$("#review_unhappy_with_overtime_reason").addClass("ignore")),$("[name='review[overtime_recommend]']").val(e)})},initializeCompanyField:function(){var e;return(e=$("#review_employer_id")).autocomplete({source:e.data("source"),delay:0})},addValidation:function(){var e;return e=window.I18n||"en",$("#new_review, [id^=edit_review]").validate({ignore:".ignore",rules:{"review[title]":{required:!0,minlength:10,maxlength:80},"review[what_you_like]":{required:!0,minlength:50,maxlength:1e4},"review[feedback]":{minlength:50,maxlength:1e4},"review[happy_with_overtime_reason]":{minlength:50,maxlength:140,required:!0},"review[unhappy_with_overtime_reason]":{minlength:50,maxlength:140,required:!0},"review[overall_rate]":"required","review[salary_benefit_rate]":"required","review[training_learning_rate]":"required","review[management_care_rate]":"required","review[culture_fun_rate]":"required","review[office_workspace_rate]":"required","review[recommend]":"required","review[overtime_recommend]":"required"},messages:{"review[title]":{required:ValidateReviewMsg[e].addContent,minlength:ValidateReviewMsg[e].from10to80Chars,maxlength:ValidateReviewMsg[e].from10to80Chars},"review[what_you_like]":{required:ValidateReviewMsg[e].addContent,minlength:ValidateReviewMsg[e].from50to10000Chars,maxlength:ValidateReviewMsg[e].from50to10000Chars},"review[feedback]":{minlength:ValidateReviewMsg[e].from50to10000Chars,maxlength:ValidateReviewMsg[e].from50to10000Chars},"review[happy_with_overtime_reason]":{minlength:ValidateReviewMsg[e].from50to140Chars,maxlength:ValidateReviewMsg[e].from50to140Chars,required:ValidateReviewMsg[e].addContent},"review[unhappy_with_overtime_reason]":{minlength:ValidateReviewMsg[e].from50to140Chars,maxlength:ValidateReviewMsg[e].from50to140Chars,required:ValidateReviewMsg[e].addContent},"review[overall_rate]":ValidateReviewMsg[e].pleaseRate,"review[salary_benefit_rate]":ValidateReviewMsg[e].pleaseRate,"review[training_learning_rate]":ValidateReviewMsg[e].pleaseRate,"review[management_care_rate]":ValidateReviewMsg[e].pleaseRate,"review[culture_fun_rate]":ValidateReviewMsg[e].pleaseRate,"review[office_workspace_rate]":ValidateReviewMsg[e].pleaseRate,"review[recommend]":ValidateReviewMsg[e].pleaseChoose,"review[overtime_recommend]":ValidateReviewMsg[e].pleaseChoose},errorPlacement:function(e,i){return i.closest("div").siblings(".validate").prepend(e)},errorElement:"span"}),$(".review-form .js-submit").click(function(){return $("#new_review, [id^=edit_review]").valid()?($(this).addClass("loading gray-loading"),setTimeout(function(){return $(".review-form").submit()},500),!1):($("#form-errors-modal").modal("show"),!1)})},autoSelectRecommendedYes:function(){return $(".recommend.yes").click()},autoSelectRecommendedNo:function(){return $(".recommend.no").click()}}}).call(this);