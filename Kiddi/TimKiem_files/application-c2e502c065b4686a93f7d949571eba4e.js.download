function _typeof(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function getInternetExplorerVersion(){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=i.exec(e)&&(t=parseFloat(RegExp.$1))}else if("Netscape"==navigator.appName){var e=navigator.userAgent,i=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");null!=i.exec(e)&&(t=parseFloat(RegExp.$1))}return t}function checkIE10Version(){var t=getInternetExplorerVersion();t>-1?10>t&&-1==window.location.pathname.indexOf("/cap-nhat-trinh-duyet")&&(window.location="/cap-nhat-trinh-duyet?ver="+t):-1!=window.location.pathname.indexOf("/cap-nhat-trinh-duyet")&&(window.location="/")}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e="length"in t&&t.length,i=Z.type(t);return"function"===i||Z.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t}function n(t,e,i){if(Z.isFunction(e))return Z.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return Z.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(ae.test(e))return Z.filter(e,t,i);e=Z.filter(e,t)}return Z.grep(t,function(t){return q.call(e,t)>=0!==i})}function o(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function s(t){var e=fe[t]={};return Z.each(t.match(pe)||[],function(t,i){e[i]=!0}),e}function r(){Q.removeEventListener("DOMContentLoaded",r,!1),t.removeEventListener("load",r,!1),Z.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+a.uid++}function l(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(we,"-$1").toLowerCase(),i=t.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:be.test(i)?Z.parseJSON(i):i}catch(o){}ye.set(t,e,i)}else i=void 0;return i}function u(){return!0}function c(){return!1}function h(){try{return Q.activeElement}catch(t){}}function d(t,e){return Z.nodeName(t,"table")&&Z.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function p(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function f(t){var e=Oe.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function g(t,e){for(var i=0,n=t.length;n>i;i++)ve.set(t[i],"globalEval",!e||ve.get(e[i],"globalEval"))}function m(t,e){var i,n,o,s,r,a,l,u;if(1===e.nodeType){if(ve.hasData(t)&&(s=ve.access(t),r=ve.set(e,s),u=s.events)){delete r.handle,r.events={};for(o in u)for(i=0,n=u[o].length;n>i;i++)Z.event.add(e,o,u[o][i])}ye.hasData(t)&&(a=ye.access(t),l=Z.extend({},a),ye.set(e,l))}}function v(t,e){var i=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&Z.nodeName(t,e)?Z.merge([t],i):i}function y(t,e){var i=e.nodeName.toLowerCase();"input"===i&&xe.test(t.type)?e.checked=t.checked:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}function b(e,i){var n,o=Z(i.createElement(e)).appendTo(i.body),s=t.getDefaultComputedStyle&&(n=t.getDefaultComputedStyle(o[0]))?n.display:Z.css(o[0],"display");return o.detach(),s}function w(t){var e=Q,i=Ue[t];return i||(i=b(t,e),"none"!==i&&i||(Be=(Be||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Be[0].contentDocument,e.write(),e.close(),i=b(t,e),Be.detach()),Ue[t]=i),i}function _(t,e,i){var n,o,s,r,a=t.style;return i=i||ze(t),i&&(r=i.getPropertyValue(e)||i[e]),i&&(""!==r||Z.contains(t.ownerDocument,t)||(r=Z.style(t,e)),Ve.test(r)&&Ke.test(e)&&(n=a.width,o=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=i.width,a.width=n,a.minWidth=o,a.maxWidth=s)),void 0!==r?r+"":r}function k(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function C(t,e){if(e in t)return e;for(var i=e[0].toUpperCase()+e.slice(1),n=e,o=Ye.length;o--;)if(e=Ye[o]+i,e in t)return e;return n}function x(t,e,i){var n=He.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function S(t,e,i,n,o){for(var s=i===(n?"border":"content")?4:"width"===e?1:0,r=0;4>s;s+=2)"margin"===i&&(r+=Z.css(t,i+ke[s],!0,o)),n?("content"===i&&(r-=Z.css(t,"padding"+ke[s],!0,o)),"margin"!==i&&(r-=Z.css(t,"border"+ke[s]+"Width",!0,o))):(r+=Z.css(t,"padding"+ke[s],!0,o),"padding"!==i&&(r+=Z.css(t,"border"+ke[s]+"Width",!0,o)));return r}function T(t,e,i){var n=!0,o="width"===e?t.offsetWidth:t.offsetHeight,s=ze(t),r="border-box"===Z.css(t,"boxSizing",!1,s);if(0>=o||null==o){if(o=_(t,e,s),(0>o||null==o)&&(o=t.style[e]),Ve.test(o))return o;n=r&&(G.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+S(t,e,i||(r?"border":"content"),n,s)+"px"}function D(t,e){for(var i,n,o,s=[],r=0,a=t.length;a>r;r++)n=t[r],n.style&&(s[r]=ve.get(n,"olddisplay"),i=n.style.display,e?(s[r]||"none"!==i||(n.style.display=""),""===n.style.display&&Ce(n)&&(s[r]=ve.access(n,"olddisplay",w(n.nodeName)))):(o=Ce(n),"none"===i&&o||ve.set(n,"olddisplay",o?i:Z.css(n,"display"))));for(r=0;a>r;r++)n=t[r],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?s[r]||"":"none"));return t}function E(t,e,i,n,o){return new E.prototype.init(t,e,i,n,o)}function M(){return setTimeout(function(){Ge=void 0}),Ge=Z.now()}function $(t,e){var i,n=0,o={height:t};for(e=e?1:0;4>n;n+=2-e)i=ke[n],o["margin"+i]=o["padding"+i]=t;return e&&(o.opacity=o.width=t),o}function I(t,e,i){for(var n,o=(ii[e]||[]).concat(ii["*"]),s=0,r=o.length;r>s;s++)if(n=o[s].call(i,e,t))return n}function P(t,e,i){var n,o,s,r,a,l,u,c,h=this,d={},p=t.style,f=t.nodeType&&Ce(t),g=ve.get(t,"fxshow");i.queue||(a=Z._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,Z.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],u=Z.css(t,"display"),c="none"===u?ve.get(t,"olddisplay")||w(t.nodeName):u,"inline"===c&&"none"===Z.css(t,"float")&&(p.display="inline-block")),i.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in e)if(o=e[n],Xe.exec(o)){if(delete e[n],s=s||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!g||void 0===g[n])continue;f=!0}d[n]=g&&g[n]||Z.style(t,n)}else u=void 0;if(Z.isEmptyObject(d))"inline"===("none"===u?w(t.nodeName):u)&&(p.display=u);else{g?"hidden"in g&&(f=g.hidden):g=ve.access(t,"fxshow",{}),s&&(g.hidden=!f),f?Z(t).show():h.done(function(){Z(t).hide()}),h.done(function(){var e;ve.remove(t,"fxshow");for(e in d)Z.style(t,e,d[e])});for(n in d)r=I(f?g[n]:0,n,h),n in g||(g[n]=r.start,f&&(r.end=r.start,r.start="width"===n||"height"===n?1:0))}}function L(t,e){var i,n,o,s,r;for(i in t)if(n=Z.camelCase(i),o=e[n],s=t[i],Z.isArray(s)&&(o=s[1],s=t[i]=s[0]),i!==n&&(t[n]=s,delete t[i]),r=Z.cssHooks[n],r&&"expand"in r){s=r.expand(s),delete t[n];for(i in s)i in t||(t[i]=s[i],e[i]=o)}else e[n]=o}function A(t,e,i){var n,o,s=0,r=ei.length,a=Z.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=Ge||M(),i=Math.max(0,u.startTime+u.duration-e),n=i/u.duration||0,s=1-n,r=0,l=u.tweens.length;l>r;r++)u.tweens[r].run(s);return a.notifyWith(t,[u,s,i]),1>s&&l?i:(a.resolveWith(t,[u]),!1)},u=a.promise({elem:t,props:Z.extend({},e),opts:Z.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:Ge||M(),duration:i.duration,tweens:[],createTween:function(e,i){var n=Z.Tween(t,u.opts,e,i,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(n),n},stop:function(e){var i=0,n=e?u.tweens.length:0;if(o)return this;for(o=!0;n>i;i++)u.tweens[i].run(1);return e?a.resolveWith(t,[u,e]):a.rejectWith(t,[u,e]),this}}),c=u.props;for(L(c,u.opts.specialEasing);r>s;s++)if(n=ei[s].call(u,t,c,u.opts))return n;return Z.map(c,I,u),Z.isFunction(u.opts.start)&&u.opts.start.call(t,u),Z.fx.timer(Z.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function R(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,o=0,s=e.toLowerCase().match(pe)||[];if(Z.isFunction(i))for(;n=s[o++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function O(t,e,i,n){function o(a){var l;return s[a]=!0,Z.each(t[a]||[],function(t,a){var u=a(e,i,n);return"string"!=typeof u||r||s[u]?r?!(l=u):void 0:(e.dataTypes.unshift(u),o(u),!1)}),l}var s={},r=t===bi;return o(e.dataTypes[0])||!s["*"]&&o("*")}function N(t,e){var i,n,o=Z.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((o[i]?t:n||(n={}))[i]=e[i]);return n&&Z.extend(!0,t,n),t}function F(t,e,i){for(var n,o,s,r,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(o in a)if(a[o]&&a[o].test(n)){l.unshift(o);break}if(l[0]in i)s=l[0];else{for(o in i){if(!l[0]||t.converters[o+" "+l[0]]){s=o;break}r||(r=o)}s=s||r}return s?(s!==l[0]&&l.unshift(s),i[s]):void 0}function B(t,e,i,n){var o,s,r,a,l,u={},c=t.dataTypes.slice();if(c[1])for(r in t.converters)u[r.toLowerCase()]=t.converters[r];for(s=c.shift();s;)if(t.responseFields[s]&&(i[t.responseFields[s]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=c.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(r=u[l+" "+s]||u["* "+s],!r)for(o in u)if(a=o.split(" "),a[1]===s&&(r=u[l+" "+a[0]]||u["* "+a[0]])){r===!0?r=u[o]:u[o]!==!0&&(s=a[0],c.unshift(a[1]));break}if(r!==!0)if(r&&t["throws"])e=r(e);else try{e=r(e)}catch(h){return{state:"parsererror",error:r?h:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}function U(t,e,i,n){var o;if(Z.isArray(e))Z.each(e,function(e,o){i||xi.test(t)?n(t,o):U(t+"["+("object"==typeof o?e:"")+"]",o,i,n)});else if(i||"object"!==Z.type(e))n(t,e);else for(o in e)U(t+"["+o+"]",e[o],i,n)}function K(t){return Z.isWindow(t)?t:9===t.nodeType&&t.defaultView}var V=[],z=V.slice,j=V.concat,H=V.push,q=V.indexOf,W={},J=W.toString,Y=W.hasOwnProperty,G={},Q=t.document,X="2.1.4",Z=function(t,e){return new Z.fn.init(t,e)},te=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ee=/^-ms-/,ie=/-([\da-z])/gi,ne=function(t,e){return e.toUpperCase()};Z.fn=Z.prototype={jquery:X,constructor:Z,selector:"",length:0,toArray:function(){return z.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:z.call(this)},pushStack:function(t){var e=Z.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return Z.each(this,t,e)},map:function(t){return this.pushStack(Z.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:H,sort:V.sort,splice:V.splice},Z.extend=Z.fn.extend=function(){var t,e,i,n,o,s,r=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof r&&(u=r,r=arguments[a]||{},a++),"object"==typeof r||Z.isFunction(r)||(r={}),a===l&&(r=this,a--);l>a;a++)if(null!=(t=arguments[a]))for(e in t)i=r[e],n=t[e],r!==n&&(u&&n&&(Z.isPlainObject(n)||(o=Z.isArray(n)))?(o?(o=!1,s=i&&Z.isArray(i)?i:[]):s=i&&Z.isPlainObject(i)?i:{},r[e]=Z.extend(u,s,n)):void 0!==n&&(r[e]=n));return r},Z.extend({expando:"jQuery"+(X+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===Z.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!Z.isArray(t)&&t-parseFloat(t)+1>=0},isPlainObject:function(t){return"object"!==Z.type(t)||t.nodeType||Z.isWindow(t)?!1:t.constructor&&!Y.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?W[J.call(t)]||"object":typeof t},globalEval:function(t){var e,i=eval;t=Z.trim(t),t&&(1===t.indexOf("use strict")?(e=Q.createElement("script"),e.text=t,Q.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(ee,"ms-").replace(ie,ne)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var o,s=0,r=t.length,a=i(t);if(n){if(a)for(;r>s&&(o=e.apply(t[s],n),o!==!1);s++);else for(s in t)if(o=e.apply(t[s],n),o===!1)break}else if(a)for(;r>s&&(o=e.call(t[s],s,t[s]),o!==!1);s++);else for(s in t)if(o=e.call(t[s],s,t[s]),o===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(te,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?Z.merge(n,"string"==typeof t?[t]:t):H.call(n,t)),n},inArray:function(t,e,i){return null==e?-1:q.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,o=t.length;i>n;n++)t[o++]=e[n];return t.length=o,t},grep:function(t,e,i){for(var n,o=[],s=0,r=t.length,a=!i;r>s;s++)n=!e(t[s],s),n!==a&&o.push(t[s]);return o},map:function(t,e,n){var o,s=0,r=t.length,a=i(t),l=[];if(a)for(;r>s;s++)o=e(t[s],s,n),null!=o&&l.push(o);else for(s in t)o=e(t[s],s,n),null!=o&&l.push(o);return j.apply([],l)},guid:1,proxy:function(t,e){var i,n,o;return"string"==typeof e&&(i=t[e],e=t,t=i),Z.isFunction(t)?(n=z.call(arguments,2),o=function(){return t.apply(e||this,n.concat(z.call(arguments)))},o.guid=t.guid=t.guid||Z.guid++,o):void 0},now:Date.now,support:G}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){W["[object "+e+"]"]=e.toLowerCase()});var oe=function(t){function e(t,e,i,n){var o,s,r,a,l,u,h,p,f,g;if((e?e.ownerDocument||e:U)!==P&&I(e),e=e||P,i=i||[],a=e.nodeType,"string"!=typeof t||!t||1!==a&&9!==a&&11!==a)return i;if(!n&&A){if(11!==a&&(o=ye.exec(t)))if(r=o[1]){if(9===a){if(s=e.getElementById(r),!s||!s.parentNode)return i;if(s.id===r)return i.push(s),i}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(r))&&F(e,s)&&s.id===r)return i.push(s),i}else{if(o[2])return X.apply(i,e.getElementsByTagName(t)),i;if((r=o[3])&&_.getElementsByClassName)return X.apply(i,e.getElementsByClassName(r)),i}if(_.qsa&&(!R||!R.test(t))){if(p=h=B,f=e,g=1!==a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(u=S(t),(h=e.getAttribute("id"))?p=h.replace(we,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=u.length;l--;)u[l]=p+d(u[l]);f=be.test(t)&&c(e.parentNode)||e,g=u.join(",")}if(g)try{return X.apply(i,f.querySelectorAll(g)),i}catch(m){}finally{h||e.removeAttribute("id")}}}return D(t.replace(le,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>k.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[B]=!0,t}function o(t){var e=P.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e){for(var i=t.split("|"),n=t.length;n--;)k.attrHandle[i[n]]=e}function r(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||W)-(~t.sourceIndex||W);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function l(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function u(t){return n(function(e){return e=+e,n(function(i,n){for(var o,s=t([],i.length,e),r=s.length;r--;)i[o=s[r]]&&(i[o]=!(n[o]=i[o]))})})}function c(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function h(){}function d(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function p(t,e,i){var n=e.dir,o=i&&"parentNode"===n,s=V++;return e.first?function(e,i,s){for(;e=e[n];)if(1===e.nodeType||o)return t(e,i,s)}:function(e,i,r){var a,l,u=[K,s];if(r){for(;e=e[n];)if((1===e.nodeType||o)&&t(e,i,r))return!0}else for(;e=e[n];)if(1===e.nodeType||o){if(l=e[B]||(e[B]={}),(a=l[n])&&a[0]===K&&a[1]===s)return u[2]=a[2];if(l[n]=u,u[2]=t(e,i,r))return!0}}}function f(t){return t.length>1?function(e,i,n){for(var o=t.length;o--;)if(!t[o](e,i,n))return!1;return!0}:t[0]}function g(t,i,n){for(var o=0,s=i.length;s>o;o++)e(t,i[o],n);return n}function m(t,e,i,n,o){for(var s,r=[],a=0,l=t.length,u=null!=e;l>a;a++)(s=t[a])&&(!i||i(s,n,o))&&(r.push(s),u&&e.push(a));return r}function v(t,e,i,o,s,r){return o&&!o[B]&&(o=v(o)),s&&!s[B]&&(s=v(s,r)),n(function(n,r,a,l){var u,c,h,d=[],p=[],f=r.length,v=n||g(e||"*",a.nodeType?[a]:a,[]),y=!t||!n&&e?v:m(v,d,t,a,l),b=i?s||(n?t:f||o)?[]:r:y;if(i&&i(y,b,a,l),o)for(u=m(b,p),o(u,[],a,l),c=u.length;c--;)(h=u[c])&&(b[p[c]]=!(y[p[c]]=h));if(n){if(s||t){if(s){for(u=[],c=b.length;c--;)(h=b[c])&&u.push(y[c]=h);s(null,b=[],u,l)}for(c=b.length;c--;)(h=b[c])&&(u=s?te(n,h):d[c])>-1&&(n[u]=!(r[u]=h))}}else b=m(b===r?b.splice(f,b.length):b),s?s(null,r,b,l):X.apply(r,b)})}function y(t){for(var e,i,n,o=t.length,s=k.relative[t[0].type],r=s||k.relative[" "],a=s?1:0,l=p(function(t){return t===e},r,!0),u=p(function(t){return te(e,t)>-1},r,!0),c=[function(t,i,n){var o=!s&&(n||i!==E)||((e=i).nodeType?l(t,i,n):u(t,i,n));return e=null,o}];o>a;a++)if(i=k.relative[t[a].type])c=[p(f(c),i)];else{if(i=k.filter[t[a].type].apply(null,t[a].matches),i[B]){for(n=++a;o>n&&!k.relative[t[n].type];n++);return v(a>1&&f(c),a>1&&d(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(le,"$1"),i,n>a&&y(t.slice(a,n)),o>n&&y(t=t.slice(n)),o>n&&d(t))}c.push(i)}return f(c)}function b(t,i){var o=i.length>0,s=t.length>0,r=function(n,r,a,l,u){var c,h,d,p=0,f="0",g=n&&[],v=[],y=E,b=n||s&&k.find.TAG("*",u),w=K+=null==y?1:Math.random()||.1,_=b.length;for(u&&(E=r!==P&&r);f!==_&&null!=(c=b[f]);f++){if(s&&c){for(h=0;d=t[h++];)if(d(c,r,a)){l.push(c);break}u&&(K=w)}o&&((c=!d&&c)&&p--,n&&g.push(c))}if(p+=f,o&&f!==p){for(h=0;d=i[h++];)d(g,v,r,a);if(n){if(p>0)for(;f--;)g[f]||v[f]||(v[f]=G.call(l));v=m(v)}X.apply(l,v),u&&!n&&v.length>0&&p+i.length>1&&e.uniqueSort(l)}return u&&(K=w,E=y),g};return o?n(r):r}var w,_,k,C,x,S,T,D,E,M,$,I,P,L,A,R,O,N,F,B="sizzle"+1*new Date,U=t.document,K=0,V=0,z=i(),j=i(),H=i(),q=function(t,e){return t===e&&($=!0),0},W=1<<31,J={}.hasOwnProperty,Y=[],G=Y.pop,Q=Y.push,X=Y.push,Z=Y.slice,te=function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1},ee="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=ne.replace("w","w#"),se="\\["+ie+"*("+ne+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ie+"*\\]",re=":("+ne+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+se+")*)|.*)\\)|)",ae=new RegExp(ie+"+","g"),le=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),ue=new RegExp("^"+ie+"*,"+ie+"*"),ce=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),he=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),de=new RegExp(re),pe=new RegExp("^"+oe+"$"),fe={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),TAG:new RegExp("^("+ne.replace("w","w*")+")"),ATTR:new RegExp("^"+se),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+ee+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,we=/'|\\/g,_e=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),ke=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},Ce=function(){I()};try{X.apply(Y=Z.call(U.childNodes),U.childNodes),Y[U.childNodes.length].nodeType}catch(xe){X={apply:Y.length?function(t,e){Q.apply(t,Z.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}_=e.support={},x=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},I=e.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:U;return n!==P&&9===n.nodeType&&n.documentElement?(P=n,L=n.documentElement,i=n.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",Ce,!1):i.attachEvent&&i.attachEvent("onunload",Ce)),A=!x(n),_.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),_.getElementsByTagName=o(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),_.getElementsByClassName=ve.test(n.getElementsByClassName),_.getById=o(function(t){return L.appendChild(t).id=B,!n.getElementsByName||!n.getElementsByName(B).length}),_.getById?(k.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&A){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},k.filter.ID=function(t){var e=t.replace(_e,ke);return function(t){return t.getAttribute("id")===e}}):(delete k.find.ID,k.filter.ID=function(t){var e=t.replace(_e,ke);return function(t){var i="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}}),k.find.TAG=_.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):_.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],o=0,s=e.getElementsByTagName(t);if("*"===t){for(;i=s[o++];)1===i.nodeType&&n.push(i);return n}return s},k.find.CLASS=_.getElementsByClassName&&function(t,e){return A?e.getElementsByClassName(t):void 0},O=[],R=[],(_.qsa=ve.test(n.querySelectorAll))&&(o(function(t){L.appendChild(t).innerHTML="<a id='"+B+"'></a><select id='"+B+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&R.push("[*^$]="+ie+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||R.push("\\["+ie+"*(?:value|"+ee+")"),t.querySelectorAll("[id~="+B+"-]").length||R.push("~="),t.querySelectorAll(":checked").length||R.push(":checked"),t.querySelectorAll("a#"+B+"+*").length||R.push(".#.+[+~]")}),o(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&R.push("name"+ie+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),R.push(",.*:")})),(_.matchesSelector=ve.test(N=L.matches||L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&o(function(t){_.disconnectedMatch=N.call(t,"div"),N.call(t,"[s!='']:x"),O.push("!=",re)}),R=R.length&&new RegExp(R.join("|")),O=O.length&&new RegExp(O.join("|")),e=ve.test(L.compareDocumentPosition),F=e||ve.test(L.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},q=e?function(t,e){if(t===e)return $=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!_.sortDetached&&e.compareDocumentPosition(t)===i?t===n||t.ownerDocument===U&&F(U,t)?-1:e===n||e.ownerDocument===U&&F(U,e)?1:M?te(M,t)-te(M,e):0:4&i?-1:1)}:function(t,e){if(t===e)return $=!0,0;var i,o=0,s=t.parentNode,a=e.parentNode,l=[t],u=[e];if(!s||!a)return t===n?-1:e===n?1:s?-1:a?1:M?te(M,t)-te(M,e):0;if(s===a)return r(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)u.unshift(i);for(;l[o]===u[o];)o++;return o?r(l[o],u[o]):l[o]===U?-1:u[o]===U?1:0},n):P},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==P&&I(t),i=i.replace(he,"='$1']"),!(!_.matchesSelector||!A||O&&O.test(i)||R&&R.test(i)))try{var n=N.call(t,i);if(n||_.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(o){}return e(i,P,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==P&&I(t),F(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==P&&I(t);var i=k.attrHandle[e.toLowerCase()],n=i&&J.call(k.attrHandle,e.toLowerCase())?i(t,e,!A):void 0;return void 0!==n?n:_.attributes||!A?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,o=0;if($=!_.detectDuplicates,M=!_.sortStable&&t.slice(0),t.sort(q),$){for(;e=t[o++];)e===t[o]&&(n=i.push(o));for(;n--;)t.splice(i[n],1)}return M=null,t},C=e.getText=function(t){var e,i="",n=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=C(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[n++];)i+=C(e);return i},k=e.selectors={cacheLength:50,createPseudo:n,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_e,ke),t[3]=(t[3]||t[4]||t[5]||"").replace(_e,ke),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return fe.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&de.test(i)&&(e=S(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(_e,ke).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+ie+")"+t+"("+ie+"|$)"))&&z(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(o){var s=e.attr(o,t);return null==s?"!="===i:i?(s+="","="===i?s===n:"!="===i?s!==n:"^="===i?n&&0===s.indexOf(n):"*="===i?n&&s.indexOf(n)>-1:"$="===i?n&&s.slice(-n.length)===n:"~="===i?(" "+s.replace(ae," ")+" ").indexOf(n)>-1:"|="===i?s===n||s.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,i,n,o){var s="nth"!==t.slice(0,3),r="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===o?function(t){return!!t.parentNode}:function(e,i,l){var u,c,h,d,p,f,g=s!==r?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a;if(m){if(s){for(;g;){for(h=e;h=h[g];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[r?m.firstChild:m.lastChild],r&&y){for(c=m[B]||(m[B]={}),u=c[t]||[],p=u[0]===K&&u[1],d=u[0]===K&&u[2],h=p&&m.childNodes[p];h=++p&&h&&h[g]||(d=p=0)||f.pop();)if(1===h.nodeType&&++d&&h===e){c[t]=[K,p,d];break}}else if(y&&(u=(e[B]||(e[B]={}))[t])&&u[0]===K)d=u[1];else for(;(h=++p&&h&&h[g]||(d=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++d||(y&&((h[B]||(h[B]={}))[t]=[K,d]),h!==e)););return d-=o,d===n||d%n===0&&d/n>=0}}},PSEUDO:function(t,i){var o,s=k.pseudos[t]||k.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return s[B]?s(i):s.length>1?(o=[t,t,"",i],k.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,o=s(t,i),r=o.length;r--;)n=te(t,o[r]),t[n]=!(e[n]=o[r])}):function(t){return s(t,0,o)}):s}},pseudos:{not:n(function(t){var e=[],i=[],o=T(t.replace(le,"$1"));return o[B]?n(function(t,e,i,n){for(var s,r=o(t,null,n,[]),a=t.length;a--;)(s=r[a])&&(t[a]=!(e[a]=s))}):function(t,n,s){return e[0]=t,o(e,null,s,i),e[0]=null,!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return t=t.replace(_e,ke),function(e){return(e.textContent||e.innerText||C(e)).indexOf(t)>-1}}),lang:n(function(t){return pe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(_e,ke).toLowerCase(),function(e){var i;do if(i=A?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===L},focus:function(t){return t===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!k.pseudos.empty(t)},header:function(t){return me.test(t.nodeName)},input:function(t){return ge.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,i){return[0>i?i+e:i]}),even:u(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:u(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:u(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:u(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}},k.pseudos.nth=k.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[w]=a(w);for(w in{submit:!0,reset:!0})k.pseudos[w]=l(w);return h.prototype=k.filters=k.pseudos,k.setFilters=new h,S=e.tokenize=function(t,i){var n,o,s,r,a,l,u,c=j[t+" "];if(c)return i?0:c.slice(0);for(a=t,l=[],u=k.preFilter;a;){(!n||(o=ue.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),l.push(s=[])),n=!1,(o=ce.exec(a))&&(n=o.shift(),s.push({value:n,type:o[0].replace(le," ")}),a=a.slice(n.length));for(r in k.filter)!(o=fe[r].exec(a))||u[r]&&!(o=u[r](o))||(n=o.shift(),s.push({value:n,type:r,matches:o}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):j(t,l).slice(0)},T=e.compile=function(t,e){var i,n=[],o=[],s=H[t+" "];if(!s){for(e||(e=S(t)),i=e.length;i--;)s=y(e[i]),s[B]?n.push(s):o.push(s);s=H(t,b(o,n)),s.selector=t}return s},D=e.select=function(t,e,i,n){var o,s,r,a,l,u="function"==typeof t&&t,h=!n&&S(t=u.selector||t);if(i=i||[],1===h.length){if(s=h[0]=h[0].slice(0),s.length>2&&"ID"===(r=s[0]).type&&_.getById&&9===e.nodeType&&A&&k.relative[s[1].type]){if(e=(k.find.ID(r.matches[0].replace(_e,ke),e)||[])[0],!e)return i;u&&(e=e.parentNode),t=t.slice(s.shift().value.length)}for(o=fe.needsContext.test(t)?0:s.length;o--&&(r=s[o],!k.relative[a=r.type]);)if((l=k.find[a])&&(n=l(r.matches[0].replace(_e,ke),be.test(s[0].type)&&c(e.parentNode)||e))){if(s.splice(o,1),t=n.length&&d(s),!t)return X.apply(i,n),i;break}}return(u||T(t,h))(n,e,!A,i,be.test(t)&&c(e.parentNode)||e),i},_.sortStable=B.split("").sort(q).join("")===B,_.detectDuplicates=!!$,I(),_.sortDetached=o(function(t){return 1&t.compareDocumentPosition(P.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||s("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),_.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||s("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||s(ee,function(t,e,i){var n;return i?void 0:t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);Z.find=oe,Z.expr=oe.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=oe.uniqueSort,Z.text=oe.getText,Z.isXMLDoc=oe.isXML,Z.contains=oe.contains;var se=Z.expr.match.needsContext,re=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ae=/^.[^:#\[\.,]*$/;Z.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?Z.find.matchesSelector(n,t)?[n]:[]:Z.find.matches(t,Z.grep(e,function(t){return 1===t.nodeType}))},Z.fn.extend({find:function(t){var e,i=this.length,n=[],o=this;if("string"!=typeof t)return this.pushStack(Z(t).filter(function(){for(e=0;i>e;e++)if(Z.contains(o[e],this))return!0
}));for(e=0;i>e;e++)Z.find(t,o[e],n);return n=this.pushStack(i>1?Z.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&se.test(t)?Z(t):t||[],!1).length}});var le,ue=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ce=Z.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:ue.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||le).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof Z?e[0]:e,Z.merge(this,Z.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:Q,!0)),re.test(i[1])&&Z.isPlainObject(e))for(i in e)Z.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return n=Q.getElementById(i[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=Q,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):Z.isFunction(t)?"undefined"!=typeof le.ready?le.ready(t):t(Z):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),Z.makeArray(t,this))};ce.prototype=Z.fn,le=Z(Q);var he=/^(?:parents|prev(?:Until|All))/,de={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(t,e,i){for(var n=[],o=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&Z(t).is(i))break;n.push(t)}return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),Z.fn.extend({has:function(t){var e=Z(t,this),i=e.length;return this.filter(function(){for(var t=0;i>t;t++)if(Z.contains(this,e[t]))return!0})},closest:function(t,e){for(var i,n=0,o=this.length,s=[],r=se.test(t)||"string"!=typeof t?Z(t,e||this.context):0;o>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&Z.find.matchesSelector(i,t))){s.push(i);break}return this.pushStack(s.length>1?Z.unique(s):s)},index:function(t){return t?"string"==typeof t?q.call(Z(t),this[0]):q.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(Z.unique(Z.merge(this.get(),Z(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),Z.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Z.dir(t,"parentNode")},parentsUntil:function(t,e,i){return Z.dir(t,"parentNode",i)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")},nextAll:function(t){return Z.dir(t,"nextSibling")},prevAll:function(t){return Z.dir(t,"previousSibling")},nextUntil:function(t,e,i){return Z.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return Z.dir(t,"previousSibling",i)},siblings:function(t){return Z.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return Z.sibling(t.firstChild)},contents:function(t){return t.contentDocument||Z.merge([],t.childNodes)}},function(t,e){Z.fn[t]=function(i,n){var o=Z.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=Z.filter(n,o)),this.length>1&&(de[t]||Z.unique(o),he.test(t)&&o.reverse()),this.pushStack(o)}});var pe=/\S+/g,fe={};Z.Callbacks=function(t){t="string"==typeof t?fe[t]||s(t):Z.extend({},t);var e,i,n,o,r,a,l=[],u=!t.once&&[],c=function(s){for(e=t.memory&&s,i=!0,a=o||0,o=0,r=l.length,n=!0;l&&r>a;a++)if(l[a].apply(s[0],s[1])===!1&&t.stopOnFalse){e=!1;break}n=!1,l&&(u?u.length&&c(u.shift()):e?l=[]:h.disable())},h={add:function(){if(l){var i=l.length;!function s(e){Z.each(e,function(e,i){var n=Z.type(i);"function"===n?t.unique&&h.has(i)||l.push(i):i&&i.length&&"string"!==n&&s(i)})}(arguments),n?r=l.length:e&&(o=i,c(e))}return this},remove:function(){return l&&Z.each(arguments,function(t,e){for(var i;(i=Z.inArray(e,l,i))>-1;)l.splice(i,1),n&&(r>=i&&r--,a>=i&&a--)}),this},has:function(t){return t?Z.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],r=0,this},disable:function(){return l=u=e=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,e||h.disable(),this},locked:function(){return!u},fireWith:function(t,e){return!l||i&&!u||(e=e||[],e=[t,e.slice?e.slice():e],n?u.push(e):c(e)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h},Z.extend({Deferred:function(t){var e=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return Z.Deferred(function(i){Z.each(e,function(e,s){var r=Z.isFunction(t[e])&&t[e];o[s[1]](function(){var t=r&&r.apply(this,arguments);t&&Z.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s[0]+"With"](this===n?i.promise():this,r?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?Z.extend(t,n):n}},o={};return n.pipe=n.then,Z.each(e,function(t,s){var r=s[2],a=s[3];n[s[1]]=r.add,a&&r.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),o[s[0]]=function(){return o[s[0]+"With"](this===o?n:this,arguments),this},o[s[0]+"With"]=r.fireWith}),n.promise(o),t&&t.call(o,o),o},when:function(t){var e,i,n,o=0,s=z.call(arguments),r=s.length,a=1!==r||t&&Z.isFunction(t.promise)?r:0,l=1===a?t:Z.Deferred(),u=function(t,i,n){return function(o){i[t]=this,n[t]=arguments.length>1?z.call(arguments):o,n===e?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(r>1)for(e=new Array(r),i=new Array(r),n=new Array(r);r>o;o++)s[o]&&Z.isFunction(s[o].promise)?s[o].promise().done(u(o,n,s)).fail(l.reject).progress(u(o,i,e)):--a;return a||l.resolveWith(n,s),l.promise()}});var ge;Z.fn.ready=function(t){return Z.ready.promise().done(t),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(t){t?Z.readyWait++:Z.ready(!0)},ready:function(t){(t===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,t!==!0&&--Z.readyWait>0||(ge.resolveWith(Q,[Z]),Z.fn.triggerHandler&&(Z(Q).triggerHandler("ready"),Z(Q).off("ready"))))}}),Z.ready.promise=function(e){return ge||(ge=Z.Deferred(),"complete"===Q.readyState?setTimeout(Z.ready):(Q.addEventListener("DOMContentLoaded",r,!1),t.addEventListener("load",r,!1))),ge.promise(e)},Z.ready.promise();var me=Z.access=function(t,e,i,n,o,s,r){var a=0,l=t.length,u=null==i;if("object"===Z.type(i)){o=!0;for(a in i)Z.access(t,e,a,i[a],!0,s,r)}else if(void 0!==n&&(o=!0,Z.isFunction(n)||(r=!0),u&&(r?(e.call(t,n),e=null):(u=e,e=function(t,e,i){return u.call(Z(t),i)})),e))for(;l>a;a++)e(t[a],i,r?n:n.call(t[a],a,e(t[a],i)));return o?t:u?e.call(t):l?e(t[0],i):s};Z.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},a.uid=1,a.accepts=Z.acceptData,a.prototype={key:function(t){if(!a.accepts(t))return 0;var e={},i=t[this.expando];if(!i){i=a.uid++;try{e[this.expando]={value:i},Object.defineProperties(t,e)}catch(n){e[this.expando]=i,Z.extend(t,e)}}return this.cache[i]||(this.cache[i]={}),i},set:function(t,e,i){var n,o=this.key(t),s=this.cache[o];if("string"==typeof e)s[e]=i;else if(Z.isEmptyObject(s))Z.extend(this.cache[o],e);else for(n in e)s[n]=e[n];return s},get:function(t,e){var i=this.cache[this.key(t)];return void 0===e?i:i[e]},access:function(t,e,i){var n;return void 0===e||e&&"string"==typeof e&&void 0===i?(n=this.get(t,e),void 0!==n?n:this.get(t,Z.camelCase(e))):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n,o,s=this.key(t),r=this.cache[s];if(void 0===e)this.cache[s]={};else{Z.isArray(e)?n=e.concat(e.map(Z.camelCase)):(o=Z.camelCase(e),e in r?n=[e,o]:(n=o,n=n in r?[n]:n.match(pe)||[])),i=n.length;for(;i--;)delete r[n[i]]}},hasData:function(t){return!Z.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var ve=new a,ye=new a,be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,we=/([A-Z])/g;Z.extend({hasData:function(t){return ye.hasData(t)||ve.hasData(t)},data:function(t,e,i){return ye.access(t,e,i)},removeData:function(t,e){ye.remove(t,e)},_data:function(t,e,i){return ve.access(t,e,i)},_removeData:function(t,e){ve.remove(t,e)}}),Z.fn.extend({data:function(t,e){var i,n,o,s=this[0],r=s&&s.attributes;if(void 0===t){if(this.length&&(o=ye.get(s),1===s.nodeType&&!ve.get(s,"hasDataAttrs"))){for(i=r.length;i--;)r[i]&&(n=r[i].name,0===n.indexOf("data-")&&(n=Z.camelCase(n.slice(5)),l(s,n,o[n])));ve.set(s,"hasDataAttrs",!0)}return o}return"object"==typeof t?this.each(function(){ye.set(this,t)}):me(this,function(e){var i,n=Z.camelCase(t);if(s&&void 0===e){if(i=ye.get(s,t),void 0!==i)return i;if(i=ye.get(s,n),void 0!==i)return i;if(i=l(s,n,void 0),void 0!==i)return i}else this.each(function(){var i=ye.get(this,n);ye.set(this,n,e),-1!==t.indexOf("-")&&void 0!==i&&ye.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){ye.remove(this,t)})}}),Z.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=ve.get(t,e),i&&(!n||Z.isArray(i)?n=ve.access(t,e,Z.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=Z.queue(t,e),n=i.length,o=i.shift(),s=Z._queueHooks(t,e),r=function(){Z.dequeue(t,e)};"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===e&&i.unshift("inprogress"),delete s.stop,o.call(t,r,s)),!n&&s&&s.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return ve.get(t,i)||ve.access(t,i,{empty:Z.Callbacks("once memory").add(function(){ve.remove(t,[e+"queue",i])})})}}),Z.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?Z.queue(this[0],t):void 0===e?this:this.each(function(){var i=Z.queue(this,t,e);Z._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&Z.dequeue(this,t)})},dequeue:function(t){return this.each(function(){Z.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,o=Z.Deferred(),s=this,r=this.length,a=function(){--n||o.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)i=ve.get(s[r],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),o.promise(e)}});var _e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ke=["Top","Right","Bottom","Left"],Ce=function(t,e){return t=e||t,"none"===Z.css(t,"display")||!Z.contains(t.ownerDocument,t)},xe=/^(?:checkbox|radio)$/i;!function(){var t=Q.createDocumentFragment(),e=t.appendChild(Q.createElement("div")),i=Q.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),e.appendChild(i),G.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",G.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Se="undefined";G.focusinBubbles="onfocusin"in t;var Te=/^key/,De=/^(?:mouse|pointer|contextmenu)|click/,Ee=/^(?:focusinfocus|focusoutblur)$/,Me=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(t,e,i,n,o){var s,r,a,l,u,c,h,d,p,f,g,m=ve.get(t);if(m)for(i.handler&&(s=i,i=s.handler,o=s.selector),i.guid||(i.guid=Z.guid++),(l=m.events)||(l=m.events={}),(r=m.handle)||(r=m.handle=function(e){return typeof Z!==Se&&Z.event.triggered!==e.type?Z.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(pe)||[""],u=e.length;u--;)a=Me.exec(e[u])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p&&(h=Z.event.special[p]||{},p=(o?h.delegateType:h.bindType)||p,h=Z.event.special[p]||{},c=Z.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&Z.expr.match.needsContext.test(o),namespace:f.join(".")},s),(d=l[p])||(d=l[p]=[],d.delegateCount=0,h.setup&&h.setup.call(t,n,f,r)!==!1||t.addEventListener&&t.addEventListener(p,r,!1)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),o?d.splice(d.delegateCount++,0,c):d.push(c),Z.event.global[p]=!0)},remove:function(t,e,i,n,o){var s,r,a,l,u,c,h,d,p,f,g,m=ve.hasData(t)&&ve.get(t);if(m&&(l=m.events)){for(e=(e||"").match(pe)||[""],u=e.length;u--;)if(a=Me.exec(e[u])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(h=Z.event.special[p]||{},p=(n?h.delegateType:h.bindType)||p,d=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=s=d.length;s--;)c=d[s],!o&&g!==c.origType||i&&i.guid!==c.guid||a&&!a.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(d.splice(s,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(t,c));r&&!d.length&&(h.teardown&&h.teardown.call(t,f,m.handle)!==!1||Z.removeEvent(t,p,m.handle),delete l[p])}else for(p in l)Z.event.remove(t,p+e[u],i,n,!0);Z.isEmptyObject(l)&&(delete m.handle,ve.remove(t,"events"))}},trigger:function(e,i,n,o){var s,r,a,l,u,c,h,d=[n||Q],p=Y.call(e,"type")?e.type:e,f=Y.call(e,"namespace")?e.namespace.split("."):[];if(r=a=n=n||Q,3!==n.nodeType&&8!==n.nodeType&&!Ee.test(p+Z.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),u=p.indexOf(":")<0&&"on"+p,e=e[Z.expando]?e:new Z.Event(p,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:Z.makeArray(i,[e]),h=Z.event.special[p]||{},o||!h.trigger||h.trigger.apply(n,i)!==!1)){if(!o&&!h.noBubble&&!Z.isWindow(n)){for(l=h.delegateType||p,Ee.test(l+p)||(r=r.parentNode);r;r=r.parentNode)d.push(r),a=r;a===(n.ownerDocument||Q)&&d.push(a.defaultView||a.parentWindow||t)}for(s=0;(r=d[s++])&&!e.isPropagationStopped();)e.type=s>1?l:h.bindType||p,c=(ve.get(r,"events")||{})[e.type]&&ve.get(r,"handle"),c&&c.apply(r,i),c=u&&r[u],c&&c.apply&&Z.acceptData(r)&&(e.result=c.apply(r,i),e.result===!1&&e.preventDefault());return e.type=p,o||e.isDefaultPrevented()||h._default&&h._default.apply(d.pop(),i)!==!1||!Z.acceptData(n)||u&&Z.isFunction(n[p])&&!Z.isWindow(n)&&(a=n[u],a&&(n[u]=null),Z.event.triggered=p,n[p](),Z.event.triggered=void 0,a&&(n[u]=a)),e.result}},dispatch:function(t){t=Z.event.fix(t);var e,i,n,o,s,r=[],a=z.call(arguments),l=(ve.get(this,"events")||{})[t.type]||[],u=Z.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(r=Z.event.handlers.call(this,t,l),e=0;(o=r[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,i=0;(s=o.handlers[i++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(s.namespace))&&(t.handleObj=s,t.data=s.data,n=((Z.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,a),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,o,s,r=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==t.type){for(n=[],i=0;a>i;i++)s=e[i],o=s.selector+" ",void 0===n[o]&&(n[o]=s.needsContext?Z(o,this).index(l)>=0:Z.find(o,this,null,[l]).length),n[o]&&n.push(s);n.length&&r.push({elem:l,handlers:n})}return a<e.length&&r.push({elem:this,handlers:e.slice(a)}),r},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,o,s=e.button;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||Q,n=i.documentElement,o=i.body,t.pageX=e.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)),t.which||void 0===s||(t.which=1&s?1:2&s?3:4&s?2:0),t}},fix:function(t){if(t[Z.expando])return t;var e,i,n,o=t.type,s=t,r=this.fixHooks[o];for(r||(this.fixHooks[o]=r=De.test(o)?this.mouseHooks:Te.test(o)?this.keyHooks:{}),n=r.props?this.props.concat(r.props):this.props,t=new Z.Event(s),e=n.length;e--;)i=n[e],t[i]=s[i];return t.target||(t.target=Q),3===t.target.nodeType&&(t.target=t.target.parentNode),r.filter?r.filter(t,s):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==h()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return Z.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var o=Z.extend(new Z.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?Z.event.trigger(o,null,e):Z.event.dispatch.call(e,o),o.isDefaultPrevented()&&i.preventDefault()}},Z.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)},Z.Event=function(t,e){return this instanceof Z.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?u:c):this.type=t,e&&Z.extend(this,e),this.timeStamp=t&&t.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(t,e)},Z.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=u,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=u,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=u,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){Z.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,o=t.relatedTarget,s=t.handleObj;return(!o||o!==n&&!Z.contains(n,o))&&(t.type=s.origType,i=s.handler.apply(this,arguments),t.type=e),i}}}),G.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){Z.event.simulate(e,t.target,Z.event.fix(t),!0)};Z.event.special[e]={setup:function(){var n=this.ownerDocument||this,o=ve.access(n,e);o||n.addEventListener(t,i,!0),ve.access(n,e,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=ve.access(n,e)-1;o?ve.access(n,e,o):(n.removeEventListener(t,i,!0),ve.remove(n,e))}}}),Z.fn.extend({on:function(t,e,i,n,o){var s,r;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(r in t)this.on(r,e,i,t[r],o);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),n===!1)n=c;else if(!n)return this;return 1===o&&(s=n,n=function(t){return Z().off(t),s.apply(this,arguments)},n.guid=s.guid||(s.guid=Z.guid++)),this.each(function(){Z.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,o;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,Z(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return(e===!1||"function"==typeof e)&&(i=e,e=void 0),i===!1&&(i=c),this.each(function(){Z.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){Z.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?Z.event.trigger(t,e,i,!0):void 0}});var $e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ie=/<([\w:]+)/,Pe=/<|&#?\w+;/,Le=/<(?:script|style|link)/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,Re=/^$|\/(?:java|ecma)script/i,Oe=/^true\/(.*)/,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Fe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Fe.optgroup=Fe.option,Fe.tbody=Fe.tfoot=Fe.colgroup=Fe.caption=Fe.thead,Fe.th=Fe.td,Z.extend({clone:function(t,e,i){var n,o,s,r,a=t.cloneNode(!0),l=Z.contains(t.ownerDocument,t);if(!(G.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||Z.isXMLDoc(t)))for(r=v(a),s=v(t),n=0,o=s.length;o>n;n++)y(s[n],r[n]);if(e)if(i)for(s=s||v(t),r=r||v(a),n=0,o=s.length;o>n;n++)m(s[n],r[n]);else m(t,a);return r=v(a,"script"),r.length>0&&g(r,!l&&v(t,"script")),a},buildFragment:function(t,e,i,n){for(var o,s,r,a,l,u,c=e.createDocumentFragment(),h=[],d=0,p=t.length;p>d;d++)if(o=t[d],o||0===o)if("object"===Z.type(o))Z.merge(h,o.nodeType?[o]:o);else if(Pe.test(o)){for(s=s||c.appendChild(e.createElement("div")),r=(Ie.exec(o)||["",""])[1].toLowerCase(),a=Fe[r]||Fe._default,s.innerHTML=a[1]+o.replace($e,"<$1></$2>")+a[2],u=a[0];u--;)s=s.lastChild;Z.merge(h,s.childNodes),s=c.firstChild,s.textContent=""}else h.push(e.createTextNode(o));for(c.textContent="",d=0;o=h[d++];)if((!n||-1===Z.inArray(o,n))&&(l=Z.contains(o.ownerDocument,o),s=v(c.appendChild(o),"script"),l&&g(s),i))for(u=0;o=s[u++];)Re.test(o.type||"")&&i.push(o);return c},cleanData:function(t){for(var e,i,n,o,s=Z.event.special,r=0;void 0!==(i=t[r]);r++){if(Z.acceptData(i)&&(o=i[ve.expando],o&&(e=ve.cache[o]))){if(e.events)for(n in e.events)s[n]?Z.event.remove(i,n):Z.removeEvent(i,n,e.handle);ve.cache[o]&&delete ve.cache[o]}delete ye.cache[i[ye.expando]]}}}),Z.fn.extend({text:function(t){return me(this,function(t){return void 0===t?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?Z.filter(t,this):this,o=0;null!=(i=n[o]);o++)e||1!==i.nodeType||Z.cleanData(v(i)),i.parentNode&&(e&&Z.contains(i.ownerDocument,i)&&g(v(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(Z.cleanData(v(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return Z.clone(this,t,e)})},html:function(t){return me(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Le.test(t)&&!Fe[(Ie.exec(t)||["",""])[1].toLowerCase()]){t=t.replace($e,"<$1></$2>");try{for(;n>i;i++)e=this[i]||{},1===e.nodeType&&(Z.cleanData(v(e,!1)),e.innerHTML=t);e=0}catch(o){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,Z.cleanData(v(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=j.apply([],t);var i,n,o,s,r,a,l=0,u=this.length,c=this,h=u-1,d=t[0],g=Z.isFunction(d);if(g||u>1&&"string"==typeof d&&!G.checkClone&&Ae.test(d))return this.each(function(i){var n=c.eq(i);g&&(t[0]=d.call(this,i,n.html())),n.domManip(t,e)});if(u&&(i=Z.buildFragment(t,this[0].ownerDocument,!1,this),n=i.firstChild,1===i.childNodes.length&&(i=n),n)){for(o=Z.map(v(i,"script"),p),s=o.length;u>l;l++)r=i,l!==h&&(r=Z.clone(r,!0,!0),s&&Z.merge(o,v(r,"script"))),e.call(this[l],r,l);if(s)for(a=o[o.length-1].ownerDocument,Z.map(o,f),l=0;s>l;l++)r=o[l],Re.test(r.type||"")&&!ve.access(r,"globalEval")&&Z.contains(a,r)&&(r.src?Z._evalUrl&&Z._evalUrl(r.src):Z.globalEval(r.textContent.replace(Ne,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){Z.fn[t]=function(t){for(var i,n=[],o=Z(t),s=o.length-1,r=0;s>=r;r++)i=r===s?this:this.clone(!0),Z(o[r])[e](i),H.apply(n,i.get());return this.pushStack(n)}});var Be,Ue={},Ke=/^margin/,Ve=new RegExp("^("+_e+")(?!px)[a-z%]+$","i"),ze=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)};!function(){function e(){r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r.innerHTML="",o.appendChild(s);var e=t.getComputedStyle(r,null);i="1%"!==e.top,n="4px"===e.width,o.removeChild(s)}var i,n,o=Q.documentElement,s=Q.createElement("div"),r=Q.createElement("div");r.style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",G.clearCloneStyle="content-box"===r.style.backgroundClip,s.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",s.appendChild(r),t.getComputedStyle&&Z.extend(G,{pixelPosition:function(){return e(),i},boxSizingReliable:function(){return null==n&&e(),n},reliableMarginRight:function(){var e,i=r.appendChild(Q.createElement("div"));return i.style.cssText=r.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",r.style.width="1px",o.appendChild(s),e=!parseFloat(t.getComputedStyle(i,null).marginRight),o.removeChild(s),r.removeChild(i),e}}))}(),Z.swap=function(t,e,i,n){var o,s,r={};for(s in e)r[s]=t.style[s],t.style[s]=e[s];o=i.apply(t,n||[]);for(s in e)t.style[s]=r[s];return o};var je=/^(none|table(?!-c[ea]).+)/,He=new RegExp("^("+_e+")(.*)$","i"),qe=new RegExp("^([+-])=("+_e+")","i"),We={position:"absolute",visibility:"hidden",display:"block"},Je={letterSpacing:"0",fontWeight:"400"},Ye=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=_(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,s,r,a=Z.camelCase(e),l=t.style;return e=Z.cssProps[a]||(Z.cssProps[a]=C(l,a)),r=Z.cssHooks[e]||Z.cssHooks[a],void 0===i?r&&"get"in r&&void 0!==(o=r.get(t,!1,n))?o:l[e]:(s=typeof i,"string"===s&&(o=qe.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(Z.css(t,e)),s="number"),void(null!=i&&i===i&&("number"!==s||Z.cssNumber[a]||(i+="px"),G.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),r&&"set"in r&&void 0===(i=r.set(t,i,n))||(l[e]=i))))}},css:function(t,e,i,n){var o,s,r,a=Z.camelCase(e);return e=Z.cssProps[a]||(Z.cssProps[a]=C(t.style,a)),r=Z.cssHooks[e]||Z.cssHooks[a],r&&"get"in r&&(o=r.get(t,!0,i)),void 0===o&&(o=_(t,e,n)),"normal"===o&&e in Je&&(o=Je[e]),""===i||i?(s=parseFloat(o),i===!0||Z.isNumeric(s)?s||0:o):o}}),Z.each(["height","width"],function(t,e){Z.cssHooks[e]={get:function(t,i,n){return i?je.test(Z.css(t,"display"))&&0===t.offsetWidth?Z.swap(t,We,function(){return T(t,e,n)}):T(t,e,n):void 0},set:function(t,i,n){var o=n&&ze(t);return x(t,i,n?S(t,e,n,"border-box"===Z.css(t,"boxSizing",!1,o),o):0)}}}),Z.cssHooks.marginRight=k(G.reliableMarginRight,function(t,e){return e?Z.swap(t,{display:"inline-block"},_,[t,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(t,e){Z.cssHooks[t+e]={expand:function(i){for(var n=0,o={},s="string"==typeof i?i.split(" "):[i];4>n;n++)o[t+ke[n]+e]=s[n]||s[n-2]||s[0];return o}},Ke.test(t)||(Z.cssHooks[t+e].set=x)}),Z.fn.extend({css:function(t,e){return me(this,function(t,e,i){var n,o,s={},r=0;if(Z.isArray(e)){for(n=ze(t),o=e.length;o>r;r++)s[e[r]]=Z.css(t,e[r],!1,n);return s}return void 0!==i?Z.style(t,e,i):Z.css(t,e)},t,e,arguments.length>1)},show:function(){return D(this,!0)},hide:function(){return D(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ce(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=E,E.prototype={constructor:E,init:function(t,e,i,n,o,s){this.elem=t,this.prop=i,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=s||(Z.cssNumber[i]?"":"px")},cur:function(){var t=E.propHooks[this.prop];return t&&t.get?t.get(this):E.propHooks._default.get(this)},run:function(t){var e,i=E.propHooks[this.prop];return this.pos=e=this.options.duration?Z.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):E.propHooks._default.set(this),this}},E.prototype.init.prototype=E.prototype,E.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=Z.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){Z.fx.step[t.prop]?Z.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[Z.cssProps[t.prop]]||Z.cssHooks[t.prop])?Z.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},E.propHooks.scrollTop=E.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},Z.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},Z.fx=E.prototype.init,Z.fx.step={};var Ge,Qe,Xe=/^(?:toggle|show|hide)$/,Ze=new RegExp("^(?:([+-])=|)("+_e+")([a-z%]*)$","i"),ti=/queueHooks$/,ei=[P],ii={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),o=Ze.exec(e),s=o&&o[3]||(Z.cssNumber[t]?"":"px"),r=(Z.cssNumber[t]||"px"!==s&&+n)&&Ze.exec(Z.css(i.elem,t)),a=1,l=20;if(r&&r[3]!==s){s=s||r[3],o=o||[],r=+n||1;do a=a||".5",r/=a,Z.style(i.elem,t,r+s);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return o&&(r=i.start=+r||+n||0,i.unit=s,i.end=o[1]?r+(o[1]+1)*o[2]:+o[2]),i}]};Z.Animation=Z.extend(A,{tweener:function(t,e){Z.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,o=t.length;o>n;n++)i=t[n],ii[i]=ii[i]||[],ii[i].unshift(e)},prefilter:function(t,e){e?ei.unshift(t):ei.push(t)}}),Z.speed=function(t,e,i){var n=t&&"object"==typeof t?Z.extend({},t):{complete:i||!i&&e||Z.isFunction(t)&&t,duration:t,easing:i&&e||e&&!Z.isFunction(e)&&e};return n.duration=Z.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in Z.fx.speeds?Z.fx.speeds[n.duration]:Z.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){Z.isFunction(n.old)&&n.old.call(this),n.queue&&Z.dequeue(this,n.queue)},n},Z.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Ce).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var o=Z.isEmptyObject(t),s=Z.speed(e,i,n),r=function(){var e=A(this,Z.extend({},t),s);(o||ve.get(this,"finish"))&&e.stop(!0)};return r.finish=r,o||s.queue===!1?this.each(r):this.queue(s.queue,r)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",s=Z.timers,r=ve.get(this);if(o)r[o]&&r[o].stop&&n(r[o]);else for(o in r)r[o]&&r[o].stop&&ti.test(o)&&n(r[o]);for(o=s.length;o--;)s[o].elem!==this||null!=t&&s[o].queue!==t||(s[o].anim.stop(i),e=!1,s.splice(o,1));(e||!i)&&Z.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=ve.get(this),n=i[t+"queue"],o=i[t+"queueHooks"],s=Z.timers,r=n?n.length:0;for(i.finish=!0,Z.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;r>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),Z.each(["toggle","show","hide"],function(t,e){var i=Z.fn[e];Z.fn[e]=function(t,n,o){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate($(e,!0),t,n,o)}}),Z.each({slideDown:$("show"),slideUp:$("hide"),slideToggle:$("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){Z.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),Z.timers=[],Z.fx.tick=function(){var t,e=0,i=Z.timers;for(Ge=Z.now();e<i.length;e++)t=i[e],t()||i[e]!==t||i.splice(e--,1);i.length||Z.fx.stop(),Ge=void 0},Z.fx.timer=function(t){Z.timers.push(t),t()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Qe||(Qe=setInterval(Z.fx.tick,Z.fx.interval))
},Z.fx.stop=function(){clearInterval(Qe),Qe=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(t,e){return t=Z.fx?Z.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t=Q.createElement("input"),e=Q.createElement("select"),i=e.appendChild(Q.createElement("option"));t.type="checkbox",G.checkOn=""!==t.value,G.optSelected=i.selected,e.disabled=!0,G.optDisabled=!i.disabled,t=Q.createElement("input"),t.value="t",t.type="radio",G.radioValue="t"===t.value}();var ni,oi,si=Z.expr.attrHandle;Z.fn.extend({attr:function(t,e){return me(this,Z.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){Z.removeAttr(this,t)})}}),Z.extend({attr:function(t,e,i){var n,o,s=t.nodeType;return t&&3!==s&&8!==s&&2!==s?typeof t.getAttribute===Se?Z.prop(t,e,i):(1===s&&Z.isXMLDoc(t)||(e=e.toLowerCase(),n=Z.attrHooks[e]||(Z.expr.match.bool.test(e)?oi:ni)),void 0===i?n&&"get"in n&&null!==(o=n.get(t,e))?o:(o=Z.find.attr(t,e),null==o?void 0:o):null!==i?n&&"set"in n&&void 0!==(o=n.set(t,i,e))?o:(t.setAttribute(e,i+""),i):void Z.removeAttr(t,e)):void 0},removeAttr:function(t,e){var i,n,o=0,s=e&&e.match(pe);if(s&&1===t.nodeType)for(;i=s[o++];)n=Z.propFix[i]||i,Z.expr.match.bool.test(i)&&(t[n]=!1),t.removeAttribute(i)},attrHooks:{type:{set:function(t,e){if(!G.radioValue&&"radio"===e&&Z.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),oi={set:function(t,e,i){return e===!1?Z.removeAttr(t,i):t.setAttribute(i,i),i}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(t,e){var i=si[e]||Z.find.attr;si[e]=function(t,e,n){var o,s;return n||(s=si[e],si[e]=o,o=null!=i(t,e,n)?e.toLowerCase():null,si[e]=s),o}});var ri=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(t,e){return me(this,Z.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[Z.propFix[t]||t]})}}),Z.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,i){var n,o,s,r=t.nodeType;return t&&3!==r&&8!==r&&2!==r?(s=1!==r||!Z.isXMLDoc(t),s&&(e=Z.propFix[e]||e,o=Z.propHooks[e]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:t[e]=i:o&&"get"in o&&null!==(n=o.get(t,e))?n:t[e]):void 0},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||ri.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),G.optSelected||(Z.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var ai=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(t){var e,i,n,o,s,r,a="string"==typeof t&&t,l=0,u=this.length;if(Z.isFunction(t))return this.each(function(e){Z(this).addClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(pe)||[];u>l;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ai," "):" ")){for(s=0;o=e[s++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");r=Z.trim(n),i.className!==r&&(i.className=r)}return this},removeClass:function(t){var e,i,n,o,s,r,a=0===arguments.length||"string"==typeof t&&t,l=0,u=this.length;if(Z.isFunction(t))return this.each(function(e){Z(this).removeClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(pe)||[];u>l;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ai," "):"")){for(s=0;o=e[s++];)for(;n.indexOf(" "+o+" ")>=0;)n=n.replace(" "+o+" "," ");r=t?Z.trim(n):"",i.className!==r&&(i.className=r)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):this.each(Z.isFunction(t)?function(i){Z(this).toggleClass(t.call(this,i,this.className,e),e)}:function(){if("string"===i)for(var e,n=0,o=Z(this),s=t.match(pe)||[];e=s[n++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else(i===Se||"boolean"===i)&&(this.className&&ve.set(this,"__className__",this.className),this.className=this.className||t===!1?"":ve.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(ai," ").indexOf(e)>=0)return!0;return!1}});var li=/\r/g;Z.fn.extend({val:function(t){var e,i,n,o=this[0];return arguments.length?(n=Z.isFunction(t),this.each(function(i){var o;1===this.nodeType&&(o=n?t.call(this,i,Z(this).val()):t,null==o?o="":"number"==typeof o?o+="":Z.isArray(o)&&(o=Z.map(o,function(t){return null==t?"":t+""})),e=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))})):o?(e=Z.valHooks[o.type]||Z.valHooks[o.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(o,"value"))?i:(i=o.value,"string"==typeof i?i.replace(li,""):null==i?"":i)):void 0}}),Z.extend({valHooks:{option:{get:function(t){var e=Z.find.attr(t,"value");return null!=e?e:Z.trim(Z.text(t))}},select:{get:function(t){for(var e,i,n=t.options,o=t.selectedIndex,s="select-one"===t.type||0>o,r=s?null:[],a=s?o+1:n.length,l=0>o?a:s?o:0;a>l;l++)if(i=n[l],!(!i.selected&&l!==o||(G.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&Z.nodeName(i.parentNode,"optgroup"))){if(e=Z(i).val(),s)return e;r.push(e)}return r},set:function(t,e){for(var i,n,o=t.options,s=Z.makeArray(e),r=o.length;r--;)n=o[r],(n.selected=Z.inArray(n.value,s)>=0)&&(i=!0);return i||(t.selectedIndex=-1),s}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(t,e){return Z.isArray(e)?t.checked=Z.inArray(Z(t).val(),e)>=0:void 0}},G.checkOn||(Z.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){Z.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),Z.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var ui=Z.now(),ci=/\?/;Z.parseJSON=function(t){return JSON.parse(t+"")},Z.parseXML=function(t){var e,i;if(!t||"string"!=typeof t)return null;try{i=new DOMParser,e=i.parseFromString(t,"text/xml")}catch(n){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+t),e};var hi=/#.*$/,di=/([?&])_=[^&]*/,pi=/^(.*?):[ \t]*([^\r\n]*)$/gm,fi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,gi=/^(?:GET|HEAD)$/,mi=/^\/\//,vi=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,yi={},bi={},wi="*/".concat("*"),_i=t.location.href,ki=vi.exec(_i.toLowerCase())||[];Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_i,type:"GET",isLocal:fi.test(ki[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":wi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?N(N(t,Z.ajaxSettings),e):N(Z.ajaxSettings,t)},ajaxPrefilter:R(yi),ajaxTransport:R(bi),ajax:function(t,e){function i(t,e,i,r){var l,c,v,y,w,k=e;2!==b&&(b=2,a&&clearTimeout(a),n=void 0,s=r||"",_.readyState=t>0?4:0,l=t>=200&&300>t||304===t,i&&(y=F(h,_,i)),y=B(h,y,_,l),l?(h.ifModified&&(w=_.getResponseHeader("Last-Modified"),w&&(Z.lastModified[o]=w),w=_.getResponseHeader("etag"),w&&(Z.etag[o]=w)),204===t||"HEAD"===h.type?k="nocontent":304===t?k="notmodified":(k=y.state,c=y.data,v=y.error,l=!v)):(v=k,(t||!k)&&(k="error",0>t&&(t=0))),_.status=t,_.statusText=(e||k)+"",l?f.resolveWith(d,[c,k,_]):f.rejectWith(d,[_,k,v]),_.statusCode(m),m=void 0,u&&p.trigger(l?"ajaxSuccess":"ajaxError",[_,h,l?c:v]),g.fireWith(d,[_,k]),u&&(p.trigger("ajaxComplete",[_,h]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,o,s,r,a,l,u,c,h=Z.ajaxSetup({},e),d=h.context||h,p=h.context&&(d.nodeType||d.jquery)?Z(d):Z.event,f=Z.Deferred(),g=Z.Callbacks("once memory"),m=h.statusCode||{},v={},y={},b=0,w="canceled",_={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!r)for(r={};e=pi.exec(s);)r[e[1].toLowerCase()]=e[2];e=r[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return b||(t=y[i]=y[i]||t,v[t]=e),this},overrideMimeType:function(t){return b||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)m[e]=[m[e],t[e]];else _.always(t[_.status]);return this},abort:function(t){var e=t||w;return n&&n.abort(e),i(0,e),this}};if(f.promise(_).complete=g.add,_.success=_.done,_.error=_.fail,h.url=((t||h.url||_i)+"").replace(hi,"").replace(mi,ki[1]+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=Z.trim(h.dataType||"*").toLowerCase().match(pe)||[""],null==h.crossDomain&&(l=vi.exec(h.url.toLowerCase()),h.crossDomain=!(!l||l[1]===ki[1]&&l[2]===ki[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(ki[3]||("http:"===ki[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=Z.param(h.data,h.traditional)),O(yi,h,e,_),2===b)return _;u=Z.event&&h.global,u&&0===Z.active++&&Z.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!gi.test(h.type),o=h.url,h.hasContent||(h.data&&(o=h.url+=(ci.test(o)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=di.test(o)?o.replace(di,"$1_="+ui++):o+(ci.test(o)?"&":"?")+"_="+ui++)),h.ifModified&&(Z.lastModified[o]&&_.setRequestHeader("If-Modified-Since",Z.lastModified[o]),Z.etag[o]&&_.setRequestHeader("If-None-Match",Z.etag[o])),(h.data&&h.hasContent&&h.contentType!==!1||e.contentType)&&_.setRequestHeader("Content-Type",h.contentType),_.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+wi+"; q=0.01":""):h.accepts["*"]);for(c in h.headers)_.setRequestHeader(c,h.headers[c]);if(h.beforeSend&&(h.beforeSend.call(d,_,h)===!1||2===b))return _.abort();w="abort";for(c in{success:1,error:1,complete:1})_[c](h[c]);if(n=O(bi,h,e,_)){_.readyState=1,u&&p.trigger("ajaxSend",[_,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){_.abort("timeout")},h.timeout));try{b=1,n.send(v,i)}catch(k){if(!(2>b))throw k;i(-1,k)}}else i(-1,"No Transport");return _},getJSON:function(t,e,i){return Z.get(t,e,i,"json")},getScript:function(t,e){return Z.get(t,void 0,e,"script")}}),Z.each(["get","post"],function(t,e){Z[e]=function(t,i,n,o){return Z.isFunction(i)&&(o=o||n,n=i,i=void 0),Z.ajax({url:t,type:e,dataType:o,data:i,success:n})}}),Z._evalUrl=function(t){return Z.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Z.fn.extend({wrapAll:function(t){var e;return Z.isFunction(t)?this.each(function(e){Z(this).wrapAll(t.call(this,e))}):(this[0]&&(e=Z(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(Z.isFunction(t)?function(e){Z(this).wrapInner(t.call(this,e))}:function(){var e=Z(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=Z.isFunction(t);return this.each(function(i){Z(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},Z.expr.filters.visible=function(t){return!Z.expr.filters.hidden(t)};var Ci=/%20/g,xi=/\[\]$/,Si=/\r?\n/g,Ti=/^(?:submit|button|image|reset|file)$/i,Di=/^(?:input|select|textarea|keygen)/i;Z.param=function(t,e){var i,n=[],o=function(t,e){e=Z.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(t)||t.jquery&&!Z.isPlainObject(t))Z.each(t,function(){o(this.name,this.value)});else for(i in t)U(i,t[i],e,o);return n.join("&").replace(Ci,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=Z.prop(this,"elements");return t?Z.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!Z(this).is(":disabled")&&Di.test(this.nodeName)&&!Ti.test(t)&&(this.checked||!xe.test(t))}).map(function(t,e){var i=Z(this).val();return null==i?null:Z.isArray(i)?Z.map(i,function(t){return{name:e.name,value:t.replace(Si,"\r\n")}}):{name:e.name,value:i.replace(Si,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Ei=0,Mi={},$i={0:200,1223:204},Ii=Z.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in Mi)Mi[t]()}),G.cors=!!Ii&&"withCredentials"in Ii,G.ajax=Ii=!!Ii,Z.ajaxTransport(function(t){var e;return G.cors||Ii&&!t.crossDomain?{send:function(i,n){var o,s=t.xhr(),r=++Ei;if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(o in i)s.setRequestHeader(o,i[o]);e=function(t){return function(){e&&(delete Mi[r],e=s.onload=s.onerror=null,"abort"===t?s.abort():"error"===t?n(s.status,s.statusText):n($i[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=e(),s.onerror=e("error"),e=Mi[r]=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(a){if(e)throw a}},abort:function(){e&&e()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return Z.globalEval(t),t}}}),Z.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),Z.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(n,o){e=Z("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&o("error"===t.type?404:200,t.type)}),Q.head.appendChild(e[0])},abort:function(){i&&i()}}}});var Pi=[],Li=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Pi.pop()||Z.expando+"_"+ui++;return this[t]=!0,t}}),Z.ajaxPrefilter("json jsonp",function(e,i,n){var o,s,r,a=e.jsonp!==!1&&(Li.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Li.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(o=e.jsonpCallback=Z.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Li,"$1"+o):e.jsonp!==!1&&(e.url+=(ci.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return r||Z.error(o+" was not called"),r[0]},e.dataTypes[0]="json",s=t[o],t[o]=function(){r=arguments},n.always(function(){t[o]=s,e[o]&&(e.jsonpCallback=i.jsonpCallback,Pi.push(o)),r&&Z.isFunction(s)&&s(r[0]),r=s=void 0}),"script"):void 0}),Z.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||Q;var n=re.exec(t),o=!i&&[];return n?[e.createElement(n[1])]:(n=Z.buildFragment([t],e,o),o&&o.length&&Z(o).remove(),Z.merge([],n.childNodes))};var Ai=Z.fn.load;Z.fn.load=function(t,e,i){if("string"!=typeof t&&Ai)return Ai.apply(this,arguments);var n,o,s,r=this,a=t.indexOf(" ");return a>=0&&(n=Z.trim(t.slice(a)),t=t.slice(0,a)),Z.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(o="POST"),r.length>0&&Z.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){s=arguments,r.html(n?Z("<div>").append(Z.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){r.each(i,s||[t.responseText,e,t])}),this},Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){Z.fn[e]=function(t){return this.on(e,t)}}),Z.expr.filters.animated=function(t){return Z.grep(Z.timers,function(e){return t===e.elem}).length};var Ri=t.document.documentElement;Z.offset={setOffset:function(t,e,i){var n,o,s,r,a,l,u,c=Z.css(t,"position"),h=Z(t),d={};"static"===c&&(t.style.position="relative"),a=h.offset(),s=Z.css(t,"top"),l=Z.css(t,"left"),u=("absolute"===c||"fixed"===c)&&(s+l).indexOf("auto")>-1,u?(n=h.position(),r=n.top,o=n.left):(r=parseFloat(s)||0,o=parseFloat(l)||0),Z.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(d.top=e.top-a.top+r),null!=e.left&&(d.left=e.left-a.left+o),"using"in e?e.using.call(t,d):h.css(d)}},Z.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){Z.offset.setOffset(this,t,e)});var e,i,n=this[0],o={top:0,left:0},s=n&&n.ownerDocument;return s?(e=s.documentElement,Z.contains(e,n)?(typeof n.getBoundingClientRect!==Se&&(o=n.getBoundingClientRect()),i=K(s),{top:o.top+i.pageYOffset-e.clientTop,left:o.left+i.pageXOffset-e.clientLeft}):o):void 0},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===Z.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),Z.nodeName(t[0],"html")||(n=t.offset()),n.top+=Z.css(t[0],"borderTopWidth",!0),n.left+=Z.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-Z.css(i,"marginTop",!0),left:e.left-n.left-Z.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Ri;t&&!Z.nodeName(t,"html")&&"static"===Z.css(t,"position");)t=t.offsetParent;return t||Ri})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n="pageYOffset"===i;Z.fn[e]=function(o){return me(this,function(e,o,s){var r=K(e);return void 0===s?r?r[i]:e[o]:void(r?r.scrollTo(n?t.pageXOffset:s,n?s:t.pageYOffset):e[o]=s)},e,o,arguments.length,null)}}),Z.each(["top","left"],function(t,e){Z.cssHooks[e]=k(G.pixelPosition,function(t,i){return i?(i=_(t,e),Ve.test(i)?Z(t).position()[e]+"px":i):void 0})}),Z.each({Height:"height",Width:"width"},function(t,e){Z.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){Z.fn[n]=function(n,o){var s=arguments.length&&(i||"boolean"!=typeof n),r=i||(n===!0||o===!0?"margin":"border");return me(this,function(e,i,n){var o;return Z.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===n?Z.css(e,i,r):Z.style(e,i,n,r)},e,s?n:void 0,s,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var Oi=t.jQuery,Ni=t.$;return Z.noConflict=function(e){return t.$===Z&&(t.$=Ni),e&&t.jQuery===Z&&(t.jQuery=Oi),Z},typeof e===Se&&(t.jQuery=t.$=Z),Z}),function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var i,n=t(document);t.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(e){var i=t('meta[name="csrf-token"]').attr("content");i&&e.setRequestHeader("X-CSRF-Token",i)},refreshCSRFTokens:function(){var e=t("meta[name=csrf-token]").attr("content"),i=t("meta[name=csrf-param]").attr("content");t('form input[name="'+i+'"]').val(e)},fire:function(e,i,n){var o=t.Event(i);return e.trigger(o,n),o.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t[0].href},handleRemote:function(n){var o,s,r,a,l,u;if(i.fire(n,"ajax:before")){if(a=n.data("with-credentials")||null,l=n.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,n.is("form")){o=n.attr("method"),s=n.attr("action"),r=n.serializeArray();var c=n.data("ujs:submit-button");c&&(r.push(c),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(o=n.data("method"),s=n.data("url"),r=n.serialize(),n.data("params")&&(r=r+"&"+n.data("params"))):n.is(i.buttonClickSelector)?(o=n.data("method")||"get",s=n.data("url"),r=n.serialize(),n.data("params")&&(r=r+"&"+n.data("params"))):(o=n.data("method"),s=i.href(n),r=n.data("params")||null);return u={type:o||"GET",data:r,dataType:l,beforeSend:function(t,o){return o.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),i.fire(n,"ajax:beforeSend",[t,o])?void n.trigger("ajax:send",t):!1},success:function(t,e,i){n.trigger("ajax:success",[t,e,i])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,i){n.trigger("ajax:error",[t,e,i])},crossDomain:i.isCrossDomain(s)},a&&(u.xhrFields={withCredentials:a}),s&&(u.url=s),i.ajax(u)}return!1},isCrossDomain:function(t){var e=document.createElement("a");e.href=location.href;var i=document.createElement("a");try{return i.href=t,i.href=i.href,!i.protocol||!i.host||e.protocol+"//"+e.host!=i.protocol+"//"+i.host}catch(n){return!0}},handleMethod:function(n){var o=i.href(n),s=n.data("method"),r=n.attr("target"),a=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),u=t('<form method="post" action="'+o+'"></form>'),c='<input name="_method" value="'+s+'" type="hidden" />';l===e||a===e||i.isCrossDomain(o)||(c+='<input name="'+l+'" value="'+a+'" type="hidden" />'),r&&u.attr("target",r),u.hide().append(c).appendTo("body"),u.submit()},formElements:function(e,i){return e.is("form")?t(e[0].elements).filter(i):e.find(i)},disableFormElements:function(e){i.formElements(e,i.disableSelector).each(function(){i.disableFormElement(t(this))})},disableFormElement:function(t){var i,n;i=t.is("button")?"html":"val",n=t.data("disable-with"),t.data("ujs:enable-with",t[i]()),n!==e&&t[i](n),t.prop("disabled",!0)},enableFormElements:function(e){i.formElements(e,i.enableSelector).each(function(){i.enableFormElement(t(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,n=t.data("confirm"),o=!1;return n?(i.fire(t,"confirm")&&(o=i.confirm(n),e=i.fire(t,"confirm:complete",[o])),o&&e):!0},blankInputs:function(e,i,n){var o,s,r=t(),a=i||"input,textarea",l=e.find(a);return l.each(function(){if(o=t(this),s=o.is("input[type=checkbox],input[type=radio]")?o.is(":checked"):o.val(),!s==!n){if(o.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+o.attr("name")+'"]').length)return!0;r=r.add(o)}}),r.length?r:!1},nonBlankInputs:function(t,e){return i.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var n=t.data("disable-with");t.data("ujs:enable-with",t.html()),n!==e&&t.html(n),t.bind("click.railsDisable",function(t){return i.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},i.fire(n,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,n){t.crossDomain||i.CSRFProtection(n)}),t(window).on("pageshow.rails",function(){t(t.rails.enableSelector).each(function(){var e=t(this);e.data("ujs:enable-with")&&t.rails.enableFormElement(e)}),t(t.rails.linkDisableSelector).each(function(){var e=t(this);e.data("ujs:enable-with")&&t.rails.enableElement(e)})}),n.delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(t(this))}),n.delegate(i.buttonDisableSelector,"ajax:complete",function(){i.enableFormElement(t(this))}),n.delegate(i.linkClickSelector,"click.rails",function(n){var o=t(this),s=o.data("method"),r=o.data("params"),a=n.metaKey||n.ctrlKey;if(!i.allowAction(o))return i.stopEverything(n);if(!a&&o.is(i.linkDisableSelector)&&i.disableElement(o),o.data("remote")!==e){if(a&&(!s||"GET"===s)&&!r)return!0;var l=i.handleRemote(o);return l===!1?i.enableElement(o):l.fail(function(){i.enableElement(o)}),!1}return s?(i.handleMethod(o),!1):void 0}),n.delegate(i.buttonClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);n.is(i.buttonDisableSelector)&&i.disableFormElement(n);var o=i.handleRemote(n);return o===!1?i.enableFormElement(n):o.fail(function(){i.enableFormElement(n)}),!1}),n.delegate(i.inputChangeSelector,"change.rails",function(e){var n=t(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),n.delegate(i.formSubmitSelector,"submit.rails",function(n){var o,s,r=t(this),a=r.data("remote")!==e;if(!i.allowAction(r))return i.stopEverything(n);if(r.attr("novalidate")==e&&(o=i.blankInputs(r,i.requiredInputSelector),o&&i.fire(r,"ajax:aborted:required",[o])))return i.stopEverything(n);if(a){if(s=i.nonBlankInputs(r,i.fileInputSelector)){setTimeout(function(){i.disableFormElements(r)},13);var l=i.fire(r,"ajax:aborted:file",[s]);return l||setTimeout(function(){i.enableFormElements(r)},13),l}return i.handleRemote(r),!1}setTimeout(function(){i.disableFormElements(r)},13)}),n.delegate(i.formInputClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);var o=n.attr("name"),s=o?{name:o,value:n.val()}:null;n.closest("form").data("ujs:submit-button",s)}),n.delegate(i.formSubmitSelector,"ajax:send.rails",function(e){this==e.target&&i.disableFormElements(t(this))}),n.delegate(i.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&i.enableFormElements(t(this))}),t(function(){i.refreshCSRFTokens()}))}(jQuery),function(t){var e=!1;if("function"==typeof define&&define.amd&&(define(t),e=!0),"object"==typeof exports&&(module.exports=t(),e=!0),!e){var i=window.Cookies,n=window.Cookies=t();n.noConflict=function(){return window.Cookies=i,n}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var i=arguments[t];for(var n in i)e[n]=i[n]}return e}function e(i){function n(e,o,s){var r;if("undefined"!=typeof document){if(arguments.length>1){if(s=t({path:"/"},n.defaults,s),"number"==typeof s.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*s.expires),s.expires=a}s.expires=s.expires?s.expires.toUTCString():"";try{r=JSON.stringify(o),/^[\{\[]/.test(r)&&(o=r)}catch(l){}o=i.write?i.write(o,e):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape);var u="";for(var c in s)s[c]&&(u+="; "+c,s[c]!==!0&&(u+="="+s[c]));return document.cookie=e+"="+o+u}e||(r={});for(var h=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,p=0;p<h.length;p++){var f=h[p].split("="),g=f.slice(1).join("=");'"'===g.charAt(0)&&(g=g.slice(1,-1));try{var m=f[0].replace(d,decodeURIComponent);if(g=i.read?i.read(g,m):i(g,m)||g.replace(d,decodeURIComponent),this.json)try{g=JSON.parse(g)}catch(l){}if(e===m){r=g;break}e||(r[m]=g)}catch(l){}}return r}}return n.set=n,n.get=function(t){return n.call(n,t)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(e,i){n(e,"",t(i,{expires:-1}))},n.withConverter=e,n}return e(function(){})}),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var o=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.alert");o||i.data("bs.alert",o=new n(this)),"string"==typeof e&&o[e].call(i)})}var i='[data-dismiss="alert"]',n=function(e){t(e).on("click",i,this.close)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.prototype.close=function(e){function i(){r.detach().trigger("closed.bs.alert").remove()}var o=t(this),s=o.attr("data-target");s||(s=o.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var r=t("#"===s?[]:s);e&&e.preventDefault(),r.length||(r=o.closest(".alert")),r.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var o=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=o,this},t(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.button"),s="object"==typeof e&&e;o||n.data("bs.button",o=new i(this,s)),"toggle"==e?o.toggle():e&&o.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.7",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,o=n.is("input")?"val":"html",s=n.data();e+="Text",null==s.resetText&&n.data("resetText",n[o]()),setTimeout(t.proxy(function(){n[o](null==s[e]?this.options[e]:s[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i).prop(i,!0)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i).prop(i,!1))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target).closest(".btn");e.call(n,"toggle"),t(i.target).is('input[type="radio"], input[type="checkbox"]')||(i.preventDefault(),n.is("input,button")?n.trigger("focus"):n.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.carousel"),s=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),r="string"==typeof e?e:s.slide;o||n.data("bs.carousel",o=new i(this,s)),"number"==typeof e?o.to(e):r?o[r]():s.interval&&o.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))
};i.VERSION="3.3.7",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e),n="prev"==t&&0===i||"next"==t&&i==this.$items.length-1;if(n&&!this.options.wrap)return e;var o="prev"==t?-1:1,s=(i+o)%this.$items.length;return this.$items.eq(s)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,n){var o=this.$element.find(".item.active"),s=n||this.getItemForDirection(e,o),r=this.interval,a="next"==e?"left":"right",l=this;if(s.hasClass("active"))return this.sliding=!1;var u=s[0],c=t.Event("slide.bs.carousel",{relatedTarget:u,direction:a});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=t(this.$indicators.children()[this.getItemIndex(s)]);h&&h.addClass("active")}var d=t.Event("slid.bs.carousel",{relatedTarget:u,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(e),s[0].offsetWidth,o.addClass(a),s.addClass(a),o.one("bsTransitionEnd",function(){s.removeClass([e,a].join(" ")).addClass("active"),o.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(d)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(o.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(d)),r&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this};var o=function(i){var n,o=t(this),s=t(o.attr("data-target")||(n=o.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var r=t.extend({},s.data(),o.data()),a=o.attr("data-slide-to");a&&(r.interval=!1),e.call(s,r),a&&s.data("bs.carousel").to(a),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(n)}function i(e){return this.each(function(){var i=t(this),o=i.data("bs.collapse"),s=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);!o&&s.toggle&&/show|hide/.test(e)&&(s.toggle=!1),o||i.data("bs.collapse",o=new n(this,s)),"string"==typeof e&&o[e]()})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.7",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(e=o.data("bs.collapse"),e&&e.transitioning))){var s=t.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){o&&o.length&&(i.call(o,"hide"),e||o.data("bs.collapse",null));var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var l=t.camelCase(["scroll",r].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[r](this.$element[0][l])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(n.TRANSITION_DURATION):o.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,n){var o=t(n);this.addAriaAndCollapsedClass(e(o),o)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var o=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=n,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var o=t(this);o.attr("data-target")||n.preventDefault();var s=e(o),r=s.data("bs.collapse"),a=r?"toggle":o.data();i.call(s,a)})}(jQuery),+function(t){"use strict";function e(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function i(i){i&&3===i.which||(t(o).remove(),t(s).each(function(){var n=t(this),o=e(n),s={relatedTarget:this};o.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(o[0],i.target)||(o.trigger(i=t.Event("hide.bs.dropdown",s)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),o.removeClass("open").trigger(t.Event("hidden.bs.dropdown",s)))))}))}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new r(this)),"string"==typeof e&&n[e].call(i)})}var o=".dropdown-backdrop",s='[data-toggle="dropdown"]',r=function(e){t(e).on("click.bs.dropdown",this.toggle)};r.VERSION="3.3.7",r.prototype.toggle=function(n){var o=t(this);if(!o.is(".disabled, :disabled")){var s=e(o),r=s.hasClass("open");if(i(),!r){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var a={relatedTarget:this};if(s.trigger(n=t.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger(t.Event("shown.bs.dropdown",a))}return!1}},r.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=t(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var o=e(n),r=o.hasClass("open");if(!r&&27!=i.which||r&&27==i.which)return 27==i.which&&o.find(s).trigger("focus"),n.trigger("click");var a=" li:not(.disabled):visible a",l=o.find(".dropdown-menu"+a);if(l.length){var u=l.index(i.target);38==i.which&&u>0&&u--,40==i.which&&u<l.length-1&&u++,~u||(u=0),l.eq(u).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,r.prototype.toggle).on("keydown.bs.dropdown.data-api",s,r.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",r.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,n){return this.each(function(){var o=t(this),s=o.data("bs.modal"),r=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e);s||o.data("bs.modal",s=new i(this,r)),"string"==typeof e?s[e](n):r.show&&s.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.7",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),o&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});o?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(s)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&o;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):r()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),o=n.attr("href"),s=t(n.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),r=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},s.data(),n.data());n.is("a")&&i.preventDefault(),s.one("show.bs.modal",function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(s,r,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.tab");o||n.data("bs.tab",o=new i(this)),"string"==typeof e&&o[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=i.find(".active:last a"),s=t.Event("hide.bs.tab",{relatedTarget:e[0]}),r=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(s),e.trigger(r),!r.isDefaultPrevented()&&!s.isDefaultPrevented()){var a=t(n);this.activate(e.closest("li"),i),this.activate(a,a.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},i.prototype.activate=function(e,n,o){function s(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var r=n.find("> .active"),a=o&&t.support.transition&&(r.length&&r.hasClass("fade")||!!n.find("> .fade").length);r.length&&a?r.one("bsTransitionEnd",s).emulateTransitionEnd(i.TRANSITION_DURATION):s(),r.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var o=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.affix"),s="object"==typeof e&&e;o||n.data("bs.affix",o=new i(this,s)),"string"==typeof e&&o[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.7",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,n){var o=this.$target.scrollTop(),s=this.$element.offset(),r=this.$target.height();if(null!=i&&"top"==this.affixed)return i>o?"top":!1;if("bottom"==this.affixed)return null!=i?o+this.unpin<=s.top?!1:"bottom":t-n>=o+r?!1:"bottom";var a=null==this.affixed,l=a?o:s.top,u=a?r:e;return null!=i&&i>=o?"top":null!=n&&l+u>=t-n?"bottom":!1},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),n=this.options.offset,o=n.top,s=n.bottom,r=Math.max(t(document).height(),t(document.body).height());"object"!=typeof n&&(s=o=n),"function"==typeof o&&(o=n.top(this.$element)),"function"==typeof s&&(s=n.bottom(this.$element));var a=this.getState(r,e,o,s);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var l="affix"+(a?"-"+a:""),u=t.Event(l+".bs.affix");if(this.$element.trigger(u),u.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:r-e-s})}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery),+function(t){"use strict";function e(i,n){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),o=n.data("bs.scrollspy"),s="object"==typeof i&&i;o||n.data("bs.scrollspy",o=new e(this,s)),"string"==typeof i&&o[i]()})}e.VERSION="3.3.7",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),o=e.data("target")||e.attr("href"),s=/^#./.test(o)&&t(o);return s&&s.length&&s.is(":visible")&&[[s[i]().top+n,o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),o=this.offsets,s=this.targets,r=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return r!=(t=s[s.length-1])&&this.activate(t);if(r&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)r!=s[t]&&e>=o[t]&&(void 0===o[t+1]||e<o[t+1])&&this.activate(s[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.tooltip"),s="object"==typeof e&&e;(o||!/destroy|hide/.test(e))&&(o||n.data("bs.tooltip",o=new i(this,s)),"string"==typeof e&&o[e]())})}var i=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),s=o.length;s--;){var r=o[s];if("click"==r)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=r){var a="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide())},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var o=this,s=this.tip(),r=this.getUID(this.type);this.setContent(),s.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&s.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(a);u&&(a=a.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),h=s[0].offsetWidth,d=s[0].offsetHeight;if(u){var p=a,f=this.getPosition(this.$viewport);a="bottom"==a&&c.bottom+d>f.bottom?"top":"top"==a&&c.top-d<f.top?"bottom":"right"==a&&c.right+h>f.width?"left":"left"==a&&c.left-h<f.left?"right":a,s.removeClass(p).addClass(a)}var g=this.getCalculatedOffset(a,c,h,d);this.applyPlacement(g,a);var m=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",m).emulateTransitionEnd(i.TRANSITION_DURATION):m()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),o=n[0].offsetWidth,s=n[0].offsetHeight,r=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(a)&&(a=0),e.top+=r,e.left+=a,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,u=n[0].offsetHeight;"top"==i&&u!=s&&(e.top=e.top+s-u);var c=this.getViewportAdjustedDelta(i,e,l,u);c.left?e.left+=c.left:e.top+=c.top;var h=/top|bottom/.test(i),d=h?2*c.left-o+l:2*c.top-s+u,p=h?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(d,n[0][p],h)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function n(){"in"!=o.hoverState&&s.detach(),o.$element&&o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),e&&e()}var o=this,s=t(this.$tip),r=t.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName,o=i.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var s=window.SVGElement&&i instanceof window.SVGElement,r=n?{top:0,left:0}:s?null:e.offset(),a={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},l=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,a,l,r)},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var o={top:0,left:0};if(!this.$viewport)return o;var s=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-s-r.scroll,l=e.top+s-r.scroll+n;a<r.top?o.top=r.top-a:l>r.top+r.height&&(o.top=r.top+r.height-l)}else{var u=e.left-s,c=e.left+s+i;u<r.left?o.left=r.left-u:c>r.right&&(o.left=r.left+r.width-c)}return o},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.popover"),s="object"==typeof e&&e;(o||!/destroy|hide/.test(e))&&(o||n.data("bs.popover",o=new i(this,s)),"string"==typeof e&&o[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.7",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),function(){var t=this,e=t._,i=Array.prototype,n=Object.prototype,o=Function.prototype,s=i.push,r=i.slice,a=i.concat,l=n.toString,u=n.hasOwnProperty,c=Array.isArray,h=Object.keys,d=o.bind,p=function(t){return t instanceof p?t:this instanceof p?void(this._wrapped=t):new p(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=p),exports._=p):t._=p,p.VERSION="1.7.0";var f=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,o){return t.call(e,i,n,o)
};case 4:return function(i,n,o,s){return t.call(e,i,n,o,s)}}return function(){return t.apply(e,arguments)}};p.iteratee=function(t,e,i){return null==t?p.identity:p.isFunction(t)?f(t,e,i):p.isObject(t)?p.matches(t):p.property(t)},p.each=p.forEach=function(t,e,i){if(null==t)return t;e=f(e,i);var n,o=t.length;if(o===+o)for(n=0;o>n;n++)e(t[n],n,t);else{var s=p.keys(t);for(n=0,o=s.length;o>n;n++)e(t[s[n]],s[n],t)}return t},p.map=p.collect=function(t,e,i){if(null==t)return[];e=p.iteratee(e,i);for(var n,o=t.length!==+t.length&&p.keys(t),s=(o||t).length,r=Array(s),a=0;s>a;a++)n=o?o[a]:a,r[a]=e(t[n],n,t);return r};var g="Reduce of empty array with no initial value";p.reduce=p.foldl=p.inject=function(t,e,i,n){null==t&&(t=[]),e=f(e,n,4);var o,s=t.length!==+t.length&&p.keys(t),r=(s||t).length,a=0;if(arguments.length<3){if(!r)throw new TypeError(g);i=t[s?s[a++]:a++]}for(;r>a;a++)o=s?s[a]:a,i=e(i,t[o],o,t);return i},p.reduceRight=p.foldr=function(t,e,i,n){null==t&&(t=[]),e=f(e,n,4);var o,s=t.length!==+t.length&&p.keys(t),r=(s||t).length;if(arguments.length<3){if(!r)throw new TypeError(g);i=t[s?s[--r]:--r]}for(;r--;)o=s?s[r]:r,i=e(i,t[o],o,t);return i},p.find=p.detect=function(t,e,i){var n;return e=p.iteratee(e,i),p.some(t,function(t,i,o){return e(t,i,o)?(n=t,!0):void 0}),n},p.filter=p.select=function(t,e,i){var n=[];return null==t?n:(e=p.iteratee(e,i),p.each(t,function(t,i,o){e(t,i,o)&&n.push(t)}),n)},p.reject=function(t,e,i){return p.filter(t,p.negate(p.iteratee(e)),i)},p.every=p.all=function(t,e,i){if(null==t)return!0;e=p.iteratee(e,i);var n,o,s=t.length!==+t.length&&p.keys(t),r=(s||t).length;for(n=0;r>n;n++)if(o=s?s[n]:n,!e(t[o],o,t))return!1;return!0},p.some=p.any=function(t,e,i){if(null==t)return!1;e=p.iteratee(e,i);var n,o,s=t.length!==+t.length&&p.keys(t),r=(s||t).length;for(n=0;r>n;n++)if(o=s?s[n]:n,e(t[o],o,t))return!0;return!1},p.contains=p.include=function(t,e){return null==t?!1:(t.length!==+t.length&&(t=p.values(t)),p.indexOf(t,e)>=0)},p.invoke=function(t,e){var i=r.call(arguments,2),n=p.isFunction(e);return p.map(t,function(t){return(n?e:t[e]).apply(t,i)})},p.pluck=function(t,e){return p.map(t,p.property(e))},p.where=function(t,e){return p.filter(t,p.matches(e))},p.findWhere=function(t,e){return p.find(t,p.matches(e))},p.max=function(t,e,i){var n,o,s=-1/0,r=-1/0;if(null==e&&null!=t){t=t.length===+t.length?t:p.values(t);for(var a=0,l=t.length;l>a;a++)n=t[a],n>s&&(s=n)}else e=p.iteratee(e,i),p.each(t,function(t,i,n){o=e(t,i,n),(o>r||o===-1/0&&s===-1/0)&&(s=t,r=o)});return s},p.min=function(t,e,i){var n,o,s=1/0,r=1/0;if(null==e&&null!=t){t=t.length===+t.length?t:p.values(t);for(var a=0,l=t.length;l>a;a++)n=t[a],s>n&&(s=n)}else e=p.iteratee(e,i),p.each(t,function(t,i,n){o=e(t,i,n),(r>o||1/0===o&&1/0===s)&&(s=t,r=o)});return s},p.shuffle=function(t){for(var e,i=t&&t.length===+t.length?t:p.values(t),n=i.length,o=Array(n),s=0;n>s;s++)e=p.random(0,s),e!==s&&(o[s]=o[e]),o[e]=i[s];return o},p.sample=function(t,e,i){return null==e||i?(t.length!==+t.length&&(t=p.values(t)),t[p.random(t.length-1)]):p.shuffle(t).slice(0,Math.max(0,e))},p.sortBy=function(t,e,i){return e=p.iteratee(e,i),p.pluck(p.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var m=function(t){return function(e,i,n){var o={};return i=p.iteratee(i,n),p.each(e,function(n,s){var r=i(n,s,e);t(o,n,r)}),o}};p.groupBy=m(function(t,e,i){p.has(t,i)?t[i].push(e):t[i]=[e]}),p.indexBy=m(function(t,e,i){t[i]=e}),p.countBy=m(function(t,e,i){p.has(t,i)?t[i]++:t[i]=1}),p.sortedIndex=function(t,e,i,n){i=p.iteratee(i,n,1);for(var o=i(e),s=0,r=t.length;r>s;){var a=s+r>>>1;i(t[a])<o?s=a+1:r=a}return s},p.toArray=function(t){return t?p.isArray(t)?r.call(t):t.length===+t.length?p.map(t,p.identity):p.values(t):[]},p.size=function(t){return null==t?0:t.length===+t.length?t.length:p.keys(t).length},p.partition=function(t,e,i){e=p.iteratee(e,i);var n=[],o=[];return p.each(t,function(t,i,s){(e(t,i,s)?n:o).push(t)}),[n,o]},p.first=p.head=p.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:0>e?[]:r.call(t,0,e)},p.initial=function(t,e,i){return r.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},p.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:r.call(t,Math.max(t.length-e,0))},p.rest=p.tail=p.drop=function(t,e,i){return r.call(t,null==e||i?1:e)},p.compact=function(t){return p.filter(t,p.identity)};var v=function(t,e,i,n){if(e&&p.every(t,p.isArray))return a.apply(n,t);for(var o=0,r=t.length;r>o;o++){var l=t[o];p.isArray(l)||p.isArguments(l)?e?s.apply(n,l):v(l,e,i,n):i||n.push(l)}return n};p.flatten=function(t,e){return v(t,e,!1,[])},p.without=function(t){return p.difference(t,r.call(arguments,1))},p.uniq=p.unique=function(t,e,i,n){if(null==t)return[];p.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=p.iteratee(i,n));for(var o=[],s=[],r=0,a=t.length;a>r;r++){var l=t[r];if(e)r&&s===l||o.push(l),s=l;else if(i){var u=i(l,r,t);p.indexOf(s,u)<0&&(s.push(u),o.push(l))}else p.indexOf(o,l)<0&&o.push(l)}return o},p.union=function(){return p.uniq(v(arguments,!0,!0,[]))},p.intersection=function(t){if(null==t)return[];for(var e=[],i=arguments.length,n=0,o=t.length;o>n;n++){var s=t[n];if(!p.contains(e,s)){for(var r=1;i>r&&p.contains(arguments[r],s);r++);r===i&&e.push(s)}}return e},p.difference=function(t){var e=v(r.call(arguments,1),!0,!0,[]);return p.filter(t,function(t){return!p.contains(e,t)})},p.zip=function(t){if(null==t)return[];for(var e=p.max(arguments,"length").length,i=Array(e),n=0;e>n;n++)i[n]=p.pluck(arguments,n);return i},p.object=function(t,e){if(null==t)return{};for(var i={},n=0,o=t.length;o>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},p.indexOf=function(t,e,i){if(null==t)return-1;var n=0,o=t.length;if(i){if("number"!=typeof i)return n=p.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,o+i):i}for(;o>n;n++)if(t[n]===e)return n;return-1},p.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=t.length;for("number"==typeof i&&(n=0>i?n+i+1:Math.min(n,i+1));--n>=0;)if(t[n]===e)return n;return-1},p.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),o=Array(n),s=0;n>s;s++,t+=i)o[s]=t;return o};var y=function(){};p.bind=function(t,e){var i,n;if(d&&t.bind===d)return d.apply(t,r.call(arguments,1));if(!p.isFunction(t))throw new TypeError("Bind must be called on a function");return i=r.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(r.call(arguments)));y.prototype=t.prototype;var o=new y;y.prototype=null;var s=t.apply(o,i.concat(r.call(arguments)));return p.isObject(s)?s:o}},p.partial=function(t){var e=r.call(arguments,1);return function(){for(var i=0,n=e.slice(),o=0,s=n.length;s>o;o++)n[o]===p&&(n[o]=arguments[i++]);for(;i<arguments.length;)n.push(arguments[i++]);return t.apply(this,n)}},p.bindAll=function(t){var e,i,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(e=1;n>e;e++)i=arguments[e],t[i]=p.bind(t[i],t);return t},p.memoize=function(t,e){var i=function(n){var o=i.cache,s=e?e.apply(this,arguments):n;return p.has(o,s)||(o[s]=t.apply(this,arguments)),o[s]};return i.cache={},i},p.delay=function(t,e){var i=r.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},p.defer=function(t){return p.delay.apply(p,[t,1].concat(r.call(arguments,1)))},p.throttle=function(t,e,i){var n,o,s,r=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:p.now(),r=null,s=t.apply(n,o),r||(n=o=null)};return function(){var u=p.now();a||i.leading!==!1||(a=u);var c=e-(u-a);return n=this,o=arguments,0>=c||c>e?(clearTimeout(r),r=null,a=u,s=t.apply(n,o),r||(n=o=null)):r||i.trailing===!1||(r=setTimeout(l,c)),s}},p.debounce=function(t,e,i){var n,o,s,r,a,l=function(){var u=p.now()-r;e>u&&u>0?n=setTimeout(l,e-u):(n=null,i||(a=t.apply(s,o),n||(s=o=null)))};return function(){s=this,o=arguments,r=p.now();var u=i&&!n;return n||(n=setTimeout(l,e)),u&&(a=t.apply(s,o),s=o=null),a}},p.wrap=function(t,e){return p.partial(e,t)},p.negate=function(t){return function(){return!t.apply(this,arguments)}},p.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},p.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},p.before=function(t,e){var i;return function(){return--t>0?i=e.apply(this,arguments):e=null,i}},p.once=p.partial(p.before,2),p.keys=function(t){if(!p.isObject(t))return[];if(h)return h(t);var e=[];for(var i in t)p.has(t,i)&&e.push(i);return e},p.values=function(t){for(var e=p.keys(t),i=e.length,n=Array(i),o=0;i>o;o++)n[o]=t[e[o]];return n},p.pairs=function(t){for(var e=p.keys(t),i=e.length,n=Array(i),o=0;i>o;o++)n[o]=[e[o],t[e[o]]];return n},p.invert=function(t){for(var e={},i=p.keys(t),n=0,o=i.length;o>n;n++)e[t[i[n]]]=i[n];return e},p.functions=p.methods=function(t){var e=[];for(var i in t)p.isFunction(t[i])&&e.push(i);return e.sort()},p.extend=function(t){if(!p.isObject(t))return t;for(var e,i,n=1,o=arguments.length;o>n;n++){e=arguments[n];for(i in e)u.call(e,i)&&(t[i]=e[i])}return t},p.pick=function(t,e,i){var n,o={};if(null==t)return o;if(p.isFunction(e)){e=f(e,i);for(n in t){var s=t[n];e(s,n,t)&&(o[n]=s)}}else{var l=a.apply([],r.call(arguments,1));t=new Object(t);for(var u=0,c=l.length;c>u;u++)n=l[u],n in t&&(o[n]=t[n])}return o},p.omit=function(t,e,i){if(p.isFunction(e))e=p.negate(e);else{var n=p.map(a.apply([],r.call(arguments,1)),String);e=function(t,e){return!p.contains(n,e)}}return p.pick(t,e,i)},p.defaults=function(t){if(!p.isObject(t))return t;for(var e=1,i=arguments.length;i>e;e++){var n=arguments[e];for(var o in n)void 0===t[o]&&(t[o]=n[o])}return t},p.clone=function(t){return p.isObject(t)?p.isArray(t)?t.slice():p.extend({},t):t},p.tap=function(t,e){return e(t),t};var b=function(t,e,i,n){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof p&&(t=t._wrapped),e instanceof p&&(e=e._wrapped);var o=l.call(t);if(o!==l.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=i.length;s--;)if(i[s]===t)return n[s]===e;var r=t.constructor,a=e.constructor;if(r!==a&&"constructor"in t&&"constructor"in e&&!(p.isFunction(r)&&r instanceof r&&p.isFunction(a)&&a instanceof a))return!1;i.push(t),n.push(e);var u,c;if("[object Array]"===o){if(u=t.length,c=u===e.length)for(;u--&&(c=b(t[u],e[u],i,n)););}else{var h,d=p.keys(t);if(u=d.length,c=p.keys(e).length===u)for(;u--&&(h=d[u],c=p.has(e,h)&&b(t[h],e[h],i,n)););}return i.pop(),n.pop(),c};p.isEqual=function(t,e){return b(t,e,[],[])},p.isEmpty=function(t){if(null==t)return!0;if(p.isArray(t)||p.isString(t)||p.isArguments(t))return 0===t.length;for(var e in t)if(p.has(t,e))return!1;return!0},p.isElement=function(t){return!(!t||1!==t.nodeType)},p.isArray=c||function(t){return"[object Array]"===l.call(t)},p.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},p.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){p["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}}),p.isArguments(arguments)||(p.isArguments=function(t){return p.has(t,"callee")}),"function"!=typeof/./&&(p.isFunction=function(t){return"function"==typeof t||!1}),p.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},p.isNaN=function(t){return p.isNumber(t)&&t!==+t},p.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===l.call(t)},p.isNull=function(t){return null===t},p.isUndefined=function(t){return void 0===t},p.has=function(t,e){return null!=t&&u.call(t,e)},p.noConflict=function(){return t._=e,this},p.identity=function(t){return t},p.constant=function(t){return function(){return t}},p.noop=function(){},p.property=function(t){return function(e){return e[t]}},p.matches=function(t){var e=p.pairs(t),i=e.length;return function(t){if(null==t)return!i;t=new Object(t);for(var n=0;i>n;n++){var o=e[n],s=o[0];if(o[1]!==t[s]||!(s in t))return!1}return!0}},p.times=function(t,e,i){var n=Array(Math.max(0,t));e=f(e,i,1);for(var o=0;t>o;o++)n[o]=e(o);return n},p.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},p.now=Date.now||function(){return(new Date).getTime()};var w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},_=p.invert(w),k=function(t){var e=function(e){return t[e]},i="(?:"+p.keys(t).join("|")+")",n=RegExp(i),o=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(o,e):t}};p.escape=k(w),p.unescape=k(_),p.result=function(t,e){if(null==t)return void 0;var i=t[e];return p.isFunction(i)?t[e]():i};var C=0;p.uniqueId=function(t){var e=++C+"";return t?t+e:e},p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var x=/(.)^/,S={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},T=/\\|'|\r|\n|\u2028|\u2029/g,D=function(t){return"\\"+S[t]};p.template=function(t,e,i){!e&&i&&(e=i),e=p.defaults({},e,p.templateSettings);var n=RegExp([(e.escape||x).source,(e.interpolate||x).source,(e.evaluate||x).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(n,function(e,i,n,r,a){return s+=t.slice(o,a).replace(T,D),o=a+e.length,i?s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":r&&(s+="';\n"+r+"\n__p+='"),e}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var r=new Function(e.variable||"obj","_",s)}catch(a){throw a.source=s,a}var l=function(t){return r.call(this,t,p)},u=e.variable||"obj";return l.source="function("+u+"){\n"+s+"}",l},p.chain=function(t){var e=p(t);return e._chain=!0,e};var E=function(t){return this._chain?p(t).chain():t};p.mixin=function(t){p.each(p.functions(t),function(e){var i=p[e]=t[e];p.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),E.call(this,i.apply(p,t))}})},p.mixin(p),p.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];p.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],E.call(this,i)}}),p.each(["concat","join","slice"],function(t){var e=i[t];p.prototype[t]=function(){return E.call(this,e.apply(this._wrapped,arguments))}}),p.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return p})}.call(this),function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,o){t.Backbone=e(t,o,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");e(t,exports,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,n){{var o=t.Backbone,s=[],r=(s.push,s.slice);s.splice}e.VERSION="1.1.2",e.$=n,e.noConflict=function(){return t.Backbone=o,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(t,e,i){if(!u(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,n){if(!u(this,"once",t,[e,n])||!e)return this;var o=this,s=i.once(function(){o.off(t,s),e.apply(this,arguments)});return s._callback=e,this.on(t,s,n)},off:function(t,e,n){var o,s,r,a,l,c,h,d;if(!this._events||!u(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(a=t?[t]:i.keys(this._events),l=0,c=a.length;c>l;l++)if(t=a[l],r=this._events[t]){if(this._events[t]=o=[],e||n)for(h=0,d=r.length;d>h;h++)s=r[h],(e&&e!==s.callback&&e!==s.callback._callback||n&&n!==s.context)&&o.push(s);o.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=r.call(arguments,1);if(!u(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&c(i,e),n&&c(n,arguments),this},stopListening:function(t,e,n){var o=this._listeningTo;if(!o)return this;var s=!e&&!n;n||"object"!=typeof e||(n=this),t&&((o={})[t._listenId]=t);for(var r in o)t=o[r],t.off(e,n,this),(s||i.isEmpty(t._events))&&delete this._listeningTo[r];return this}},l=/\s+/,u=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var o in i)t[e].apply(t,[o,i[o]].concat(n));return!1}if(l.test(i)){for(var s=i.split(l),r=0,a=s.length;a>r;r++)t[e].apply(t,[s[r]].concat(n));return!1}return!0},c=function(t,e){var i,n=-1,o=t.length,s=e[0],r=e[1],a=e[2];switch(e.length){case 0:for(;++n<o;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<o;)(i=t[n]).callback.call(i.ctx,s);return;case 2:for(;++n<o;)(i=t[n]).callback.call(i.ctx,s,r);return;case 3:for(;++n<o;)(i=t[n]).callback.call(i.ctx,s,r,a);return;default:for(;++n<o;)(i=t[n]).callback.apply(i.ctx,e);return}},h={listenTo:"on",listenToOnce:"once"};i.each(h,function(t,e){a[e]=function(e,n,o){var s=this._listeningTo||(this._listeningTo={}),r=e._listenId||(e._listenId=i.uniqueId("l"));return s[r]=e,o||"object"!=typeof n||(o=this),e[t](n,o,this),this}}),a.bind=a.on,a.unbind=a.off,i.extend(e,a);var d=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(d.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var o,s,r,a,l,u,c,h;if(null==t)return this;if("object"==typeof t?(s=t,n=e):(s={})[t]=e,n||(n={}),!this._validate(s,n))return!1;r=n.unset,l=n.silent,a=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=i.clone(this.attributes),this.changed={}),h=this.attributes,c=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(o in s)e=s[o],i.isEqual(h[o],e)||a.push(o),i.isEqual(c[o],e)?delete this.changed[o]:this.changed[o]=e,r?delete h[o]:h[o]=e;if(!l){a.length&&(this._pending=n);for(var d=0,p=a.length;p>d;d++)this.trigger("change:"+a[d],this,h[a[d]],n)}if(u)return this;if(!l)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e,n=!1,o=this._changing?this._previousAttributes:this.attributes;for(var s in t)i.isEqual(o[s],e=t[s])||((n||(n={}))[s]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),void e.trigger("sync",e,i,t)):!1},N(this,t),this.sync("read",this,t)},save:function(t,e,n){var o,s,r,a=this.attributes;if(null==t||"object"==typeof t?(o=t,n=e):(o={})[t]=e,n=i.extend({validate:!0},n),o&&!n.wait){if(!this.set(o,n))return!1}else if(!this._validate(o,n))return!1;o&&n.wait&&(this.attributes=i.extend({},a,o)),void 0===n.parse&&(n.parse=!0);var l=this,u=n.success;return n.success=function(t){l.attributes=a;var e=l.parse(t,n);return n.wait&&(e=i.extend(o||{},e)),i.isObject(e)&&!l.set(e,n)?!1:(u&&u(l,t,n),void l.trigger("sync",l,t,n))},N(this,n),s=this.isNew()?"create":n.patch?"patch":"update","patch"===s&&(n.attrs=o),r=this.sync(s,this,n),o&&n.wait&&(this.attributes=a),r},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,o=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&o(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;N(this,t);var s=this.sync("delete",this,t);return t.wait||o(),s},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||O();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];i.each(p,function(t){d.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var f=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};i.extend(f.prototype,a,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,m))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var o,s,r,a;for(o=0,s=t.length;s>o;o++)a=t[o]=this.get(t[o]),a&&(delete this._byId[a.id],delete this._byId[a.cid],r=this.indexOf(a),this.models.splice(r,1),this.length--,e.silent||(e.index=r,a.trigger("remove",a,this,e)),this._removeReference(a,e));return n?t[0]:t},set:function(t,e){e=i.defaults({},e,g),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var o,s,r,a,l,u,c,h=e.at,p=this.model,f=this.comparator&&null==h&&e.sort!==!1,m=i.isString(this.comparator)?this.comparator:null,v=[],y=[],b={},w=e.add,_=e.merge,k=e.remove,C=!f&&w&&k?[]:!1;for(o=0,s=t.length;s>o;o++){if(l=t[o]||{},r=l instanceof d?a=l:l[p.prototype.idAttribute||"id"],u=this.get(r))k&&(b[u.cid]=!0),_&&(l=l===a?a.attributes:l,e.parse&&(l=u.parse(l,e)),u.set(l,e),f&&!c&&u.hasChanged(m)&&(c=!0)),t[o]=u;else if(w){if(a=t[o]=this._prepareModel(l,e),!a)continue;v.push(a),this._addReference(a,e)}a=u||a,!C||!a.isNew()&&b[a.id]||C.push(a),b[a.id]=!0}if(k){for(o=0,s=this.length;s>o;++o)b[(a=this.models[o]).cid]||y.push(a);y.length&&this.remove(y,e)}if(v.length||C&&C.length)if(f&&(c=!0),this.length+=v.length,null!=h)for(o=0,s=v.length;s>o;o++)this.models.splice(h+o,0,v[o]);else{C&&(this.models.length=0);var x=C||v;for(o=0,s=x.length;s>o;o++)this.models.push(x[o])}if(c&&this.sort({silent:!0}),!e.silent){for(o=0,s=v.length;s>o;o++)(a=v[o]).trigger("add",a,this,e);(c||C&&C.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,o=this.models.length;o>n;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return r.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var o=t.reset?"reset":"set";n[o](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},N(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,o=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),o&&o(t,i,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(v,function(t){f.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var y=["groupBy","countBy","sortBy","indexBy"];i.each(y,function(t){f.prototype[t]=function(e,n){var o=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,o,n)}});var b=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,_)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,_=["model","collection","el","id","attributes","className","tagName","events"];i.extend(b.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var o=e.match(w),s=o[1],r=o[2];n=i.bind(n,this),s+=".delegateEvents"+this.cid,""===r?this.$el.on(s,n):this.$el.on(s,r,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,o){var s=C[t];i.defaults(o||(o={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var r={type:s,dataType:"json"};if(o.url||(r.url=i.result(n,"url")||O()),null!=o.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(o.attrs||n.toJSON(o))),o.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),o.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){r.type="POST",o.emulateJSON&&(r.data._method=s);var a=o.beforeSend;o.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",s),a?a.apply(this,arguments):void 0}}"GET"===r.type||o.emulateJSON||(r.processData=!1),"PATCH"===r.type&&k&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=o.xhr=e.ajax(i.extend(r,o));return n.trigger("request",n,l,o),l};var k=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var x=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,D=/\*\w+/g,E=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(x.prototype,a,{initialize:function(){},route:function(t,n,o){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(o=n,n=""),o||(o=this[n]);var s=this;return e.history.route(t,function(i){var r=s._extractParameters(t,i);s.execute(o,r),s.trigger.apply(s,["route:"+n].concat(r)),s.trigger("route",n,r),e.history.trigger("route",s,n,r)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(E,"\\$&").replace(S,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/?]+)"}).replace(D,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var M=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},$=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,P=/msie [\w.]+/,L=/\/$/,A=/#.*$/;M.started=!1,i.extend(M.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(L,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace($,"")},start:function(t){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),o=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!o||7>=o);if(this.root=("/"+this.root+"/").replace(I,"/"),s&&this._wantsHashChange){var r=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=r.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace($,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!M.started)return!1;
e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(A,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new M;var R=function(t,e){var n,o=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return o.apply(this,arguments)},i.extend(n,o,e);var s=function(){this.constructor=n};return s.prototype=o.prototype,n.prototype=new s,t&&i.extend(n.prototype,t),n.__super__=o.prototype,n};d.extend=f.extend=x.extend=b.extend=M.extend=R;var O=function(){throw new Error('A "url" property or function must be specified')},N=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e}),!function(t){"function"==typeof define&&define.amd?define(["underscore","backbone"],t):"object"==typeof exports?module.exports=t(require("underscore"),require("backbone")):t(_,Backbone)}(function(t,e){return e.SubRoute=e.Router.extend({constructor:function(i,n){this.routes=t.clone(this.routes)||{},this.prefix=i=i||"",this.separator="/"===i.slice(-1)?"":"/",this.createTrailingSlashRoutes=n&&n.createTrailingSlashRoutes,e.Router.prototype.constructor.call(this,n);var o;o=e.history.fragment?e.history.getFragment(e.history.fragment):e.history.getHash(),t.every(this.routes,function(t,i){return o.match(e.Router.prototype._routeToRegExp(i))?(e.history.loadUrl(o),!1):!0},this),this.postInitialize&&this.postInitialize(n)},navigate:function(t,i){"/"!=t.substr(0,1)&&0!==t.indexOf(this.prefix.substr(0,this.prefix.length-1))&&(t=this.prefix+(t?this.separator:"")+t),e.Router.prototype.navigate.call(this,t,i)},route:function(t,i,n){"/"===t.substr(0)&&(t=t.substr(1,t.length));var o=this.prefix;return t&&t.length>0&&(this.prefix.length>0&&(o+=this.separator),o+=t),this.createTrailingSlashRoutes&&(this.routes[o+"/"]=i,e.Router.prototype.route.call(this,o+"/",i,n)),delete this.routes[t],this.routes[o]=i,e.Router.prototype.route.call(this,o,i,n)}}),e.SubRoute}),function(t,e,i){var n=e.templateSettings;e.templateSettings={interpolate:/\{\{(.+?)\}\}/g,evaluate:/<%([\s\S]+?)%>/g};var o=e.template('    <div class="modal-dialog"><div class="modal-content">    <% if (title) { %>      <div class="modal-header">        <% if (allowCancel) { %>          <a class="close">&times;</a>        <% } %>        <h4>{{title}}</h4>      </div>    <% } %>    <div class="modal-body">{{content}}</div>    <% if (showFooter) { %>      <div class="modal-footer">        <% if (allowCancel) { %>          <% if (cancelText) { %>            <a href="#" class="btn cancel">{{cancelText}}</a>          <% } %>        <% } %>        <a href="#" class="btn ok btn-primary">{{okText}}</a>      </div>    <% } %>    </div></div>  ');e.templateSettings=n;var s=i.View.extend({className:"modal",events:{"click .close":function(t){t.preventDefault(),this.trigger("cancel"),this.options.content&&this.options.content.trigger&&this.options.content.trigger("cancel",this)},"click .cancel":function(t){t.preventDefault(),this.trigger("cancel"),this.options.content&&this.options.content.trigger&&this.options.content.trigger("cancel",this)},"click .ok":function(t){t.preventDefault(),this.trigger("ok"),this.options.content&&this.options.content.trigger&&this.options.content.trigger("ok",this),this.options.okCloses&&this.close()},keypress:function(t){this.options.enterTriggersOk&&13==t.which&&(t.preventDefault(),this.trigger("ok"),this.options.content&&this.options.content.trigger&&this.options.content.trigger("ok",this),this.options.okCloses&&this.close())}},initialize:function(t){this.options=e.extend({title:null,okText:"OK",focusOk:!0,okCloses:!0,cancelText:"Cancel",showFooter:!0,allowCancel:!0,escape:!0,animate:!1,template:o,enterTriggersOk:!1,modalClass:""},t)},render:function(){var t=this.$el,e=this.options,i=e.content;t.html(e.template(e));this.$content=t.find(".modal-body");return i&&i.$el&&(i.render(),t.find(".modal-body").html(i.$el)),t.addClass(this.options.modalClass),e.animate&&t.addClass("fade"),this.isRendered=!0,this},open:function(i){this.isRendered||this.render();var n=this,o=this.$el;o.modal(e.extend({keyboard:this.options.allowCancel,backdrop:this.options.allowCancel?!0:"static"},this.options.modalOptions)),o.one("shown.bs.modal",function(){n.options.focusOk&&o.find(".btn.ok").focus(),n.options.content&&n.options.content.trigger&&n.options.content.trigger("shown",n),n.trigger("shown")});var r=s.count,a=t(".modal-backdrop:eq("+r+")"),l=parseInt(a.css("z-index"),10),u=parseInt(a.css("z-index"),10);return a.css("z-index",l+r),this.$el.css("z-index",u+r),this.options.allowCancel&&(a.one("click",function(){n.options.content&&n.options.content.trigger&&n.options.content.trigger("cancel",n),n.trigger("cancel")}),t(document).one("keyup.dismiss.modal",function(t){27==t.which&&n.trigger("cancel"),n.options.content&&n.options.content.trigger&&27==t.which&&n.options.content.trigger("shown",n)})),this.on("cancel",function(){n.close()}),s.count++,i&&n.on("ok",i),this},close:function(){var t=this,e=this.$el;return this._preventClose?void(this._preventClose=!1):(e.one("hidden.bs.modal",function i(n){return n.target!==n.currentTarget?e.one("hidden",i):(t.remove(),t.options.content&&t.options.content.trigger&&t.options.content.trigger("hidden",t),void t.trigger("hidden"))}),e.modal("hide"),void s.count--)},preventClose:function(){this._preventClose=!0}},{count:0});return"function"==typeof require&&"undefined"!=typeof module&&exports&&(module.exports=s),"function"==typeof define&&define.amd?define(function(){i.BootstrapModal=s}):void(i.BootstrapModal=s)}(jQuery,_,Backbone),function(t){function e(t,e,i){switch(arguments.length){case 2:return null!=t?t:e;case 3:return null!=t?t:null!=e?e:i;default:throw new Error("Implement me")}}function i(t,e){return Se.call(t,e)}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function o(t){be.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function s(t,e){var i=!0;return d(function(){return i&&(o(t),i=!1),e.apply(this,arguments)},e)}function r(t,e){mi[t]||(o(e),mi[t]=!0)}function a(t,e){return function(i){return g(t.call(this,i),e)}}function l(t,e){return function(i){return this.localeData().ordinal(t.call(this,i),e)}}function u(){}function c(t,e){e!==!1&&I(t),p(this,t),this._d=new Date(+t._d)}function h(t){var e=x(t),i=e.year||0,n=e.quarter||0,o=e.month||0,s=e.week||0,r=e.day||0,a=e.hour||0,l=e.minute||0,u=e.second||0,c=e.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+36e5*a,this._days=+r+7*s,this._months=+o+3*n+12*i,this._data={},this._locale=be.localeData(),this._bubble()}function d(t,e){for(var n in e)i(e,n)&&(t[n]=e[n]);return i(e,"toString")&&(t.toString=e.toString),i(e,"valueOf")&&(t.valueOf=e.valueOf),t}function p(t,e){var i,n,o;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=e._pf),"undefined"!=typeof e._locale&&(t._locale=e._locale),Ae.length>0)for(i in Ae)n=Ae[i],o=e[n],"undefined"!=typeof o&&(t[n]=o);return t}function f(t){return 0>t?Math.ceil(t):Math.floor(t)}function g(t,e,i){for(var n=""+Math.abs(t),o=t>=0;n.length<e;)n="0"+n;return(o?i?"+":"":"-")+n}function m(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function v(t,e){var i;return e=O(e,t),t.isBefore(e)?i=m(t,e):(i=m(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function y(t,e){return function(i,n){var o,s;return null===n||isNaN(+n)||(r(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),s=i,i=n,n=s),i="string"==typeof i?+i:i,o=be.duration(i,n),b(this,o,t),this}}function b(t,e,i,n){var o=e._milliseconds,s=e._days,r=e._months;n=null==n?!0:n,o&&t._d.setTime(+t._d+o*i),s&&pe(t,"Date",de(t,"Date")+s*i),r&&he(t,de(t,"Month")+r*i),n&&be.updateOffset(t,s||r)}function w(t){return"[object Array]"===Object.prototype.toString.call(t)}function _(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function k(t,e,i){var n,o=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),r=0;for(n=0;o>n;n++)(i&&t[n]!==e[n]||!i&&T(t[n])!==T(e[n]))&&r++;return r+s}function C(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=ui[t]||ci[e]||e}return t}function x(t){var e,n,o={};for(n in t)i(t,n)&&(e=C(n),e&&(o[e]=t[n]));return o}function S(e){var i,n;if(0===e.indexOf("week"))i=7,n="day";else{if(0!==e.indexOf("month"))return;i=12,n="month"}be[e]=function(o,s){var r,a,l=be._locale[e],u=[];if("number"==typeof o&&(s=o,o=t),a=function(t){var e=be().utc().set(n,t);return l.call(be._locale,e,o||"")},null!=s)return a(s);for(r=0;i>r;r++)u.push(a(r));return u}}function T(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=e>=0?Math.floor(e):Math.ceil(e)),i}function D(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function E(t,e,i){return ae(be([t,11,31+e-i]),e,i).week}function M(t){return $(t)?366:365}function $(t){return t%4===0&&t%100!==0||t%400===0}function I(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[De]<0||t._a[De]>11?De:t._a[Ee]<1||t._a[Ee]>D(t._a[Te],t._a[De])?Ee:t._a[Me]<0||t._a[Me]>24||24===t._a[Me]&&(0!==t._a[$e]||0!==t._a[Ie]||0!==t._a[Pe])?Me:t._a[$e]<0||t._a[$e]>59?$e:t._a[Ie]<0||t._a[Ie]>59?Ie:t._a[Pe]<0||t._a[Pe]>999?Pe:-1,t._pf._overflowDayOfYear&&(Te>e||e>Ee)&&(e=Ee),t._pf.overflow=e)}function P(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length&&e._pf.bigHour===t)),e._isValid}function L(t){return t?t.toLowerCase().replace("_","-"):t}function A(t){for(var e,i,n,o,s=0;s<t.length;){for(o=L(t[s]).split("-"),e=o.length,i=L(t[s+1]),i=i?i.split("-"):null;e>0;){if(n=R(o.slice(0,e).join("-")))return n;if(i&&i.length>=e&&k(o,i,!0)>=e-1)break;e--}s++}return null}function R(t){var e=null;if(!Le[t]&&Re)try{e=be.locale(),require("./locale/"+t),be.locale(e)}catch(i){}return Le[t]}function O(t,e){var i,n;return e._isUTC?(i=e.clone(),n=(be.isMoment(t)||_(t)?+t:+be(t))-+i,i._d.setTime(+i._d+n),be.updateOffset(i,!1),i):be(t).local()}function N(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function F(t){var e,i,n=t.match(Be);for(e=0,i=n.length;i>e;e++)n[e]=gi[n[e]]?gi[n[e]]:N(n[e]);return function(o){var s="";for(e=0;i>e;e++)s+=n[e]instanceof Function?n[e].call(o,t):n[e];return s}}function B(t,e){return t.isValid()?(e=U(e,t.localeData()),hi[e]||(hi[e]=F(e)),hi[e](t)):t.localeData().invalidDate()}function U(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(Ue.lastIndex=0;n>=0&&Ue.test(t);)t=t.replace(Ue,i),Ue.lastIndex=0,n-=1;return t}function K(t,e){var i,n=e._strict;switch(t){case"Q":return Qe;case"DDDD":return Ze;case"YYYY":case"GGGG":case"gggg":return n?ti:ze;case"Y":case"G":case"g":return ii;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?ei:je;case"S":if(n)return Qe;case"SS":if(n)return Xe;case"SSS":if(n)return Ze;case"DDD":return Ve;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return qe;case"a":case"A":return e._locale._meridiemParse;case"x":return Ye;case"X":return Ge;case"Z":case"ZZ":return We;case"T":return Je;case"SSSS":return He;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?Xe:Ke;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Ke;case"Do":return n?e._locale._ordinalParse:e._locale._ordinalParseLenient;default:return i=new RegExp(G(Y(t.replace("\\","")),"i"))}}function V(t){t=t||"";var e=t.match(We)||[],i=e[e.length-1]||[],n=(i+"").match(ai)||["-",0,0],o=+(60*n[1])+T(n[2]);return"+"===n[0]?-o:o}function z(t,e,i){var n,o=i._a;switch(t){case"Q":null!=e&&(o[De]=3*(T(e)-1));break;case"M":case"MM":null!=e&&(o[De]=T(e)-1);break;case"MMM":case"MMMM":n=i._locale.monthsParse(e,t,i._strict),null!=n?o[De]=n:i._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(o[Ee]=T(e));break;case"Do":null!=e&&(o[Ee]=T(parseInt(e.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=e&&(i._dayOfYear=T(e));break;case"YY":o[Te]=be.parseTwoDigitYear(e);break;case"YYYY":case"YYYYY":case"YYYYYY":o[Te]=T(e);break;case"a":case"A":i._isPm=i._locale.isPM(e);break;case"h":case"hh":i._pf.bigHour=!0;case"H":case"HH":o[Me]=T(e);break;case"m":case"mm":o[$e]=T(e);break;case"s":case"ss":o[Ie]=T(e);break;case"S":case"SS":case"SSS":case"SSSS":o[Pe]=T(1e3*("0."+e));break;case"x":i._d=new Date(T(e));break;case"X":i._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=V(e);break;case"dd":case"ddd":case"dddd":n=i._locale.weekdaysParse(e),null!=n?(i._w=i._w||{},i._w.d=n):i._pf.invalidWeekday=e;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":t=t.substr(0,1);case"gggg":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(i._w=i._w||{},i._w[t]=T(e));break;case"gg":case"GG":i._w=i._w||{},i._w[t]=be.parseTwoDigitYear(e)}}function j(t){var i,n,o,s,r,a,l;i=t._w,null!=i.GG||null!=i.W||null!=i.E?(r=1,a=4,n=e(i.GG,t._a[Te],ae(be(),1,4).year),o=e(i.W,1),s=e(i.E,1)):(r=t._locale._week.dow,a=t._locale._week.doy,n=e(i.gg,t._a[Te],ae(be(),r,a).year),o=e(i.w,1),null!=i.d?(s=i.d,r>s&&++o):s=null!=i.e?i.e+r:r),l=le(n,o,s,a,r),t._a[Te]=l.year,t._dayOfYear=l.dayOfYear}function H(t){var i,n,o,s,r=[];if(!t._d){for(o=W(t),t._w&&null==t._a[Ee]&&null==t._a[De]&&j(t),t._dayOfYear&&(s=e(t._a[Te],o[Te]),t._dayOfYear>M(s)&&(t._pf._overflowDayOfYear=!0),n=ne(s,0,t._dayOfYear),t._a[De]=n.getUTCMonth(),t._a[Ee]=n.getUTCDate()),i=0;3>i&&null==t._a[i];++i)t._a[i]=r[i]=o[i];for(;7>i;i++)t._a[i]=r[i]=null==t._a[i]?2===i?1:0:t._a[i];24===t._a[Me]&&0===t._a[$e]&&0===t._a[Ie]&&0===t._a[Pe]&&(t._nextDay=!0,t._a[Me]=0),t._d=(t._useUTC?ne:ie).apply(null,r),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()+t._tzm),t._nextDay&&(t._a[Me]=24)}}function q(t){var e;t._d||(e=x(t._i),t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],H(t))}function W(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function J(e){if(e._f===be.ISO_8601)return void X(e);e._a=[],e._pf.empty=!0;var i,n,o,s,r,a=""+e._i,l=a.length,u=0;for(o=U(e._f,e._locale).match(Be)||[],i=0;i<o.length;i++)s=o[i],n=(a.match(K(s,e))||[])[0],n&&(r=a.substr(0,a.indexOf(n)),r.length>0&&e._pf.unusedInput.push(r),a=a.slice(a.indexOf(n)+n.length),u+=n.length),gi[s]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(s),z(s,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(s);e._pf.charsLeftOver=l-u,a.length>0&&e._pf.unusedInput.push(a),e._pf.bigHour===!0&&e._a[Me]<=12&&(e._pf.bigHour=t),e._isPm&&e._a[Me]<12&&(e._a[Me]+=12),e._isPm===!1&&12===e._a[Me]&&(e._a[Me]=0),H(e),I(e)}function Y(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,o){return e||i||n||o})}function G(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(t){var e,i,o,s,r;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(s=0;s<t._f.length;s++)r=0,e=p({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._pf=n(),e._f=t._f[s],J(e),P(e)&&(r+=e._pf.charsLeftOver,r+=10*e._pf.unusedTokens.length,e._pf.score=r,(null==o||o>r)&&(o=r,i=e));d(t,i||e)}function X(t){var e,i,n=t._i,o=ni.exec(n);if(o){for(t._pf.iso=!0,e=0,i=si.length;i>e;e++)if(si[e][1].exec(n)){t._f=si[e][0]+(o[6]||" ");break}for(e=0,i=ri.length;i>e;e++)if(ri[e][1].exec(n)){t._f+=ri[e][0];break}n.match(We)&&(t._f+="Z"),J(t)}else t._isValid=!1}function Z(t){X(t),t._isValid===!1&&(delete t._isValid,be.createFromInputFallback(t))}function te(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function ee(e){var i,n=e._i;n===t?e._d=new Date:_(n)?e._d=new Date(+n):null!==(i=Oe.exec(n))?e._d=new Date(+i[1]):"string"==typeof n?Z(e):w(n)?(e._a=te(n.slice(0),function(t){return parseInt(t,10)}),H(e)):"object"==typeof n?q(e):"number"==typeof n?e._d=new Date(n):be.createFromInputFallback(e)}function ie(t,e,i,n,o,s,r){var a=new Date(t,e,i,n,o,s,r);return 1970>t&&a.setFullYear(t),a}function ne(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function oe(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function se(t,e,i,n,o){return o.relativeTime(e||1,!!i,t,n)}function re(t,e,i){var n=be.duration(t).abs(),o=xe(n.as("s")),s=xe(n.as("m")),r=xe(n.as("h")),a=xe(n.as("d")),l=xe(n.as("M")),u=xe(n.as("y")),c=o<di.s&&["s",o]||1===s&&["m"]||s<di.m&&["mm",s]||1===r&&["h"]||r<di.h&&["hh",r]||1===a&&["d"]||a<di.d&&["dd",a]||1===l&&["M"]||l<di.M&&["MM",l]||1===u&&["y"]||["yy",u];return c[2]=e,c[3]=+t>0,c[4]=i,se.apply({},c)}function ae(t,e,i){var n,o=i-e,s=i-t.day();return s>o&&(s-=7),o-7>s&&(s+=7),n=be(t).add(s,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function le(t,e,i,n,o){var s,r,a=ne(t,0,1).getUTCDay();return a=0===a?7:a,i=null!=i?i:o,s=o-a+(a>n?7:0)-(o>a?7:0),r=7*(e-1)+(i-o)+s+1,{year:r>0?t:t-1,dayOfYear:r>0?r:M(t-1)+r}}function ue(e){var i,n=e._i,o=e._f;return e._locale=e._locale||be.localeData(e._l),null===n||o===t&&""===n?be.invalid({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),be.isMoment(n)?new c(n,!0):(o?w(o)?Q(e):J(e):ee(e),i=new c(e),i._nextDay&&(i.add(1,"d"),i._nextDay=t),i))}function ce(t,e){var i,n;if(1===e.length&&w(e[0])&&(e=e[0]),!e.length)return be();for(i=e[0],n=1;n<e.length;++n)e[n][t](i)&&(i=e[n]);return i}function he(t,e){var i;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(i=Math.min(t.date(),D(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t)}function de(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function pe(t,e,i){return"Month"===e?he(t,i):t._d["set"+(t._isUTC?"UTC":"")+e](i)}function fe(t,e){return function(i){return null!=i?(pe(this,t,i),be.updateOffset(this,e),this):de(this,t)}}function ge(t){return 400*t/146097}function me(t){return 146097*t/400}function ve(t){be.duration.fn[t]=function(){return this._data[t]}}function ye(t){"undefined"==typeof ender&&(we=Ce.moment,Ce.moment=t?s("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",be):be)}for(var be,we,_e,ke="2.8.4",Ce="undefined"!=typeof global?global:this,xe=Math.round,Se=Object.prototype.hasOwnProperty,Te=0,De=1,Ee=2,Me=3,$e=4,Ie=5,Pe=6,Le={},Ae=[],Re="undefined"!=typeof module&&module&&module.exports,Oe=/^\/?Date\((\-?\d+)/i,Ne=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Fe=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Be=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Ue=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ke=/\d\d?/,Ve=/\d{1,3}/,ze=/\d{1,4}/,je=/[+\-]?\d{1,6}/,He=/\d+/,qe=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,We=/Z|[\+\-]\d\d:?\d\d/gi,Je=/T/i,Ye=/[\+\-]?\d+/,Ge=/[\+\-]?\d+(\.\d{1,3})?/,Qe=/\d/,Xe=/\d\d/,Ze=/\d{3}/,ti=/\d{4}/,ei=/[+-]?\d{6}/,ii=/[+-]?\d+/,ni=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,oi="YYYY-MM-DDTHH:mm:ssZ",si=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ri=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ai=/([\+\-]|\d\d)/gi,li=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),ui={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},ci={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},hi={},di={s:45,m:45,h:22,d:26,M:11},pi="DDD w W M D d".split(" "),fi="M D H h m s w W".split(" "),gi={M:function(){return this.month()+1},MMM:function(t){return this.localeData().monthsShort(this,t)},MMMM:function(t){return this.localeData().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.localeData().weekdaysMin(this,t)},ddd:function(t){return this.localeData().weekdaysShort(this,t)},dddd:function(t){return this.localeData().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return g(this.year()%100,2)},YYYY:function(){return g(this.year(),4)},YYYYY:function(){return g(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+g(Math.abs(t),6)},gg:function(){return g(this.weekYear()%100,2)},gggg:function(){return g(this.weekYear(),4)},ggggg:function(){return g(this.weekYear(),5)},GG:function(){return g(this.isoWeekYear()%100,2)},GGGG:function(){return g(this.isoWeekYear(),4)},GGGGG:function(){return g(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return T(this.milliseconds()/100)},SS:function(){return g(T(this.milliseconds()/10),2)},SSS:function(){return g(this.milliseconds(),3)},SSSS:function(){return g(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+g(T(t/60),2)+":"+g(T(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+g(T(t/60),2)+g(T(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},mi={},vi=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];pi.length;)_e=pi.pop(),gi[_e+"o"]=l(gi[_e],_e);for(;fi.length;)_e=fi.pop(),gi[_e+_e]=a(gi[_e],2);gi.DDDD=a(gi.DDD,3),d(u.prototype,{set:function(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t,e,i){var n,o,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(o=be.utc([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(s="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(s.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(i=be([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e,i){var n=this._calendar[t];return"function"==typeof n?n.apply(e,[i]):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,i,n){var o=this._relativeTime[i];return"function"==typeof o?o(t,e,i,n):o.replace(/%d/i,t)},pastFuture:function(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(t){return t},postformat:function(t){return t},week:function(t){return ae(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),be=function(e,i,o,s){var r;return"boolean"==typeof o&&(s=o,o=t),r={},r._isAMomentObject=!0,r._i=e,r._f=i,r._l=o,r._strict=s,r._isUTC=!1,r._pf=n(),ue(r)},be.suppressDeprecationWarnings=!1,be.createFromInputFallback=s("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),be.min=function(){var t=[].slice.call(arguments,0);return ce("isBefore",t)},be.max=function(){var t=[].slice.call(arguments,0);return ce("isAfter",t)},be.utc=function(e,i,o,s){var r;return"boolean"==typeof o&&(s=o,o=t),r={},r._isAMomentObject=!0,r._useUTC=!0,r._isUTC=!0,r._l=o,r._i=e,r._f=i,r._strict=s,r._pf=n(),ue(r).utc()},be.unix=function(t){return be(1e3*t)},be.duration=function(t,e){var n,o,s,r,a=t,l=null;return be.isDuration(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(a={},e?a[e]=t:a.milliseconds=t):(l=Ne.exec(t))?(n="-"===l[1]?-1:1,a={y:0,d:T(l[Ee])*n,h:T(l[Me])*n,m:T(l[$e])*n,s:T(l[Ie])*n,ms:T(l[Pe])*n}):(l=Fe.exec(t))?(n="-"===l[1]?-1:1,s=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*n},a={y:s(l[2]),M:s(l[3]),d:s(l[4]),h:s(l[5]),m:s(l[6]),s:s(l[7]),w:s(l[8])}):"object"==typeof a&&("from"in a||"to"in a)&&(r=v(be(a.from),be(a.to)),a={},a.ms=r.milliseconds,a.M=r.months),o=new h(a),be.isDuration(t)&&i(t,"_locale")&&(o._locale=t._locale),o},be.version=ke,be.defaultFormat=oi,be.ISO_8601=function(){},be.momentProperties=Ae,be.updateOffset=function(){},be.relativeTimeThreshold=function(e,i){return di[e]===t?!1:i===t?di[e]:(di[e]=i,!0)},be.lang=s("moment.lang is deprecated. Use moment.locale instead.",function(t,e){return be.locale(t,e)}),be.locale=function(t,e){var i;return t&&(i="undefined"!=typeof e?be.defineLocale(t,e):be.localeData(t),i&&(be.duration._locale=be._locale=i)),be._locale._abbr},be.defineLocale=function(t,e){return null!==e?(e.abbr=t,Le[t]||(Le[t]=new u),Le[t].set(e),be.locale(t),Le[t]):(delete Le[t],null)},be.langData=s("moment.langData is deprecated. Use moment.localeData instead.",function(t){return be.localeData(t)}),be.localeData=function(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return be._locale;if(!w(t)){if(e=R(t))return e;t=[t]}return A(t)},be.isMoment=function(t){return t instanceof c||null!=t&&i(t,"_isAMomentObject")},be.isDuration=function(t){return t instanceof h};for(_e=vi.length-1;_e>=0;--_e)S(vi[_e]);be.normalizeUnits=function(t){return C(t)},be.invalid=function(t){var e=be.utc(0/0);return null!=t?d(e._pf,t):e._pf.userInvalidated=!0,e},be.parseZone=function(){return be.apply(null,arguments).parseZone()},be.parseTwoDigitYear=function(t){return T(t)+(T(t)>68?1900:2e3)},d(be.fn=c.prototype,{clone:function(){return be(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=be(this).utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():B(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):B(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return P(this)},isDSTShifted:function(){return this._a?this.isValid()&&k(this._a,(this._isUTC?be.utc(this._a):be(this._a)).toArray())>0:!1},parsingFlags:function(){return d({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(t){return this.zone(0,t)},local:function(t){return this._isUTC&&(this.zone(0,t),this._isUTC=!1,t&&this.add(this._dateTzOffset(),"m")),this},format:function(t){var e=B(this,t||be.defaultFormat);return this.localeData().postformat(e)},add:y(1,"add"),subtract:y(-1,"subtract"),diff:function(t,e,i){var n,o,s,r=O(t,this),a=6e4*(this.zone()-r.zone());return e=C(e),"year"===e||"month"===e?(n=432e5*(this.daysInMonth()+r.daysInMonth()),o=12*(this.year()-r.year())+(this.month()-r.month()),s=this-be(this).startOf("month")-(r-be(r).startOf("month")),s-=6e4*(this.zone()-be(this).startOf("month").zone()-(r.zone()-be(r).startOf("month").zone())),o+=s/n,"year"===e&&(o/=12)):(n=this-r,o="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-a)/864e5:"week"===e?(n-a)/6048e5:n),i?o:f(o)},from:function(t,e){return be.duration({to:this,from:t}).locale(this.locale()).humanize(!e)},fromNow:function(t){return this.from(be(),t)},calendar:function(t){var e=t||be(),i=O(e,this).startOf("day"),n=this.diff(i,"days",!0),o=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse";return this.format(this.localeData().calendar(o,this,be(e)))},isLeapYear:function(){return $(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=oe(t,this.localeData()),this.add(t-e,"d")):e},month:fe("Month",!0),startOf:function(t){switch(t=C(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=C(e),e===t||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(t,e){var i;return e=C("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=be.isMoment(t)?t:be(t),+this>+t):(i=be.isMoment(t)?+t:+be(t),i<+this.clone().startOf(e))},isBefore:function(t,e){var i;return e=C("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=be.isMoment(t)?t:be(t),+t>+this):(i=be.isMoment(t)?+t:+be(t),+this.clone().endOf(e)<i)
},isSame:function(t,e){var i;return e=C(e||"millisecond"),"millisecond"===e?(t=be.isMoment(t)?t:be(t),+this===+t):(i=+be(t),+this.clone().startOf(e)<=i&&i<=+this.clone().endOf(e))},min:s("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(t){return t=be.apply(null,arguments),this>t?this:t}),max:s("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(t){return t=be.apply(null,arguments),t>this?this:t}),zone:function(t,e){var i,n=this._offset||0;return null==t?this._isUTC?n:this._dateTzOffset():("string"==typeof t&&(t=V(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&e&&(i=this._dateTzOffset()),this._offset=t,this._isUTC=!0,null!=i&&this.subtract(i,"m"),n!==t&&(!e||this._changeInProgress?b(this,be.duration(n-t,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,be.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?be(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return D(this.year(),this.month())},dayOfYear:function(t){var e=xe((be(this).startOf("day")-be(this).startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=ae(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")},isoWeekYear:function(t){var e=ae(this,1,4).year;return null==t?e:this.add(t-e,"y")},week:function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},isoWeek:function(t){var e=ae(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},weekday:function(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return E(this.year(),1,4)},weeksInYear:function(){var t=this.localeData()._week;return E(this.year(),t.dow,t.doy)},get:function(t){return t=C(t),this[t]()},set:function(t,e){return t=C(t),"function"==typeof this[t]&&this[t](e),this},locale:function(e){var i;return e===t?this._locale._abbr:(i=be.localeData(e),null!=i&&(this._locale=i),this)},lang:s("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===t?this.localeData():this.locale(e)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),be.fn.millisecond=be.fn.milliseconds=fe("Milliseconds",!1),be.fn.second=be.fn.seconds=fe("Seconds",!1),be.fn.minute=be.fn.minutes=fe("Minutes",!1),be.fn.hour=be.fn.hours=fe("Hours",!0),be.fn.date=fe("Date",!0),be.fn.dates=s("dates accessor is deprecated. Use date instead.",fe("Date",!0)),be.fn.year=fe("FullYear",!0),be.fn.years=s("years accessor is deprecated. Use year instead.",fe("FullYear",!0)),be.fn.days=be.fn.day,be.fn.months=be.fn.month,be.fn.weeks=be.fn.week,be.fn.isoWeeks=be.fn.isoWeek,be.fn.quarters=be.fn.quarter,be.fn.toJSON=be.fn.toISOString,d(be.duration.fn=h.prototype,{_bubble:function(){var t,e,i,n=this._milliseconds,o=this._days,s=this._months,r=this._data,a=0;r.milliseconds=n%1e3,t=f(n/1e3),r.seconds=t%60,e=f(t/60),r.minutes=e%60,i=f(e/60),r.hours=i%24,o+=f(i/24),a=f(ge(o)),o-=f(me(a)),s+=f(o/30),o%=30,a+=f(s/12),s%=12,r.days=o,r.months=s,r.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return f(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*T(this._months/12)},humanize:function(t){var e=re(this,!t,this.localeData());return t&&(e=this.localeData().pastFuture(+this,e)),this.localeData().postformat(e)},add:function(t,e){var i=be.duration(t,e);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(t,e){var i=be.duration(t,e);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(t){return t=C(t),this[t.toLowerCase()+"s"]()},as:function(t){var e,i;if(t=C(t),"month"===t||"year"===t)return e=this._days+this._milliseconds/864e5,i=this._months+12*ge(e),"month"===t?i:i/12;switch(e=this._days+Math.round(me(this._months/12)),t){case"week":return e/7+this._milliseconds/6048e5;case"day":return e+this._milliseconds/864e5;case"hour":return 24*e+this._milliseconds/36e5;case"minute":return 24*e*60+this._milliseconds/6e4;case"second":return 24*e*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*e*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+t)}},lang:be.fn.lang,locale:be.fn.locale,toIsoString:s("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),o=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(i?i+"D":"")+(n||o||s?"T":"")+(n?n+"H":"")+(o?o+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale}}),be.duration.fn.toString=be.duration.fn.toISOString;for(_e in li)i(li,_e)&&ve(_e.toLowerCase());be.duration.fn.asMilliseconds=function(){return this.as("ms")},be.duration.fn.asSeconds=function(){return this.as("s")},be.duration.fn.asMinutes=function(){return this.as("m")},be.duration.fn.asHours=function(){return this.as("h")},be.duration.fn.asDays=function(){return this.as("d")},be.duration.fn.asWeeks=function(){return this.as("weeks")},be.duration.fn.asMonths=function(){return this.as("M")},be.duration.fn.asYears=function(){return this.as("y")},be.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=1===T(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),Re?module.exports=be:"function"==typeof define&&define.amd?(define("moment",function(t,e,i){return i.config&&i.config()&&i.config().noGlobal===!0&&(Ce.moment=we),be}),ye(!0)):ye()}.call(this),!function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,i){function n(t,e){return i(e,t)}t.each(e,n)},map:t.map,filter:t.grep,every:function(e,i){var n=!0;return e?(t.each(e,function(t,o){return(n=i.call(null,o,t,e))?void 0:!1}),!!n):n},some:function(e,i){var n=!1;return e?(t.each(e,function(t,o){return(n=i.call(null,o,t,e))?!1:void 0}),!!n):n},mixin:t.extend,getUniqueId:function(){var t=0;return function(){return t++}}(),templatify:function(e){function i(){return String(e)}return t.isFunction(e)?e:i},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,o;return function(){var s,r,a=this,l=arguments;return s=function(){n=null,i||(o=t.apply(a,l))},r=i&&!n,clearTimeout(n),n=setTimeout(s,e),r&&(o=t.apply(a,l)),o}},throttle:function(t,e){var i,n,o,s,r,a;return r=0,a=function(){r=new Date,o=null,s=t.apply(i,n)},function(){var l=new Date,u=e-(l-r);return i=this,n=arguments,0>=u?(clearTimeout(o),o=null,r=l,s=t.apply(i,n)):o||(o=setTimeout(a,u)),s}},noop:function(){}}}(),i="0.10.5",n=function(){"use strict";function t(t){return t=e.toStr(t),t?t.split(/\s+/):[]}function i(t){return t=e.toStr(t),t?t.split(/\W+/):[]}function n(t){return function(){var i=[].slice.call(arguments,0);return function(n){var o=[];return e.each(i,function(i){o=o.concat(t(e.toStr(n[i])))}),o}}}return{nonword:i,whitespace:t,obj:{nonword:n(i),whitespace:n(t)}}}(),o=function(){"use strict";function i(i){this.maxSize=e.isNumber(i)?i:100,this.reset(),this.maxSize<=0&&(this.set=this.get=t.noop)}function n(){this.head=this.tail=null}function o(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(i.prototype,{set:function(t,e){var i,n=this.list.tail;this.size>=this.maxSize&&(this.list.remove(n),delete this.hash[n.key]),(i=this.hash[t])?(i.val=e,this.list.moveToFront(i)):(i=new o(t,e),this.list.add(i),this.hash[t]=i,this.size++)},get:function(t){var e=this.hash[t];return e?(this.list.moveToFront(e),e.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new n}}),e.mixin(n.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),i}(),s=function(){"use strict";function t(t){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix))}function i(){return(new Date).getTime()}function n(t){return JSON.stringify(e.isUndefined(t)?null:t)}function o(t){return JSON.parse(t)}var s,r;try{s=window.localStorage,s.setItem("~~~","!"),s.removeItem("~~~")}catch(a){s=null}return r=s&&window.JSON?{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},get:function(t){return this.isExpired(t)&&this.remove(t),o(s.getItem(this._prefix(t)))},set:function(t,o,r){return e.isNumber(r)?s.setItem(this._ttlKey(t),n(i()+r)):s.removeItem(this._ttlKey(t)),s.setItem(this._prefix(t),n(o))},remove:function(t){return s.removeItem(this._ttlKey(t)),s.removeItem(this._prefix(t)),this},clear:function(){var t,e,i=[],n=s.length;for(t=0;n>t;t++)(e=s.key(t)).match(this.keyMatcher)&&i.push(e.replace(this.keyMatcher,""));for(t=i.length;t--;)this.remove(i[t]);return this},isExpired:function(t){var n=o(s.getItem(this._ttlKey(t)));return e.isNumber(n)&&i()>n?!0:!1}}:{get:e.noop,set:e.noop,remove:e.noop,clear:e.noop,isExpired:e.noop},e.mixin(t.prototype,r),t}(),r=function(){"use strict";function i(e){e=e||{},this.cancelled=!1,this.lastUrl=null,this._send=e.transport?n(e.transport):t.ajax,this._get=e.rateLimiter?e.rateLimiter(this._get):this._get,this._cache=e.cache===!1?new o(0):l}function n(i){return function(n,o){function s(t){e.defer(function(){a.resolve(t)})}function r(t){e.defer(function(){a.reject(t)})}var a=t.Deferred();return i(n,o,s,r),a}}var s=0,r={},a=6,l=new o(10);return i.setMaxPendingRequests=function(t){a=t},i.resetCache=function(){l.reset()},e.mixin(i.prototype,{_get:function(t,e,i){function n(e){i&&i(null,e),c._cache.set(t,e)}function o(){i&&i(!0)}function l(){s--,delete r[t],c.onDeckRequestArgs&&(c._get.apply(c,c.onDeckRequestArgs),c.onDeckRequestArgs=null)}var u,c=this;this.cancelled||t!==this.lastUrl||((u=r[t])?u.done(n).fail(o):a>s?(s++,r[t]=this._send(t,e).done(n).fail(o).always(l)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(t,i,n){var o;return e.isFunction(i)&&(n=i,i={}),this.cancelled=!1,this.lastUrl=t,(o=this._cache.get(t))?e.defer(function(){n&&n(null,o)}):this._get(t,i,n),!!o},cancel:function(){this.cancelled=!0}}),i}(),a=function(){"use strict";function i(e){e=e||{},e.datumTokenizer&&e.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=e.datumTokenizer,this.queryTokenizer=e.queryTokenizer,this.reset()}function n(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function o(){return{ids:[],children:{}}}function s(t){for(var e={},i=[],n=0,o=t.length;o>n;n++)e[t[n]]||(e[t[n]]=!0,i.push(t[n]));return i}function r(t,e){function i(t,e){return t-e}var n=0,o=0,s=[];t=t.sort(i),e=e.sort(i);for(var r=t.length,a=e.length;r>n&&a>o;)t[n]<e[o]?n++:t[n]>e[o]?o++:(s.push(t[n]),n++,o++);return s}return e.mixin(i.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var i=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var s,r;s=i.datums.push(t)-1,r=n(i.datumTokenizer(t)),e.each(r,function(t){var e,n,r;for(e=i.trie,n=t.split("");r=n.shift();)e=e.children[r]||(e.children[r]=o()),e.ids.push(s)})})},get:function(t){var i,o,a=this;return i=n(this.queryTokenizer(t)),e.each(i,function(t){var e,i,n,s;if(o&&0===o.length)return!1;for(e=a.trie,i=t.split("");e&&(n=i.shift());)e=e.children[n];return e&&0===i.length?(s=e.ids.slice(0),void(o=o?r(o,s):s)):(o=[],!1)}),o?e.map(s(o),function(t){return a.datums[t]}):[]},reset:function(){this.datums=[],this.trie=o()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),i}(),l=function(){"use strict";function n(t){return t.local||null}function o(n){var o,s;return s={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(o=n.prefetch||null)&&(o=e.isString(o)?{url:o}:o,o=e.mixin(s,o),o.thumbprint=i+o.thumbprint,o.ajax.type=o.ajax.type||"GET",o.ajax.dataType=o.ajax.dataType||"json",!o.url&&t.error("prefetch requires url to be set")),o}function s(i){function n(t){return function(i){return e.debounce(i,t)}}function o(t){return function(i){return e.throttle(i,t)}}var s,r;return r={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(s=i.remote||null)&&(s=e.isString(s)?{url:s}:s,s=e.mixin(r,s),s.rateLimiter=/^throttle$/i.test(s.rateLimitBy)?o(s.rateLimitWait):n(s.rateLimitWait),s.ajax.type=s.ajax.type||"GET",s.ajax.dataType=s.ajax.dataType||"json",delete s.rateLimitBy,delete s.rateLimitWait,!s.url&&t.error("remote requires url to be set")),s}return{local:n,prefetch:o,remote:s}}();!function(i){"use strict";function o(e){e&&(e.local||e.prefetch||e.remote)||t.error("one of local, prefetch, or remote is required"),this.limit=e.limit||5,this.sorter=u(e.sorter),this.dupDetector=e.dupDetector||c,this.local=l.local(e),this.prefetch=l.prefetch(e),this.remote=l.remote(e),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new a({datumTokenizer:e.datumTokenizer,queryTokenizer:e.queryTokenizer}),this.storage=this.cacheKey?new s(this.cacheKey):null}function u(t){function i(e){return e.sort(t)}function n(t){return t}return e.isFunction(t)?i:n}function c(){return!1}var h,d;return h=i.Bloodhound,d={data:"data",protocol:"protocol",thumbprint:"thumbprint"},i.Bloodhound=o,o.noConflict=function(){return i.Bloodhound=h,o},o.tokenizers=n,e.mixin(o.prototype,{_loadPrefetch:function(e){function i(t){s.clear(),s.add(e.filter?e.filter(t):t),s._saveToStorage(s.index.serialize(),e.thumbprint,e.ttl)}var n,o,s=this;return(n=this._readFromStorage(e.thumbprint))?(this.index.bootstrap(n),o=t.Deferred().resolve()):o=t.ajax(e.url,e.ajax).done(i),o},_getFromRemote:function(t,e){function i(t,i){e(t?[]:s.remote.filter?s.remote.filter(i):i)}var n,o,s=this;return this.transport?(t=t||"",o=encodeURIComponent(t),n=this.remote.replace?this.remote.replace(this.remote.url,t):this.remote.url.replace(this.remote.wildcard,o),this.transport.get(n,this.remote.ajax,i)):void 0},_cancelLastRemoteRequest:function(){this.transport&&this.transport.cancel()},_saveToStorage:function(t,e,i){this.storage&&(this.storage.set(d.data,t,i),this.storage.set(d.protocol,location.protocol,i),this.storage.set(d.thumbprint,e,i))},_readFromStorage:function(t){var e,i={};return this.storage&&(i.data=this.storage.get(d.data),i.protocol=this.storage.get(d.protocol),i.thumbprint=this.storage.get(d.thumbprint)),e=i.thumbprint!==t||i.protocol!==location.protocol,i.data&&!e?i.data:null},_initialize:function(){function i(){o.add(e.isFunction(s)?s():s)}var n,o=this,s=this.local;return n=this.prefetch?this._loadPrefetch(this.prefetch):t.Deferred().resolve(),s&&n.done(i),this.transport=this.remote?new r(this.remote):null,this.initPromise=n.promise()},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){this.index.add(t)},get:function(t,i){function n(t){var n=s.slice(0);e.each(t,function(t){var i;return i=e.some(n,function(e){return o.dupDetector(t,e)}),!i&&n.push(t),n.length<o.limit}),i&&i(o.sorter(n))}var o=this,s=[],r=!1;s=this.index.get(t),s=this.sorter(s).slice(0,this.limit),s.length<this.limit?r=this._getFromRemote(t,n):this._cancelLastRemoteRequest(),r||(s.length>0||!this.transport)&&i&&i(s)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&r.resetCache()},ttAdapter:function(){return e.bind(this.get,this)}}),o}(this);var u=function(){return{wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'}}(),c=function(){"use strict";var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return e.isMsie()&&e.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),e.isMsie()&&e.isMsie()<=7&&e.mixin(t.input,{marginTop:"-1px"}),t}(),h=function(){"use strict";function i(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var n="typeahead:";return e.mixin(i.prototype,{trigger:function(t){var e=[].slice.call(arguments,1);this.$el.trigger(n+t,e)}}),i}(),d=function(){"use strict";function t(t,e,i,n){var o;if(!i)return this;for(e=e.split(l),i=n?a(i,n):i,this._callbacks=this._callbacks||{};o=e.shift();)this._callbacks[o]=this._callbacks[o]||{sync:[],async:[]},this._callbacks[o][t].push(i);return this}function e(e,i,n){return t.call(this,"async",e,i,n)}function i(e,i,n){return t.call(this,"sync",e,i,n)}function n(t){var e;if(!this._callbacks)return this;for(t=t.split(l);e=t.shift();)delete this._callbacks[e];return this}function o(t){var e,i,n,o,r;if(!this._callbacks)return this;for(t=t.split(l),n=[].slice.call(arguments,1);(e=t.shift())&&(i=this._callbacks[e]);)o=s(i.sync,this,[e].concat(n)),r=s(i.async,this,[e].concat(n)),o()&&u(r);return this}function s(t,e,i){function n(){for(var n,o=0,s=t.length;!n&&s>o;o+=1)n=t[o].apply(e,i)===!1;return!n}return n}function r(){var t;return t=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}function a(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var l=/\s+/,u=r();return{onSync:i,onAsync:e,off:n,trigger:o}}(),p=function(t){"use strict";function i(t,i,n){for(var o,s=[],r=0,a=t.length;a>r;r++)s.push(e.escapeRegExChars(t[r]));return o=n?"\\b("+s.join("|")+")\\b":"("+s.join("|")+")",i?new RegExp(o):new RegExp(o,"i")}var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(o){function s(e){var i,n,s;return(i=a.exec(e.data))&&(s=t.createElement(o.tagName),o.className&&(s.className=o.className),n=e.splitText(i.index),n.splitText(i[0].length),s.appendChild(n.cloneNode(!0)),e.parentNode.replaceChild(s,n)),!!i}function r(t,e){for(var i,n=3,o=0;o<t.childNodes.length;o++)i=t.childNodes[o],i.nodeType===n?o+=e(i)?1:0:r(i,e)}var a;o=e.mixin({},n,o),o.node&&o.pattern&&(o.pattern=e.isArray(o.pattern)?o.pattern:[o.pattern],a=i(o.pattern,o.caseSensitive,o.wordsOnly),r(o.node,s))}}(window.document),f=function(){"use strict";function i(i){var o,s,a,l,u=this;i=i||{},i.input||t.error("input is missing"),o=e.bind(this._onBlur,this),s=e.bind(this._onFocus,this),a=e.bind(this._onKeydown,this),l=e.bind(this._onInput,this),this.$hint=t(i.hint),this.$input=t(i.input).on("blur.tt",o).on("focus.tt",s).on("keydown.tt",a),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop),e.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){r[t.which||t.keyCode]||e.defer(e.bind(u._onInput,u,t))}):this.$input.on("input.tt",l),this.query=this.$input.val(),this.$overflowHelper=n(this.$input)}function n(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function o(t,e){return i.normalizeQuery(t)===i.normalizeQuery(e)}function s(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var r;return r={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},i.normalizeQuery=function(t){return(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(i.prototype,d,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(t){var e=r[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(t,e){var i,n,o;switch(t){case"tab":n=this.getHint(),o=this.getInputValue(),i=n&&n!==o&&!s(e);break;case"up":case"down":i=!s(e);break;default:i=!1}i&&e.preventDefault()},_shouldTrigger:function(t,e){var i;switch(t){case"tab":i=!s(e);break;default:i=!0}return i},_checkInputValue:function(){var t,e,i;t=this.getInputValue(),e=o(t,this.query),i=e?this.query.length!==t.length:!1,this.query=t,e?i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){this.$input.val(t),e?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,i,n;t=this.getInputValue(),e=this.getHint(),i=t!==e&&0===e.indexOf(t),n=""!==t&&i&&!this.hasOverflow(),!n&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,i,n;return t=this.$input.val().length,i=this.$input[0].selectionStart,e.isNumber(i)?i===t:document.selection?(n=document.selection.createRange(),n.moveStart("character",-t),t===n.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),i}(),g=function(){"use strict";function i(i){i=i||{},i.templates=i.templates||{},i.source||t.error("missing source"),i.name&&!s(i.name)&&t.error("invalid dataset name: "+i.name),this.query=null,this.highlight=!!i.highlight,this.name=i.name||e.getUniqueId(),this.source=i.source,this.displayFn=n(i.display||i.displayKey),this.templates=o(i.templates,this.displayFn),this.$el=t(u.dataset.replace("%CLASS%",this.name))}function n(t){function i(e){return e[t]}return t=t||"value",e.isFunction(t)?t:i}function o(t,i){function n(t){return"<p>"+i(t)+"</p>"}return{empty:t.empty&&e.templatify(t.empty),header:t.header&&e.templatify(t.header),footer:t.footer&&e.templatify(t.footer),suggestion:t.suggestion||n}}function s(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var r="ttDataset",a="ttValue",l="ttDatum";return i.extractDatasetName=function(e){return t(e).data(r)},i.extractValue=function(e){return t(e).data(a)},i.extractDatum=function(e){return t(e).data(l)},e.mixin(i.prototype,d,{_render:function(i,n){function o(){return g.templates.empty({query:i,isEmpty:!0})}function s(){function o(e){var i;return i=t(u.suggestion).append(g.templates.suggestion(e)).data(r,g.name).data(a,g.displayFn(e)).data(l,e),i.children().each(function(){t(this).css(c.suggestionChild)}),i}var s,h;return s=t(u.suggestions).css(c.suggestions),h=e.map(n,o),s.append.apply(s,h),g.highlight&&p({className:"tt-highlight",node:s[0],pattern:i}),s}function h(){return g.templates.header({query:i,isEmpty:!f})}function d(){return g.templates.footer({query:i,isEmpty:!f})}if(this.$el){var f,g=this;this.$el.empty(),f=n&&n.length,!f&&this.templates.empty?this.$el.html(o()).prepend(g.templates.header?h():null).append(g.templates.footer?d():null):f&&this.$el.html(s()).prepend(g.templates.header?h():null).append(g.templates.footer?d():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(t){function e(e){i.canceled||t!==i.query||i._render(t,e)}var i=this;this.query=t,this.canceled=!1,this.source(t,e)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),i}(),m=function(){"use strict";function i(i){var o,s,r,a=this;i=i||{},i.menu||t.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=e.map(i.datasets,n),o=e.bind(this._onSuggestionClick,this),s=e.bind(this._onSuggestionMouseEnter,this),r=e.bind(this._onSuggestionMouseLeave,this),this.$menu=t(i.menu).on("click.tt",".tt-suggestion",o).on("mouseenter.tt",".tt-suggestion",s).on("mouseleave.tt",".tt-suggestion",r),e.each(this.datasets,function(t){a.$menu.append(t.getRoot()),t.onSync("rendered",a._onRendered,a)})}function n(t){return new g(t)}return e.mixin(i.prototype,d,{_onSuggestionClick:function(e){this.trigger("suggestionClicked",t(e.currentTarget))},_onSuggestionMouseEnter:function(e){this._removeCursor(),this._setCursor(t(e.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function t(t){return t.isEmpty()}this.isEmpty=e.every(this.datasets,t),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(t,e){t.first().addClass("tt-cursor"),!e&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(t){var e,i,n,o;if(this.isOpen){if(i=this._getCursor(),e=this._getSuggestions(),this._removeCursor(),n=e.index(i)+t,n=(n+1)%(e.length+1)-1,-1===n)return void this.trigger("cursorRemoved");-1>n&&(n=e.length-1),this._setCursor(o=e.eq(n)),this._ensureVisible(o)}},_ensureVisible:function(t){var e,i,n,o;e=t.position().top,i=e+t.outerHeight(!0),n=this.$menu.scrollTop(),o=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),0>e?this.$menu.scrollTop(n+e):i>o&&this.$menu.scrollTop(n+(i-o))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(t){this.$menu.css("ltr"===t?c.ltr:c.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(t){var e=null;return t.length&&(e={raw:g.extractDatum(t),value:g.extractValue(t),datasetName:g.extractDatasetName(t)}),e},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(t){function i(e){e.update(t)}e.each(this.datasets,i)},empty:function(){function t(t){t.clear()}e.each(this.datasets,t),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function t(t){t.destroy()}this.$menu.off(".tt"),this.$menu=null,e.each(this.datasets,t)}}),i}(),v=function(){"use strict";function i(i){var o,s,r;i=i||{},i.input||t.error("missing input"),this.isActivated=!1,this.autoselect=!!i.autoselect,this.minLength=e.isNumber(i.minLength)?i.minLength:1,this.$node=n(i.input,i.withHint),o=this.$node.find(".tt-dropdown-menu"),s=this.$node.find(".tt-input"),r=this.$node.find(".tt-hint"),s.on("blur.tt",function(t){var i,n,r;i=document.activeElement,n=o.is(i),r=o.has(i).length>0,e.isMsie()&&(n||r)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){s.focus()}))}),o.on("mousedown.tt",function(t){t.preventDefault()}),this.eventBus=i.eventBus||new h({el:s}),this.dropdown=new m({menu:o,datasets:i.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new f({input:s,hint:r}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function n(e,i){var n,s,a,l;n=t(e),s=t(u.wrapper).css(c.wrapper),a=t(u.dropdown).css(c.dropdown),l=n.clone().css(c.hint).css(o(n)),l.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1}),n.data(r,{dir:n.attr("dir"),autocomplete:n.attr("autocomplete"),spellcheck:n.attr("spellcheck"),style:n.attr("style")}),n.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(i?c.input:c.inputWithNoHint);try{!n.attr("dir")&&n.attr("dir","auto")}catch(h){}return n.wrap(s).parent().prepend(i?l:null).append(a)}function o(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function s(t){var i=t.find(".tt-input");e.each(i.data(r),function(t,n){e.isUndefined(t)?i.removeAttr(n):i.attr(n,t)}),i.detach().removeData(r).removeClass("tt-input").insertAfter(t),t.remove()}var r="ttAttrs";return e.mixin(i.prototype,{_onSuggestionClicked:function(t,e){var i;(i=this.dropdown.getDatumForSuggestion(e))&&this._select(i)},_onCursorMoved:function(){var t=this.dropdown.getDatumForCursor();this.input.setInputValue(t.value,!0),this.eventBus.trigger("cursorchanged",t.raw,t.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(t,e){var i,n;i=this.dropdown.getDatumForCursor(),n=this.dropdown.getDatumForTopSuggestion(),i?(this._select(i),e.preventDefault()):this.autoselect&&n&&(this._select(n),e.preventDefault())
},_onTabKeyed:function(t,e){var i;(i=this.dropdown.getDatumForCursor())?(this._select(i),e.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(t,e){this.input.clearHintIfInvalid(),e.length>=this.minLength?this.dropdown.update(e):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var t;this.dir!==(t=this.input.getLanguageDirection())&&(this.dir=t,this.$node.css("direction",t),this.dropdown.setLanguageDirection(t))},_updateHint:function(){var t,i,n,o,s,r;t=this.dropdown.getDatumForTopSuggestion(),t&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(i=this.input.getInputValue(),n=f.normalizeQuery(i),o=e.escapeRegExChars(n),s=new RegExp("^(?:"+o+")(.+$)","i"),r=s.exec(t.value),r?this.input.setHint(i+r[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(t){var e,i,n,o;e=this.input.getHint(),i=this.input.getQuery(),n=t||this.input.isCursorAtEnd(),e&&i!==e&&n&&(o=this.dropdown.getDatumForTopSuggestion(),o&&this.input.setInputValue(o.value),this.eventBus.trigger("autocompleted",o.raw,o.datasetName))},_select:function(t){this.input.setQuery(t.value),this.input.setInputValue(t.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",t.raw,t.datasetName),this.dropdown.close(),e.defer(e.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(t){t=e.toStr(t),this.isActivated?this.input.setInputValue(t):(this.input.setQuery(t),this.input.setInputValue(t,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),s(this.$node),this.$node=null}}),i}();!function(){"use strict";var i,n,o;i=t.fn.typeahead,n="ttTypeahead",o={initialize:function(i,o){function s(){var s,r,a=t(this);e.each(o,function(t){t.highlight=!!i.highlight}),r=new v({input:a,eventBus:s=new h({el:a}),withHint:e.isUndefined(i.hint)?!0:!!i.hint,minLength:i.minLength,autoselect:i.autoselect,datasets:o}),a.data(n,r)}return o=e.isArray(o)?o:[].slice.call(arguments,1),i=i||{},this.each(s)},open:function(){function e(){var e,i=t(this);(e=i.data(n))&&e.open()}return this.each(e)},close:function(){function e(){var e,i=t(this);(e=i.data(n))&&e.close()}return this.each(e)},val:function(e){function i(){var i,o=t(this);(i=o.data(n))&&i.setVal(e)}function o(t){var e,i;return(e=t.data(n))&&(i=e.getVal()),i}return arguments.length?this.each(i):o(this.first())},destroy:function(){function e(){var e,i=t(this);(e=i.data(n))&&(e.destroy(),i.removeData(n))}return this.each(e)}},t.fn.typeahead=function(e){var i;return o[e]&&"initialize"!==e?(i=this.filter(function(){return!!t(this).data(n)}),o[e].apply(i,[].slice.call(arguments,1))):o.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=i,this}}()}(window.jQuery),!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){var e,i=navigator.userAgent,n=/iphone/i.test(i),o=/chrome/i.test(i),s=/android/i.test(i);t.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},t.fn.extend({caret:function(t,e){var i;return 0===this.length||this.is(":hidden")?void 0:"number"==typeof t?(e="number"==typeof e?e:t,this.each(function(){this.setSelectionRange?this.setSelectionRange(t,e):this.createTextRange&&(i=this.createTextRange(),i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",t),i.select())})):(this[0].setSelectionRange?(t=this[0].selectionStart,e=this[0].selectionEnd):document.selection&&document.selection.createRange&&(i=document.selection.createRange(),t=0-i.duplicate().moveStart("character",-1e5),e=t+i.text.length),{begin:t,end:e})},unmask:function(){return this.trigger("unmask")},mask:function(i,r){var a,l,u,c,h,d,p,f;if(!i&&this.length>0){a=t(this[0]);var g=a.data(t.mask.dataName);return g?g():void 0}return r=t.extend({autoclear:t.mask.autoclear,placeholder:t.mask.placeholder,completed:null},r),l=t.mask.definitions,u=[],c=p=i.length,h=null,t.each(i.split(""),function(t,e){"?"==e?(p--,c=t):l[e]?(u.push(new RegExp(l[e])),null===h&&(h=u.length-1),c>t&&(d=u.length-1)):u.push(null)}),this.trigger("unmask").each(function(){function a(){if(r.completed){for(var t=h;d>=t;t++)if(u[t]&&E[t]===g(t))return;r.completed.call(D)}}function g(t){return r.placeholder.charAt(t<r.placeholder.length?t:0)}function m(t){for(;++t<p&&!u[t];);return t}function v(t){for(;--t>=0&&!u[t];);return t}function y(t,e){var i,n;if(!(0>t)){for(i=t,n=m(e);p>i;i++)if(u[i]){if(!(p>n&&u[i].test(E[n])))break;E[i]=E[n],E[n]=g(n),n=m(n)}S(),D.caret(Math.max(h,t))}}function b(t){var e,i,n,o;for(e=t,i=g(t);p>e;e++)if(u[e]){if(n=m(e),o=E[e],E[e]=i,!(p>n&&u[n].test(o)))break;i=o}}function w(){var t=D.val(),e=D.caret();if(f&&f.length&&f.length>t.length){for(T(!0);e.begin>0&&!u[e.begin-1];)e.begin--;if(0===e.begin)for(;e.begin<h&&!u[e.begin];)e.begin++;D.caret(e.begin,e.begin)}else{for(T(!0);e.begin<p&&!u[e.begin];)e.begin++;D.caret(e.begin,e.begin)}a()}function _(){T(),D.val()!=$&&D.change()}function k(t){if(!D.prop("readonly")){var e,i,o,s=t.which||t.keyCode;f=D.val(),8===s||46===s||n&&127===s?(e=D.caret(),i=e.begin,o=e.end,o-i===0&&(i=46!==s?v(i):o=m(i-1),o=46===s?m(o):o),x(i,o),y(i,o-1),t.preventDefault()):13===s?_.call(this,t):27===s&&(D.val($),D.caret(0,T()),t.preventDefault())}}function C(e){if(!D.prop("readonly")){var i,n,o,r=e.which||e.keyCode,l=D.caret();if(!(e.ctrlKey||e.altKey||e.metaKey||32>r)&&r&&13!==r){if(l.end-l.begin!==0&&(x(l.begin,l.end),y(l.begin,l.end-1)),i=m(l.begin-1),p>i&&(n=String.fromCharCode(r),u[i].test(n))){if(b(i),E[i]=n,S(),o=m(i),s){var c=function(){t.proxy(t.fn.caret,D,o)()};setTimeout(c,0)}else D.caret(o);l.begin<=d&&a()}e.preventDefault()}}}function x(t,e){var i;for(i=t;e>i&&p>i;i++)u[i]&&(E[i]=g(i))}function S(){D.val(E.join(""))}function T(t){var e,i,n,o=D.val(),s=-1;for(e=0,n=0;p>e;e++)if(u[e]){for(E[e]=g(e);n++<o.length;)if(i=o.charAt(n-1),u[e].test(i)){E[e]=i,s=e;break}if(n>o.length){x(e+1,p);break}}else E[e]===o.charAt(n)&&n++,c>e&&(s=e);return t?S():c>s+1?r.autoclear||E.join("")===M?(D.val()&&D.val(""),x(0,p)):S():(S(),D.val(D.val().substring(0,s+1))),c?e:h}var D=t(this),E=t.map(i.split(""),function(t,e){return"?"!=t?l[t]?g(e):t:void 0}),M=E.join(""),$=D.val();D.data(t.mask.dataName,function(){return t.map(E,function(t,e){return u[e]&&t!=g(e)?t:null}).join("")}),D.one("unmask",function(){D.off(".mask").removeData(t.mask.dataName)}).on("focus.mask",function(){if(!D.prop("readonly")){clearTimeout(e);var t;$=D.val(),t=T(),e=setTimeout(function(){D.get(0)===document.activeElement&&(S(),t==i.replace("?","").length?D.caret(0,t):D.caret(t))},10)}}).on("blur.mask",_).on("keydown.mask",k).on("keypress.mask",C).on("input.mask paste.mask",function(){D.prop("readonly")||setTimeout(function(){var t=T(!0);D.caret(t),a()},0)}),o&&s&&D.off("input.mask").on("input.mask",w),T()})}})}),!function(t){if("function"==typeof define&&define.amd)try{define(["jquery"],t)}catch(e){define([],t)}else if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports){var i;try{i=require("jquery")}catch(e){i=null}module.exports=t(i)}else window&&(window.Slider=t(window.jQuery))}(function(t){var e;return function(t){function e(){}function i(t){function i(e){e.prototype.option||(e.prototype.option=function(e){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))})}function o(e,i){t.fn[e]=function(o){if("string"==typeof o){for(var r=n.call(arguments,1),a=0,l=this.length;l>a;a++){var u=this[a],c=t.data(u,e);if(c)if(t.isFunction(c[o])&&"_"!==o.charAt(0)){var h=c[o].apply(c,r);if(void 0!==h&&h!==c)return h}else s("no such method '"+o+"' for "+e+" instance");else s("cannot call methods on "+e+" prior to initialization; attempted to call '"+o+"'")}return this}var d=this.map(function(){var n=t.data(this,e);return n?(n.option(o),n._init()):(n=new i(this,o),t.data(this,e,n)),t(this)});return!d||d.length>1?d:d[0]}}if(t){var s="undefined"==typeof console?e:function(t){console.error(t)};return t.bridget=function(t,e){i(e),o(t,e)},t.bridget}}var n=Array.prototype.slice;i(t)}(t),function(t){function i(e,i){function n(t,e){var i="data-slider-"+e.replace(/_/g,"-"),n=t.getAttribute(i);try{return JSON.parse(n)}catch(o){return n}}this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1},"string"==typeof e?this.element=document.querySelector(e):e instanceof HTMLElement&&(this.element=e),i=i?i:{};for(var s=Object.keys(this.defaultOptions),r=0;r<s.length;r++){var a=s[r],l=i[a];l="undefined"!=typeof l?l:n(this.element,a),l=null!==l?l:this.defaultOptions[a],this.options||(this.options={}),this.options[a]=l}"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.tooltip_position="right";var u,c,h,d,p,f=this.element.style.width,g=!1,m=this.element.parentNode;if(this.sliderElem)g=!0;else{this.sliderElem=document.createElement("div"),this.sliderElem.className="slider";var v=document.createElement("div");v.className="slider-track",c=document.createElement("div"),c.className="slider-track-low",u=document.createElement("div"),u.className="slider-selection",h=document.createElement("div"),h.className="slider-track-high",d=document.createElement("div"),d.className="slider-handle min-slider-handle",d.setAttribute("role","slider"),d.setAttribute("aria-valuemin",this.options.min),d.setAttribute("aria-valuemax",this.options.max),p=document.createElement("div"),p.className="slider-handle max-slider-handle",p.setAttribute("role","slider"),p.setAttribute("aria-valuemin",this.options.min),p.setAttribute("aria-valuemax",this.options.max),v.appendChild(c),v.appendChild(u),v.appendChild(h);var y=Array.isArray(this.options.labelledby);if(y&&this.options.labelledby[0]&&d.setAttribute("aria-labelledby",this.options.labelledby[0]),y&&this.options.labelledby[1]&&p.setAttribute("aria-labelledby",this.options.labelledby[1]),!y&&this.options.labelledby&&(d.setAttribute("aria-labelledby",this.options.labelledby),p.setAttribute("aria-labelledby",this.options.labelledby)),this.ticks=[],Array.isArray(this.options.ticks)&&this.options.ticks.length>0){for(r=0;r<this.options.ticks.length;r++){var b=document.createElement("div");b.className="slider-tick",this.ticks.push(b),v.appendChild(b)}u.className+=" tick-slider-selection"}if(v.appendChild(d),v.appendChild(p),this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&this.options.ticks_labels.length>0)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",r=0;r<this.options.ticks_labels.length;r++){var w=document.createElement("div"),_=0===this.options.ticks_positions.length,k=this.options.reversed&&_?this.options.ticks_labels.length-(r+1):r;w.className="slider-tick-label",w.innerHTML=this.options.ticks_labels[k],this.tickLabels.push(w),this.tickLabelContainer.appendChild(w)}var C=function(t){var e=document.createElement("div");e.className="tooltip-arrow";var i=document.createElement("div");i.className="tooltip-inner",t.appendChild(e),t.appendChild(i)},x=document.createElement("div");x.className="tooltip tooltip-main",x.setAttribute("role","presentation"),C(x);var S=document.createElement("div");S.className="tooltip tooltip-min",S.setAttribute("role","presentation"),C(S);var T=document.createElement("div");T.className="tooltip tooltip-max",T.setAttribute("role","presentation"),C(T),this.sliderElem.appendChild(v),this.sliderElem.appendChild(x),this.sliderElem.appendChild(S),this.sliderElem.appendChild(T),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),m.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(t&&(this.$element=t(this.element),this.$sliderElem=t(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.touchX=0,this.touchY=0,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),o[this.options.scale]&&(this.options.scale=o[this.options.scale]),g===!0&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","top","width","height"].forEach(function(t){this._removeProperty(this.trackLow,t),this._removeProperty(this.trackSelection,t),this._removeProperty(this.trackHigh,t)},this),[this.handle1,this.handle2].forEach(function(t){this._removeProperty(t,"left"),this._removeProperty(t,"top")},this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(t){this._removeProperty(t,"left"),this._removeProperty(t,"top"),this._removeProperty(t,"margin-left"),this._removeProperty(t,"margin-top"),this._removeClass(t,"right"),this._removeClass(t,"top")},this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=f,this.options.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"),this._setTooltipPosition(),Array.isArray(this.options.ticks)&&this.options.ticks.length>0&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks)),Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this._state.value=this.options.range?[this.options.value,this.options.max]:this.options.value,this.trackLow=c||this.trackLow,this.trackSelection=u||this.trackSelection,this.trackHigh=h||this.trackHigh,"none"===this.options.selection&&(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")),this.handle1=d||this.handle1,this.handle2=p||this.handle2,g===!0)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),r=0;r<this.ticks.length;r++)this._removeClass(this.ticks[r],"round triangle hide");var D=["round","triangle","custom"],E=-1!==D.indexOf(this.options.handle);if(E)for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),r=0;r<this.ticks.length;r++)this._addClass(this.ticks[r],this.options.handle);this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this.setValue(this._state.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchstart=this._touchstart.bind(this),this.touchmove=this._touchmove.bind(this),this.touchCapable&&(this.sliderElem.addEventListener("touchstart",this.touchstart,!1),this.sliderElem.addEventListener("touchmove",this.touchmove,!1)),this.sliderElem.addEventListener("mousedown",this.mousedown,!1),this.resize=this._resize.bind(this),window.addEventListener("resize",this.resize,!1),"hide"===this.options.tooltip?(this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide")):"always"===this.options.tooltip?(this._showTooltip(),this._alwaysShowTooltip=!0):(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1),this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1)),this.options.enabled?this.enable():this.disable()}var n={formatInvalidInputErrorMsg:function(t){return"Invalid input value '"+t+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},o={linear:{toValue:function(t){var e=t/100*(this.options.max-this.options.min),i=!0;if(this.options.ticks_positions.length>0){for(var n,o,s,r=0,a=1;a<this.options.ticks_positions.length;a++)if(t<=this.options.ticks_positions[a]){n=this.options.ticks[a-1],s=this.options.ticks_positions[a-1],o=this.options.ticks[a],r=this.options.ticks_positions[a];break}var l=(t-s)/(r-s);e=n+l*(o-n),i=!1}var u=i?this.options.min:0,c=u+Math.round(e/this.options.step)*this.options.step;return c<this.options.min?this.options.min:c>this.options.max?this.options.max:c},toPercentage:function(t){if(this.options.max===this.options.min)return 0;if(this.options.ticks_positions.length>0){for(var e,i,n,o=0,s=0;s<this.options.ticks.length;s++)if(t<=this.options.ticks[s]){e=s>0?this.options.ticks[s-1]:0,n=s>0?this.options.ticks_positions[s-1]:0,i=this.options.ticks[s],o=this.options.ticks_positions[s];break}if(s>0){var r=(t-e)/(i-e);return n+r*(o-n)}}return 100*(t-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(t){var e=0===this.options.min?0:Math.log(this.options.min),i=Math.log(this.options.max),n=Math.exp(e+(i-e)*t/100);return n=this.options.min+Math.round((n-this.options.min)/this.options.step)*this.options.step,n<this.options.min?this.options.min:n>this.options.max?this.options.max:n},toPercentage:function(t){if(this.options.max===this.options.min)return 0;var e=Math.log(this.options.max),i=0===this.options.min?0:Math.log(this.options.min),n=0===t?0:Math.log(t);return 100*(n-i)/(e-i)}}};if(e=function(t,e){return i.call(this,t,e),this},e.prototype={_init:function(){},constructor:e,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,enabled:!0,formatter:function(t){return Array.isArray(t)?t[0]+" : "+t[1]:t},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,scale:"linear",focus:!1,tooltip_position:null,labelledby:null},getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(t,e,i){t||(t=0);var n=this.getValue();this._state.value=this._validateInputValue(t);var o=this._applyPrecision.bind(this);this.options.range?(this._state.value[0]=o(this._state.value[0]),this._state.value[1]=o(this._state.value[1]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))):(this._state.value=o(this._state.value),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),this._state.value[1]="after"===this.options.selection?this.options.max:this.options.min),this._state.percentage=this.options.max>this.options.min?[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:[0,0,100],this._layout();var s=this.options.range?this._state.value:this._state.value[0];return this._setDataVal(s),e===!0&&this._trigger("slide",s),n!==s&&i===!0&&this._trigger("change",{oldValue:n,newValue:s}),this},destroy:function(){this._removeSliderEventHandlers(),this.sliderElem.parentNode.removeChild(this.sliderElem),this.element.style.display="",this._cleanUpEventCallbacksMap(),this.element.removeAttribute("data"),t&&(this._unbindJQueryEventHandlers(),this.$element.removeData("slider"))},disable:function(){return this._state.enabled=!1,this.handle1.removeAttribute("tabindex"),this.handle2.removeAttribute("tabindex"),this._addClass(this.sliderElem,"slider-disabled"),this._trigger("slideDisabled"),this},enable:function(){return this._state.enabled=!0,this.handle1.setAttribute("tabindex",0),this.handle2.setAttribute("tabindex",0),this._removeClass(this.sliderElem,"slider-disabled"),this._trigger("slideEnabled"),this},toggle:function(){return this._state.enabled?this.disable():this.enable(),this},isEnabled:function(){return this._state.enabled},on:function(t,e){return this._bindNonQueryEventHandler(t,e),this},off:function(e,i){t?(this.$element.off(e,i),this.$sliderElem.off(e,i)):this._unbindNonQueryEventHandler(e,i)},getAttribute:function(t){return t?this.options[t]:this.options},setAttribute:function(t,e){return this.options[t]=e,this},refresh:function(){return this._removeSliderEventHandlers(),i.call(this,this.element,this.options),t&&t.data(this.element,"slider",this),this},relayout:function(){return this._resize(),this._layout(),this},_removeSliderEventHandlers:function(){this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.showTooltip&&(this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle2.removeEventListener("focus",this.showTooltip,!1)),this.hideTooltip&&(this.handle1.removeEventListener("blur",this.hideTooltip,!1),this.handle2.removeEventListener("blur",this.hideTooltip,!1)),this.showTooltip&&this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.hideTooltip&&this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.touchstart,!1),this.sliderElem.removeEventListener("touchmove",this.touchmove,!1),this.sliderElem.removeEventListener("mousedown",this.mousedown,!1),window.removeEventListener("resize",this.resize,!1)},_bindNonQueryEventHandler:function(t,e){void 0===this.eventToCallbackMap[t]&&(this.eventToCallbackMap[t]=[]),this.eventToCallbackMap[t].push(e)},_unbindNonQueryEventHandler:function(t,e){var i=this.eventToCallbackMap[t];if(void 0!==i)for(var n=0;n<i.length;n++)if(i[n]===e){i.splice(n,1);break}},_cleanUpEventCallbacksMap:function(){for(var t=Object.keys(this.eventToCallbackMap),e=0;e<t.length;e++){var i=t[e];this.eventToCallbackMap[i]=null}},_showTooltip:function(){this.options.tooltip_split===!1?(this._addClass(this.tooltip,"in"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"in"),this._addClass(this.tooltip_max,"in"),this.tooltip.style.display="none"),this._state.over=!0},_hideTooltip:function(){this._state.inDrag===!1&&this.alwaysShowTooltip!==!0&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in")),this._state.over=!1},_layout:function(){var t;if(t=this.options.reversed?[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]],this.handle1.style[this.stylePos]=t[0]+"%",this.handle1.setAttribute("aria-valuenow",this._state.value[0]),this.handle2.style[this.stylePos]=t[1]+"%",this.handle2.setAttribute("aria-valuenow",this._state.value[1]),Array.isArray(this.options.ticks)&&this.options.ticks.length>0){var e="vertical"===this.options.orientation?"height":"width",i="vertical"===this.options.orientation?"marginTop":"marginLeft",n=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var o=0;if(0===this.options.ticks_positions.length)"vertical"!==this.options.orientation&&(this.tickLabelContainer.style[i]=-n/2+"px"),o=this.tickLabelContainer.offsetHeight;else for(s=0;s<this.tickLabelContainer.childNodes.length;s++)this.tickLabelContainer.childNodes[s].offsetHeight>o&&(o=this.tickLabelContainer.childNodes[s].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=o+"px")}for(var s=0;s<this.options.ticks.length;s++){var r=this.options.ticks_positions[s]||this._toPercentage(this.options.ticks[s]);this.options.reversed&&(r=100-r),this.ticks[s].style[this.stylePos]=r+"%",this._removeClass(this.ticks[s],"in-selection"),this.options.range?r>=t[0]&&r<=t[1]&&this._addClass(this.ticks[s],"in-selection"):"after"===this.options.selection&&r>=t[0]?this._addClass(this.ticks[s],"in-selection"):"before"===this.options.selection&&r<=t[0]&&this._addClass(this.ticks[s],"in-selection"),this.tickLabels[s]&&(this.tickLabels[s].style[e]=n+"px","vertical"!==this.options.orientation&&void 0!==this.options.ticks_positions[s]?(this.tickLabels[s].style.position="absolute",this.tickLabels[s].style[this.stylePos]=r+"%",this.tickLabels[s].style[i]=-n/2+"px"):"vertical"===this.options.orientation&&(this.tickLabels[s].style.marginLeft=this.sliderElem.offsetWidth+"px",this.tickLabelContainer.style.marginTop=this.sliderElem.offsetWidth/2*-1+"px"))}}var a;if(this.options.range){a=this.options.formatter(this._state.value),this._setText(this.tooltipInner,a),this.tooltip.style[this.stylePos]=(t[1]+t[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px"),"vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");var l=this.options.formatter(this._state.value[0]);this._setText(this.tooltipInner_min,l);var u=this.options.formatter(this._state.value[1]);this._setText(this.tooltipInner_max,u),this.tooltip_min.style[this.stylePos]=t[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-top",-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-left",-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=t[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-top",-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,"margin-left",-this.tooltip_max.offsetWidth/2+"px")}else a=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,a),this.tooltip.style[this.stylePos]=t[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");if("vertical"===this.options.orientation)this.trackLow.style.top="0",this.trackLow.style.height=Math.min(t[0],t[1])+"%",this.trackSelection.style.top=Math.min(t[0],t[1])+"%",this.trackSelection.style.height=Math.abs(t[0]-t[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(t[0],t[1])-Math.abs(t[0]-t[1])+"%";else{this.trackLow.style.left="0",this.trackLow.style.width=Math.min(t[0],t[1])+"%",this.trackSelection.style.left=Math.min(t[0],t[1])+"%",this.trackSelection.style.width=Math.abs(t[0]-t[1])+"%",this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(t[0],t[1])-Math.abs(t[0]-t[1])+"%";var c=this.tooltip_min.getBoundingClientRect(),h=this.tooltip_max.getBoundingClientRect();"bottom"===this.options.tooltip_position?c.right>h.left?(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top="",this.tooltip_max.style.bottom="22px"):(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top=this.tooltip_min.style.top,this.tooltip_max.style.bottom=""):c.right>h.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=this.tooltip_min.style.top)}},_resize:function(){this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this._layout()},_removeProperty:function(t,e){t.style.removeProperty?t.style.removeProperty(e):t.style.removeAttribute(e)},_mousedown:function(t){if(!this._state.enabled)return!1;this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos];var e=this._getPercentage(t);if(this.options.range){var i=Math.abs(this._state.percentage[0]-e),n=Math.abs(this._state.percentage[1]-e);this._state.dragged=n>i?0:1,this._adjustPercentageForRangeSliders(e)}else this._state.dragged=0;this._state.percentage[this._state.dragged]=e,this._layout(),this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!0;var o=this._calculateValue();return this._trigger("slideStart",o),this._setDataVal(o),this.setValue(o,!1,!0),this._pauseEvent(t),this.options.focus&&this._triggerFocusOnHandle(this._state.dragged),!0},_touchstart:function(t){if(void 0===t.changedTouches)return void this._mousedown(t);var e=t.changedTouches[0];this.touchX=e.pageX,this.touchY=e.pageY},_triggerFocusOnHandle:function(t){0===t&&this.handle1.focus(),1===t&&this.handle2.focus()},_keydown:function(t,e){if(!this._state.enabled)return!1;var i;switch(e.keyCode){case 37:case 40:i=-1;break;case 39:case 38:i=1}if(i){if(this.options.natural_arrow_keys){var n="vertical"===this.options.orientation&&!this.options.reversed,o="horizontal"===this.options.orientation&&this.options.reversed;(n||o)&&(i=-i)}var s=this._state.value[t]+i*this.options.step;return this.options.range&&(s=[t?this._state.value[0]:s,t?s:this._state.value[1]]),this._trigger("slideStart",s),this._setDataVal(s),this.setValue(s,!0,!0),this._setDataVal(s),this._trigger("slideStop",s),this._layout(),this._pauseEvent(e),!1}},_pauseEvent:function(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1},_mousemove:function(t){if(!this._state.enabled)return!1;var e=this._getPercentage(t);this._adjustPercentageForRangeSliders(e),this._state.percentage[this._state.dragged]=e,this._layout();var i=this._calculateValue(!0);return this.setValue(i,!0,!0),!1},_touchmove:function(t){if(void 0!==t.changedTouches){var e=t.changedTouches[0],i=e.pageX-this.touchX,n=e.pageY-this.touchY;this._state.inDrag||("vertical"===this.options.orientation&&5>=i&&i>=-5&&(n>=15||-15>=n)?this._mousedown(t):5>=n&&n>=-5&&(i>=15||-15>=i)&&this._mousedown(t))}},_adjustPercentageForRangeSliders:function(t){if(this.options.range){var e=this._getNumDigitsAfterDecimalPlace(t);e=e?e-1:0;var i=this._applyToFixedAndParseFloat(t,e);0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],e)<i?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],e)>i&&(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0)}},_mouseup:function(){if(!this._state.enabled)return!1;this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!1,this._state.over===!1&&this._hideTooltip();
var t=this._calculateValue(!0);return this._layout(),this._setDataVal(t),this._trigger("slideStop",t),!1},_calculateValue:function(t){var e;if(this.options.range?(e=[this.options.min,this.options.max],0!==this._state.percentage[0]&&(e[0]=this._toValue(this._state.percentage[0]),e[0]=this._applyPrecision(e[0])),100!==this._state.percentage[1]&&(e[1]=this._toValue(this._state.percentage[1]),e[1]=this._applyPrecision(e[1]))):(e=this._toValue(this._state.percentage[0]),e=parseFloat(e),e=this._applyPrecision(e)),t){for(var i=[e,1/0],n=0;n<this.options.ticks.length;n++){var o=Math.abs(this.options.ticks[n]-e);o<=i[1]&&(i=[this.options.ticks[n],o])}if(i[1]<=this.options.ticks_snap_bounds)return i[0]}return e},_applyPrecision:function(t){var e=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(t,e)},_getNumDigitsAfterDecimalPlace:function(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0},_applyToFixedAndParseFloat:function(t,e){var i=t.toFixed(e);return parseFloat(i)},_getPercentage:function(t){!this.touchCapable||"touchstart"!==t.type&&"touchmove"!==t.type||(t=t.touches[0]);var e=t[this.mousePos],i=this._state.offset[this.stylePos],n=e-i,o=n/this._state.size*100;return o=Math.round(o/this._state.percentage[2])*this._state.percentage[2],this.options.reversed&&(o=100-o),Math.max(0,Math.min(100,o))},_validateInputValue:function(t){if("number"==typeof t)return t;if(Array.isArray(t))return this._validateArray(t),t;throw new Error(n.formatInvalidInputErrorMsg(t))},_validateArray:function(t){for(var e=0;e<t.length;e++){var i=t[e];if("number"!=typeof i)throw new Error(n.formatInvalidInputErrorMsg(i))}},_setDataVal:function(t){this.element.setAttribute("data-value",t),this.element.setAttribute("value",t),this.element.value=t},_trigger:function(e,i){i=i||0===i?i:void 0;var n=this.eventToCallbackMap[e];if(n&&n.length)for(var o=0;o<n.length;o++){var s=n[o];s(i)}t&&this._triggerJQueryEvent(e,i)},_triggerJQueryEvent:function(t,e){var i={type:t,value:e};this.$element.trigger(i),this.$sliderElem.trigger(i)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(t,e){"undefined"!=typeof t.textContent?t.textContent=e:"undefined"!=typeof t.innerText&&(t.innerText=e)},_removeClass:function(t,e){for(var i=e.split(" "),n=t.className,o=0;o<i.length;o++){var s=i[o],r=new RegExp("(?:\\s|^)"+s+"(?:\\s|$)");n=n.replace(r," ")}t.className=n.trim()},_addClass:function(t,e){for(var i=e.split(" "),n=t.className,o=0;o<i.length;o++){var s=i[o],r=new RegExp("(?:\\s|^)"+s+"(?:\\s|$)"),a=r.test(n);a||(n+=" "+s)}t.className=n.trim()},_offsetLeft:function(t){return t.getBoundingClientRect().left},_offsetTop:function(t){for(var e=t.offsetTop;(t=t.offsetParent)&&!isNaN(t.offsetTop);)e+=t.offsetTop,"BODY"!==t.tagName&&(e-=t.scrollTop);return e},_offset:function(t){return{left:this._offsetLeft(t),top:this._offsetTop(t)}},_css:function(e,i,n){if(t)t.style(e,i,n);else{var o=i.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(t,e){return e.toUpperCase()});e.style[o]=n}},_toValue:function(t){return this.options.scale.toValue.apply(this,[t])},_toPercentage:function(t){return this.options.scale.toPercentage.apply(this,[t])},_setTooltipPosition:function(){var t=[this.tooltip,this.tooltip_min,this.tooltip_max];if("vertical"===this.options.orientation){var e=this.options.tooltip_position||"right",i="left"===e?"right":"left";t.forEach(function(t){this._addClass(t,e),t.style[i]="100%"}.bind(this))}else t.forEach("bottom"===this.options.tooltip_position?function(t){this._addClass(t,"bottom"),t.style.top="22px"}.bind(this):function(t){this._addClass(t,"top"),t.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}},t){var s=t.fn.slider?"bootstrapSlider":"slider";t.bridget(s,e),t(function(){t("input[data-provide=slider]")[s]()})}}(t),e}),!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){"use strict";function e(t,e,i){var n;return function(){var o=this,s=arguments,r=function(){n=null,i||t.apply(o,s)},a=i&&!n;clearTimeout(n),n=setTimeout(r,e),a&&t.apply(o,s)}}function i(t){var e=++u;return String(null==t?"rmjs-":t)+e}function n(t){var e=t.clone().css({height:"auto",width:t.width(),maxHeight:"none",overflow:"hidden"}).insertAfter(t),i=e.outerHeight(),n=parseInt(e.css({maxHeight:""}).css("max-height").replace(/[^-\d\.]/g,""),10),o=t.data("defaultHeight");e.remove();var s=n||t.data("collapsedHeight")||o;t.data({expandedHeight:i,maxHeight:n,collapsedHeight:s}).css({maxHeight:"none"})}function o(t){if(!l[t.selector]){var e=" ";t.embedCSS&&""!==t.blockCSS&&(e+=t.selector+" + [data-readmore-toggle], "+t.selector+"[data-readmore]{"+t.blockCSS+"}"),e+=t.selector+"[data-readmore]{transition: height "+t.speed+"ms;overflow: hidden;}",function(t,e){var i=t.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(t.createTextNode(e)),t.getElementsByTagName("head")[0].appendChild(i)}(document,e),l[t.selector]=!0}}function s(e,i){this.element=e,this.options=t.extend({},a,i),o(this.options),this._defaults=a,this._name=r,this.init(),window.addEventListener?(window.addEventListener("load",c),window.addEventListener("resize",c)):(window.attachEvent("load",c),window.attachEvent("resize",c))}var r="readmore",a={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,blockCSS:"display: block; width: 100%;",startOpen:!1,blockProcessed:function(){},beforeToggle:function(){},afterToggle:function(){}},l={},u=0,c=e(function(){t("[data-readmore]").each(function(){var e=t(this),i="true"===e.attr("aria-expanded");n(e),e.css({height:e.data(i?"expandedHeight":"collapsedHeight")})})},100);s.prototype={init:function(){var e=t(this.element);e.data({defaultHeight:this.options.collapsedHeight,heightMargin:this.options.heightMargin}),n(e);var o=e.data("collapsedHeight"),s=e.data("heightMargin");if(e.outerHeight(!0)<=o+s)return this.options.blockProcessed&&"function"==typeof this.options.blockProcessed&&this.options.blockProcessed(e,!1),!0;var r=e.attr("id")||i(),a=this.options.startOpen?this.options.lessLink:this.options.moreLink;e.attr({"data-readmore":"","aria-expanded":this.options.startOpen,id:r}),e.after(t(a).on("click",function(t){return function(i){t.toggle(this,e[0],i)}}(this)).attr({"data-readmore-toggle":r,"aria-controls":r})),this.options.startOpen||e.css({height:o}),this.options.blockProcessed&&"function"==typeof this.options.blockProcessed&&this.options.blockProcessed(e,!0)},toggle:function(e,i,n){n&&n.preventDefault(),e||(e=t('[aria-controls="'+this.element.id+'"]')[0]),i||(i=this.element);var o=t(i),s="",r="",a=!1,l=o.data("collapsedHeight");o.height()<=l?(s=o.data("expandedHeight")+"px",r="lessLink",a=!0):(s=l,r="moreLink"),this.options.beforeToggle&&"function"==typeof this.options.beforeToggle&&this.options.beforeToggle(e,o,!a),o.css({height:s}),o.on("transitionend",function(i){return function(){i.options.afterToggle&&"function"==typeof i.options.afterToggle&&i.options.afterToggle(e,o,a),t(this).attr({"aria-expanded":a}).off("transitionend")}}(this)),t(e).replaceWith(t(this.options[r]).on("click",function(t){return function(e){t.toggle(this,i,e)}}(this)).attr({"data-readmore-toggle":o.attr("id"),"aria-controls":o.attr("id")}))},destroy:function(){t(this.element).each(function(){var e=t(this);e.attr({"data-readmore":null,"aria-expanded":null}).css({maxHeight:"",height:""}).next("[data-readmore-toggle]").remove(),e.removeData()})}},t.fn.readmore=function(e){var i=arguments,n=this.selector;return e=e||{},"object"==typeof e?this.each(function(){if(t.data(this,"plugin_"+r)){var i=t.data(this,"plugin_"+r);i.destroy.apply(i)}e.selector=n,t.data(this,"plugin_"+r,new s(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?this.each(function(){var n=t.data(this,"plugin_"+r);n instanceof s&&"function"==typeof n[e]&&n[e].apply(n,Array.prototype.slice.call(i,1))}):void 0}}),function(t){"use strict";function e(t,i){return new e.prototype.init(t,i)}Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;return function(){return e.apply(t)}});var i=0;t.fn.redactor=function(i){var n=[],o=Array.prototype.slice.call(arguments,1);return this.each("string"==typeof i?function(){var e,s=t.data(this,"redactor");if("-1"!=i.search(/\./)?(e=i.split("."),"undefined"!=typeof s[e[0]]&&(e=s[e[0]][e[1]])):e=s[i],"undefined"!=typeof s&&t.isFunction(e)){var r=e.apply(s,o);void 0!==r&&r!==s&&n.push(r)}else t.error('No such method "'+i+'" for Redactor')}:function(){t.data(this,"redactor",{}),t.data(this,"redactor",e(this,i))}),0===n.length?this:1===n.length?n[0]:n},t.Redactor=e,t.Redactor.VERSION="10.2.5",t.Redactor.modules=["alignment","autosave","block","buffer","build","button","caret","clean","code","core","dropdown","file","focus","image","indent","inline","insert","keydown","keyup","lang","line","link","linkify","list","modal","observe","paragraphize","paste","placeholder","progress","selection","shortcuts","tabifier","tidy","toolbar","upload","utils"],t.Redactor.opts={lang:"en",direction:"ltr",plugins:!1,focus:!1,focusEnd:!1,placeholder:!1,visual:!0,tabindex:!1,minHeight:!1,maxHeight:!1,linebreaks:!1,replaceDivs:!0,paragraphize:!0,cleanStyleOnEnter:!1,enterKey:!0,cleanOnPaste:!0,cleanSpaces:!0,pastePlainText:!1,autosave:!1,autosaveName:!1,autosaveInterval:60,autosaveOnChange:!1,autosaveFields:!1,linkTooltip:!0,linkProtocol:"http",linkNofollow:!1,linkSize:50,imageEditable:!0,imageLink:!0,imagePosition:!0,imageFloatMargin:"10px",imageResizable:!0,imageUpload:null,imageUploadParam:"file",uploadImageField:!1,dragImageUpload:!0,fileUpload:null,fileUploadParam:"file",dragFileUpload:!0,s3:!1,convertLinks:!0,convertUrlLinks:!0,convertImageLinks:!0,convertVideoLinks:!0,preSpaces:4,tabAsSpaces:!1,tabKey:!0,scrollTarget:!1,toolbar:!0,toolbarFixed:!0,toolbarFixedTarget:document,toolbarFixedTopOffset:0,toolbarExternal:!1,toolbarOverflow:!1,source:!0,buttons:["html","formatting","bold","italic","deleted","unorderedlist","orderedlist","outdent","indent","image","file","link","alignment","horizontalrule"],buttonsHide:[],buttonsHideOnMobile:[],formatting:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],formattingAdd:!1,tabifier:!0,deniedTags:["script","style"],allowedTags:!1,paragraphizeBlocks:["table","div","pre","form","ul","ol","h1","h2","h3","h4","h5","h6","dl","blockquote","figcaption","address","section","header","footer","aside","article","object","style","script","iframe","select","input","textarea","button","option","map","area","math","hr","fieldset","legend","hgroup","nav","figure","details","menu","summary","p"],removeComments:!1,replaceTags:[["strike","del"],["b","strong"]],replaceStyles:[["font-weight:\\s?bold","strong"],["font-style:\\s?italic","em"],["text-decoration:\\s?underline","u"],["text-decoration:\\s?line-through","del"]],removeDataAttr:!1,removeAttr:!1,allowedAttr:!1,removeWithoutAttr:["span"],removeEmpty:["p"],activeButtons:["deleted","italic","bold","underline","unorderedlist","orderedlist","alignleft","aligncenter","alignright","justify"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted",ul:"unorderedlist",ol:"orderedlist",u:"underline"},shortcuts:{"ctrl+shift+m, meta+shift+m":{func:"inline.removeFormat"},"ctrl+b, meta+b":{func:"inline.format",params:["bold"]},"ctrl+i, meta+i":{func:"inline.format",params:["italic"]},"ctrl+h, meta+h":{func:"inline.format",params:["superscript"]},"ctrl+l, meta+l":{func:"inline.format",params:["subscript"]},"ctrl+k, meta+k":{func:"link.show"},"ctrl+shift+7":{func:"list.toggle",params:["orderedlist"]},"ctrl+shift+8":{func:"list.toggle",params:["unorderedlist"]}},shortcutsAdd:!1,buffer:[],rebuffer:[],emptyHtml:"<p>&#x200b;</p>",invisibleSpace:"&#x200b;",imageTypes:["image/png","image/jpeg","image/gif"],indentValue:20,verifiedTags:["a","img","b","strong","sub","sup","i","em","u","small","strike","del","cite","ul","ol","li"],inlineTags:["strong","b","u","em","i","code","del","ins","samp","kbd","sup","sub","mark","var","cite","small"],alignmentTags:["P","H1","H2","H3","H4","H5","H6","DL","DT","DD","DIV","TD","BLOCKQUOTE","OUTPUT","FIGCAPTION","ADDRESS","SECTION","HEADER","FOOTER","ASIDE","ARTICLE"],blockLevelElements:["PRE","UL","OL","LI"],highContrast:!1,observe:{dropdowns:[]},langs:{en:{html:"HTML",video:"Insert Video",image:"Insert Image",table:"Table",link:"Link",link_insert:"Insert link",link_edit:"Edit link",unlink:"Unlink",formatting:"Formatting",paragraph:"Normal text",quote:"Quote",code:"Code",header1:"Header 1",header2:"Header 2",header3:"Header 3",header4:"Header 4",header5:"Header 5",bold:"Bold",italic:"Italic",fontcolor:"Font Color",backcolor:"Back Color",unorderedlist:"Unordered List",orderedlist:"Ordered List",outdent:"Outdent",indent:"Indent",cancel:"Cancel",insert:"Insert",save:"Save",_delete:"Delete",insert_table:"Insert Table",insert_row_above:"Add Row Above",insert_row_below:"Add Row Below",insert_column_left:"Add Column Left",insert_column_right:"Add Column Right",delete_column:"Delete Column",delete_row:"Delete Row",delete_table:"Delete Table",rows:"Rows",columns:"Columns",add_head:"Add Head",delete_head:"Delete Head",title:"Title",image_position:"Position",none:"None",left:"Left",right:"Right",center:"Center",image_web_link:"Image Web Link",text:"Text",mailto:"Email",web:"URL",video_html_code:"Video Embed Code or Youtube/Vimeo Link",file:"Insert File",upload:"Upload",download:"Download",choose:"Choose",or_choose:"Or choose",drop_file_here:"Drop file here",align_left:"Align text to the left",align_center:"Center text",align_right:"Align text to the right",align_justify:"Justify text",horizontalrule:"Insert Horizontal Rule",deleted:"Deleted",anchor:"Anchor",link_new_tab:"Open link in new tab",underline:"Underline",alignment:"Alignment",filename:"Name (optional)",edit:"Edit",upload_label:"Drop file here or "}},linkify:{regexps:{youtube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.\-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,vimeo:/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,image:/((https?|www)[^\s]+\.)(jpe?g|png|gif)(\?[^\s-]+)?/gi,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/gi}},codemirror:!1},e.fn=t.Redactor.prototype={keyCode:{BACKSPACE:8,DELETE:46,UP:38,DOWN:40,ENTER:13,SPACE:32,ESC:27,TAB:9,CTRL:17,META:91,SHIFT:16,ALT:18,RIGHT:39,LEFT:37,LEFT_WIN:91},init:function(e,n){if(this.$element=t(e),this.uuid=i++,this.rtePaste=!1,this.$pasteBox=!1,this.loadOptions(n),this.loadModules(),this.formatting={},t.merge(this.opts.blockLevelElements,this.opts.alignmentTags),this.reIsBlock=new RegExp("^("+this.opts.blockLevelElements.join("|")+")$","i"),this.tidy.setupAllowed(),this.opts.deniedTags!==!1)for(var o=["html","head","link","body","meta","applet"],s=0;s<o.length;s++)this.opts.deniedTags.push(o[s]);this.lang.load(),t.extend(this.opts.shortcuts,this.opts.shortcutsAdd),this.core.setCallback("start"),this.start=!0,this.build.run()},loadOptions:function(e){this.opts=t.extend({},t.extend(!0,{},t.Redactor.opts),this.$element.data(),e)},getModuleMethods:function(t){return Object.getOwnPropertyNames(t).filter(function(e){return"function"==typeof t[e]})},loadModules:function(){for(var e=t.Redactor.modules.length,i=0;e>i;i++)this.bindModuleMethods(t.Redactor.modules[i])},bindModuleMethods:function(t){if("undefined"!=typeof this[t]){this[t]=this[t]();for(var e=this.getModuleMethods(this[t]),i=e.length,n=0;i>n;n++)this[t][e[n]]=this[t][e[n]].bind(this)}},alignment:function(){return{left:function(){this.alignment.set("")},right:function(){this.alignment.set("right")},center:function(){this.alignment.set("center")},justify:function(){this.alignment.set("justify")},set:function(t){this.utils.browser("msie")||this.opts.linebreaks||this.$editor.focus(),this.alignment.blocks=this.selection.getBlocks(),this.alignment.type=t,this.buffer.set(),this.selection.save(),this.alignment.isLinebreaksOrNoBlocks()?this.alignment.setText():this.alignment.setBlocks(),this.selection.restore(),this.code.sync()},setText:function(){var e=this.selection.wrap("div");t(e).attr("data-tagblock","redactor").css("text-align",this.alignment.type)},setBlocks:function(){t.each(this.alignment.blocks,t.proxy(function(t,e){var i=this.utils.getAlignmentElement(e);i&&(this.alignment.isNeedReplaceElement(i)?this.alignment.replaceElement(i):this.alignment.alignElement(i))},this))},isLinebreaksOrNoBlocks:function(){return this.opts.linebreaks&&this.alignment.blocks[0]===!1},isNeedReplaceElement:function(t){return""===this.alignment.type&&"undefined"!=typeof t.data("tagblock")},replaceElement:function(t){t.replaceWith(t.html())},alignElement:function(t){t.css("text-align",this.alignment.type),this.utils.removeEmptyAttr(t,"style")}}},autosave:function(){return{html:!1,enable:function(){this.opts.autosave&&(this.autosave.name=this.opts.autosaveName?this.opts.autosaveName:this.$textarea.attr("name"),this.opts.autosaveOnChange||(this.autosaveInterval=setInterval(this.autosave.load,1e3*this.opts.autosaveInterval)))},onChange:function(){this.opts.autosaveOnChange&&this.autosave.load()},load:function(){if(this.opts.autosave&&(this.autosave.source=this.code.get(),this.autosave.html!==this.autosave.source)){var e={};e.name=this.autosave.name,e[this.autosave.name]=this.autosave.source,e=this.autosave.getHiddenFields(e);var i=t.ajax({url:this.opts.autosave,type:"post",headers:{Authorization:"Bearer "+sessionStorage.getItem("satellizer_token")},data:e});i.done(this.autosave.success)}},getHiddenFields:function(e){return this.opts.autosaveFields===!1||"object"!=typeof this.opts.autosaveFields?e:(t.each(this.opts.autosaveFields,t.proxy(function(i,n){null!==n&&0===n.toString().indexOf("#")&&(n=t(n).val()),e[i]=n},this)),e)},success:function(e){var i;try{i=t.parseJSON(e)}catch(n){i=e}var o="undefined"==typeof i.error?"autosave":"autosaveError";this.core.setCallback(o,this.autosave.name,i),this.autosave.html=this.autosave.source},disable:function(){clearInterval(this.autosaveInterval)}}},block:function(){return{formatting:function(t){this.block.clearStyle=!1;var e,i;"undefined"!=typeof this.formatting[t].data?e="data":"undefined"!=typeof this.formatting[t].attr?e="attr":"undefined"!=typeof this.formatting[t]["class"]&&(e="class"),"undefined"!=typeof this.formatting[t].clear&&(this.block.clearStyle=!0),e&&(i=this.formatting[t][e]),this.block.format(this.formatting[t].tag,e,i)},format:function(e,i,n){"quote"==e&&(e="blockquote");var o=["p","pre","blockquote","h1","h2","h3","h4","h5","h6"];if(-1!=t.inArray(e,o)){this.block.isRemoveInline="pre"==e||-1!=e.search(/h[1-6]/i),this.utils.browser("msie")||this.$editor.focus();var s=t.trim(this.$editor.html());if(this.block.isEmpty=this.utils.isEmpty(s),this.utils.browser("mozilla")&&!this.focus.isFocused()&&this.block.isEmpty){var r;this.opts.linebreaks||(r=this.$editor.children().first(),this.caret.setEnd(r))}this.block.blocks=this.selection.getBlocks(),this.block.blocksSize=this.block.blocks.length,this.block.type=i,this.block.value=n,this.buffer.set(),this.selection.save(),this.block.set(e),this.selection.restore(),this.code.sync(),this.observe.load()}},set:function(t){this.selection.get(),this.block.containerTag=this.range.commonAncestorContainer.tagName,this.range.collapsed?this.block.setCollapsed(t):this.block.setMultiple(t)},setCollapsed:function(e){if(this.opts.linebreaks&&this.block.isEmpty&&"p"!=e){var i=document.createElement(e);return this.$editor.html(i),void this.caret.setEnd(i)}var n=this.block.blocks[0];if(n!==!1){if("LI"==n.tagName){if("blockquote"!=e)return;return void this.block.formatListToBlockquote()}var o="TD"==this.block.containerTag||"TH"==this.block.containerTag;if(o&&!this.opts.linebreaks)document.execCommand("formatblock",!1,"<"+e+">"),n=this.selection.getBlock(),this.block.toggle(t(n));else if(n.tagName.toLowerCase()!=e)if(this.opts.linebreaks&&"p"==e)t(n).append("<br>"),this.utils.replaceWithContents(n);else{var s=this.utils.replaceToTag(n,e);this.block.toggle(s),"p"!=e&&"blockquote"!=e&&s.find("img").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(s),("p"==e||this.block.headTag)&&s.find("p").contents().unwrap(),this.block.formatTableWrapping(s)}else if("blockquote"==e&&n.tagName.toLowerCase()==e)if(this.opts.linebreaks)t(n).append("<br>"),this.utils.replaceWithContents(n);else{var r=this.utils.replaceToTag(n,"p");this.block.toggle(r)}else n.tagName.toLowerCase()==e&&this.block.toggle(t(n));"undefined"==typeof this.block.type&&"undefined"==typeof this.block.value&&t(n).removeAttr("class").removeAttr("style")}},setMultiple:function(e){var i=this.block.blocks[0],n="TD"==this.block.containerTag||"TH"==this.block.containerTag;if(i!==!1&&1===this.block.blocksSize)if(i.tagName.toLowerCase()==e&&"blockquote"==e)if(this.opts.linebreaks)t(i).append("<br>"),this.utils.replaceWithContents(i);else{var o=this.utils.replaceToTag(i,"p");this.block.toggle(o)}else if("LI"==i.tagName){if("blockquote"!=e)return;this.block.formatListToBlockquote()}else if("BLOCKQUOTE"==this.block.containerTag)this.block.formatBlockquote(e);else if(this.opts.linebreaks&&(n||this.range.commonAncestorContainer!=i))this.block.formatWrap(e);else if(this.opts.linebreaks&&"p"==e)t(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else if("TD"===i.tagName)this.block.formatWrap(e);else{var s=this.utils.replaceToTag(i,e);this.block.toggle(s),this.block.isRemoveInline&&this.utils.removeInlineTags(s),("p"==e||this.block.headTag)&&s.find("p").contents().unwrap()}else if(this.opts.linebreaks||"p"!=e){if("blockquote"==e){for(var r=0,a=0;a<this.block.blocksSize;a++)"BLOCKQUOTE"==this.block.blocks[a].tagName&&r++;if(r==this.block.blocksSize)return void t.each(this.block.blocks,t.proxy(function(e,i){var n=!1;this.opts.linebreaks?(t(i).prepend("<br>").append("<br>"),n=this.utils.replaceWithContents(i)):n=this.utils.replaceToTag(i,"p"),n&&"undefined"==typeof this.block.type&&"undefined"==typeof this.block.value&&n.removeAttr("class").removeAttr("style")},this))}this.block.formatWrap(e)}else{var l=0,u=!1;"class"==this.block.type&&(u="toggle",l=t(this.block.blocks).filter("."+this.block.value).length,this.block.blocksSize==l?u="toggle":this.block.blocksSize>l?u="set":0===l&&(u="set"));var c=["ul","ol","li","td","th","dl","dt","dd"];t.each(this.block.blocks,t.proxy(function(i,n){if(-1==t.inArray(n.tagName.toLowerCase(),c)){var o=this.utils.replaceToTag(n,e);u?"toggle"==u?this.block.toggle(o):"remove"==u?this.block.remove(o):"set"==u&&this.block.setForce(o):this.block.toggle(o),"p"!=e&&"blockquote"!=e&&o.find("img").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(o),("p"==e||this.block.headTag)&&o.find("p").contents().unwrap(),"undefined"==typeof this.block.type&&"undefined"==typeof this.block.value&&o.removeAttr("class").removeAttr("style")}},this))}},setForce:function(t){return this.block.clearStyle&&t.removeAttr("class").removeAttr("style"),"class"==this.block.type?void t.addClass(this.block.value):"attr"==this.block.type||"data"==this.block.type?void t.attr(this.block.value.name,this.block.value.value):void 0},toggle:function(t){return this.block.clearStyle&&t.removeAttr("class").removeAttr("style"),"class"==this.block.type?void t.toggleClass(this.block.value):"attr"==this.block.type||"data"==this.block.type?void(t.attr(this.block.value.name)==this.block.value.value?t.removeAttr(this.block.value.name):t.attr(this.block.value.name,this.block.value.value)):void t.removeAttr("style class")},remove:function(t){t.removeClass(this.block.value)},formatListToBlockquote:function(){var e=t(this.block.blocks[0]).closest("ul, ol",this.$editor[0]);t(e).find("ul, ol").contents().unwrap(),t(e).find("li").append(t("<br>")).contents().unwrap();var i=this.utils.replaceToTag(e,"blockquote");this.block.toggle(i)},formatBlockquote:function(e){document.execCommand("outdent"),document.execCommand("formatblock",!1,e),this.clean.clearUnverified(),this.$editor.find("p:empty").remove();var i=this.selection.getBlock();"p"!=e&&t(i).find("img").remove(),this.opts.linebreaks||this.block.toggle(t(i)),this.$editor.find("ul, ol, tr, blockquote, p").each(t.proxy(this.utils.removeEmpty,this)),this.opts.linebreaks&&"p"==e&&this.utils.replaceWithContents(i)},formatWrap:function(e){if("UL"==this.block.containerTag||"OL"==this.block.containerTag){if("blockquote"!=e)return;this.block.formatListToBlockquote()}var i=this.selection.wrap(e);if(i!==!1){var n=t(i);this.block.formatTableWrapping(n);var o=n.find(this.opts.blockLevelElements.join(",")+", td, table, thead, tbody, tfoot, th, tr");if(o.contents().unwrap(),"p"!=e&&"blockquote"!=e&&n.find("img").remove(),t.each(this.block.blocks,t.proxy(this.utils.removeEmpty,this)),n.append(this.selection.getMarker(2)),this.opts.linebreaks||this.block.toggle(n),this.$editor.find("ul, ol, tr, blockquote, p").each(t.proxy(this.utils.removeEmpty,this)),n.find("blockquote:empty").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(n),this.opts.linebreaks&&"p"==e&&this.utils.replaceWithContents(n),this.opts.linebreaks){var s=n.next().next();0!=s.size()&&"BR"===s[0].tagName&&s.remove()}}},formatTableWrapping:function(t){0!==t.closest("table",this.$editor[0]).length&&(0===t.closest("tr",this.$editor[0]).length&&t.wrap("<tr>"),0===t.closest("td",this.$editor[0]).length&&0===t.closest("th").length&&t.wrap("<td>"))},removeData:function(e){var i=this.selection.getBlocks();t(i).removeAttr("data-"+e),this.code.sync()},setData:function(e,i){var n=this.selection.getBlocks();t(n).attr("data-"+e,i),this.code.sync()},toggleData:function(e,i){var n=this.selection.getBlocks();t.each(n,function(){t(this).attr("data-"+e)?t(this).removeAttr("data-"+e):t(this).attr("data-"+e,i)})},removeAttr:function(e){var i=this.selection.getBlocks();t(i).removeAttr(e),this.code.sync()},setAttr:function(e,i){var n=this.selection.getBlocks();t(n).attr(e,i),this.code.sync()},toggleAttr:function(e,i){var n=this.selection.getBlocks();t.each(n,function(){t(this).attr(name)?t(this).removeAttr(name):t(this).attr(name,i)})},removeClass:function(e){var i=this.selection.getBlocks();t(i).removeClass(e),this.utils.removeEmptyAttr(i,"class"),this.code.sync()},setClass:function(e){var i=this.selection.getBlocks();t(i).addClass(e),this.code.sync()},toggleClass:function(e){var i=this.selection.getBlocks();t(i).toggleClass(e),this.code.sync()}}},buffer:function(){return{set:function(t){"undefined"==typeof t||"undo"==t?this.buffer.setUndo():this.buffer.setRedo()},setUndo:function(){this.selection.save(),this.opts.buffer.push(this.$editor.html()),this.selection.restore()},setRedo:function(){this.selection.save(),this.opts.rebuffer.push(this.$editor.html()),this.selection.restore()},getUndo:function(){this.$editor.html(this.opts.buffer.pop())},getRedo:function(){this.$editor.html(this.opts.rebuffer.pop())},add:function(){this.opts.buffer.push(this.$editor.html())},undo:function(){0!==this.opts.buffer.length&&(this.buffer.set("redo"),this.buffer.getUndo(),this.selection.restore(),setTimeout(t.proxy(this.observe.load,this),50))},redo:function(){0!==this.opts.rebuffer.length&&(this.buffer.set("undo"),this.buffer.getRedo(),this.selection.restore(),setTimeout(t.proxy(this.observe.load,this),50))}}},build:function(){return{focused:!1,blured:!0,run:function(){this.build.createContainerBox(),this.build.loadContent(),this.build.loadEditor(),this.build.enableEditor(),this.build.setCodeAndCall()},isTextarea:function(){return"TEXTAREA"===this.$element[0].tagName},createContainerBox:function(){this.$box=t('<div class="redactor-box" role="application" />')},createTextarea:function(){this.$textarea=t("<textarea />").attr("name",this.build.getTextareaName())},getTextareaName:function(){return"undefined"==typeof name?"content-"+this.uuid:this.$element.attr("id")},loadContent:function(){var e=this.build.isTextarea()?"val":"html";this.content=t.trim(this.$element[e]())},enableEditor:function(){this.$editor.attr({contenteditable:!0,dir:this.opts.direction})},loadEditor:function(){var t=this.build.isTextarea()?"fromTextarea":"fromElement";this.build[t]()},fromTextarea:function(){this.$editor=t("<div />"),this.$textarea=this.$element,this.$box.insertAfter(this.$element).append(this.$editor).append(this.$element),this.$editor.addClass("redactor-editor"),this.$element.hide()},fromElement:function(){this.$editor=this.$element,this.build.createTextarea(),this.$box.insertAfter(this.$editor).append(this.$editor).append(this.$textarea),this.$editor.addClass("redactor-editor"),this.$textarea.hide()},setCodeAndCall:function(){this.code.set(this.content),this.build.setOptions(),this.build.callEditor(),this.opts.visual||setTimeout(t.proxy(this.code.showCode,this),200)},callEditor:function(){this.build.disableMozillaEditing(),this.build.disableIeLinks(),this.build.setEvents(),this.build.setHelpers(),this.opts.toolbar&&(this.opts.toolbar=this.toolbar.init(),this.toolbar.build()),this.modal.loadTemplates(),this.build.plugins(),setTimeout(t.proxy(this.observe.load,this),4),this.core.setCallback("init")},setOptions:function(){t(this.$textarea).attr("dir",this.opts.direction),this.opts.linebreaks&&this.$editor.addClass("redactor-linebreaks"),this.opts.tabindex&&this.$editor.attr("tabindex",this.opts.tabindex),this.opts.minHeight&&this.$editor.css("minHeight",this.opts.minHeight),this.opts.maxHeight&&this.$editor.css("maxHeight",this.opts.maxHeight)},setEventDropUpload:function(t){if(t.preventDefault(),this.opts.dragImageUpload&&this.opts.dragFileUpload){var e=t.dataTransfer.files;this.upload.directUpload(e[0],t)}},setEventDrop:function(t){this.code.sync(),setTimeout(this.clean.clearUnverified,1),this.core.setCallback("drop",t)},setEvents:function(){this.$editor.on("dragover.redactor dragenter.redactor",function(t){t.preventDefault(),t.stopPropagation()}),this.$editor.on("drop.redactor",t.proxy(function(t){return t=t.originalEvent||t,void 0!==window.FormData&&t.dataTransfer?0===t.dataTransfer.files.length?this.build.setEventDrop(t):(this.build.setEventDropUpload(t),setTimeout(this.clean.clearUnverified,1),void this.core.setCallback("drop",t)):!0},this)),this.$editor.on("click.redactor",t.proxy(function(t){var e=this.core.getEvent(),i="click"==e||"arrow"==e?!1:"click";this.core.addEvent(i),this.utils.disableSelectAll(),this.core.setCallback("click",t)},this)),this.$editor.on("paste.redactor",t.proxy(this.paste.init,this)),this.$editor.on("cut.redactor",t.proxy(this.code.sync,this)),this.$editor.on("keydown.redactor",t.proxy(this.keydown.init,this)),this.$editor.on("keyup.redactor",t.proxy(this.keyup.init,this)),t.isFunction(this.opts.codeKeydownCallback)&&this.$textarea.on("keydown.redactor-textarea",t.proxy(this.opts.codeKeydownCallback,this)),t.isFunction(this.opts.codeKeyupCallback)&&this.$textarea.on("keyup.redactor-textarea",t.proxy(this.opts.codeKeyupCallback,this)),this.$editor.on("focus.redactor",t.proxy(function(e){t.isFunction(this.opts.focusCallback)&&this.core.setCallback("focus",e),this.build.focused=!0,this.build.blured=!1,this.selection.getCurrent()===!1&&(this.selection.get(),this.range.setStart(this.$editor[0],0),this.range.setEnd(this.$editor[0],0),this.selection.addRange())},this)),t(document).on("mousedown.redactor-blur."+this.uuid,t.proxy(function(e){this.start||this.rtePaste||0===t(e.target).closest(".redactor-editor, .redactor-toolbar, .redactor-dropdown").size()&&(this.utils.disableSelectAll(),!this.build.blured&&t.isFunction(this.opts.blurCallback)&&this.core.setCallback("blur",e),this.build.focused=!1,this.build.blured=!0)},this))},setHelpers:function(){this.linkify.isEnabled()&&this.linkify.format(),this.placeholder.enable(),this.opts.focus&&setTimeout(this.focus.setStart,100),this.opts.focusEnd&&setTimeout(this.focus.setEnd,100)},plugins:function(){this.opts.plugins&&t.each(this.opts.plugins,t.proxy(function(i,n){var o="undefined"!=typeof RedactorPlugins&&"undefined"!=typeof RedactorPlugins[n]?RedactorPlugins:e.fn;if(t.isFunction(o[n])){this[n]=o[n]();for(var s=this.getModuleMethods(this[n]),r=s.length,a=0;r>a;a++)this[n][s[a]]=this[n][s[a]].bind(this);t.isFunction(this[n].init)&&this[n].init()}},this))},disableMozillaEditing:function(){if(this.utils.browser("mozilla"))try{document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1)}catch(t){}},disableIeLinks:function(){this.utils.browser("msie")&&document.execCommand("AutoUrlDetect",!1,!1)}}},button:function(){return{build:function(e,i){var n=t('<a href="#" class="re-icon re-'+e+'" rel="'+e+'" />').attr({role:"button","aria-label":i.title,tabindex:"-1"});
if((i.func||i.command||i.dropdown)&&this.button.setEvent(n,e,i),i.dropdown){n.addClass("redactor-toolbar-link-dropdown").attr("aria-haspopup",!0);var o=t('<div class="redactor-dropdown redactor-dropdown-'+this.uuid+" redactor-dropdown-box-"+e+'" style="display: none;">');n.data("dropdown",o),this.dropdown.build(e,o,i.dropdown)}return this.utils.isDesktop()&&this.button.createTooltip(n,e,i.title),n},setEvent:function(e,i,n){e.on("touchstart click",t.proxy(function(t){if(e.hasClass("redactor-button-disabled"))return!1;var o="func",s=n.func;n.command?(o="command",s=n.command):n.dropdown&&(o="dropdown",s=!1),this.button.onClick(t,i,o,s)},this))},createTooltip:function(e,i,n){var o=t("<span>").addClass("redactor-toolbar-tooltip redactor-toolbar-tooltip-"+this.uuid+" redactor-toolbar-tooltip-"+i).hide().html(n);o.appendTo("body"),e.on("mouseover",function(){if(!t(this).hasClass("redactor-button-disabled")){var i=e.offset();o.css({top:i.top+e.innerHeight()+"px",left:i.left+e.innerWidth()/2-o.innerWidth()/2+"px"}),o.show()}}),e.on("mouseout",function(){o.hide()})},onClick:function(e,i,n,o){this.button.caretOffset=this.caret.getOffset(),e.preventDefault(),t(document).find(".redactor-toolbar-tooltip").hide(),this.utils.browser("msie")&&(e.returnValue=!1),"command"==n?this.inline.format(o):"dropdown"==n?this.dropdown.show(e,i):this.button.onClickCallback(e,o,i)},onClickCallback:function(e,i,n){var o;if(t.isFunction(i))i.call(this,n);else if("-1"!=i.search(/\./)){if(o=i.split("."),"undefined"==typeof this[o[0]])return;this[o[0]][o[1]](n)}else this[i](n);this.observe.buttons(e,n)},get:function(t){return this.$toolbar.find("a.re-"+t)},setActive:function(t){this.button.get(t).addClass("redactor-act")},setInactive:function(t){this.button.get(t).removeClass("redactor-act")},setInactiveAll:function(t){"undefined"==typeof t?this.$toolbar.find("a.re-icon").removeClass("redactor-act"):this.$toolbar.find("a.re-icon").not(".re-"+t).removeClass("redactor-act")},setActiveInVisual:function(){this.$toolbar.find("a.re-icon").not("a.re-html, a.re-fullscreen").removeClass("redactor-button-disabled")},setInactiveInCode:function(){this.$toolbar.find("a.re-icon").not("a.re-html, a.re-fullscreen").addClass("redactor-button-disabled")},changeIcon:function(t,e){this.button.get(t).addClass("re-"+e)},removeIcon:function(t,e){this.button.get(t).removeClass("re-"+e)},setAwesome:function(t,e){var i=this.button.get(t);i.removeClass("redactor-btn-image").addClass("fa-redactor-btn"),i.html('<i class="fa '+e+'"></i>')},addCallback:function(e,i){if("buffer"!=e){var n="dropdown"==i?"dropdown":"func",o=e.attr("rel");e.on("touchstart click",t.proxy(function(t){return e.hasClass("redactor-button-disabled")?!1:void this.button.onClick(t,o,n,i)},this))}},addDropdown:function(e,i){e.addClass("redactor-toolbar-link-dropdown").attr("aria-haspopup",!0);var n=e.attr("rel");this.button.addCallback(e,"dropdown");var o=t('<div class="redactor-dropdown redactor-dropdown-'+this.uuid+" redactor-dropdown-box-"+n+'" style="display: none;">');return e.data("dropdown",o),i&&this.dropdown.build(n,o,i),o},add:function(e,i){if(this.opts.toolbar){if(this.button.isMobileUndoRedo(e))return"buffer";var n=this.button.build(e,{title:i});return n.addClass("redactor-btn-image"),this.$toolbar.append(t("<li>").append(n)),n}},addFirst:function(e,i){if(this.opts.toolbar){if(this.button.isMobileUndoRedo(e))return"buffer";var n=this.button.build(e,{title:i});return n.addClass("redactor-btn-image"),this.$toolbar.prepend(t("<li>").append(n)),n}},addAfter:function(e,i,n){if(this.opts.toolbar){if(this.button.isMobileUndoRedo(i))return"buffer";var o=this.button.build(i,{title:n});o.addClass("redactor-btn-image");var s=this.button.get(e);return 0!==s.length?s.parent().after(t("<li>").append(o)):this.$toolbar.append(t("<li>").append(o)),o}},addBefore:function(e,i,n){if(this.opts.toolbar){if(this.button.isMobileUndoRedo(i))return"buffer";var o=this.button.build(i,{title:n});o.addClass("redactor-btn-image");var s=this.button.get(e);return 0!==s.length?s.parent().before(t("<li>").append(o)):this.$toolbar.append(t("<li>").append(o)),o}},remove:function(t){this.button.get(t).remove()},isMobileUndoRedo:function(t){return("undo"==t||"redo"==t)&&!this.utils.isDesktop()}}},caret:function(){return{setStart:function(e){if(this.utils.isBlock(e))this.caret.set(e,0,e,0);else{var i=this.utils.createSpaceElement();t(e).prepend(i),this.caret.setEnd(i)}},setEnd:function(t){return t=t[0]||t,1==t.lastChild.nodeType?this.caret.setAfter(t.lastChild):void this.caret.set(t,1,t,1)},set:function(e,i,n,o){if(e=e[0]||e,n=n[0]||n,this.utils.isBlockTag(e.tagName)&&""===e.innerHTML&&(e.innerHTML=this.opts.invisibleSpace),"BR"==e.tagName&&this.opts.linebreaks===!1){var s=t(this.opts.emptyHtml)[0];t(e).replaceWith(s),e=s,n=e}this.selection.get();try{this.range.setStart(e,i),this.range.setEnd(n,o)}catch(r){}this.selection.addRange()},setAfter:function(e){try{var i=t(e)[0].tagName;if("BR"==i||this.utils.isBlock(e))"BR"!=i&&this.utils.browser("msie")?this.caret.setStart(t(e).next()):this.caret.setAfterOrBefore(e,"after");else{var n=this.utils.createSpaceElement();t(e).after(n),this.caret.setEnd(n)}}catch(o){var n=this.utils.createSpaceElement();t(e).after(n),this.caret.setEnd(n)}},setBefore:function(e){this.utils.isBlock(e)?this.caret.setEnd(t(e).prev()):this.caret.setAfterOrBefore(e,"before")},setAfterOrBefore:function(t,e){if(this.utils.browser("msie")||this.$editor.focus(),t=t[0]||t,this.selection.get(),"after"==e)try{this.range.setStartAfter(t),this.range.setEndAfter(t)}catch(i){}else try{this.range.setStartBefore(t),this.range.setEndBefore(t)}catch(i){}this.range.collapse(!1),this.selection.addRange()},getOffsetOfElement:function(e){e=e[0]||e,this.selection.get();var i=this.range.cloneRange();return i.selectNodeContents(e),i.setEnd(this.range.endContainer,this.range.endOffset),t.trim(i.toString()).length},getOffset:function(){var t=0,e=window.getSelection();if(e.rangeCount>0){var i=window.getSelection().getRangeAt(0),n=i.cloneRange();n.selectNodeContents(this.$editor[0]),n.setEnd(i.endContainer,i.endOffset),t=n.toString().length}return t},setOffset:function(t,e){"undefined"==typeof e&&(e=t),this.focus.isFocused()||this.focus.setStart();for(var i,n=(this.selection.get(),0),o=document.createTreeWalker(this.$editor[0],NodeFilter.SHOW_TEXT,null,null);i=o.nextNode();)if(n+=i.nodeValue.length,n>t&&(this.range.setStart(i,i.nodeValue.length+t-n),t=1/0),n>=e){this.range.setEnd(i,i.nodeValue.length+e-n);break}this.range.collapse(!1),this.selection.addRange()},setToPoint:function(t,e){this.caret.setOffset(t,e)},getCoords:function(){return this.caret.getOffset()}}},clean:function(){return{onSet:function(e){e=this.clean.savePreCode(e),e=e.replace(/<script(.*?[^>]?)>([\w\W]*?)<\/script>/gi,'<pre class="redactor-script-tag" style="display: none;" $1>$2</pre>'),e=e.replace(/\$/g,"&#36;"),e=e.replace(/<a href="(.*?[^>]?)\xae(.*?[^>]?)">/gi,'<a href="$1&reg$2">'),this.opts.replaceDivs&&!this.opts.linebreaks&&(e=this.clean.replaceDivs(e)),this.opts.linebreaks&&(e=this.clean.replaceParagraphsToBr(e)),e=this.clean.saveFormTags(e);var i=t("<div>");i.html(e);var n=i.find("font[style]");return 0!==n.length&&(n.replaceWith(function(){var e=t(this),i=t("<span>").attr("style",e.attr("style"));return i.append(e.contents())}),e=i.html()),i.remove(),e=e.replace(/<font(.*?)>/gi,""),e=e.replace(/<\/font>/gi,""),e=this.tidy.load(e),this.opts.paragraphize&&(e=this.paragraphize.load(e)),e=this.clean.setVerified(e),e=this.clean.convertInline(e),e=e.replace(/&amp;/g,"&")},onSync:function(e){if(e=e.replace(/\u200B/g,""),e=e.replace(/&#x200b;/gi,""),this.opts.cleanSpaces&&(e=e.replace(/&nbsp;/gi," ")),-1!=e.search(/^<p>(||\s||<br\s?\/?>||&nbsp;)<\/p>$/i))return"";e=e.replace(/<pre class="redactor-script-tag" style="display: none;"(.*?[^>]?)>([\w\W]*?)<\/pre>/gi,"<script$1>$2</script>"),e=this.clean.restoreFormTags(e);var i={"\u2122":"&trade;","\xa9":"&copy;","\u2026":"&hellip;","\u2014":"&mdash;","\u2010":"&dash;"};t.each(i,function(t,i){e=e.replace(new RegExp(t,"g"),i)}),this.utils.browser("mozilla")&&(e=e.replace(/<br\s?\/?>$/gi,"")),e=e.replace(new RegExp("<br\\s?/?></li>","gi"),"</li>"),e=e.replace(new RegExp("</li><br\\s?/?>","gi"),"</li>"),e=e.replace(/<(.*?)rel="\s*?"(.*?[^>]?)>/gi,'<$1$2">'),e=e.replace(/<(.*?)style="\s*?"(.*?[^>]?)>/gi,'<$1$2">'),e=e.replace(/="">/gi,">"),e=e.replace(/""">/gi,'">'),e=e.replace(/"">/gi,'">'),e=e.replace(/<div(.*?)data-tagblock="redactor"(.*?[^>])>/gi,"<div$1$2>"),e=e.replace(/<(.*?) data-verified="redactor"(.*?[^>])>/gi,"<$1$2>");var n=t("<div/>").html(t.parseHTML(e,document,!0));return n.find("span").removeAttr("rel"),n.find("pre .redactor-invisible-space").each(function(){t(this).contents().unwrap()}),e=n.html(),e=e.replace(/<img(.*?[^>])rel="(.*?[^>])"(.*?[^>])>/gi,"<img$1$3>"),e=e.replace(/<span class="redactor-invisible-space">(.*?)<\/span>/gi,"$1"),e=e.replace(/ data-save-url="(.*?[^>])"/gi,""),e=e.replace(/<span(.*?)id="redactor-image-box"(.*?[^>])>([\w\W]*?)<img(.*?)><\/span>/gi,"$3<img$4>"),e=e.replace(/<span(.*?)id="redactor-image-resizer"(.*?[^>])>(.*?)<\/span>/gi,""),e=e.replace(/<span(.*?)id="redactor-image-editter"(.*?[^>])>(.*?)<\/span>/gi,""),e=e.replace(/<font(.*?)>/gi,""),e=e.replace(/<\/font>/gi,""),e=this.tidy.load(e),this.opts.linkNofollow&&(e=e.replace(/<a(.*?)rel="nofollow"(.*?[^>])>/gi,"<a$1$2>"),e=e.replace(/<a(.*?[^>])>/gi,'<a$1 rel="nofollow">')),e=e.replace(/\sdata-redactor-(tag|class|style)="(.*?[^>])"/gi,""),e=e.replace(new RegExp('<(.*?) data-verified="redactor"(.*?[^>])>',"gi"),"<$1$2>"),e=e.replace(new RegExp('<(.*?) data-verified="redactor">',"gi"),"<$1>"),e=e.replace(/&amp;/g,"&")},onPaste:function(e,i){if(e=t.trim(e),e=e.replace(/\$/g,"&#36;"),e=e.replace(/<span class="s[0-9]">/gi,"<span>"),e=e.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),e=e.replace(/<span class="Apple-tab-span"[^>]*>\t<\/span>/gi,"	"),e=e.replace(/<span[^>]*>(\s|&nbsp;)<\/span>/gi," "),this.opts.pastePlainText)return this.clean.getPlainText(e);if(!this.utils.isSelectAll()&&"undefined"==typeof i){if(this.utils.isCurrentOrParent(["FIGCAPTION","A"]))return this.clean.getPlainText(e,!1);if(this.utils.isCurrentOrParent("PRE"))return e=e.replace(/\u201d/g,'"'),e=e.replace(/\u201c/g,'"'),e=e.replace(/\u2018/g,"'"),e=e.replace(/\u2019/g,"'"),this.clean.getPreCode(e);if(this.utils.isCurrentOrParent(["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"])){if(e=this.clean.getOnlyImages(e),!this.utils.browser("msie")){var n=this.selection.getBlock();n&&"P"==n.tagName&&(e=e.replace(/<img(.*?)>/gi,"<p><img$1></p>"))}return e}if(this.utils.isCurrentOrParent(["TD"]))return e=this.clean.onPasteTidy(e,"td"),this.opts.linebreaks&&(e=this.clean.replaceParagraphsToBr(e)),e=this.clean.replaceDivsToBr(e);if(this.utils.isCurrentOrParent(["LI"]))return this.clean.onPasteTidy(e,"li")}return e=this.clean.isSingleLine(e,i),this.clean.singleLine||(this.opts.linebreaks&&(e=this.clean.replaceParagraphsToBr(e)),this.opts.replaceDivs&&(e=this.clean.replaceDivs(e)),e=this.clean.saveFormTags(e)),e=this.clean.onPasteWord(e),e=this.clean.onPasteExtra(e),e=this.clean.onPasteTidy(e,"all"),!this.clean.singleLine&&this.opts.paragraphize&&(e=this.paragraphize.load(e)),e=this.clean.removeDirtyStyles(e),e=this.clean.onPasteRemoveSpans(e),e=this.clean.onPasteRemoveEmpty(e),e=this.clean.convertInline(e)},onPasteWord:function(e){if(e=e.replace(/<!--[\s\S]*?-->/gi,""),e=e.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,""),e=e.replace(/<o\:p[^>]*>[\s\S]*?<\/o\:p>/gi,""),e.match(/class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i)){e=e.replace(/<!--[\s\S]+?-->/gi,""),e=e.replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,""),e=e.replace(/<(\/?)s>/gi,"<$1strike>"),e=e.replace(/ /gi," "),e=e.replace(/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(t,e){return e.length>0?e.replace(/./," ").slice(Math.floor(e.length/2)).split("").join("\xa0"):""}),e=this.clean.onPasteIeFixLinks(e),e=e.replace(/<img(.*?)v:shapes=(.*?)>/gi,""),e=e.replace(/src="file\:\/\/(.*?)"/,'src=""');var i=t("<div/>").html(e),n=!1,o=1,s=[];i.find("p[style]").each(function(){var e=t(this).attr("style").match(/mso\-list\:l([0-9]+)\slevel([0-9]+)/);if(e){var r=parseInt(e[1]),a=parseInt(e[2]),l=t(this).html().match(/^[\w]+\./)?"ol":"ul",u=t("<li/>").html(t(this).html());if(u.html(u.html().replace(/^([\w\.]+)</,"<")),u.find("span:first").remove(),1==a&&-1==t.inArray(r,s)){var c=t("<"+l+"/>").attr({"data-level":a,"data-list":r}).html(u);t(this).replaceWith(c),n=r,s.push(r)}else{if(a>o){for(var h=i.find('[data-level="'+o+'"][data-list="'+n+'"]'),d=h,p=o;a>p;p++)c=t("<"+l+"/>"),c.appendTo(d.find("li").last()),d=c;d.attr({"data-level":a,"data-list":r}).html(u)}else{var h=i.find('[data-level="'+a+'"][data-list="'+r+'"]').last();h.append(u)}o=a,n=r,t(this).remove()}}}),i.find("[data-level][data-list]").removeAttr("data-level data-list"),e=i.html(),e=e.replace(/\xb7/g,""),e=e.replace(/<p class="Mso(.*?)"/gi,"<p"),e=e.replace(/ class=\"(mso[^\"]*)\"/gi,""),e=e.replace(/ class=(mso\w+)/gi,""),e=e.replace(/<o:p(.*?)>([\w\W]*?)<\/o:p>/gi,"$2"),e=e.replace(/\n/g," "),e=e.replace(/<p>\n?<li>/gi,"<li>")}return e},onPasteExtra:function(t){return t=t.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi,"$2"),t=t.replace(/<b(.*?)id="docs-internal-guid(.*?)">([\w\W]*?)<\/b>/gi,"$3"),t=t.replace(/<span[^>]*(font-style: italic; font-weight: bold|font-weight: bold; font-style: italic)[^>]*>/gi,'<span style="font-weight: bold;"><span style="font-style: italic;">'),t=t.replace(/<span[^>]*font-style: italic[^>]*>/gi,'<span style="font-style: italic;">'),t=t.replace(/<span[^>]*font-weight: bold[^>]*>/gi,'<span style="font-weight: bold;">'),t=t.replace(/<span[^>]*text-decoration: underline[^>]*>/gi,'<span style="text-decoration: underline;">'),t=t.replace(/<img>/gi,""),t=t.replace(/\n{3,}/gi,"\n"),t=t.replace(/<font(.*?)>([\w\W]*?)<\/font>/gi,"$2"),t=t.replace(/<p><p>/gi,"<p>"),t=t.replace(/<\/p><\/p>/gi,"</p>"),t=t.replace(/<li>(\s*|\t*|\n*)<p>/gi,"<li>"),t=t.replace(/<\/p>(\s*|\t*|\n*)<\/li>/gi,"</li>"),t=t.replace(/<\/p>\s<p/gi,"</p><p"),t=t.replace(/<img src="webkit-fake-url\:\/\/(.*?)"(.*?)>/gi,""),t=t.replace(/<p>\u2022([\w\W]*?)<\/p>/gi,"<li>$1</li>"),this.utils.browser("mozilla")&&(t=t.replace(/<br\s?\/?>$/gi,"")),t},onPasteTidy:function(t,e){var i=["span","a","pre","blockquote","small","em","strong","code","kbd","mark","address","cite","var","samp","dfn","sup","sub","b","i","u","del","ol","ul","li","dl","dt","dd","p","br","video","audio","iframe","embed","param","object","img","table","td","th","tr","tbody","tfoot","thead","h1","h2","h3","h4","h5","h6"],n=!1,o=[["a","*"],["img",["src","alt"]],["span",["class","rel","data-verified"]],["iframe","*"],["video","*"],["audio","*"],["embed","*"],["object","*"],["param","*"],["source","*"]];"all"==e?(n=["p","span","h1","h2","h3","h4","h5","h6"],o=[["table","class"],["td",["colspan","rowspan"]],["a","*"],["img",["src","alt","data-redactor-inserted-image"]],["span",["class","rel","data-verified"]],["iframe","*"],["video","*"],["audio","*"],["embed","*"],["object","*"],["param","*"],["source","*"]]):"td"==e?i=["ul","ol","li","span","a","small","em","strong","code","kbd","mark","cite","var","samp","dfn","sup","sub","b","i","u","del","ol","ul","li","dl","dt","dd","br","iframe","video","audio","embed","param","object","img","h1","h2","h3","h4","h5","h6"]:"li"==e&&(i=["ul","ol","li","span","a","small","em","strong","code","kbd","mark","cite","var","samp","dfn","sup","sub","b","i","u","del","br","iframe","video","audio","embed","param","object","img"]);var s={deniedTags:this.opts.deniedTags?this.opts.deniedTags:!1,allowedTags:this.opts.allowedTags?this.opts.allowedTags:i,removeComments:!0,removePhp:!0,removeAttr:this.opts.removeAttr?this.opts.removeAttr:!1,allowedAttr:this.opts.allowedAttr?this.opts.allowedAttr:o,removeEmpty:n};return this.tidy.load(t,s)},onPasteRemoveEmpty:function(t){return t=t.replace(/<(p|h[1-6])>(|\s|\n|\t|<br\s?\/?>)<\/(p|h[1-6])>/gi,""),this.opts.linebreaks||(t=t.replace(/<br>$/i,"")),t},onPasteRemoveSpans:function(t){return t=t.replace(/<span>(.*?)<\/span>/gi,"$1"),t=t.replace(/<span[^>]*>\s|&nbsp;<\/span>/gi," ")},onPasteIeFixLinks:function(e){if(!this.utils.browser("msie"))return e;var i=t.trim(e);return 0===i.search(/^<a(.*?)>(.*?)<\/a>$/i)&&(e=e.replace(/^<a(.*?)>(.*?)<\/a>$/i,"$2")),e},isSingleLine:function(t,e){if(this.clean.singleLine=!1,!this.utils.isSelectAll()&&"undefined"==typeof e){var i=this.opts.blockLevelElements.join("|").replace("P|","").replace("DIV|",""),n=t.match(new RegExp("</("+i+")>","gi")),o=t.match(/<\/(p|div)>/gi);if(!n&&(null===o||o&&o.length<=1)){var s=t.match(/<br\s?\/?>/gi);s||(this.clean.singleLine=!0,t=t.replace(/<\/?(p|div)(.*?)>/gi,""))}}return t},stripTags:function(t,e){e=(((e||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return t.replace(i,function(t,i){return e.indexOf("<"+i.toLowerCase()+">")>-1?t:""})},savePreCode:function(t){return t=this.clean.savePreFormatting(t),t=this.clean.saveCodeFormatting(t),t=this.clean.restoreSelectionMarker(t)},savePreFormatting:function(e){var i=e.match(/<pre(.*?)>([\w\W]*?)<\/pre>/gi);return null!==i&&t.each(i,t.proxy(function(t,i){var n=i.match(/<pre(.*?)>([\w\W]*?)<\/pre>/i);n[2]=n[2].replace(/<br\s?\/?>/g,"\n"),n[2]=n[2].replace(/&nbsp;/g," "),this.opts.preSpaces&&(n[2]=n[2].replace(/\t/g,Array(this.opts.preSpaces+1).join(" "))),n[2]=this.clean.encodeEntities(n[2]),n[2]=n[2].replace(/\$/g,"&#36;"),e=e.replace(i,"<pre"+n[1]+">"+n[2]+"</pre>")},this)),e},saveCodeFormatting:function(e){var i=e.match(/<code(.*?)>([\w\W]*?)<\/code>/gi);return null!==i&&t.each(i,t.proxy(function(t,i){var n=i.match(/<code(.*?)>([\w\W]*?)<\/code>/i);n[2]=n[2].replace(/&nbsp;/g," "),n[2]=this.clean.encodeEntities(n[2]),n[2]=n[2].replace(/\$/g,"&#36;"),e=e.replace(i,"<code"+n[1]+">"+n[2]+"</code>")},this)),e},restoreSelectionMarker:function(t){return t=t.replace(/&lt;span id=&quot;selection-marker-([0-9])&quot; class=&quot;redactor-selection-marker&quot; data-verified=&quot;redactor&quot;&gt;\u200b&lt;\/span&gt;/g,'<span id="selection-marker-$1" class="redactor-selection-marker" data-verified="redactor">\u200b</span>')},getTextFromHtml:function(e){e=e.replace(/<br\s?\/?>|<\/H[1-6]>|<\/p>|<\/div>|<\/li>|<\/td>/gi,"\n");var i=document.createElement("div");return i.innerHTML=e,e=i.textContent||i.innerText,t.trim(e)},getPlainText:function(t,e){return t=this.clean.getTextFromHtml(t),t=t.replace(/\n\s*\n/g,"\n"),t=t.replace(/\n\n/g,"\n"),t=t.replace(/\n/g,"<br />"),this.opts.paragraphize&&"undefined"==typeof e&&!this.utils.browser("mozilla")&&(t=this.paragraphize.load(t)),t},getPreCode:function(t){return t=t.replace(/<img(.*?) style="(.*?)"(.*?[^>])>/gi,"<img$1$3>"),t=t.replace(/<img(.*?)>/gi,"&lt;img$1&gt;"),t=this.clean.getTextFromHtml(t),this.opts.preSpaces&&(t=t.replace(/\t/g,Array(this.opts.preSpaces+1).join(" "))),t=this.clean.encodeEntities(t)},getOnlyImages:function(t){return t=t.replace(/<img(.*?)>/gi,"[img$1]"),t=t.replace(/<([Ss]*?)>/gi,""),t=t.replace(/\[img(.*?)\]/gi,"<img$1>")},getOnlyLinksAndImages:function(t){return t=t.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi,'[a href="$2"]$4[/a]'),t=t.replace(/<img(.*?)>/gi,"[img$1]"),t=t.replace(/<(.*?)>/gi,""),t=t.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi,'<a href="$1">$2</a>'),t=t.replace(/\[img(.*?)\]/gi,"<img$1>")},encodeEntities:function(t){return t=String(t).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},removeDirtyStyles:function(e){if(this.utils.browser("msie"))return e;var i=document.createElement("div");return i.innerHTML=e,this.clean.clearUnverifiedRemove(t(i)),e=i.innerHTML,t(i).remove(),e},clearUnverified:function(){if(!this.utils.browser("msie")){this.clean.clearUnverifiedRemove(this.$editor);var t=this.$editor.find("h1, h2, h3, h4, h5, h6");t.find("span").removeAttr("style"),t.find(this.opts.verifiedTags.join(", ")).removeAttr("style"),this.code.sync()}},clearUnverifiedRemove:function(e){e.find(this.opts.verifiedTags.join(", ")).removeAttr("style"),e.find("span").not('[data-verified="redactor"]').removeAttr("style"),e.find('span[data-verified="redactor"], img[data-verified="redactor"]').each(function(e,i){var n=t(i);n.attr("style",n.attr("rel"))})},cleanEmptyParagraph:function(){},setVerified:function(t){if(this.utils.browser("msie"))return t;t=t.replace(new RegExp("<img(.*?[^>])>","gi"),'<img$1 data-verified="redactor">'),t=t.replace(new RegExp("<span(.*?[^>])>","gi"),'<span$1 data-verified="redactor">');var e=t.match(new RegExp('<(span|img)(.*?)style="(.*?)"(.*?[^>])>',"gi"));if(e)for(var i=e.length,n=0;i>n;n++)try{var o=e[n].replace(/style="(.*?)"/i,'style="$1" rel="$1"');t=t.replace(e[n],o)}catch(s){}return t},convertInline:function(e){var i=t("<div />").html(e),n=this.opts.inlineTags;return n.push("span"),i.find(n.join(",")).each(function(){var e=t(this),i=this.tagName.toLowerCase();e.attr("data-redactor-tag",i),"span"==i&&(e.attr("style")?e.attr("data-redactor-style",e.attr("style")):e.attr("class")&&e.attr("data-redactor-class",e.attr("class")))}),e=i.html(),i.remove(),e},normalizeLists:function(){this.$editor.find("li").each(function(e,i){var n=t(i).next();0===n.length||"UL"!=n[0].tagName&&"OL"!=n[0].tagName||t(i).append(n)})},removeSpaces:function(t){return t=t.replace(/\n/g,""),t=t.replace(/[\t]*/g,""),t=t.replace(/\n\s*\n/g,"\n"),t=t.replace(/^[\s\n]*/g," "),t=t.replace(/[\s\n]*$/g," "),t=t.replace(/>\s{2,}</g,"> <"),t=t.replace(/\n\n/g,"\n"),t=t.replace(/\u200B/g,"")},replaceDivs:function(t){return this.opts.linebreaks?(t=t.replace(/<div><br\s?\/?><\/div>/gi,"<br />"),t=t.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"$2<br />")):t=t.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p$1>$2</p>"),t=t.replace(/<div(.*?[^>])>/gi,""),t=t.replace(/<\/div>/gi,"")},replaceDivsToBr:function(t){return t=t.replace(/<div\s(.*?)>/gi,"<p>"),t=t.replace(/<div><br\s?\/?><\/div>/gi,"<br /><br />"),t=t.replace(/<div>([\w\W]*?)<\/div>/gi,"$1<br /><br />")},replaceParagraphsToBr:function(t){return t=t.replace(/<p\s(.*?)>/gi,"<p>"),t=t.replace(/<p><br\s?\/?><\/p>/gi,"<br />"),t=t.replace(/<p>([\w\W]*?)<\/p>/gi,"$1<br /><br />"),t=t.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi,"</blockquote>")},saveFormTags:function(t){return t.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi,'<section$1 rel="redactor-form-tag">$2</section>')},restoreFormTags:function(t){return t.replace(/<section(.*?) rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi,"<form$1$2>$3</form>")}}},code:function(){return{set:function(e){e=t.trim(e.toString()),e=this.clean.onSet(e),this.utils.browser("msie")&&(e=e.replace(/<span(.*?)id="selection-marker-(1|2)"(.*?)><\/span>/gi,"")),this.$editor.html(e),this.code.sync(),""!==e&&this.placeholder.remove(),setTimeout(t.proxy(this.buffer.add,this),15),this.start===!1&&this.observe.load()},get:function(){var t=this.$textarea.val();return this.opts.replaceDivs&&(t=this.clean.replaceDivs(t)),this.opts.linebreaks&&(t=this.clean.replaceParagraphsToBr(t)),t=this.tabifier.get(t)},sync:function(){setTimeout(t.proxy(this.code.startSync,this),10)},startSync:function(){var t=this.$editor.html();this.code.syncCode&&this.code.syncCode==t||this.start&&""==t||(this.code.syncCode=t,t=this.core.setCallback("syncBefore",t),t=this.clean.onSync(t),this.$textarea.val(t),this.core.setCallback("sync",t),this.start===!1&&this.core.setCallback("change",t),this.start=!1,0==this.autosave.html&&(this.autosave.html=this.code.get()),this.opts.codemirror&&this.$textarea.next(".CodeMirror").each(function(e,i){i.CodeMirror.setValue(t)}),this.autosave.onChange(),this.autosave.enable())},toggle:function(){this.opts.visual?this.code.showCode():this.code.showVisual()},showCode:function(){this.selection.save(),this.code.offset=this.caret.getOffset();var e=t(window).scrollTop(),i=(this.$editor.innerWidth(),this.$editor.innerHeight());this.$editor.hide();var n=this.$textarea.val();this.modified=this.clean.removeSpaces(n),n=this.tabifier.get(n);var o=0,s=0,r=t("<div/>").append(t.parseHTML(this.clean.onSync(this.$editor.html()),document,!0)),a=r.find("span.redactor-selection-marker");if(a.length>0){var l=this.tabifier.get(r.html()).replace(/&amp;/g,"&");1==a.length?(o=this.utils.strpos(l,r.find("#selection-marker-1").prop("outerHTML")),s=o):2==a.length&&(o=this.utils.strpos(l,r.find("#selection-marker-1").prop("outerHTML")),s=this.utils.strpos(l,r.find("#selection-marker-2").prop("outerHTML"))-r.find("#selection-marker-1").prop("outerHTML").toString().length)}this.selection.removeMarkers(),this.$textarea.val(n),this.opts.codemirror?this.$textarea.next(".CodeMirror").each(function(e,r){t(r).show(),r.CodeMirror.setValue(n),r.CodeMirror.setSize("100%",i),r.CodeMirror.refresh(),o==s?r.CodeMirror.setCursor(r.CodeMirror.posFromIndex(o).line,r.CodeMirror.posFromIndex(s).ch):r.CodeMirror.setSelection({line:r.CodeMirror.posFromIndex(o).line,ch:r.CodeMirror.posFromIndex(o).ch},{line:r.CodeMirror.posFromIndex(s).line,ch:r.CodeMirror.posFromIndex(s).ch}),r.CodeMirror.focus()}):(this.$textarea.height(i).show().focus(),this.$textarea.on("keydown.redactor-textarea-indenting",this.code.textareaIndenting),t(window).scrollTop(e),this.$textarea[0].setSelectionRange&&this.$textarea[0].setSelectionRange(o,s),this.$textarea[0].scrollTop=0),this.opts.visual=!1,this.button.setInactiveInCode(),this.button.setActive("html"),this.core.setCallback("source",n)},showVisual:function(){var t;if(!this.opts.visual){var e=0,i=0;if(this.opts.codemirror){var n;this.$textarea.next(".CodeMirror").each(function(o,s){n=s.CodeMirror.listSelections(),e=s.CodeMirror.indexFromPos(n[0].anchor),i=s.CodeMirror.indexFromPos(n[0].head),t=s.CodeMirror.getValue()})}else e=this.$textarea.get(0).selectionStart,i=this.$textarea.get(0).selectionEnd,t=this.$textarea.hide().val();if(e>i&&i>0){var o=i,s=e;e=o,i=s}if(e=this.code.enlargeOffset(t,e),i=this.code.enlargeOffset(t,i),t=t.substr(0,e)+this.selection.getMarkerAsHtml(1)+t.substr(e),i>e){var r=this.selection.getMarkerAsHtml(1).toString().length;t=t.substr(0,i+r)+this.selection.getMarkerAsHtml(2)+t.substr(i+r)}this.modified!==this.clean.removeSpaces(t)&&this.code.set(t),this.opts.codemirror&&this.$textarea.next(".CodeMirror").hide(),this.$editor.show(),this.utils.isEmpty(t)||this.placeholder.remove(),this.selection.restore(),this.$textarea.off("keydown.redactor-textarea-indenting"),this.button.setActiveInVisual(),this.button.setInactive("html"),this.observe.load(),this.opts.visual=!0,this.core.setCallback("visual",t)}},textareaIndenting:function(t){if(9!==t.keyCode)return!0;var e=this.$textarea,i=e.get(0).selectionStart;return e.val(e.val().substring(0,i)+"	"+e.val().substring(e.get(0).selectionEnd)),e.get(0).selectionStart=e.get(0).selectionEnd=i+1,!1},enlargeOffset:function(t,e){var i=t.length,n=0;if(">"==t[e])n++;else for(var o=e;i>=o&&(n++,">"!=t[o]);o++)if("<"==t[o]||o==i){n=0;break}return e+n}}},core:function(){return{getObject:function(){return t.extend({},this)},getEditor:function(){return this.$editor},getBox:function(){return this.$box},getElement:function(){return this.$element},getTextarea:function(){return this.$textarea},getToolbar:function(){return this.$toolbar?this.$toolbar:!1},addEvent:function(t){this.core.event=t},getEvent:function(){return this.core.event},setCallback:function(e,i,n){var o=e+"Callback",s="redactor",r=this.opts[o];if(this.$textarea){var a=!1,l=t._data(this.$textarea[0],"events");if("undefined"!=typeof l&&"undefined"!=typeof l[o]&&t.each(l[o],t.proxy(function(t,e){if(e.namespace==s){var n="undefined"==typeof n?[i]:[i,n];a="undefined"==typeof n?e.handler.call(this,i):e.handler.call(this,i,n)}},this)),a)return a}return t.isFunction(r)?"undefined"==typeof n?r.call(this,i):r.call(this,i,n):"undefined"==typeof n?i:n},destroy:function(){this.opts.destroyed=!0,this.core.setCallback("destroy"),this.$element.off(".redactor").removeData("redactor"),this.$editor.off(".redactor"),t(document).off("mousedown.redactor-blur."+this.uuid),t(document).off("mousedown.redactor."+this.uuid),t(document).off("click.redactor-image-delete."+this.uuid),t(document).off("click.redactor-image-resize-hide."+this.uuid),t(document).off("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid),t("body").off("scroll.redactor."+this.uuid),t(this.opts.toolbarFixedTarget).off("scroll.redactor."+this.uuid),this.$editor.removeClass("redactor-editor redactor-linebreaks redactor-placeholder"),this.$editor.removeAttr("contenteditable");var e=this.code.get();this.opts.toolbar&&this.$toolbar.find("a").each(function(){var e=t(this);e.data("dropdown")&&(e.data("dropdown").remove(),e.data("dropdown",{}))}),this.build.isTextarea()?(this.$box.after(this.$element),this.$box.remove(),this.$element.val(e).show()):(this.$box.after(this.$editor),this.$box.remove(),this.$element.html(e).show()),this.$pasteBox&&this.$pasteBox.remove(),this.$modalBox&&this.$modalBox.remove(),this.$modalOverlay&&this.$modalOverlay.remove(),t(".redactor-toolbar-tooltip-"+this.uuid).remove(),clearInterval(this.autosaveInterval)}}},dropdown:function(){return{build:function(e,i,n){"formatting"==e&&this.opts.formattingAdd&&t.each(this.opts.formattingAdd,t.proxy(function(t,e){var i,o=e.tag;"undefined"!=typeof e["class"]&&(o=o+"-"+e["class"]),e.type=this.utils.isBlockTag(e.tag)?"block":"inline",i="undefined"!=typeof e.func?e.func:"inline"==e.type?"inline.formatting":"block.formatting",this.opts.linebreaks&&"block"==e.type&&"p"==e.tag||(this.formatting[o]={tag:e.tag,style:e.style,"class":e["class"],attr:e.attr,data:e.data,clear:e.clear},n[o]={func:i,title:e.title})},this)),t.each(n,t.proxy(function(n,o){var s=t('<a href="#" class="redactor-dropdown-'+n+'" role="button">'+o.title+"</a>");"formatting"==e&&s.addClass("redactor-formatting-"+n),s.on("click",t.proxy(function(e){e.preventDefault();var i="func",s=o.func;o.command?(i="command",s=o.command):o.dropdown&&(i="dropdown",s=o.dropdown),t(e.target).hasClass("redactor-dropdown-link-inactive")||(this.button.onClick(e,n,i,s),this.dropdown.hideAll())},this)),this.observe.addDropdown(s,n,o),i.append(s)},this))},show:function(e,i){if(!this.opts.visual)return e.preventDefault(),!1;var n=this.button.get(i),o=n.data("dropdown").appendTo(document.body);if(this.opts.highContrast&&o.addClass("redactor-dropdown-contrast"),n.hasClass("dropact"))this.dropdown.hideAll();else{this.dropdown.hideAll(),this.observe.dropdowns(),this.core.setCallback("dropdownShow",{dropdown:o,key:i,button:n}),this.button.setActive(i),n.addClass("dropact");var s=n.offset(),r=o.width();s.left+r>t(document).width()&&(s.left=Math.max(0,s.left-r));var a=s.left+"px";if(this.$toolbar.hasClass("toolbar-fixed-box")){var l=this.$toolbar.innerHeight()+this.opts.toolbarFixedTopOffset,u="fixed";this.opts.toolbarFixedTarget!==document&&(l=this.$toolbar.innerHeight()+this.$toolbar.offset().top+this.opts.toolbarFixedTopOffset,u="absolute"),o.css({position:u,left:a,top:l+"px"}).show()}else{var l=n.innerHeight()+s.top+"px";o.css({position:"absolute",left:a,top:l}).show()}this.core.setCallback("dropdownShown",{dropdown:o,key:i,button:n}),this.$dropdown=o}t(document).one("click.redactor-dropdown",t.proxy(this.dropdown.hide,this)),this.$editor.one("click.redactor-dropdown",t.proxy(this.dropdown.hide,this)),t(document).one("keyup.redactor-dropdown",t.proxy(this.dropdown.closeHandler,this)),o.on("mouseover.redactor-dropdown",t.proxy(this.utils.disableBodyScroll,this)).on("mouseout.redactor-dropdown",t.proxy(this.utils.enableBodyScroll,this)),e.stopPropagation()},closeHandler:function(t){t.which==this.keyCode.ESC&&(this.dropdown.hideAll(),this.$editor.focus())},hideAll:function(){this.$toolbar.find("a.dropact").removeClass("redactor-act").removeClass("dropact"),this.utils.enableBodyScroll(),t(".redactor-dropdown-"+this.uuid).hide(),t(".redactor-dropdown-link-selected").removeClass("redactor-dropdown-link-selected"),this.$dropdown&&(this.$dropdown.off(".redactor-dropdown"),this.core.setCallback("dropdownHide",this.$dropdown),this.$dropdown=!1)},hide:function(e){var i=t(e.target);i.hasClass("dropact")||i.hasClass("redactor-dropdown-link-inactive")||(i.hasClass("redactor-dropdown")&&(i.removeClass("dropact"),i.off("mouseover mouseout")),this.dropdown.hideAll())}}},file:function(){return{show:function(){this.modal.load("file",this.lang.get("file"),700),this.upload.init("#redactor-modal-file-upload",this.opts.fileUpload,this.file.insert),this.selection.save(),this.selection.get();var e=this.sel.toString();t("#redactor-filename").val(e),this.modal.show()},insert:function(e,i,n){if("undefined"!=typeof e.error)return this.modal.close(),this.selection.restore(),void this.core.setCallback("fileUploadError",e);
var o;if("string"==typeof e)o=e;else{var s=t("#redactor-filename").val();("undefined"==typeof s||""===s)&&(s=e.filename),o='<a href="'+e.filelink+'" id="filelink-marker">'+s+"</a>"}if(i){this.selection.removeMarkers();var r=this.selection.getMarker();this.insert.nodeToCaretPositionFromPoint(n,r)}else this.modal.close();if(this.selection.restore(),this.buffer.set(),this.insert.htmlWithoutClean(o),"string"!=typeof e){var a=t(this.$editor.find("a#filelink-marker"));0!==a.length?a.removeAttr("id").removeAttr("style"):a=!1,this.core.setCallback("fileUpload",a,e)}}}},focus:function(){return{setStart:function(){this.$editor.focus();var t=this.$editor.children().first();if(0!==t.length&&0!==t[0].length&&"BR"!=t[0].tagName&&3!=t[0].nodeType){if("UL"==t[0].tagName||"OL"==t[0].tagName){var e=t.find("li").first();if(!this.utils.isBlock(e)&&""===e.text())return void this.caret.setStart(e)}return this.opts.linebreaks&&!this.utils.isBlockTag(t[0].tagName)?(this.selection.get(),this.range.setStart(this.$editor[0],0),this.range.setEnd(this.$editor[0],0),void this.selection.addRange()):void this.caret.setStart(t)}},setEnd:function(){var t=this.$editor.children().last();this.$editor.focus(),0!==t.size()&&(this.utils.isEmpty(this.$editor.html())?(this.selection.get(),this.range.collapse(!0),this.range.setStartAfter(t[0]),this.range.setEnd(t[0],0),this.selection.addRange()):(this.selection.get(),this.range.selectNodeContents(t[0]),this.range.collapse(!1),this.selection.addRange()))},isFocused:function(){return this.$editor[0]===document.activeElement}}},image:function(){return{show:function(){this.modal.load("image",this.lang.get("image"),700),this.upload.init("#redactor-modal-image-droparea",this.opts.imageUpload,this.image.insert),this.selection.save(),this.modal.show()},showEdit:function(e){var i=e.closest("a",this.$editor[0]);if(this.modal.load("imageEdit",this.lang.get("edit"),705),this.modal.createCancelButton(),this.image.buttonDelete=this.modal.createDeleteButton(this.lang.get("_delete")),this.image.buttonSave=this.modal.createActionButton(this.lang.get("save")),this.image.buttonDelete.on("click",t.proxy(function(){this.image.remove(e)},this)),this.image.buttonSave.on("click",t.proxy(function(){this.image.update(e)},this)),t(".redactor-link-tooltip").remove(),t("#redactor-image-title").val(e.attr("alt")),this.opts.imageLink){var n=t("#redactor-image-link");n.attr("href",e.attr("src")),0!==i.length&&(n.val(i.attr("href")),"_blank"==i.attr("target")&&t("#redactor-image-link-blank").prop("checked",!0))}else t(".redactor-image-link-option").hide();if(this.opts.imagePosition){var o="block"==e.css("display")&&"none"==e.css("float")?"center":e.css("float");t("#redactor-image-align").val(o)}else t(".redactor-image-position-option").hide();this.modal.show(),t("#redactor-image-title").focus()},setFloating:function(e){var i=t("#redactor-image-align").val(),n="",o="",s="";switch(i){case"left":n="left",s="0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin+" 0";break;case"right":n="right",s="0 0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin;break;case"center":o="block",s="auto"}e.css({"float":n,display:o,margin:s}),e.attr("rel",e.attr("style"))},update:function(e){this.image.hideResize(),this.buffer.set();var i=e.closest("a",this.$editor[0]),n=t("#redactor-image-title").val().replace(/(<([^>]+)>)/gi,"");e.attr("alt",n),this.image.setFloating(e);var o=t.trim(t("#redactor-image-link").val()),o=o.replace(/(<([^>]+)>)/gi,"");if(""!==o){var s="((xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}",r=new RegExp("^(http|ftp|https)://"+s,"i"),a=new RegExp("^"+s,"i");-1==o.search(r)&&0===o.search(a)&&this.opts.linkProtocol&&(o=this.opts.linkProtocol+"://"+o);var l=t("#redactor-image-link-blank").prop("checked")?!0:!1;if(0===i.length){var u=t('<a href="'+o+'">'+this.utils.getOuterHtml(e)+"</a>");l&&u.attr("target","_blank"),e.replaceWith(u)}else i.attr("href",o),l?i.attr("target","_blank"):i.removeAttr("target")}else 0!==i.length&&i.replaceWith(this.utils.getOuterHtml(e));this.modal.close(),this.observe.images(),this.code.sync()},setEditable:function(e){this.opts.imageEditable&&e.on("dragstart",t.proxy(this.image.onDrag,this));var i=t.proxy(function(){this.observe.image=e,this.image.resizer=this.image.loadEditableControls(e),t(document).on("mousedown.redactor-image-resize-hide."+this.uuid,t.proxy(this.image.hideResize,this)),this.opts.imageResizable&&this.image.resizer.on("mousedown.redactor touchstart.redactor",t.proxy(function(t){this.image.setResizable(t,e)},this))},this);e.off("mousedown.redactor").on("mousedown.redactor",t.proxy(this.image.hideResize,this)),e.off("click.redactor touchstart.redactor").on("click.redactor touchstart.redactor",i)},setResizable:function(t,e){t.preventDefault(),this.image.resizeHandle={x:t.pageX,y:t.pageY,el:e,ratio:e.width()/e.height(),h:e.height()},t=t.originalEvent||t,t.targetTouches&&(this.image.resizeHandle.x=t.targetTouches[0].pageX,this.image.resizeHandle.y=t.targetTouches[0].pageY),this.image.startResize()},startResize:function(){t(document).on("mousemove.redactor-image-resize touchmove.redactor-image-resize",t.proxy(this.image.moveResize,this)),t(document).on("mouseup.redactor-image-resize touchend.redactor-image-resize",t.proxy(this.image.stopResize,this))},moveResize:function(t){t.preventDefault(),t=t.originalEvent||t;var e=this.image.resizeHandle.h;e+=t.targetTouches?t.targetTouches[0].pageY-this.image.resizeHandle.y:t.pageY-this.image.resizeHandle.y;var i=Math.round(e*this.image.resizeHandle.ratio);if(!(50>e||100>i)){var e=Math.round(this.image.resizeHandle.el.width()/this.image.resizeHandle.ratio);this.image.resizeHandle.el.attr({width:i,height:e}),this.image.resizeHandle.el.width(i),this.image.resizeHandle.el.height(e),this.code.sync()}},stopResize:function(){this.handle=!1,t(document).off(".redactor-image-resize"),this.image.hideResize()},onDrag:function(e){return 0!==this.$editor.find("#redactor-image-box").length?(e.preventDefault(),!1):void this.$editor.on("drop.redactor-image-inside-drop",t.proxy(function(){setTimeout(t.proxy(this.image.onDrop,this),1)},this))},onDrop:function(){this.image.fixImageSourceAfterDrop(),this.observe.images(),this.$editor.off("drop.redactor-image-inside-drop"),this.clean.clearUnverified(),this.code.sync()},fixImageSourceAfterDrop:function(){this.$editor.find("img[data-save-url]").each(function(){var e=t(this);e.attr("src",e.attr("data-save-url")),e.removeAttr("data-save-url")})},hideResize:function(e){if(!e||0===t(e.target).closest("#redactor-image-box",this.$editor[0]).length){if(e&&"IMG"==e.target.tagName){var i=t(e.target);i.attr("data-save-url",i.attr("src"))}var n=this.$editor.find("#redactor-image-box");0!==n.length&&(t("#redactor-image-editter").remove(),t("#redactor-image-resizer").remove(),n.find("img").css({marginTop:n[0].style.marginTop,marginBottom:n[0].style.marginBottom,marginLeft:n[0].style.marginLeft,marginRight:n[0].style.marginRight}),n.css("margin",""),n.find("img").css("opacity",""),n.replaceWith(function(){return t(this).contents()}),t(document).off("mousedown.redactor-image-resize-hide."+this.uuid),"undefined"!=typeof this.image.resizeHandle&&this.image.resizeHandle.el.attr("rel",this.image.resizeHandle.el.attr("style")),this.code.sync())}},loadResizableControls:function(e,i){if(this.opts.imageResizable&&!this.utils.isMobile()){var n=t('<span id="redactor-image-resizer" data-redactor="verified"></span>');return this.utils.isDesktop()||n.css({width:"15px",height:"15px"}),n.attr("contenteditable",!1),i.append(n),i.append(e),n}return i.append(e),!1},loadEditableControls:function(e){var i=t('<span id="redactor-image-box" data-redactor="verified">');if(i.css("float",e.css("float")).attr("contenteditable",!1),"auto"!=e[0].style.margin?(i.css({marginTop:e[0].style.marginTop,marginBottom:e[0].style.marginBottom,marginLeft:e[0].style.marginLeft,marginRight:e[0].style.marginRight}),e.css("margin","")):i.css({display:"block",margin:"auto"}),e.css("opacity",".5").after(i),this.opts.imageEditable){this.image.editter=t('<span id="redactor-image-editter" data-redactor="verified">'+this.lang.get("edit")+"</span>"),this.image.editter.attr("contenteditable",!1),this.image.editter.on("click",t.proxy(function(){this.image.showEdit(e)},this)),i.append(this.image.editter);var n=this.image.editter.innerWidth();this.image.editter.css("margin-left","-"+n/2+"px")}return this.image.loadResizableControls(e,i)},remove:function(e){var i=t(e),n=i.closest("a",this.$editor[0]),o=i.closest("figure",this.$editor[0]),s=i.parent();0!==t("#redactor-image-box").length&&(s=t("#redactor-image-box").parent());var r;0!==o.length?(r=o.next(),o.remove()):0!==n.length?(s=n.parent(),n.remove()):i.remove(),t("#redactor-image-box").remove(),this.caret.setStart(0!==o.length?r:s),this.core.setCallback("imageDelete",i[0].src,i),this.modal.close(),this.code.sync()},insert:function(e,i,n){if("undefined"!=typeof e.error)return this.modal.close(),this.selection.restore(),void this.core.setCallback("imageUploadError",e);var o;"string"==typeof e?o=t(e).attr("data-redactor-inserted-image","true"):(o=t("<img>"),o.attr("src",e.filelink).attr("data-redactor-inserted-image","true"));var s=o,r=this.utils.isCurrentOrParent("P");if(r&&(s=t("<blockquote />").append(o)),i){this.selection.removeMarkers();var a=this.selection.getMarker();this.insert.nodeToCaretPositionFromPoint(n,a)}else this.modal.close();this.selection.restore(),this.buffer.set(),this.insert.html(this.utils.getOuterHtml(s),!1);var l=this.$editor.find("img[data-redactor-inserted-image=true]").removeAttr("data-redactor-inserted-image");r?l.parent().contents().unwrap().wrap("<p />"):this.opts.linebreaks&&(this.utils.isEmpty(this.code.get())||l.before("<br>"),l.after("<br>")),"string"!=typeof e&&this.core.setCallback("imageUpload",l,e)}}},indent:function(){return{increase:function(){this.utils.browser("msie")||this.$editor.focus(),this.buffer.set(),this.selection.save();var t=this.selection.getBlock();t&&"LI"==t.tagName?this.indent.increaseLists():t===!1&&this.opts.linebreaks?this.indent.increaseText():this.indent.increaseBlocks(),this.selection.restore(),this.code.sync()},increaseLists:function(){document.execCommand("indent"),this.indent.fixEmptyIndent(),this.clean.normalizeLists(),this.clean.clearUnverified()},increaseBlocks:function(){t.each(this.selection.getBlocks(),t.proxy(function(t,e){if("TD"!==e.tagName&&"TH"!==e.tagName){var i=this.utils.getAlignmentElement(e),n=this.utils.normalize(i.css("margin-left"))+this.opts.indentValue;i.css("margin-left",n+"px")}},this))},increaseText:function(){var e=this.selection.wrap("div");t(e).attr("data-tagblock","redactor"),t(e).css("margin-left",this.opts.indentValue+"px")},decrease:function(){this.buffer.set(),this.selection.save();var t=this.selection.getBlock();t&&"LI"==t.tagName?this.indent.decreaseLists():this.indent.decreaseBlocks(),this.selection.restore(),this.code.sync()},decreaseLists:function(){document.execCommand("outdent");var e=this.selection.getCurrent(),i=t(e).closest("li",this.$editor[0]);this.indent.fixEmptyIndent(),this.opts.linebreaks||0!==i.length||(document.execCommand("formatblock",!1,"p"),this.$editor.find("ul, ol, blockquote, p").each(t.proxy(this.utils.removeEmpty,this))),this.clean.clearUnverified()},decreaseBlocks:function(){t.each(this.selection.getBlocks(),t.proxy(function(t,e){var i=this.utils.getAlignmentElement(e),n=this.utils.normalize(i.css("margin-left"))-this.opts.indentValue;0>=n?this.opts.linebreaks&&"undefined"!=typeof i.data("tagblock")?i.replaceWith(i.html()+"<br />"):(i.css("margin-left",""),this.utils.removeEmptyAttr(i,"style")):i.css("margin-left",n+"px")},this))},fixEmptyIndent:function(){var e=this.selection.getBlock();if(this.range.collapsed&&e&&"LI"==e.tagName&&this.utils.isEmpty(t(e).text())){var i=t(e);i.find("span").not(".redactor-selection-marker").contents().unwrap(),i.append("<br>")}}}},inline:function(){return{formatting:function(t){var e,i;"undefined"!=typeof this.formatting[t].style?e="style":"undefined"!=typeof this.formatting[t]["class"]&&(e="class"),e&&(i=this.formatting[t][e]),this.inline.format(this.formatting[t].tag,e,i)},format:function(e,i,n){var o=this.selection.getCurrent();if(!(o&&"TR"===o.tagName||this.utils.isCurrentOrParent("PRE")||this.utils.isCurrentOrParentHeader())){for(var s=["b","bold","i","italic","underline","strikethrough","deleted","superscript","subscript"],r=["strong","strong","em","em","u","del","del","sup","sub"],a=0;a<s.length;a++)e==s[a]&&(e=r[a]);if(this.opts.allowedTags){if(-1==t.inArray(e,this.opts.allowedTags))return}else if(-1!==t.inArray(e,this.opts.deniedTags))return;this.inline.type=i||!1,this.inline.value=n||!1,this.buffer.set(),this.utils.browser("msie")||this.opts.linebreaks||this.$editor.focus(),this.selection.get(),this.range.collapsed?this.inline.formatCollapsed(e):this.inline.formatMultiple(e)}},formatCollapsed:function(e){var i=this.selection.getCurrent(),n=t(i).closest(e+"[data-redactor-tag="+e+"]",this.$editor[0]);if(0!==n.length&&"style"!=this.inline.type&&"SPAN"!=n[0].tagName)return void(this.utils.isEmpty(n.text())?(this.caret.setAfter(n[0]),n.remove(),this.code.sync()):this.utils.isEndOfElement(n)&&this.caret.setAfter(n[0]));var o=t("<"+e+">").attr("data-verified","redactor").attr("data-redactor-tag",e);o.html(this.opts.invisibleSpace),o=this.inline.setFormat(o);var o=this.insert.node(o);this.caret.setEnd(o),this.code.sync()},formatMultiple:function(e){if(this.inline.formatConvert(e),this.selection.save(),document.execCommand("strikethrough"),this.$editor.find("strike").each(t.proxy(function(i,n){var o=t(n);this.inline.formatRemoveSameChildren(o,e);var s;this.inline.type?(s=t("<span>").attr("data-redactor-tag",e).attr("data-verified","redactor"),s=this.inline.setFormat(s)):s=t("<"+e+">").attr("data-redactor-tag",e).attr("data-verified","redactor"),o.replaceWith(s.html(o.contents()));var r=s.parent();if("A"===s[0].tagName&&r&&"U"===r[0].tagName&&s.parent().replaceWith(s),"span"==e&&r&&"SPAN"===r[0].tagName&&"style"===this.inline.type)for(var a=this.inline.value.split(";"),l=0;l<a.length;l++){if(""===a[l])return;var u=a[l].split(":");r.css(u[0],""),this.utils.removeEmptyAttr(r,"style")&&r.replaceWith(r.contents())}},this)),"span"!=e&&this.$editor.find(this.opts.inlineTags.join(", ")).each(t.proxy(function(e,i){var n=t(i);if("U"===i.tagName&&0===i.attributes.length)return void n.replaceWith(n.contents());var o=n.css("text-decoration");"line-through"===o&&(n.css("text-decoration",""),this.utils.removeEmptyAttr(n,"style"))},this)),"del"!=e){var i=this;this.$editor.find("inline").each(function(t,e){i.utils.replaceToTag(e,"del")})}if("u"!=e){var i=this;this.$editor.find("unline").each(function(t,e){i.utils.replaceToTag(e,"u")})}this.selection.restore(),this.code.sync()},formatRemoveSameChildren:function(e,i){var n=this;e.children(i).each(function(){var e=t(this);if(!e.hasClass("redactor-selection-marker"))if("style"==n.inline.type)for(var i=n.inline.value.split(";"),o=0;o<i.length;o++){if(""===i[o])return;var s=i[o].split(":");e.css(s[0],""),n.utils.removeEmptyAttr(e,"style")&&e.replaceWith(e.contents())}else e.contents().unwrap()})},formatConvert:function(e){this.selection.save();var i="";"class"==this.inline.type?i="[data-redactor-class="+this.inline.value+"]":"style"==this.inline.type&&(i='[data-redactor-style="'+this.inline.value+'"]');var n=this;"del"!=e&&this.$editor.find("del").each(function(t,e){n.utils.replaceToTag(e,"inline")}),"u"!=e&&this.$editor.find("u").each(function(t,e){n.utils.replaceToTag(e,"unline")}),"span"!=e&&this.$editor.find(e).each(function(){var e=t(this);e.replaceWith(t("<strike />").html(e.contents()))}),this.$editor.find('[data-redactor-tag="'+e+'"]'+i).each(function(){if(""!==i||"span"!=e||this.tagName.toLowerCase()!=e){var n=t(this);n.replaceWith(t("<strike />").html(n.contents()))}}),this.selection.restore()},setFormat:function(t){switch(this.inline.type){case"class":t.hasClass(this.inline.value)?(t.removeClass(this.inline.value),t.removeAttr("data-redactor-class")):(t.addClass(this.inline.value),t.attr("data-redactor-class",this.inline.value));break;case"style":t[0].style.cssText=this.inline.value,t.attr("data-redactor-style",this.inline.value)}return t},removeStyle:function(){this.buffer.set();var e=this.selection.getCurrent(),i=this.selection.getInlines();if(this.selection.save(),e&&"SPAN"===e.tagName){var n=t(e);n.removeAttr("style"),0===n[0].attributes.length&&n.replaceWith(n.contents())}t.each(i,t.proxy(function(e,i){var n=t(i);-1==t.inArray(i.tagName.toLowerCase(),this.opts.inlineTags)||n.hasClass("redactor-selection-marker")||(n.removeAttr("style"),0===n[0].attributes.length&&n.replaceWith(n.contents()))},this)),this.selection.restore(),this.code.sync()},removeStyleRule:function(e){this.buffer.set();var i=this.selection.getParent(),n=this.selection.getInlines();if(this.selection.save(),i&&"SPAN"===i.tagName){var o=t(i);o.css(e,""),this.utils.removeEmptyAttr(o,"style"),0===o[0].attributes.length&&o.replaceWith(o.contents())}t.each(n,t.proxy(function(i,n){var o=t(n);-1==t.inArray(n.tagName.toLowerCase(),this.opts.inlineTags)||o.hasClass("redactor-selection-marker")||(o.css(e,""),this.utils.removeEmptyAttr(o,"style"),0===o[0].attributes.length&&o.replaceWith(o.contents()))},this)),this.selection.restore(),this.code.sync()},removeFormat:function(){this.buffer.set();var e=this.selection.getCurrent();this.selection.save(),document.execCommand("removeFormat"),e&&"SPAN"===e.tagName&&t(e).replaceWith(t(e).contents()),t.each(this.selection.getNodes(),t.proxy(function(e,i){var n=t(i);-1==t.inArray(i.tagName.toLowerCase(),this.opts.inlineTags)||n.hasClass("redactor-selection-marker")||n.replaceWith(n.contents())},this)),this.selection.restore(),this.code.sync()},toggleClass:function(t){this.inline.format("span","class",t)},toggleStyle:function(t){this.inline.format("span","style",t)}}},insert:function(){return{set:function(e,i){this.placeholder.remove(),e=this.clean.setVerified(e),"undefined"==typeof i&&(e=this.clean.onPaste(e,!1)),this.$editor.html(e),this.selection.remove(),this.focus.setEnd(),this.clean.normalizeLists(),this.code.sync(),this.observe.load(),"undefined"==typeof i&&setTimeout(t.proxy(this.clean.clearUnverified,this),10)},text:function(e){if(this.placeholder.remove(),e=e.toString(),e=t.trim(e),e=this.clean.getPlainText(e,!1),this.$editor.focus(),this.utils.browser("msie"))this.insert.htmlIe(e);else{this.selection.get(),this.range.deleteContents();var i=document.createElement("div");i.innerHTML=e;for(var n,o,s=document.createDocumentFragment();n=i.firstChild;)o=s.appendChild(n);if(this.range.insertNode(s),o){var r=this.range.cloneRange();r.setStartAfter(o),r.collapse(!0),this.sel.removeAllRanges(),this.sel.addRange(r)}}this.code.sync(),this.clean.clearUnverified()},htmlWithoutClean:function(t){this.insert.html(t,!1)},html:function(e,i){this.placeholder.remove(),"undefined"==typeof i&&(i=!0),this.opts.linebreaks||this.$editor.focus(),e=this.clean.setVerified(e),i&&(e=this.clean.onPaste(e)),this.utils.browser("msie")?this.insert.htmlIe(e):(this.clean.singleLine?this.insert.execHtml(e):document.execCommand("insertHTML",!1,e),this.insert.htmlFixMozilla()),this.clean.normalizeLists(),this.opts.linebreaks||this.$editor.find("p").each(t.proxy(this.utils.removeEmpty,this)),this.code.sync(),this.observe.load(),i&&this.clean.clearUnverified()},htmlFixMozilla:function(){if(this.utils.browser("mozilla")){var e=t(this.selection.getBlock()).next();e.length>0&&"P"==e[0].tagName&&""===e.html()&&e.remove()}},htmlIe:function(e){if(this.utils.isIe11()){var i=this.utils.isCurrentOrParent("P"),n=t("<div>").append(e),o=n.contents().is("p, :header, dl, ul, ol, div, table, td, blockquote, pre, address, section, header, footer, aside, article");return void(i&&o?this.insert.ie11FixInserting(i,e):this.insert.ie11PasteFrag(e))}document.selection.createRange().pasteHTML(e)},execHtml:function(t){t=this.clean.setVerified(t),this.selection.get(),this.range.deleteContents();var e=document.createElement("div");e.innerHTML=t;for(var i,n,o=document.createDocumentFragment();i=e.firstChild;)n=o.appendChild(i);this.range.insertNode(o),this.range.collapse(!0),this.caret.setAfter(n)},node:function(e,i){e=e[0]||e;var n=this.caret.getOffset(),o=this.utils.getOuterHtml(e);return o=this.clean.setVerified(o),null!==o.match(/</g)&&(e=t(o)[0]),this.selection.get(),i!==!1&&this.range.deleteContents(),this.range.insertNode(e),this.range.collapse(!1),this.selection.addRange(),this.caret.setOffset(n),e},nodeToPoint:function(t,e,i){t=t[0]||t,this.selection.get();var n;if(document.caretPositionFromPoint){var o=document.caretPositionFromPoint(e,i);this.range.setStart(o.offsetNode,o.offset),this.range.collapse(!0),this.range.insertNode(t)}else if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(e,i),n.insertNode(t);else if("undefined"!=typeof document.body.createTextRange){n=document.body.createTextRange(),n.moveToPoint(e,i);var s=n.duplicate();s.moveToPoint(e,i),n.setEndPoint("EndToEnd",s),n.select()}},nodeToCaretPositionFromPoint:function(t,e){e=e[0]||e;var i,n=t.clientX,o=t.clientY;if(document.caretPositionFromPoint){var s=document.caretPositionFromPoint(n,o),r=document.getSelection();i=r.getRangeAt(0),i.setStart(s.offsetNode,s.offset),i.collapse(!0),i.insertNode(e)}else if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(n,o),i.insertNode(e);else if("undefined"!=typeof document.body.createTextRange){i=document.body.createTextRange(),i.moveToPoint(n,o);var a=i.duplicate();a.moveToPoint(n,o),i.setEndPoint("EndToEnd",a),i.select()}},ie11FixInserting:function(e,i){var n=document.createElement("span");n.className="redactor-ie-paste",this.insert.node(n);var o=t(e).html();o="<p>"+o.replace(/<span class="redactor-ie-paste"><\/span>/gi,"</p>"+i+"<p>")+"</p>",o=o.replace(/<p><\/p>/gi,""),t(e).replaceWith(o)},ie11PasteFrag:function(t){this.selection.get(),this.range.deleteContents();var e=document.createElement("div");e.innerHTML=t;for(var i,n,o=document.createDocumentFragment();i=e.firstChild;)n=o.appendChild(i);this.range.insertNode(o),this.range.collapse(!1),this.selection.addRange()}}},keydown:function(){return{init:function(e){if(!this.rtePaste){var i=e.which,n=i>=37&&40>=i;this.keydown.ctrl=e.ctrlKey||e.metaKey,this.keydown.current=this.selection.getCurrent(),this.keydown.parent=this.selection.getParent(),this.keydown.block=this.selection.getBlock(),this.keydown.pre=this.utils.isTag(this.keydown.current,"pre"),this.keydown.blockquote=this.utils.isTag(this.keydown.current,"blockquote"),this.keydown.figcaption=this.utils.isTag(this.keydown.current,"figcaption"),this.shortcuts.init(e,i),this.utils.isDesktop()&&(this.keydown.checkEvents(n,i),this.keydown.setupBuffer(e,i)),this.keydown.addArrowsEvent(n),this.keydown.setupSelectAll(e,i);var o=this.core.setCallback("keydown",e);if(o===!1)return e.preventDefault(),!1;if(this.opts.enterKey&&(this.utils.browser("msie")||this.utils.browser("mozilla"))&&(i===this.keyCode.DOWN||i===this.keyCode.RIGHT)){var s=!1,r=!1;if(this.keydown.block&&"TD"===this.keydown.block.tagName&&(r=t(this.keydown.block).closest("table",this.$editor[0])),r&&r.find("td").last()[0]===this.keydown.block&&(s=!0),this.utils.isEndOfElement()&&s){var a=t(this.opts.emptyHtml);r.after(a),this.caret.setStart(a)}}if(this.opts.enterKey&&i===this.keyCode.DOWN&&this.keydown.onArrowDown(),!this.opts.enterKey&&i===this.keyCode.ENTER)return e.preventDefault(),void(this.range.collapsed||this.range.deleteContents());if(i==this.keyCode.ENTER&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey){var l=this.core.setCallback("enter",e);if(l===!1)return e.preventDefault(),!1;if(this.keydown.blockquote&&this.keydown.exitFromBlockquote(e)===!0)return!1;var u,c;if(this.keydown.pre)return this.keydown.insertNewLine(e);if(this.keydown.blockquote||this.keydown.figcaption)return u=this.selection.getCurrent(),c=t(u).next(),0!==c.length&&"BR"==c[0].tagName?this.keydown.insertBreakLine(e):this.utils.isEndOfElement()&&u&&"SPAN"!=u?this.keydown.insertDblBreakLine(e):this.keydown.insertBreakLine(e);if(this.opts.linebreaks&&!this.keydown.block)return u=this.selection.getCurrent(),c=t(this.keydown.current).next(),0!==c.length&&"BR"==c[0].tagName?this.keydown.insertBreakLine(e):u!==!1&&t(u).hasClass("redactor-invisible-space")?(this.caret.setAfter(u),t(u).contents().unwrap(),this.keydown.insertDblBreakLine(e)):this.utils.isEndOfEditor()?this.keydown.insertDblBreakLine(e):this.keydown.insertBreakLine(0===c.length&&u===!1&&"undefined"!=typeof c.context?e:e);if(this.opts.linebreaks&&this.keydown.block)setTimeout(t.proxy(this.keydown.replaceDivToBreakLine,this),1);else if(!this.opts.linebreaks&&this.keydown.block){if(setTimeout(t.proxy(this.keydown.replaceDivToParagraph,this),1),"LI"===this.keydown.block.tagName){u=this.selection.getCurrent();var h=t(u).closest("li",this.$editor[0]),d=h.closest("ul,ol",this.$editor[0]);if(0!==h.length&&this.utils.isEmpty(h.html())&&0===d.next().length&&this.utils.isEmpty(d.find("li").last().html())){d.find("li").last().remove();var a=t(this.opts.emptyHtml);return d.after(a),this.caret.setStart(a),!1}}}else if(!this.opts.linebreaks&&!this.keydown.block)return this.keydown.insertParagraph(e)}if(i===this.keyCode.ENTER&&(e.ctrlKey||e.shiftKey))return this.keydown.onShiftEnter(e);if(i===this.keyCode.TAB||e.metaKey&&221===i||e.metaKey&&219===i)return this.keydown.onTab(e,i);if(i===this.keyCode.BACKSPACE||i===this.keyCode.DELETE){var p=this.selection.getNodes();if(p)for(var f,g=p.length,m=0;g>m;m++){var v=t(p[m]).children("img");if(0!==v.length){var y=this;t.each(v,function(e,i){var n=t(i);"none"==n.css("float")&&(y.core.setCallback("imageDelete",i.src,n),f=i)})}else"IMG"==p[m].tagName&&f!=p[m]&&(this.core.setCallback("imageDelete",p[m].src,t(p[m])),f=p[m])}}if(i===this.keyCode.BACKSPACE){var b=this.selection.getBlock(),w="0px"!==t(b).css("margin-left");if(b&&w&&this.range.collapsed&&this.utils.isStartOfElement())return this.indent.decrease(),void e.preventDefault();if(this.utils.browser("mozilla")){var _=this.selection.getPrev(),k=t(_).prev()[0];_&&"HR"===_.tagName&&t(_).remove(),k&&"HR"===k.tagName&&t(k).remove()}this.keydown.removeInvisibleSpace(),this.keydown.removeEmptyListInTable(e)}this.code.sync()}},checkEvents:function(t,e){t||"click"!=this.core.getEvent()&&"arrow"!=this.core.getEvent()||(this.core.addEvent(!1),this.keydown.checkKeyEvents(e)&&this.buffer.set())},checkKeyEvents:function(e){var i=this.keyCode,n=[i.BACKSPACE,i.DELETE,i.ENTER,i.ESC,i.TAB,i.CTRL,i.META,i.ALT,i.SHIFT];return-1==t.inArray(e,n)?!0:!1},addArrowsEvent:function(t){return t?"click"==this.core.getEvent()||"arrow"==this.core.getEvent()?void this.core.addEvent(!1):void this.core.addEvent("arrow"):void 0},setupBuffer:function(t,e){return this.keydown.ctrl&&90===e&&!t.shiftKey&&!t.altKey&&this.opts.buffer.length?(t.preventDefault(),void this.buffer.undo()):this.keydown.ctrl&&90===e&&t.shiftKey&&!t.altKey&&0!==this.opts.rebuffer.length?(t.preventDefault(),void this.buffer.redo()):void(this.keydown.ctrl||(e==this.keyCode.BACKSPACE||e==this.keyCode.DELETE||e==this.keyCode.ENTER&&!t.ctrlKey&&!t.shiftKey)&&this.buffer.set())},setupSelectAll:function(t,e){this.keydown.ctrl&&65===e?this.utils.enableSelectAll():e==this.keyCode.LEFT_WIN||this.keydown.ctrl||this.utils.disableSelectAll()},onArrowDown:function(){for(var t=[this.keydown.blockquote,this.keydown.pre,this.keydown.figcaption],e=0;e<t.length;e++)if(t[e])return this.keydown.insertAfterLastElement(t[e]),!1},onShiftEnter:function(t){return this.buffer.set(),this.utils.isEndOfElement()?this.keydown.insertDblBreakLine(t):this.keydown.insertBreakLine(t)},onTab:function(t,e){if(!this.opts.tabKey)return!0;if(this.utils.isEmpty(this.code.get())&&this.opts.tabAsSpaces===!1)return!0;t.preventDefault();var i;return this.keydown.pre&&!t.shiftKey?(i=document.createTextNode(this.opts.preSpaces?Array(this.opts.preSpaces+1).join("\xa0"):"	"),this.insert.node(i),this.code.sync()):this.opts.tabAsSpaces!==!1?(i=document.createTextNode(Array(this.opts.tabAsSpaces+1).join("\xa0")),this.insert.node(i),this.code.sync()):t.metaKey&&219===e?this.indent.decrease():t.metaKey&&221===e?this.indent.increase():t.shiftKey?this.indent.decrease():this.indent.increase(),!1},replaceDivToBreakLine:function(){var e=this.selection.getBlock(),i=e.innerHTML.replace(/<br\s?\/?>/gi,"");if(("DIV"===e.tagName||"P"===e.tagName)&&""===i&&!t(e).hasClass("redactor-editor")){var n=document.createElement("br");return t(e).replaceWith(n),this.caret.setBefore(n),this.code.sync(),!1}},replaceDivToParagraph:function(){var e=this.selection.getBlock(),i=e.innerHTML.replace(/<br\s?\/?>/gi,"");if("DIV"===e.tagName&&this.utils.isEmpty(i)&&!t(e).hasClass("redactor-editor")){var n=document.createElement("p");return n.innerHTML=this.opts.invisibleSpace,t(e).replaceWith(n),this.caret.setStart(n),this.code.sync(),!1}this.opts.cleanStyleOnEnter&&"P"==e.tagName&&t(e).removeAttr("class").removeAttr("style")},insertParagraph:function(t){t.preventDefault(),this.selection.get();var e=document.createElement("p");return e.innerHTML=this.opts.invisibleSpace,this.range.deleteContents(),this.range.insertNode(e),this.caret.setStart(e),this.code.sync(),!1},exitFromBlockquote:function(e){if(this.utils.isEndOfElement()){var i=t.trim(t(this.keydown.block).html());if(-1!=i.search(/(<br\s?\/?>){2}$/i)){if(e.preventDefault(),this.opts.linebreaks){var n=document.createElement("br");t(this.keydown.blockquote).after(n),this.caret.setBefore(n),t(this.keydown.block).html(i.replace(/<br\s?\/?>$/i,""))}else{var o=t(this.opts.emptyHtml);t(this.keydown.blockquote).after(o),this.caret.setStart(o)}return!0}}},insertAfterLastElement:function(e){if(this.utils.isEndOfElement())if(this.buffer.set(),this.opts.linebreaks){var i=t("<div>").append(t.trim(this.$editor.html())).contents(),n=i.last()[0];if("SPAN"==n.tagName&&""===n.innerHTML&&(n=i.prev()[0]),this.utils.getOuterHtml(n)!=this.utils.getOuterHtml(e))return;var o=document.createElement("br");t(e).after(o),this.caret.setAfter(o)}else{if(this.$editor.contents().last()[0]!==e)return;var s=t(this.opts.emptyHtml);t(e).after(s),this.caret.setStart(s)}},insertNewLine:function(t){t.preventDefault();var e=document.createTextNode("\n");return this.selection.get(),this.range.deleteContents(),this.range.insertNode(e),this.caret.setAfter(e),this.code.sync(),!1},insertBreakLine:function(t){return this.keydown.insertBreakLineProcessing(t)},insertDblBreakLine:function(t){return this.keydown.insertBreakLineProcessing(t,!0)},insertBreakLineProcessing:function(e,i){e.stopPropagation(),this.selection.get();var n=document.createElement("br");this.utils.browser("msie")?(this.range.collapse(!1),this.range.setEnd(this.range.endContainer,this.range.endOffset)):this.range.deleteContents(),this.range.insertNode(n);var o=t(n).parent("a");if(o.length>0&&(o.find(n).remove(),o.after(n)),i===!0){var s=t(n).next();if(0!==s.length&&"BR"===s[0].tagName&&this.utils.isEndOfEditor())return this.caret.setAfter(n),this.code.sync(),!1;var r=document.createElement("br");this.range.insertNode(r),this.caret.setAfter(r)}else if(this.utils.browser("msie")){var a=document.createElement("span");a.innerHTML="&#x200b;",t(n).after(a),this.range.setStartAfter(a),this.range.setEndAfter(a),t(a).remove()}else{var l=document.createRange();l.setStartAfter(n),l.collapse(!0);var u=window.getSelection();u.removeAllRanges(),u.addRange(l)}return this.code.sync(),!1},removeInvisibleSpace:function(){var e=t(this.keydown.current);0===e.text().search(/^\u200B$/g)&&e.remove()},removeEmptyListInTable:function(e){var i=t(this.keydown.current),n=t(this.keydown.parent),o=i.closest("td",this.$editor[0]);if(0!==o.length&&i.closest("li",this.$editor[0])&&1===n.children("li").length){if(!this.utils.isEmpty(i.text()))return;e.preventDefault(),i.remove(),n.remove(),this.caret.setStart(o)}}}},keyup:function(){return{init:function(e){if(!this.rtePaste){var i=e.which;this.keyup.current=this.selection.getCurrent(),this.keyup.parent=this.selection.getParent();var n=this.utils.isRedactorParent(t(this.keyup.parent).parent()),o=this.core.setCallback("keyup",e);if(o===!1)return e.preventDefault(),!1;if(!this.opts.linebreaks&&3===this.keyup.current.nodeType&&this.keyup.current.length<=1&&(this.keyup.parent===!1||"BODY"==this.keyup.parent.tagName)&&this.keyup.replaceToParagraph(),!this.opts.linebreaks&&this.utils.isRedactorParent(this.keyup.current)&&"DIV"===this.keyup.current.tagName&&this.keyup.replaceToParagraph(!1),this.opts.linebreaks||!t(this.keyup.parent).hasClass("redactor-invisible-space")||n!==!1&&"BODY"!=n[0].tagName||(t(this.keyup.parent).contents().unwrap(),this.keyup.replaceToParagraph()),this.linkify.isEnabled()&&this.linkify.isKey(i)&&this.linkify.format(),i===this.keyCode.DELETE||i===this.keyCode.BACKSPACE){if(this.utils.browser("mozilla")){var s=t(this.keydown.current).closest("td",this.$editor[0]);
if(0!==s.size()&&""!==s.text())return e.preventDefault(),!1}return this.clean.clearUnverified(),this.observe.image?(e.preventDefault(),this.image.hideResize(),this.buffer.set(),this.image.remove(this.observe.image),this.observe.image=!1,!1):(this.$editor.find("p").each(t.proxy(function(e,i){this.utils.removeEmpty(e,t(i).html())},this)),this.opts.linebreaks&&this.keyup.current&&"DIV"==this.keyup.current.tagName&&this.utils.isEmpty(this.keyup.current.innerHTML)&&(t(this.keyup.current).after(this.selection.getMarkerAsHtml()),this.selection.restore(),t(this.keyup.current).remove()),this.keyup.removeEmptyLists(),this.keyup.formatEmpty(e))}}},replaceToParagraph:function(e){var i,n=t(this.keyup.current);i=t("<p>").append(e===!1?n.html():n.clone()),n.replaceWith(i);var o=t(i).next();"undefined"!=typeof o[0]&&"BR"==o[0].tagName&&o.remove(),this.caret.setEnd(i)},removeEmptyLists:function(){var e=function(){var e=t.trim(this.innerHTML).replace(/\/t\/n/g,"");""===e&&t(this).remove()};this.$editor.find("li").each(e),this.$editor.find("ul, ol").each(e)},formatEmpty:function(e){var i=t.trim(this.$editor.html());if(this.utils.isEmpty(i))return e.preventDefault(),this.opts.linebreaks?(this.$editor.html(this.selection.getMarkerAsHtml()),this.selection.restore()):(this.$editor.html(this.opts.emptyHtml),this.focus.setStart()),this.code.sync(),!1}}},lang:function(){return{load:function(){this.opts.curLang=this.opts.langs[this.opts.lang]},get:function(t){return"undefined"!=typeof this.opts.curLang[t]?this.opts.curLang[t]:""}}},line:function(){return{insert:function(){this.buffer.set();var t=this.selection.getBlocks();return t[0]!==!1&&this.line.isExceptLastOrFirst(t)?void(this.utils.browser("msie")||this.$editor.focus()):void(this.utils.browser("msie")?this.line.insertInIe():this.line.insertInOthersBrowsers())},isExceptLastOrFirst:function(e){var i=["li","td","th","blockquote","figcaption","pre","dl","dt","dd"],n=e[0].tagName.toLowerCase(),o=this.selection.getLastBlock();o="undefined"==typeof o?n:o.tagName.toLowerCase();var s=-1!=t.inArray(n,i),r=-1!=t.inArray(o,i);return s&&r||s?!0:void 0},insertInIe:function(){this.utils.saveScroll(),this.buffer.set(),this.insert.node(document.createElement("hr")),this.utils.restoreScroll(),this.code.sync()},insertInOthersBrowsers:function(){this.buffer.set();var t='<p id="redactor-insert-line"><br /></p>';this.opts.linebreaks&&(t='<br id="redactor-insert-line">'),document.execCommand("insertHtml",!1,"<hr>"+t),this.line.setFocus(),this.code.sync()},setFocus:function(){var e=this.$editor.find("#redactor-insert-line"),i=t(e).next()[0],n=i;this.utils.browser("mozilla")&&i&&""===i.innerHTML&&(n=t(i).next()[0],t(i).remove()),n?(e.remove(),this.opts.linebreaks||(this.$editor.focus(),this.line.setStart(n))):(e.removeAttr("id"),this.line.setStart(e[0]))},setStart:function(t){if("undefined"!=typeof t){var e=document.createTextNode("\u200b");this.selection.get(),this.range.setStart(t,0),this.range.insertNode(e),this.range.collapse(!0),this.selection.addRange()}}}},link:function(){return{show:function(e){"undefined"!=typeof e&&e.preventDefault&&e.preventDefault(),this.observe.isCurrent("a")?this.modal.load("link",this.lang.get("link_edit"),600):this.modal.load("link",this.lang.get("link_insert"),600),this.modal.createCancelButton();var i=this.lang.get(this.observe.isCurrent("a")?"edit":"insert");this.link.buttonInsert=this.modal.createActionButton(i),this.selection.get(),this.link.getData(),this.link.cleanUrl(),"_blank"==this.link.target&&t("#redactor-link-blank").prop("checked",!0),this.link.$inputUrl=t("#redactor-link-url"),this.link.$inputText=t("#redactor-link-url-text"),this.link.$inputText.val(this.link.text),this.link.$inputUrl.val(this.link.url),this.link.buttonInsert.on("click",t.proxy(this.link.insert,this)),t(".redactor-link-tooltip").remove(),this.selection.save(),this.modal.show(),this.link.$inputUrl.focus()},cleanUrl:function(){var t=self.location.href.replace(/\/$/i,"");if("undefined"!=typeof this.link.url&&(this.link.url=this.link.url.replace(t,""),this.link.url=this.link.url.replace(/^\/#/,"#"),this.link.url=this.link.url.replace("mailto:",""),!this.opts.linkProtocol)){var e=new RegExp("^(http|ftp|https)://"+self.location.host,"i");this.link.url=this.link.url.replace(e,"")}},getData:function(){this.link.$node=!1;var e=t(this.selection.getCurrent()).closest("a",this.$editor[0]);0!==e.length&&"A"===e[0].tagName?(this.link.$node=e,this.link.url=e.attr("href"),this.link.text=e.text(),this.link.target=e.attr("target")):(this.link.text=this.sel.toString(),this.link.url="",this.link.target="")},insert:function(){this.placeholder.remove();var e="",i=this.link.$inputUrl.val(),n=this.link.$inputText.val().replace(/(<([^>]+)>)/gi,"");if(""===t.trim(i))return void this.link.$inputUrl.addClass("redactor-input-error").on("keyup",function(){t(this).removeClass("redactor-input-error"),t(this).off("keyup")});if(-1!=i.search("@")&&/(http|ftp|https):\/\//i.test(i)===!1)i=i.replace("mailto:",""),i="mailto:"+i;else if(0!==i.search("#")){t("#redactor-link-blank").prop("checked")&&(e="_blank");var o="((xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}",s=new RegExp("^(http|ftp|https)://"+o,"i"),r=new RegExp("^"+o,"i"),a=new RegExp(".(html|php)$","i");-1==i.search(s)&&-1==i.search(a)&&0===i.search(r)&&this.opts.linkProtocol&&(i=this.opts.linkProtocol+"://"+i)}this.link.set(n,i,e),this.modal.close()},set:function(e,i,n){e=t.trim(e.replace(/<|>/g,"")),this.selection.restore();var o=this.selection.getBlocks();if(""!==e||""!==i){if(""===e&&""!==i&&(e=i),this.link.$node){this.buffer.set();var s=this.link.$node,r=s.children();if(r.length>0){for(;r.length;)r=r.children();r=r.end()}else r=s;s.attr("href",i),r.text(e),""!==n?s.attr("target",n):s.removeAttr("target"),this.selection.selectElement(s),this.code.sync()}else{if(this.utils.browser("mozilla")&&""===this.link.text){var a=t("<a />").attr("href",i).text(e);""!==n&&a.attr("target",n),a=t(this.insert.node(a)),this.opts.linebreaks&&a.after("&nbsp;"),this.selection.selectElement(a)}else{var a;this.utils.browser("msie")?(a=t('<a href="'+i+'">').text(e),""!==n&&a.attr("target",n),a=t(this.insert.node(a)),this.selection.getText().match(/\s$/)&&a.after(" "),this.selection.selectElement(a)):(document.execCommand("createLink",!1,i),a=t(this.selection.getCurrent()).closest("a",this.$editor[0]),this.utils.browser("mozilla")&&(a=t('a[_moz_dirty=""]')),""!==n&&a.attr("target",n),a.removeAttr("style").removeAttr("_moz_dirty"),this.selection.getText().match(/\s$/)&&a.after(" "),(""!==this.link.text||this.link.text!=e)&&(!this.opts.linebreaks&&o&&o.length<=1?a.text(e):this.opts.linebreaks&&a.text(e),this.selection.selectElement(a)))}this.code.sync(),this.core.setCallback("insertedLink",a)}setTimeout(t.proxy(function(){this.observe.links()},this),5)}},unlink:function(e){"undefined"!=typeof e&&e.preventDefault&&e.preventDefault();var i=this.selection.getNodes();if(i){this.buffer.set();for(var n=i.length,o=[],s=0;n>s;s++){"A"===i[s].tagName&&o.push(i[s]);var r=t(i[s]).closest("a",this.$editor[0]);r.replaceWith(r.contents())}this.core.setCallback("deletedLink",o),t(".redactor-link-tooltip").remove(),this.code.sync()}},toggleClass:function(t){this.link.setClass(t,"toggleClass")},addClass:function(t){this.link.setClass(t,"addClass")},removeClass:function(t){this.link.setClass(t,"removeClass")},setClass:function(e,i){var n=this.selection.getInlinesTags(["a"]);n!==!1&&t.each(n,function(){t(this)[i](e)})}}},linkify:function(){return{isKey:function(t){return t==this.keyCode.ENTER||t==this.keyCode.SPACE},isEnabled:function(){return this.opts.convertLinks&&(this.opts.convertUrlLinks||this.opts.convertImageLinks||this.opts.convertVideoLinks)&&!this.utils.isCurrentOrParent("PRE")},format:function(){var e=this.linkify,i=this.opts;this.$editor.find(":not(iframe,img,a,pre)").addBack().contents().filter(function(){return 3===this.nodeType&&""!=t.trim(this.nodeValue)&&!t(this).parent().is("pre")&&(this.nodeValue.match(i.linkify.regexps.youtube)||this.nodeValue.match(i.linkify.regexps.vimeo)||this.nodeValue.match(i.linkify.regexps.image)||this.nodeValue.match(i.linkify.regexps.url))}).each(function(){var n=t(this).text(),o=n;i.convertVideoLinks&&(o.match(i.linkify.regexps.youtube)||o.match(i.linkify.regexps.vimeo))?o=e.convertVideoLinks(o):i.convertImageLinks&&o.match(i.linkify.regexps.image)?o=e.convertImages(o):i.convertUrlLinks&&(o=e.convertLinks(o)),t(this).before(n.replace(n,o)).remove()});var n=this.$editor.find(".redactor-linkify-object").each(function(){var e=t(this);return e.removeClass("redactor-linkify-object"),""===e.attr("class")&&e.removeAttr("class"),e[0]});setTimeout(t.proxy(function(){this.observe.load(),this.core.setCallback("linkify",n)},this),100),this.code.sync()},convertVideoLinks:function(t){var e='<iframe class="redactor-linkify-object" width="500" height="281" src="',i='" frameborder="0" allowfullscreen></iframe>';return t.match(this.opts.linkify.regexps.youtube)&&(t=t.replace(this.opts.linkify.regexps.youtube,e+"//www.youtube.com/embed/$1"+i)),t.match(this.opts.linkify.regexps.vimeo)&&(t=t.replace(this.opts.linkify.regexps.vimeo,e+"//player.vimeo.com/video/$2"+i)),t},convertImages:function(t){var e=t.match(this.opts.linkify.regexps.image);return e&&(t=t.replace(t,'<img src="'+e+'" class="redactor-linkify-object" />'),this.opts.linebreaks&&(this.utils.isEmpty(this.code.get())||(t="<br>"+t)),t+="<br>"),t},convertLinks:function(e){var i=e.match(this.opts.linkify.regexps.url);if(i){i=t.grep(i,function(e,n){return t.inArray(e,i)===n});for(var n=i.length,o=0;n>o;o++){var s=i[o],r=s,a=this.opts.linkProtocol+"://";null!==s.match(/(https?|ftp):\/\//i)&&(a=""),r.length>this.opts.linkSize&&(r=r.substring(0,this.opts.linkSize)+"..."),-1===r.search("%")&&(r=decodeURIComponent(r));var l="\\b";-1!=t.inArray(s.slice(-1),["/","&","="])&&(l="");var u=new RegExp("("+s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+l+")","g");e=e.replace(u,'<a href="'+a+t.trim(s)+'" class="redactor-linkify-object">'+t.trim(r)+"</a>")}}return e}}},list:function(){return{toggle:function(e){this.placeholder.remove(),this.utils.browser("msie")||this.opts.linebreaks||this.$editor.focus(),this.buffer.set(),this.selection.save();var i=this.selection.getParent(),n=t(i).closest("ol, ul",this.$editor[0]);this.utils.isRedactorParent(n)||0===n.length||(n=!1);var o,s,r=!1;if(n&&n.length){r=!0;var a=n[0].tagName;o="orderedlist"===e&&"UL"===a,s="unorderedlist"===e&&"OL"===a}o?this.utils.replaceToTag(n,"ol"):s?this.utils.replaceToTag(n,"ul"):r?this.list.remove(e,n):this.list.insert(e),this.selection.restore(),this.code.sync()},insert:function(e){var i=this.selection.getCurrent(),n=t(i).closest("td, th",this.$editor[0]);this.utils.browser("msie")&&this.opts.linebreaks?this.list.insertInIe(e):document.execCommand("insert"+e);var o=this.selection.getParent(),s=t(o).closest("ol, ul",this.$editor[0]);if(0!==n.length){var r=n.clone();n.after(r).remove("")}if(this.utils.isEmpty(s.find("li").text())){var a=s.children("li");a.find("br").remove(),a.append(this.selection.getMarkerAsHtml()),this.opts.linebreaks&&this.utils.browser("mozilla")&&2==a.size()&&this.utils.isEmpty(a.eq(1).text())&&a.eq(1).remove()}if(s.length){var l=s.parent();this.utils.isRedactorParent(l)&&"LI"!=l[0].tagName&&this.utils.isBlock(l[0])&&l.replaceWith(l.contents())}this.utils.browser("msie")||this.$editor.focus(),this.clean.clearUnverified()},insertInIe:function(e){var i=this.selection.wrap("div"),n=t(i).html(),o=t("orderedlist"==e?"<ol>":"<ul>"),s=t("<li>");if(""===t.trim(n))s.append(this.selection.getMarkerAsHtml()),o.append(s),this.$editor.find("#selection-marker-1").replaceWith(o);else{var r=n.split(/<br\s?\/?>/gi);if(r)for(var a=0;a<r.length;a++)""!==t.trim(r[a])&&o.append(t("<li>").html(r[a]));else s.append(n),o.append(s);t(i).replaceWith(o)}},remove:function(e){t.inArray("ul",this.selection.getBlocks())&&(e="unorderedlist"),document.execCommand("insert"+e);var i=t(this.selection.getCurrent());this.indent.fixEmptyIndent(),this.opts.linebreaks||0!==i.closest("li, th, td",this.$editor[0]).length||(document.execCommand("formatblock",!1,"p"),this.$editor.find("ul, ol, blockquote").each(t.proxy(this.utils.removeEmpty,this)));var n=t(this.selection.getCurrent()).closest("table",this.$editor[0]),o=n.prev();this.opts.linebreaks||0===n.length||0===o.length||"BR"!=o[0].tagName||o.remove(),this.clean.clearUnverified()}}},modal:function(){return{callbacks:{},loadTemplates:function(){this.opts.modal={imageEdit:String()+'<section id="redactor-modal-image-edit"><label>'+this.lang.get("title")+'</label><input type="text" id="redactor-image-title" /><label class="redactor-image-link-option">'+this.lang.get("link")+'</label><input type="text" id="redactor-image-link" class="redactor-image-link-option" aria-label="'+this.lang.get("link")+'" /><label class="redactor-image-link-option"><input type="checkbox" id="redactor-image-link-blank" aria-label="'+this.lang.get("link_new_tab")+'"> '+this.lang.get("link_new_tab")+'</label><label class="redactor-image-position-option">'+this.lang.get("image_position")+'</label><select class="redactor-image-position-option" id="redactor-image-align" aria-label="'+this.lang.get("image_position")+'"><option value="none">'+this.lang.get("none")+'</option><option value="left">'+this.lang.get("left")+'</option><option value="center">'+this.lang.get("center")+'</option><option value="right">'+this.lang.get("right")+"</option></select></section>",image:String()+'<section id="redactor-modal-image-insert"><div id="redactor-modal-image-droparea"></div></section>',file:String()+'<section id="redactor-modal-file-insert"><div id="redactor-modal-file-upload-box"><label>'+this.lang.get("filename")+'</label><input type="text" id="redactor-filename" aria-label="'+this.lang.get("filename")+'" /><br><br><div id="redactor-modal-file-upload"></div></div></section>',link:String()+'<section id="redactor-modal-link-insert"><label>URL</label><input type="url" id="redactor-link-url" aria-label="URL" /><label>'+this.lang.get("text")+'</label><input type="text" id="redactor-link-url-text" aria-label="'+this.lang.get("text")+'" /><label><input type="checkbox" id="redactor-link-blank"> '+this.lang.get("link_new_tab")+"</label></section>"},t.extend(this.opts,this.opts.modal)},addCallback:function(t,e){this.modal.callbacks[t]=e},createTabber:function(e){this.modal.$tabber=t("<div>").attr("id","redactor-modal-tabber"),e.prepend(this.modal.$tabber)},addTab:function(e,i,n){var o=t('<a href="#" rel="tab'+e+'">').text(i);n&&o.addClass("active");var s=this;o.on("click",function(e){e.preventDefault(),t(".redactor-tab").hide(),t(".redactor-"+t(this).attr("rel")).show(),s.modal.$tabber.find("a").removeClass("active"),t(this).addClass("active")}),this.modal.$tabber.append(o)},addTemplate:function(t,e){this.opts.modal[t]=e},getTemplate:function(t){return this.opts.modal[t]},getModal:function(){return this.$modalBody.find("section")},load:function(t,e,i){this.modal.templateName=t,this.modal.width=i,this.modal.build(),this.modal.enableEvents(),this.modal.setTitle(e),this.modal.setDraggable(),this.modal.setContent(),"undefined"!=typeof this.modal.callbacks[t]&&this.modal.callbacks[t].call(this)},show:function(){this.utils.disableBodyScroll(),this.utils.isMobile()?this.modal.showOnMobile():this.modal.showOnDesktop(),this.opts.highContrast&&this.$modalBox.addClass("redactor-modal-contrast"),this.$modalOverlay.show(),this.$modalBox.show(),this.$modal.attr("tabindex","-1"),this.$modal.focus(),this.modal.setButtonsWidth(),this.utils.saveScroll(),this.utils.isMobile()||(setTimeout(t.proxy(this.modal.showOnDesktop,this),0),t(window).on("resize.redactor-modal",t.proxy(this.modal.resize,this))),this.core.setCallback("modalOpened",this.modal.templateName,this.$modal),t(document).off("focusin.modal"),this.$modal.find("input[type=text],input[type=url],input[type=email]").on("keydown.redactor-modal",t.proxy(this.modal.setEnter,this))},showOnDesktop:function(){var e=this.$modal.outerHeight(),i=t(window).height(),n=t(window).width();return this.modal.width>n?void this.$modal.css({width:"96%",marginTop:i/2-e/2+"px"}):void this.$modal.css(e>i?{width:this.modal.width+"px",marginTop:"20px"}:{width:this.modal.width+"px",marginTop:i/2-e/2+"px"})},showOnMobile:function(){this.$modal.css({width:"96%",marginTop:"2%"})},resize:function(){this.utils.isMobile()?this.modal.showOnMobile():this.modal.showOnDesktop()},setTitle:function(t){this.$modalHeader.html(t)},setContent:function(){this.$modalBody.html(this.modal.getTemplate(this.modal.templateName))},setDraggable:function(){"undefined"!=typeof t.fn.draggable&&(this.$modal.draggable({handle:this.$modalHeader}),this.$modalHeader.css("cursor","move"))},setEnter:function(t){13==t.which&&(t.preventDefault(),this.$modal.find("button.redactor-modal-action-btn").click())},createCancelButton:function(){var e=t("<button>").addClass("redactor-modal-btn redactor-modal-close-btn").html(this.lang.get("cancel"));e.on("click",t.proxy(this.modal.close,this)),this.$modalFooter.append(e)},createDeleteButton:function(t){return this.modal.createButton(t,"delete")},createActionButton:function(t){return this.modal.createButton(t,"action")},createButton:function(e,i){var n=t("<button>").addClass("redactor-modal-btn").addClass("redactor-modal-"+i+"-btn").html(e);return this.$modalFooter.append(n),n},setButtonsWidth:function(){var t=this.$modalFooter.find("button"),e=t.length;0!==e&&t.css("width",100/e+"%")},build:function(){this.modal.buildOverlay(),this.$modalBox=t('<div id="redactor-modal-box"/>').hide(),this.$modal=t('<div id="redactor-modal" role="dialog" aria-labelledby="redactor-modal-header" />'),this.$modalHeader=t('<header id="redactor-modal-header"/>'),this.$modalClose=t('<button type="button" id="redactor-modal-close" tabindex="1" aria-label="Close" />').html("&times;"),this.$modalBody=t('<div id="redactor-modal-body" />'),this.$modalFooter=t("<footer />"),this.$modal.append(this.$modalHeader),this.$modal.append(this.$modalClose),this.$modal.append(this.$modalBody),this.$modal.append(this.$modalFooter),this.$modalBox.append(this.$modal),this.$modalBox.appendTo(document.body)},buildOverlay:function(){this.$modalOverlay=t('<div id="redactor-modal-overlay">').hide(),t("body").prepend(this.$modalOverlay)},enableEvents:function(){this.$modalClose.on("click.redactor-modal",t.proxy(this.modal.close,this)),t(document).on("keyup.redactor-modal",t.proxy(this.modal.closeHandler,this)),this.$editor.on("keyup.redactor-modal",t.proxy(this.modal.closeHandler,this)),this.$modalBox.on("click.redactor-modal",t.proxy(this.modal.close,this))},disableEvents:function(){this.$modalClose.off("click.redactor-modal"),t(document).off("keyup.redactor-modal"),this.$editor.off("keyup.redactor-modal"),this.$modalBox.off("click.redactor-modal"),t(window).off("resize.redactor-modal")},closeHandler:function(t){t.which==this.keyCode.ESC&&this.modal.close(!1)},close:function(e){if(e){if(!t(e.target).hasClass("redactor-modal-close-btn")&&e.target!=this.$modalClose[0]&&e.target!=this.$modalBox[0])return;e.preventDefault()}this.$modalBox&&(this.modal.disableEvents(),this.utils.enableBodyScroll(),this.$modalOverlay.remove(),this.$modalBox.fadeOut("fast",t.proxy(function(){this.$modalBox.remove(),setTimeout(t.proxy(this.utils.restoreScroll,this),0),void 0!==e&&this.selection.restore(),t(document.body).css("overflow",this.modal.bodyOveflow),this.core.setCallback("modalClosed",this.modal.templateName)},this)))}}},observe:function(){return{load:function(){if("undefined"==typeof this.opts.destroyed){if(this.utils.browser("msie")){var e=this;this.$editor.find("pre, code").on("mouseover",function(){e.$editor.attr("contenteditable",!1),t(this).attr("contenteditable",!0)}).on("mouseout",function(){e.$editor.attr("contenteditable",!0),t(this).removeAttr("contenteditable")})}this.observe.images(),this.observe.links()}},toolbar:function(t,e){this.observe.buttons(t,e),this.observe.dropdowns()},isCurrent:function(e,i){if("undefined"==typeof i)var i=t(this.selection.getCurrent());return i.is(e)||i.parents(e).length>0},dropdowns:function(){var e=t(this.selection.getCurrent());t.each(this.opts.observe.dropdowns,t.proxy(function(t,i){var n=i.observe,o=n.element,s=i.item,r="undefined"!=typeof n["in"]?n["in"]:!1,a="undefined"!=typeof n.out?n.out:!1;e.closest(o).size()>0?this.observe.setDropdownProperties(s,r,a):this.observe.setDropdownProperties(s,a,r)},this))},setDropdownProperties:function(t,e,i){i&&"undefined"!=typeof i.attr&&this.observe.setDropdownAttr(t,i.attr,!0),"undefined"!=typeof e.attr&&this.observe.setDropdownAttr(t,e.attr),"undefined"!=typeof e.title&&t.text(e.title)},setDropdownAttr:function(e,i,n){t.each(i,function(t,i){"class"==t?n?e.removeClass(i):e.addClass(i):n?e.removeAttr(t):e.attr(t,i)})},addDropdown:function(t,e,i){"undefined"!=typeof i.observe&&(i.item=t,this.opts.observe.dropdowns.push(i))},buttons:function(e,i){var n=this.selection.getCurrent(),o=this.selection.getParent();if(e!==!1?this.button.setInactiveAll():this.button.setInactiveAll(i),e===!1&&"html"!==i)return void(-1!=t.inArray(i,this.opts.activeButtons)&&this.button.toggleActive(i));t.each(this.opts.activeButtonsStates,t.proxy(function(e,i){var s=t(o).closest(e,this.$editor[0]),r=t(n).closest(e,this.$editor[0]);(0===s.length||this.utils.isRedactorParent(s))&&this.utils.isRedactorParent(r)&&(0!==s.length||0!==r.closest(e,this.$editor[0]).length)&&this.button.setActive(i)},this));var s=t(o).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);if(this.utils.isRedactorParent(o)&&s.length){var r=""===s.css("text-align")?"left":s.css("text-align");this.button.setActive("align"+r)}},addButton:function(t,e){this.opts.activeButtons.push(e),this.opts.activeButtonsStates[t]=e},images:function(){this.$editor.find("img").each(t.proxy(function(e,i){var n=t(i);n.closest("a",this.$editor[0]).on("click",function(t){t.preventDefault()}),this.utils.browser("msie")&&n.attr("unselectable","on"),this.image.setEditable(n)},this)),t(document).on("click.redactor-image-delete."+this.uuid,t.proxy(function(t){this.observe.image=!1,"IMG"==t.target.tagName&&this.utils.isRedactorParent(t.target)&&(this.observe.image=this.observe.image&&this.observe.image==t.target?!1:t.target)},this))},links:function(){this.opts.linkTooltip&&(this.$editor.find("a").on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.showTooltip,this)),this.$editor.on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.closeTooltip,this)),t(document).on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.closeTooltip,this)))},getTooltipPosition:function(t){return t.offset()},showTooltip:function(e){var i=t(e.target);if("IMG"!=i[0].tagName&&("A"!==i[0].tagName&&(i=i.closest("a",this.$editor[0])),"A"===i[0].tagName)){var n=i,o=this.observe.getTooltipPosition(n),s=t('<span class="redactor-link-tooltip"></span>'),r=n.attr("href");void 0===r&&(r=""),r.length>24&&(r=r.substring(0,24)+"...");var a=t('<a href="'+n.attr("href")+'" target="_blank" />').html(r).addClass("redactor-link-tooltip-action"),l=t('<a href="#" />').html(this.lang.get("edit")).on("click",t.proxy(this.link.show,this)).addClass("redactor-link-tooltip-action"),u=t('<a href="#" />').html(this.lang.get("unlink")).on("click",t.proxy(this.link.unlink,this)).addClass("redactor-link-tooltip-action");s.append(a).append(" | ").append(l).append(" | ").append(u),s.css({top:o.top+parseInt(n.css("line-height"),10)+"px",left:o.left+"px"}),t(".redactor-link-tooltip").remove(),t("body").append(s)}},closeTooltip:function(e){e=e.originalEvent||e;var i=e.target,n=t(i).closest("a",this.$editor[0]);(0===n.length||"A"!==n[0].tagName||"A"===i.tagName)&&("A"===i.tagName&&this.utils.isRedactorParent(i)||t(i).hasClass("redactor-link-tooltip-action")||t(".redactor-link-tooltip").remove())}}},paragraphize:function(){return{load:function(e){return this.opts.linebreaks?e:""===e||"<p></p>"===e?this.opts.emptyHtml:(e+="\n",this.paragraphize.safes=[],this.paragraphize.z=0,e=e.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi,"</blockquote>"),e=this.paragraphize.getSafes(e),e=this.paragraphize.getSafesComments(e),e=this.paragraphize.replaceBreaksToNewLines(e),e=this.paragraphize.replaceBreaksToParagraphs(e),e=this.paragraphize.clear(e),e=this.paragraphize.restoreSafes(e),e=e.replace(new RegExp("<br\\s?/?>\n?<("+this.opts.paragraphizeBlocks.join("|")+")(.*?[^>])>","gi"),"<p><br /></p>\n<$1$2>"),t.trim(e))},getSafes:function(e){var i=t("<div />").append(e);return i.find("blockquote p").replaceWith(function(){return t(this).append("<br />").contents()}),e=i.html(),i.find(this.opts.paragraphizeBlocks.join(", ")).each(t.proxy(function(t,i){this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=i.outerHTML,e=e.replace(i.outerHTML,"\n{replace"+this.paragraphize.z+"}")},this)),e},getSafesComments:function(e){var i=e.match(/<!--([\w\W]*?)-->/gi);return i?(t.each(i,t.proxy(function(t,i){this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=i,e=e.replace(i,"\n{replace"+this.paragraphize.z+"}")},this)),e):e},restoreSafes:function(e){return t.each(this.paragraphize.safes,function(t,i){i="undefined"!=typeof i?i.replace(/\$/g,"&#36;"):i,e=e.replace("{replace"+t+"}",i)}),e},replaceBreaksToParagraphs:function(t){var e=t.split(new RegExp("\n","g"),-1);if(t="",e)for(var i=e.length,n=0;i>n;n++){if(!e.hasOwnProperty(n))return;-1==e[n].search("{replace")?(e[n]=e[n].replace(/<p>\n\t?<\/p>/gi,""),e[n]=e[n].replace(/<p><\/p>/gi,""),""!==e[n]&&(t+="<p>"+e[n].replace(/^\n+|\n+$/g,"")+"</p>")):t+=e[n]}return t},replaceBreaksToNewLines:function(t){return t=t.replace(/<br \/>\s*<br \/>/gi,"\n\n"),t=t.replace(/<br\s?\/?>\n?<br\s?\/?>/gi,"\n<br /><br />"),t=t.replace(new RegExp("\r\n","g"),"\n"),t=t.replace(new RegExp("\r","g"),"\n"),t=t.replace(new RegExp("/\n\n+/"),"g","\n\n")},clear:function(t){return t=t.replace(new RegExp("</blockquote></p>","gi"),"</blockquote>"),t=t.replace(new RegExp("<p></blockquote>","gi"),"</blockquote>"),t=t.replace(new RegExp("<p><blockquote>","gi"),"<blockquote>"),t=t.replace(new RegExp("<blockquote></p>","gi"),"<blockquote>"),t=t.replace(new RegExp("<p><p ","gi"),"<p "),t=t.replace(new RegExp("<p><p>","gi"),"<p>"),t=t.replace(new RegExp("</p></p>","gi"),"</p>"),t=t.replace(new RegExp("<p>\\s?</p>","gi"),""),t=t.replace(new RegExp("\n</p>","gi"),"</p>"),t=t.replace(new RegExp("<p>	?	?\n?<p>","gi"),"<p>"),t=t.replace(new RegExp("<p>	*</p>","gi"),"")}}},paste:function(){return{init:function(){return this.opts.cleanOnPaste?(this.rtePaste=!0,this.buffer.set(),this.selection.save(),this.utils.saveScroll(),this.paste.createPasteBox(),t(window).on("scroll.redactor-freeze",t.proxy(function(){t(window).scrollTop(this.saveBodyScroll)},this)),void setTimeout(t.proxy(function(){var e=this.$pasteBox.html();this.$pasteBox.remove(),this.selection.restore(),this.utils.restoreScroll(),this.paste.insert(e),t(window).off("scroll.redactor-freeze"),this.linkify.isEnabled()&&this.linkify.format()},this),1)):void setTimeout(t.proxy(this.code.sync,this),1)},createPasteBox:function(){if(this.$pasteBox=t("<div>").html("").attr("contenteditable","true").css({position:"fixed",width:0,top:0,left:"-9999px"}),this.utils.browser("msie"))this.$box.append(this.$pasteBox);else{var e=t(".modal-body:visible");e.length>0?e.append(this.$pasteBox):t("body").append(this.$pasteBox)}this.$pasteBox.get(0).focus()},insert:function(e){e=this.core.setCallback("pasteBefore",e),e=this.utils.isSelectAll()?this.clean.onPaste(e,!1):this.clean.onPaste(e),e=this.core.setCallback("paste",e),this.utils.isSelectAll()?this.insert.set(e,!1):this.insert.html(e,!1),this.utils.disableSelectAll(),this.rtePaste=!1,setTimeout(t.proxy(this.clean.clearUnverified,this),10),setTimeout(t.proxy(function(){var e=this.$editor.find("span");t.each(e,function(e,i){var n=i.innerHTML.replace(/\u200B/,"");""===n&&0===i.attributes.length&&t(i).remove()})},this),10)}}},placeholder:function(){return{enable:function(){this.placeholder.is()&&(this.$editor.attr("placeholder",this.$element.attr("placeholder")),this.placeholder.toggle(),this.$editor.on("keydown.redactor-placeholder",t.proxy(this.placeholder.toggle,this)))},toggle:function(){setTimeout(t.proxy(function(){var t=this.utils.isEmpty(this.$editor.html(),!1)?"addClass":"removeClass";this.$editor[t]("redactor-placeholder")},this),5)},remove:function(){this.$editor.removeClass("redactor-placeholder")},is:function(){return this.opts.placeholder?this.$element.attr("placeholder",this.opts.placeholder):!("undefined"==typeof this.$element.attr("placeholder")||""===this.$element.attr("placeholder"))}}},progress:function(){return{show:function(){t(document.body).append(t('<div id="redactor-progress"><span></span></div>')),t("#redactor-progress").fadeIn()},hide:function(){t("#redactor-progress").fadeOut(1500,function(){t(this).remove()})}}},selection:function(){return{get:function(){this.sel=document.getSelection(),this.range=document.getSelection&&this.sel.getRangeAt&&this.sel.rangeCount?this.sel.getRangeAt(0):document.createRange()},addRange:function(){try{this.sel.removeAllRanges()}catch(t){}this.sel.addRange(this.range)},getCurrent:function(){var t=!1;return this.selection.get(),this.sel&&this.sel.rangeCount>0&&(t=this.sel.getRangeAt(0).startContainer),this.utils.isRedactorParent(t)},getParent:function(e){return e=e||this.selection.getCurrent(),e?this.utils.isRedactorParent(t(e).parent()[0]):!1},getPrev:function(){return window.getSelection().anchorNode.previousSibling},getNext:function(){return window.getSelection().anchorNode.nextSibling},getBlock:function(e){for(e=e||this.selection.getCurrent();e;){if(this.utils.isBlockTag(e.tagName))return t(e).hasClass("redactor-editor")?!1:e;e=e.parentNode}return!1},getInlines:function(e,i){if(this.selection.get(),this.range&&this.range.collapsed)return!1;var n=[];e="undefined"==typeof e||e===!1?this.selection.getNodes():e;var o=this.opts.inlineTags;if(o.push("span"),"undefined"!=typeof i)for(var s=0;s<i.length;s++)o.push(i[s]);return t.each(e,t.proxy(function(e,i){-1!=t.inArray(i.tagName.toLowerCase(),o)&&n.push(i)},this)),0===n.length?!1:n},getInlinesTags:function(e){if(this.selection.get(),this.range&&this.range.collapsed)return!1;var i=[],n=this.selection.getNodes();return t.each(n,t.proxy(function(n,o){-1!=t.inArray(o.tagName.toLowerCase(),e)&&i.push(o)},this)),0===i.length?!1:i},getBlocks:function(e){if(this.selection.get(),this.range&&this.range.collapsed)return[this.selection.getBlock()];var i=[];return e="undefined"==typeof e?this.selection.getNodes():e,t.each(e,t.proxy(function(t,e){this.utils.isBlock(e)&&i.push(e)},this)),0===i.length?[this.selection.getBlock()]:i},getLastBlock:function(){return this.selection.lastBlock},getNodes:function(){this.selection.get();var e=this.selection.getNodesMarker(1),i=this.selection.getNodesMarker(2);if(this.range.collapsed===!1){if(window.getSelection){var n=window.getSelection();if(n.rangeCount>0){var o=n.getRangeAt(0),s=o.startContainer,r=o.startOffset,a=o.cloneRange();a.collapse(!1),a.insertNode(i),a.setStart(s,r),a.collapse(!0),a.insertNode(e),o.setStartAfter(e),o.setEndBefore(i),n.removeAllRanges(),n.addRange(o)}}}else this.selection.setNodesMarker(this.range,e,!0),i=e;var l=[],u=0,c=this;this.$editor.find("*").each(function(){if(this==e){var n=t(this).parent();0!==n.length&&"BODY"!=n[0].tagName&&c.utils.isRedactorParent(n[0])&&l.push(n[0]),l.push(this),u=1}else u>0&&(l.push(this),u+=1);return this==i?!1:void 0});for(var h=[],d=l.length,p=0;d>p;p++)"nodes-marker-1"!=l[p].id&&"nodes-marker-2"!=l[p].id&&h.push(l[p]);return this.selection.removeNodesMarkers(),h},getNodesMarker:function(e){return t('<span id="nodes-marker-'+e+'" class="redactor-nodes-marker" data-verified="redactor">'+this.opts.invisibleSpace+"</span>")[0]},setNodesMarker:function(t,e,i){var t=t.cloneRange();try{t.collapse(i),t.insertNode(e)}catch(n){}},removeNodesMarkers:function(){t(document).find("span.redactor-nodes-marker").remove(),this.$editor.find("span.redactor-nodes-marker").remove()},fromPoint:function(t,e){this.caret.setOffset(t,e)},wrap:function(t){if(this.selection.get(),this.range.collapsed)return!1;var e=document.createElement(t);return e.appendChild(this.range.extractContents()),this.range.insertNode(e),e},selectElement:function(t){if(this.utils.browser("mozilla")){t=t[0]||t;var e=document.createRange();e.selectNodeContents(t)}else this.caret.set(t,0,t,1)},selectAll:function(){this.selection.get(),this.range.selectNodeContents(this.$editor[0]),this.selection.addRange()},remove:function(){this.selection.get(),this.sel.removeAllRanges()},save:function(){this.selection.createMarkers()},createMarkers:function(){this.selection.get();var t=this.selection.getMarker(1);
if(this.selection.setMarker(this.range,t,!0),this.range.collapsed===!1){var e=this.selection.getMarker(2);this.selection.setMarker(this.range,e,!1),this.utils.browser("chrome")&&this.caret.set(t,0,e,0)}this.savedSel=this.$editor.html()},getMarker:function(e){return"undefined"==typeof e&&(e=1),t('<span id="selection-marker-'+e+'" class="redactor-selection-marker"  data-verified="redactor">'+this.opts.invisibleSpace+"</span>")[0]},getMarkerAsHtml:function(t){return this.utils.getOuterHtml(this.selection.getMarker(t))},setMarker:function(t,e,i){t=t.cloneRange();try{t.collapse(i),t.insertNode(e)}catch(n){this.focus.setStart()}},restore:function(){var t=this.$editor.find("span#selection-marker-1"),e=this.$editor.find("span#selection-marker-2");this.utils.browser("mozilla")&&this.$editor.focus(),0!==t.length&&0!==e.length?this.caret.set(t,0,e,0):0!==t.length?this.caret.set(t,0,t,0):this.$editor.focus(),this.selection.removeMarkers(),this.savedSel=!1},removeMarkers:function(){this.$editor.find("span.redactor-selection-marker").each(function(e,i){var n=t(i).text().replace(/\u200B/g,"");""===n?t(i).remove():t(i).replaceWith(function(){return t(this).contents()})})},getText:function(){return this.selection.get(),this.sel.toString()},getHtml:function(){var t="";if(this.selection.get(),this.sel.rangeCount){for(var e=document.createElement("div"),i=this.sel.rangeCount,n=0;i>n;++n)e.appendChild(this.sel.getRangeAt(n).cloneContents());t=e.innerHTML}return this.clean.onSync(t)},replaceSelection:function(t){this.selection.get(),this.range.deleteContents();var e=document.createElement("div");e.innerHTML=t;for(var i,n=document.createDocumentFragment();i=e.firstChild;)n.appendChild(i);this.range.insertNode(n)},replaceWithHtml:function(t){t=this.selection.getMarkerAsHtml(1)+t+this.selection.getMarkerAsHtml(2),this.selection.get(),window.getSelection&&window.getSelection().getRangeAt?this.selection.replaceSelection(t):document.selection&&document.selection.createRange&&this.range.pasteHTML(t),this.selection.restore(),this.code.sync()}}},shortcuts:function(){return{init:function(e,i){return this.opts.shortcuts?void t.each(this.opts.shortcuts,t.proxy(function(i,n){for(var o=i.split(","),s=o.length,r=0;s>r;r++)"string"==typeof o[r]&&this.shortcuts.handler(e,t.trim(o[r]),t.proxy(function(){var t;"-1"!=n.func.search(/\./)?(t=n.func.split("."),"undefined"!=typeof this[t[0]]&&this[t[0]][t[1]].apply(this,n.params)):this[n.func].apply(this,n.params)},this))},this)):(!e.ctrlKey&&!e.metaKey||66!==i&&73!==i||e.preventDefault(),!1)},handler:function(e,i,n){var o={8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},s={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"};i=i.toLowerCase().split(" ");var r=o[e.keyCode],a=String.fromCharCode(e.which).toLowerCase(),l="",u={};t.each(["alt","ctrl","meta","shift"],function(t,i){e[i+"Key"]&&r!==i&&(l+=i+"+")}),r&&(u[l+r]=!0),a&&(u[l+a]=!0,u[l+s[a]]=!0,"shift+"===l&&(u[s[a]]=!0));for(var c=0,h=i.length;h>c;c++)if(u[i[c]])return e.preventDefault(),n.apply(this,arguments)}}},tabifier:function(){return{get:function(t){if(!this.opts.tabifier)return t;var e=["area","body","head","hr","i?frame","link","meta","noscript","style","script","table","tbody","thead","tfoot"],i=["li","dt","dt","h[1-6]","option","script"],n=["p","blockquote","div","dl","fieldset","form","frameset","map","ol","pre","select","td","th","tr","ul"];this.tabifier.lineBefore=new RegExp("^<(/?"+e.join("|/?")+"|"+i.join("|")+")[ >]"),this.tabifier.lineAfter=new RegExp("^<(br|/?"+e.join("|/?")+"|/"+i.join("|/")+")[ >]"),this.tabifier.newLevel=new RegExp("^</?("+n.join("|")+")[ >]");var o=0,s=t.length,r=0,a=null,l=null,u="",c="",h="";for(this.tabifier.cleanlevel=0;s>o;o++){if(r=o,-1==t.substr(o).indexOf("<"))return c+=t.substr(o),this.tabifier.finish(c);for(;s>r&&"<"!=t.charAt(r);)r++;for(o!=r&&(h=t.substr(o,r-o),h.match(/^\s{2,}$/g)||("\n"==c.charAt(c.length-1)?c+=this.tabifier.getTabs():"\n"==h.charAt(0)&&(c+="\n"+this.tabifier.getTabs(),h=h.replace(/^\s+/,"")),c+=h),h.match(/\n/)&&(c+="\n"+this.tabifier.getTabs())),a=r;s>r&&">"!=t.charAt(r);)r++;u=t.substr(a,r-a),o=r;var d;if("!--"==u.substr(1,3)){if(!u.match(/--$/)){for(;"-->"!=t.substr(r,3);)r++;r+=2,u=t.substr(a,r-a),o=r}"\n"!=c.charAt(c.length-1)&&(c+="\n"),c+=this.tabifier.getTabs(),c+=u+">\n"}else"!"==u[1]?c=this.tabifier.placeTag(u+">",c):"?"==u[1]?c+=u+">\n":(d=u.match(/^<(script|style|pre)/i))?(d[1]=d[1].toLowerCase(),u=this.tabifier.cleanTag(u),c=this.tabifier.placeTag(u,c),l=String(t.substr(o+1)).toLowerCase().indexOf("</"+d[1]),l&&(h=t.substr(o+1,l),o+=l,c+=h)):(u=this.tabifier.cleanTag(u),c=this.tabifier.placeTag(u,c))}return this.tabifier.finish(c)},getTabs:function(){for(var t="",e=0;e<this.tabifier.cleanlevel;e++)t+="	";return t},finish:function(t){return t=t.replace(/\n\s*\n/g,"\n"),t=t.replace(/^[\s\n]*/,""),t=t.replace(/[\s\n]*$/,""),t=t.replace(/<script(.*?)>\n<\/script>/gi,"<script$1></script>"),this.tabifier.cleanlevel=0,t},cleanTag:function(t){var e="";t=t.replace(/\n/g," "),t=t.replace(/\s{2,}/g," "),t=t.replace(/^\s+|\s+$/g," ");var i="";t.match(/\/$/)&&(i="/",t=t.replace(/\/+$/,""));for(var n;n=/\s*([^= ]+)(?:=((['"']).*?\3|[^ ]+))?/.exec(t);)n[2]?e+=n[1].toLowerCase()+"="+n[2]:n[1]&&(e+=n[1].toLowerCase()),e+=" ",t=t.substr(n[0].length);return e.replace(/\s*$/,"")+i+">"},placeTag:function(t,e){var i=t.match(this.tabifier.newLevel);return(t.match(this.tabifier.lineBefore)||i)&&(e=e.replace(/\s*$/,""),e+="\n"),i&&"/"==t.charAt(1)&&this.tabifier.cleanlevel--,"\n"==e.charAt(e.length-1)&&(e+=this.tabifier.getTabs()),i&&"/"!=t.charAt(1)&&this.tabifier.cleanlevel++,e+=t,(t.match(this.tabifier.lineAfter)||t.match(this.tabifier.newLevel))&&(e=e.replace(/ *$/,"")),e}}},tidy:function(){return{setupAllowed:function(){var e=t.inArray("span",this.opts.removeEmpty);if(-1!==e&&this.opts.removeEmpty.splice(e,1),this.opts.allowedTags&&(this.opts.deniedTags=!1),this.opts.allowedAttr&&(this.opts.removeAttr=!1),!this.opts.linebreaks){var i=["p","section"];this.opts.allowedTags&&this.tidy.addToAllowed(i),this.opts.deniedTags&&this.tidy.removeFromDenied(i)}},addToAllowed:function(e){for(var i=e.length,n=0;i>n;n++)-1==t.inArray(e[n],this.opts.allowedTags)&&this.opts.allowedTags.push(e[n])},removeFromDenied:function(e){for(var i=e.length,n=0;i>n;n++){var o=t.inArray(e[n],this.opts.deniedTags);-1!=o&&this.opts.deniedTags.splice(o,1)}},load:function(e,i){return this.tidy.settings={deniedTags:this.opts.deniedTags,allowedTags:this.opts.allowedTags,removeComments:this.opts.removeComments,replaceTags:this.opts.replaceTags,replaceStyles:this.opts.replaceStyles,removeDataAttr:this.opts.removeDataAttr,removeAttr:this.opts.removeAttr,allowedAttr:this.opts.allowedAttr,removeWithoutAttr:this.opts.removeWithoutAttr,removeEmpty:this.opts.removeEmpty},t.extend(this.tidy.settings,i),e=this.tidy.removeComments(e),this.tidy.$div=t("<div />").append(e),this.tidy.replaceTags(),this.tidy.replaceStyles(),this.tidy.removeTags(),this.tidy.removeAttr(),this.tidy.removeEmpty(),this.tidy.removeParagraphsInLists(),this.tidy.removeDataAttr(),this.tidy.removeWithoutAttr(),e=this.tidy.$div.html(),this.tidy.$div.remove(),e},removeComments:function(t){return this.tidy.settings.removeComments?t.replace(/<!--[\s\S]*?-->/gi,""):t},replaceTags:function(e){if(!this.tidy.settings.replaceTags)return e;for(var i=this.tidy.settings.replaceTags.length,n=[],o=[],s=0;i>s;s++)o.push(this.tidy.settings.replaceTags[s][1]),n.push(this.tidy.settings.replaceTags[s][0]);t.each(n,t.proxy(function(e,i){this.tidy.$div.find(i).replaceWith(function(){return t("<"+o[e]+" />",{html:t(this).html()})})},this))},replaceStyles:function(){if(this.tidy.settings.replaceStyles){var e=this.tidy.settings.replaceStyles.length;this.tidy.$div.find("span").each(t.proxy(function(i,n){for(var o=t(n),s=o.attr("style"),r=0;e>r;r++)if(s&&s.match(new RegExp("^"+this.tidy.settings.replaceStyles[r][0],"i"))){var a=this.tidy.settings.replaceStyles[r][1];o.replaceWith(function(){var e=document.createElement(a);return t(e).append(t(this).contents())})}},this))}},removeTags:function(){!this.tidy.settings.deniedTags&&this.tidy.settings.allowedTags&&this.tidy.$div.find("*").not(this.tidy.settings.allowedTags.join(",")).each(function(e,i){""===i.innerHTML?t(i).remove():t(i).contents().unwrap()}),this.tidy.settings.deniedTags&&this.tidy.$div.find(this.tidy.settings.deniedTags.join(",")).each(function(e,i){t(i).hasClass("redactor-script-tag")||t(i).hasClass("redactor-selection-marker")||(""===i.innerHTML?t(i).remove():t(i).contents().unwrap())})},removeAttr:function(){var e;if(!this.tidy.settings.removeAttr&&this.tidy.settings.allowedAttr){var i=[],n=[];e=this.tidy.settings.allowedAttr.length;for(var o=0;e>o;o++)i.push(this.tidy.settings.allowedAttr[o][0]),n.push(this.tidy.settings.allowedAttr[o][1]);this.tidy.$div.find("*").each(t.proxy(function(e,o){var s=t(o),r=t.inArray(s[0].tagName.toLowerCase(),i),a=this.tidy.removeAttrGetRemoves(r,n,s);a&&t.each(a,function(t,e){s.removeAttr(e)})},this))}if(this.tidy.settings.removeAttr){e=this.tidy.settings.removeAttr.length;for(var o=0;e>o;o++){var s=this.tidy.settings.removeAttr[o][1];t.isArray(s)&&(s=s.join(" ")),this.tidy.$div.find(this.tidy.settings.removeAttr[o][0]).removeAttr(s)}}},removeAttrGetRemoves:function(e,i,n){var o=[];return-1==e?t.each(n[0].attributes,function(t,e){o.push(e.name)}):"*"==i[e]?o=[]:t.each(n[0].attributes,function(n,s){t.isArray(i[e])?-1==t.inArray(s.name,i[e])&&o.push(s.name):i[e]!=s.name&&o.push(s.name)}),o},removeAttrs:function(e,i){return i=new RegExp(i,"g"),e.each(function(){for(var e=t(this),n=this.attributes.length-1,o=n;o>=0;o--){var s=this.attributes[o];s&&s.specified&&s.name.search(i)>=0&&e.removeAttr(s.name)}})},removeEmpty:function(){this.tidy.settings.removeEmpty&&this.tidy.$div.find(this.tidy.settings.removeEmpty.join(",")).each(function(){var e=t(this),i=e.text();i=i.replace(/\u200B/g,""),i=i.replace(/&nbsp;/gi,""),i=i.replace(/\s/g,""),""===i&&0===e.children().length&&e.remove()})},removeParagraphsInLists:function(){this.tidy.$div.find("li p").contents().unwrap()},removeDataAttr:function(){if(this.tidy.settings.removeDataAttr){var e=this.tidy.settings.removeDataAttr;t.isArray(this.tidy.settings.removeDataAttr)&&(e=this.tidy.settings.removeDataAttr.join(",")),this.tidy.removeAttrs(this.tidy.$div.find(e),"^(data-)")}},removeWithoutAttr:function(){this.tidy.settings.removeWithoutAttr&&this.tidy.$div.find(this.tidy.settings.removeWithoutAttr.join(",")).each(function(){0===this.attributes.length&&t(this).contents().unwrap()})}}},toolbar:function(){return{init:function(){return{html:{title:this.lang.get("html"),func:"code.toggle"},formatting:{title:this.lang.get("formatting"),dropdown:{p:{title:this.lang.get("paragraph"),func:"block.format"},blockquote:{title:this.lang.get("quote"),func:"block.format"},pre:{title:this.lang.get("code"),func:"block.format"},h1:{title:this.lang.get("header1"),func:"block.format"},h2:{title:this.lang.get("header2"),func:"block.format"},h3:{title:this.lang.get("header3"),func:"block.format"},h4:{title:this.lang.get("header4"),func:"block.format"},h5:{title:this.lang.get("header5"),func:"block.format"}}},bold:{title:this.lang.get("bold"),func:"inline.format"},italic:{title:this.lang.get("italic"),func:"inline.format"},deleted:{title:this.lang.get("deleted"),func:"inline.format"},underline:{title:this.lang.get("underline"),func:"inline.format"},unorderedlist:{title:"&bull; "+this.lang.get("unorderedlist"),func:"list.toggle"},orderedlist:{title:"1. "+this.lang.get("orderedlist"),func:"list.toggle"},outdent:{title:"< "+this.lang.get("outdent"),func:"indent.decrease"},indent:{title:"> "+this.lang.get("indent"),func:"indent.increase"},image:{title:this.lang.get("image"),func:"image.show"},file:{title:this.lang.get("file"),func:"file.show"},link:{title:this.lang.get("link"),dropdown:{link:{title:this.lang.get("link_insert"),func:"link.show",observe:{element:"a","in":{title:this.lang.get("link_edit")},out:{title:this.lang.get("link_insert")}}},unlink:{title:this.lang.get("unlink"),func:"link.unlink",observe:{element:"a",out:{attr:{"class":"redactor-dropdown-link-inactive","aria-disabled":!0}}}}}},alignment:{title:this.lang.get("alignment"),dropdown:{left:{title:this.lang.get("align_left"),func:"alignment.left"},center:{title:this.lang.get("align_center"),func:"alignment.center"},right:{title:this.lang.get("align_right"),func:"alignment.right"},justify:{title:this.lang.get("align_justify"),func:"alignment.justify"}}},horizontalrule:{title:this.lang.get("horizontalrule"),func:"line.insert"}}},build:function(){this.toolbar.hideButtons(),this.toolbar.hideButtonsOnMobile(),this.toolbar.isButtonSourceNeeded(),0!==this.opts.buttons.length&&(this.$toolbar=this.toolbar.createContainer(),this.toolbar.setOverflow(),this.toolbar.append(),this.toolbar.setFormattingTags(),this.toolbar.loadButtons(),this.toolbar.setFixed(),this.opts.activeButtons&&this.$editor.on("mouseup.redactor keyup.redactor focus.redactor",t.proxy(this.observe.toolbar,this)))},createContainer:function(){return t("<ul>").addClass("redactor-toolbar").attr({id:"redactor-toolbar-"+this.uuid,role:"toolbar"})},setFormattingTags:function(){t.each(this.opts.toolbar.formatting.dropdown,t.proxy(function(e){-1==t.inArray(e,this.opts.formatting)&&delete this.opts.toolbar.formatting.dropdown[e]},this))},loadButtons:function(){t.each(this.opts.buttons,t.proxy(function(e,i){if(this.opts.toolbar[i]){if("file"===i){if(this.opts.fileUpload===!1)return;if(!this.opts.fileUpload&&this.opts.s3===!1)return}if("image"===i){if(this.opts.imageUpload===!1)return;if(!this.opts.imageUpload&&this.opts.s3===!1)return}var n=this.opts.toolbar[i];this.$toolbar.append(t("<li>").append(this.button.build(i,n)))}},this))},append:function(){this.opts.toolbarExternal?(this.$toolbar.addClass("redactor-toolbar-external"),t(this.opts.toolbarExternal).html(this.$toolbar)):this.$box.prepend(this.$toolbar)},setFixed:function(){this.utils.isDesktop()&&(this.opts.toolbarExternal||this.opts.toolbarFixed&&(this.toolbar.observeScroll(),t(this.opts.toolbarFixedTarget).on("scroll.redactor."+this.uuid,t.proxy(this.toolbar.observeScroll,this))))},setOverflow:function(){this.utils.isMobile()&&this.opts.toolbarOverflow&&this.$toolbar.addClass("redactor-toolbar-overflow")},isButtonSourceNeeded:function(){if(!this.opts.source){var t=this.opts.buttons.indexOf("html");-1!==t&&this.opts.buttons.splice(t,1)}},hideButtons:function(){0!==this.opts.buttonsHide.length&&t.each(this.opts.buttonsHide,t.proxy(function(t,e){var i=this.opts.buttons.indexOf(e);this.opts.buttons.splice(i,1)},this))},hideButtonsOnMobile:function(){this.utils.isMobile()&&0!==this.opts.buttonsHideOnMobile.length&&t.each(this.opts.buttonsHideOnMobile,t.proxy(function(t,e){var i=this.opts.buttons.indexOf(e);this.opts.buttons.splice(i,1)},this))},observeScroll:function(){var e=t(this.opts.toolbarFixedTarget).scrollTop(),i=1;this.opts.toolbarFixedTarget===document&&(i=this.$box.offset().top),e+this.opts.toolbarFixedTopOffset>i?this.toolbar.observeScrollEnable(e,i):this.toolbar.observeScrollDisable()},observeScrollEnable:function(e,i){var n=this.opts.toolbarFixedTopOffset+e-i,o=0,s=i+this.$box.height()-32,r=this.$box.innerWidth();this.$toolbar.addClass("toolbar-fixed-box"),this.$toolbar.css({position:"absolute",width:r,top:n+"px",left:o}),e>s&&t(".redactor-dropdown-"+this.uuid+":visible").hide(),this.toolbar.setDropdownsFixed(),this.$toolbar.css("visibility",s>e?"visible":"hidden")},observeScrollDisable:function(){this.$toolbar.css({position:"relative",width:"auto",top:0,left:0,visibility:"visible"}),this.toolbar.unsetDropdownsFixed(),this.$toolbar.removeClass("toolbar-fixed-box")},setDropdownsFixed:function(){var e=this.$toolbar.innerHeight()+this.opts.toolbarFixedTopOffset,i="fixed";this.opts.toolbarFixedTarget!==document&&(e=this.$toolbar.innerHeight()+this.$toolbar.offset().top+this.opts.toolbarFixedTopOffset,i="absolute"),t(".redactor-dropdown-"+this.uuid).each(function(){t(this).css({position:i,top:e+"px"})})},unsetDropdownsFixed:function(){var e=this.$toolbar.innerHeight()+this.$toolbar.offset().top;t(".redactor-dropdown-"+this.uuid).each(function(){t(this).css({position:"absolute",top:e+"px"})})}}},upload:function(){return{init:function(e,i,n){this.upload.direct=!1,this.upload.callback=n,this.upload.url=i,this.upload.$el=t(e),this.upload.$droparea=t('<div id="redactor-droparea" />'),this.upload.$placeholdler=t('<div id="redactor-droparea-placeholder" />').text(this.lang.get("upload_label")),this.upload.$input=t('<input type="file" name="file" />'),this.upload.$placeholdler.append(this.upload.$input),this.upload.$droparea.append(this.upload.$placeholdler),this.upload.$el.append(this.upload.$droparea),this.upload.$droparea.off("redactor.upload"),this.upload.$input.off("redactor.upload"),this.upload.$droparea.on("dragover.redactor.upload",t.proxy(this.upload.onDrag,this)),this.upload.$droparea.on("dragleave.redactor.upload",t.proxy(this.upload.onDragLeave,this)),this.upload.$input.on("change.redactor.upload",t.proxy(function(t){t=t.originalEvent||t,this.upload.traverseFile(this.upload.$input[0].files[0],t)},this)),this.upload.$droparea.on("drop.redactor.upload",t.proxy(function(t){t.preventDefault(),this.upload.$droparea.removeClass("drag-hover").addClass("drag-drop"),this.upload.onDrop(t)},this))},directUpload:function(t,e){this.upload.direct=!0,this.upload.traverseFile(t,e)},onDrop:function(t){t=t.originalEvent||t;var e=t.dataTransfer.files;this.upload.traverseFile(e[0],t)},traverseFile:function(t,e){if(this.opts.s3)return this.upload.setConfig(t),void this.upload.s3uploadFile(t);var i=window.FormData?new FormData:null;if(window.FormData){this.upload.setConfig(t);var n="image"==this.upload.type?this.opts.imageUploadParam:this.opts.fileUploadParam;i.append(n,t)}this.progress.show(),this.core.setCallback("uploadStart",e,i),this.upload.sendData(i,e)},setConfig:function(t){this.upload.getType(t),this.upload.direct&&(this.upload.url="image"==this.upload.type?this.opts.imageUpload:this.opts.fileUpload,this.upload.callback="image"==this.upload.type?this.image.insert:this.file.insert)},getType:function(t){this.upload.type="image",-1==this.opts.imageTypes.indexOf(t.type)&&(this.upload.type="file")},getHiddenFields:function(e,i){return e===!1||"object"!=typeof e?i:(t.each(e,t.proxy(function(e,n){null!==n&&0===n.toString().indexOf("#")&&(n=t(n).val()),i.append(e,n)},this)),i)},sendData:function(e,i){"image"==this.upload.type?(e=this.upload.getHiddenFields(this.opts.uploadImageFields,e),e=this.upload.getHiddenFields(this.upload.imageFields,e)):(e=this.upload.getHiddenFields(this.opts.uploadFileFields,e),e=this.upload.getHiddenFields(this.upload.fileFields,e));var n=new XMLHttpRequest;n.open("POST",this.upload.url),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Authorization","Bearer "+sessionStorage.getItem("satellizer_token")),n.onreadystatechange=t.proxy(function(){if(4==n.readyState){var e=n.responseText;e=e.replace(/^\[/,""),e=e.replace(/\]$/,"");var o;try{o="string"==typeof e?t.parseJSON(e):e}catch(s){o={error:!0}}this.progress.hide(),this.upload.direct||this.upload.$droparea.removeClass("drag-drop"),this.upload.callback(o,this.upload.direct,i)}},this),n.send(e)},onDrag:function(t){t.preventDefault(),this.upload.$droparea.addClass("drag-hover")},onDragLeave:function(t){t.preventDefault(),this.upload.$droparea.removeClass("drag-hover")},clearImageFields:function(){this.upload.imageFields={}},addImageFields:function(t,e){this.upload.imageFields[t]=e},removeImageFields:function(t){delete this.upload.imageFields[t]},clearFileFields:function(){this.upload.fileFields={}},addFileFields:function(t,e){this.upload.fileFields[t]=e},removeFileFields:function(t){delete this.upload.fileFields[t]},s3uploadFile:function(e){this.upload.s3executeOnSignedUrl(e,t.proxy(function(t){this.upload.s3uploadToS3(e,t)},this))},s3executeOnSignedUrl:function(t,e){var i=new XMLHttpRequest,n="-1"!==this.opts.s3.search(/\?/)?"?":"&";i.open("GET",this.opts.s3+n+"name="+t.name+"&type="+t.type,!0),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined");var o=this;i.onreadystatechange=function(){4==this.readyState&&200==this.status?(o.progress.show(),e(decodeURIComponent(this.responseText))):4==this.readyState&&200!=this.status},i.send()},s3createCORSRequest:function(t,e){var i=new XMLHttpRequest;return"withCredentials"in i?i.open(t,e,!0):"undefined"!=typeof XDomainRequest?(i=new XDomainRequest,i.open(t,e)):i=null,i},s3uploadToS3:function(e,i){var n=this.upload.s3createCORSRequest("PUT",i);n&&(n.onload=t.proxy(function(){if(200==n.status){this.progress.hide();var t=i.split("?");if(!t[0])return!1;this.upload.direct||this.upload.$droparea.removeClass("drag-drop");var e={filelink:t[0]};if("file"==this.upload.type){var o=t[0].split("/");e.filename=o[o.length-1]}this.upload.callback(e,this.upload.direct,!1)}},this),n.onerror=function(){},n.upload.onprogress=function(){},n.setRequestHeader("Content-Type",e.type),n.setRequestHeader("x-amz-acl","public-read"),n.send(e))}}},utils:function(){return{isMobile:function(){return/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)},isDesktop:function(){return!/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent)},isString:function(t){return"[object String]"==Object.prototype.toString.call(t)},isEmpty:function(e,i){return e=e.replace(/[\u200B-\u200D\uFEFF]/g,""),e=e.replace(/&nbsp;/gi,""),e=e.replace(/<\/?br\s?\/?>/g,""),e=e.replace(/\s/g,""),e=e.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i,""),e=e.replace(/<iframe(.*?[^>])>$/i,"iframe"),e=e.replace(/<source(.*?[^>])>$/i,"source"),i!==!1&&(e=e.replace(/<[^\/>][^>]*><\/[^>]+>/gi,""),e=e.replace(/<[^\/>][^>]*><\/[^>]+>/gi,"")),e=t.trim(e),""===e},normalize:function(t){return"undefined"==typeof t?0:parseInt(t.replace("px",""),10)},hexToRgb:function(t){if("undefined"!=typeof t){if(-1==t.search(/^#/))return t;var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(t,e,i,n){return e+e+i+i+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgb("+parseInt(i[1],16)+", "+parseInt(i[2],16)+", "+parseInt(i[3],16)+")"}},getOuterHtml:function(e){return t("<div>").append(t(e).eq(0).clone()).html()},getAlignmentElement:function(e){return-1!==t.inArray(e.tagName,this.opts.alignmentTags)?t(e):t(e).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0])},removeEmptyAttr:function(e,i){var n=t(e);return"undefined"==typeof n.attr(i)?!0:""===n.attr(i)?(n.removeAttr(i),!0):!1},removeEmpty:function(e,i){var n=t(t.parseHTML(i));if(n.find(".redactor-invisible-space").removeAttr("style").removeAttr("class"),0===n.find("hr, br, img, iframe, source").length){var o=t.trim(n.text());this.utils.isEmpty(o,!1)&&n.remove()}},saveScroll:function(){this.saveEditorScroll=this.$editor.scrollTop(),this.saveBodyScroll=t(window).scrollTop(),this.opts.scrollTarget&&(this.saveTargetScroll=t(this.opts.scrollTarget).scrollTop())},restoreScroll:function(){("undefined"!=typeof this.saveScroll||"undefined"!=typeof this.saveBodyScroll)&&(t(window).scrollTop(this.saveBodyScroll),this.$editor.scrollTop(this.saveEditorScroll),this.opts.scrollTarget&&t(this.opts.scrollTarget).scrollTop(this.saveTargetScroll))},createSpaceElement:function(){var t=document.createElement("span");return t.className="redactor-invisible-space",t.innerHTML=this.opts.invisibleSpace,t},removeInlineTags:function(e){var i=this.opts.inlineTags;i.push("span"),"PRE"==e.tagName&&i.push("a"),t(e).find(i.join(",")).not("span.redactor-selection-marker").contents().unwrap()},replaceWithContents:function(e,i){var n=this;return t(e).replaceWith(function(){return i===!0&&n.utils.removeInlineTags(this),t(this).contents()}),t(e)},replaceToTag:function(e,i,n){var o,s=this;return t(e).replaceWith(function(){o=t("<"+i+" />").append(t(this).contents());for(var e=0;e<this.attributes.length;e++)o.attr(this.attributes[e].name,this.attributes[e].value);return n===!0&&s.utils.removeInlineTags(o),o}),o},isStartOfElement:function(){var t=this.selection.getBlock();if(!t)return!1;var e=this.caret.getOffsetOfElement(t);return 0===e?!0:!1},isEndOfElement:function(e){if("undefined"==typeof e){var e=this.selection.getBlock();if(!e)return!1}var i=this.caret.getOffsetOfElement(e),n=t.trim(t(e).text()).replace(/\n\r\n/g,"");return i==n.length?!0:!1},isStartOfEditor:function(){var t=this.caret.getOffsetOfElement(this.$editor[0]);return 0===t?!0:!1},isEndOfEditor:function(){var e=this.$editor[0],i=this.caret.getOffsetOfElement(e),n=t.trim(t(e).html().replace(/(<([^>]+)>)/gi,""));return i==n.length?!0:!1},isBlock:function(t){return t=t[0]||t,t&&this.utils.isBlockTag(t.tagName)},isBlockTag:function(t){return"undefined"==typeof t?!1:this.reIsBlock.test(t)},isTag:function(e,i){var n=t(e).closest(i,this.$editor[0]);return 1==n.length?n[0]:!1},isSelectAll:function(){return this.selectAll},enableSelectAll:function(){this.selectAll=!0},disableSelectAll:function(){this.selectAll=!1},isRedactorParent:function(e){return e?0===t(e).parents(".redactor-editor").length||t(e).hasClass("redactor-editor")?!1:e:!1},isCurrentOrParentHeader:function(){return this.utils.isCurrentOrParent(["H1","H2","H3","H4","H5","H6"])},isCurrentOrParent:function(e){var i=this.selection.getParent(),n=this.selection.getCurrent();if(t.isArray(e)){var o=0;return t.each(e,t.proxy(function(t,e){this.utils.isCurrentOrParentOne(n,i,e)&&o++},this)),0===o?!1:!0}return this.utils.isCurrentOrParentOne(n,i,e)},isCurrentOrParentOne:function(t,e,i){return i=i.toUpperCase(),e&&e.tagName===i?e:t&&t.tagName===i?t:!1},isOldIe:function(){return this.utils.browser("msie")&&parseInt(this.utils.browser("version"),10)<9?!0:!1},isLessIe10:function(){return this.utils.browser("msie")&&parseInt(this.utils.browser("version"),10)<10?!0:!1},isIe11:function(){return!!navigator.userAgent.match(/Trident\/7\./)},browser:function(t){var e=navigator.userAgent.toLowerCase(),i=/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return"safari"==t?"undefined"!=typeof i[3]?"safari"==i[3]:!1:"version"==t?i[2]:"webkit"==t?"chrome"==i[1]||"opr"==i[1]||"webkit"==i[1]:"rv"==i[1]?"msie"==t:"opr"==i[1]?"webkit"==t:t==i[1]},strpos:function(t,e,i){var n=t.indexOf(e,i);return n>=0?n:!1},disableBodyScroll:function(){var e=t("html"),i=window.innerWidth;if(!i){var n=document.documentElement.getBoundingClientRect();i=n.right-Math.abs(n.left)}var o=document.body.clientWidth<i,s=this.utils.measureScrollbar();e.css("overflow","hidden"),o&&e.css("padding-right",s)},measureScrollbar:function(){var e=t("body"),i=document.createElement("div");i.className="redactor-scrollbar-measure",e.append(i);var n=i.offsetWidth-i.clientWidth;return e[0].removeChild(i),n},enableBodyScroll:function(){t("html").css({overflow:"","padding-right":""}),t("body").remove("redactor-scrollbar-measure")}}}},t(window).on("load.tools.redactor",function(){t('[data-tools="redactor"]').redactor()}),e.prototype.init.prototype=e.prototype}(jQuery),function(t,e){function i(){return new Date(Date.UTC.apply(Date,arguments))}function n(){var t=new Date;return i(t.getFullYear(),t.getMonth(),t.getDate())}function o(t,e){return t.getUTCFullYear()===e.getUTCFullYear()&&t.getUTCMonth()===e.getUTCMonth()&&t.getUTCDate()===e.getUTCDate()}function s(t){return function(){return this[t].apply(this,arguments)}}function r(e,i){function n(t,e){return e.toLowerCase()}var o,s=t(e).data(),r={},a=new RegExp("^"+i.toLowerCase()+"([A-Z])");i=new RegExp("^"+i.toLowerCase());for(var l in s)i.test(l)&&(o=l.replace(a,n),r[o]=s[l]);return r}function a(e){var i={};if(g[e]||(e=e.split("-")[0],g[e])){var n=g[e];return t.each(f,function(t,e){e in n&&(i[e]=n[e])}),i}}var l=function(){var e={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),i=0,n=this.length;n>i;i++)if(this[i].valueOf()===e)return i;return-1},remove:function(t){this.splice(t,1)},replace:function(e){e&&(t.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.length=0},copy:function(){var t=new l;return t.replace(this),t}};return function(){var i=[];return i.push.apply(i,arguments),t.extend(i,e),i}}(),u=function(e,i){this._process_options(i),this.dates=new l,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=t(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=t(m.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot .today, tfoot .clear").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.setDatesDisabled(this.o.datesDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};u.prototype={constructor:u,_process_options:function(o){this._o=t.extend({},this._o,o);var s=this.o=t.extend({},this._o),r=s.language;switch(g[r]||(r=r.split("-")[0],g[r]||(r=p.language)),s.language=r,s.startView){case 2:case"decade":s.startView=2;break;case 1:case"year":s.startView=1;break;default:s.startView=0}switch(s.minViewMode){case 1:case"months":s.minViewMode=1;break;case 2:case"years":s.minViewMode=2;break;default:s.minViewMode=0}s.startView=Math.max(s.startView,s.minViewMode),s.multidate!==!0&&(s.multidate=Number(s.multidate)||!1,s.multidate!==!1&&(s.multidate=Math.max(0,s.multidate))),s.multidateSeparator=String(s.multidateSeparator),s.weekStart%=7,s.weekEnd=(s.weekStart+6)%7;var a=m.parseFormat(s.format);if(s.startDate!==-1/0&&(s.startDate=s.startDate?s.startDate instanceof Date?this._local_to_utc(this._zero_time(s.startDate)):m.parseDate(s.startDate,a,s.language):-1/0),1/0!==s.endDate&&(s.endDate=s.endDate?s.endDate instanceof Date?this._local_to_utc(this._zero_time(s.endDate)):m.parseDate(s.endDate,a,s.language):1/0),s.daysOfWeekDisabled=s.daysOfWeekDisabled||[],t.isArray(s.daysOfWeekDisabled)||(s.daysOfWeekDisabled=s.daysOfWeekDisabled.split(/[,\s]*/)),s.daysOfWeekDisabled=t.map(s.daysOfWeekDisabled,function(t){return parseInt(t,10)}),s.datesDisabled=s.datesDisabled||[],!t.isArray(s.datesDisabled)){var l=[];l.push(m.parseDate(s.datesDisabled,a,s.language)),s.datesDisabled=l}s.datesDisabled=t.map(s.datesDisabled,function(t){return m.parseDate(t,a,s.language)});var u=String(s.orientation).toLowerCase().split(/\s+/g),c=s.orientation.toLowerCase();if(u=t.grep(u,function(t){return/^auto|left|right|top|bottom$/.test(t)}),s.orientation={x:"auto",y:"auto"},c&&"auto"!==c)if(1===u.length)switch(u[0]){case"top":case"bottom":s.orientation.y=u[0];break;case"left":case"right":s.orientation.x=u[0]}else c=t.grep(u,function(t){return/^left|right$/.test(t)}),s.orientation.x=c[0]||"auto",c=t.grep(u,function(t){return/^top|bottom$/.test(t)}),s.orientation.y=c[0]||"auto";else;if(s.defaultViewDate){var h=s.defaultViewDate.year||(new Date).getFullYear(),d=s.defaultViewDate.month||0,f=s.defaultViewDate.day||1;s.defaultViewDate=i(h,d,f)}else s.defaultViewDate=n();s.showOnFocus=s.showOnFocus!==e?s.showOnFocus:!0},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var i,n,o,s=0;s<t.length;s++)i=t[s][0],2===t[s].length?(n=e,o=t[s][1]):3===t[s].length&&(n=t[s][1],o=t[s][2]),i.on(o,n)},_unapplyEvents:function(t){for(var i,n,o,s=0;s<t.length;s++)i=t[s][0],2===t[s].length?(o=e,n=t[s][1]):3===t[s].length&&(o=t[s][1],n=t[s][2]),i.off(n,o)},_buildEvents:function(){var e={keyup:t.proxy(function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()
},this),keydown:t.proxy(this.keydown,this)};this.o.showOnFocus===!0&&(e.focus=t.proxy(this.show,this)),this.isInput?this._events=[[this.element,e]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),e],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:t.proxy(function(t){this._focused_from=t.target},this)}],[this.element,{blur:t.proxy(function(t){this._focused_from=t.target},this)}]),this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{"mousedown touchstart":t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,i){var n=i||this.dates.get(-1),o=this._utc_to_local(n);this.element.trigger({type:e,date:o,dates:t.map(this.dates,this._utc_to_local),format:t.proxy(function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var i=this.dates.get(t);return m.formatDate(i,e,this.o.language)},this)})},show:function(){return this.element.attr("readonly")&&this.o.enableOnReadonly===!1?void 0:(this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&t(this.element).blur(),this)},hide:function(){return this.isInline?this:this.picker.is(":visible")?(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"),this):this},remove:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},_utc_to_local:function(t){return t&&new Date(t.getTime()+6e4*t.getTimezoneOffset())},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var t=this.dates.get(-1);return"undefined"!=typeof t?new Date(t):null},clearDates:function(){var t;this.isInput?t=this.element:this.component&&(t=this.element.find("input")),t&&t.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,e),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t.map(e,this._utc_to_local)),this._trigger("changeDate"),this.setValue(),this},setDate:s("setDates"),setUTCDate:s("setUTCDates"),setValue:function(){var t=this.getFormattedDate();return this.isInput?this.element.val(t).change():this.component&&this.element.find("input").val(t).change(),this},getFormattedDate:function(i){i===e&&(i=this.o.format);var n=this.o.language;return t.map(this.dates,function(t){return m.formatDate(t,i,n)}).join(this.o.multidateSeparator)},setStartDate:function(t){return this._process_options({startDate:t}),this.update(),this.updateNavArrows(),this},setEndDate:function(t){return this._process_options({endDate:t}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(t){return this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows(),this},setDatesDisabled:function(t){this._process_options({datesDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return this;var e=this.picker.outerWidth(),i=this.picker.outerHeight(),n=10,o=t(this.o.container).width(),s=t(this.o.container).height(),r=t(this.o.container).scrollTop(),a=t(this.o.container).offset(),l=[];this.element.parents().each(function(){var e=t(this).css("z-index");"auto"!==e&&0!==e&&l.push(parseInt(e))});var u=Math.max.apply(Math,l)+10,c=this.component?this.component.parent().offset():this.element.offset(),h=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),d=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),p=c.left-a.left,f=c.top-a.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(p-=e-d)):c.left<0?(this.picker.addClass("datepicker-orient-left"),p-=c.left-n):p+e>o?(this.picker.addClass("datepicker-orient-right"),p=c.left+d-e):this.picker.addClass("datepicker-orient-left");var g,m,v=this.o.orientation.y;if("auto"===v&&(g=-r+f-i,m=r+s-(f+h+i),v=Math.max(g,m)===m?"top":"bottom"),this.picker.addClass("datepicker-orient-"+v),"top"===v?f+=h:f-=i+parseInt(this.picker.css("padding-top")),this.o.rtl){var y=o-(p+d);this.picker.css({top:f,right:y,zIndex:u})}else this.picker.css({top:f,left:p,zIndex:u});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var e=this.dates.copy(),i=[],n=!1;return arguments.length?(t.each(arguments,t.proxy(function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),i.push(e)},this)),n=!0):(i=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),i=i&&this.o.multidate?i.split(this.o.multidateSeparator):[i],delete this.element.data().date),i=t.map(i,t.proxy(function(t){return m.parseDate(t,this.o.format,this.o.language)},this)),i=t.grep(i,t.proxy(function(t){return t<this.o.startDate||t>this.o.endDate||!t},this),!0),this.dates.replace(i),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),n?this.setValue():i.length&&String(e)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&e.length&&this._trigger("clearDate"),this.fill(),this},fillDow:function(){var t=this.o.weekStart,e="<tr>";if(this.o.calendarWeeks){this.picker.find(".datepicker-days thead tr:first-child .datepicker-switch").attr("colspan",function(t,e){return parseInt(e)+1});var i='<th class="cw">&#160;</th>';e+=i}for(;t<this.o.weekStart+7;)e+='<th class="dow">'+g[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+g[this.o.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var i=[],n=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),r=new Date;return e.getUTCFullYear()<n||e.getUTCFullYear()===n&&e.getUTCMonth()<s?i.push("old"):(e.getUTCFullYear()>n||e.getUTCFullYear()===n&&e.getUTCMonth()>s)&&i.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&i.push("focused"),this.o.todayHighlight&&e.getUTCFullYear()===r.getFullYear()&&e.getUTCMonth()===r.getMonth()&&e.getUTCDate()===r.getDate()&&i.push("today"),-1!==this.dates.contains(e)&&i.push("active"),(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled))&&i.push("disabled"),this.o.datesDisabled.length>0&&t.grep(this.o.datesDisabled,function(t){return o(e,t)}).length>0&&i.push("disabled","disabled-date"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&i.push("range"),-1!==t.inArray(e.valueOf(),this.range)&&i.push("selected")),i},fill:function(){var n,o=new Date(this.viewDate),s=o.getUTCFullYear(),r=o.getUTCMonth(),a=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,l=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,u=1/0!==this.o.endDate?this.o.endDate.getUTCFullYear():1/0,c=1/0!==this.o.endDate?this.o.endDate.getUTCMonth():1/0,h=g[this.o.language].today||g.en.today||"",d=g[this.o.language].clear||g.en.clear||"";if(!isNaN(s)&&!isNaN(r)){this.picker.find(".datepicker-days thead .datepicker-switch").text(g[this.o.language].months[r]+" "+s),this.picker.find("tfoot .today").text(h).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot .clear").text(d).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var p=i(s,r-1,28),f=m.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(f),p.setUTCDate(f-(p.getUTCDay()-this.o.weekStart+7)%7);var v=new Date(p);v.setUTCDate(v.getUTCDate()+42),v=v.valueOf();for(var y,b=[];p.valueOf()<v;){if(p.getUTCDay()===this.o.weekStart&&(b.push("<tr>"),this.o.calendarWeeks)){var w=new Date(+p+(this.o.weekStart-p.getUTCDay()-7)%7*864e5),_=new Date(Number(w)+(11-w.getUTCDay())%7*864e5),k=new Date(Number(k=i(_.getUTCFullYear(),0,1))+(11-k.getUTCDay())%7*864e5),C=(_-k)/864e5/7+1;b.push('<td class="cw">'+C+"</td>")}if(y=this.getClassNames(p),y.push("day"),this.o.beforeShowDay!==t.noop){var x=this.o.beforeShowDay(this._utc_to_local(p));x===e?x={}:"boolean"==typeof x?x={enabled:x}:"string"==typeof x&&(x={classes:x}),x.enabled===!1&&y.push("disabled"),x.classes&&(y=y.concat(x.classes.split(/\s+/))),x.tooltip&&(n=x.tooltip)}y=t.unique(y),b.push('<td class="'+y.join(" ")+'"'+(n?' title="'+n+'"':"")+">"+p.getUTCDate()+"</td>"),n=null,p.getUTCDay()===this.o.weekEnd&&b.push("</tr>"),p.setUTCDate(p.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(b.join(""));var S=this.picker.find(".datepicker-months").find("th:eq(1)").text(s).end().find("span").removeClass("active");if(t.each(this.dates,function(t,e){e.getUTCFullYear()===s&&S.eq(e.getUTCMonth()).addClass("active")}),(a>s||s>u)&&S.addClass("disabled"),s===a&&S.slice(0,l).addClass("disabled"),s===u&&S.slice(c+1).addClass("disabled"),this.o.beforeShowMonth!==t.noop){var T=this;t.each(S,function(e,i){if(!t(i).hasClass("disabled")){var n=new Date(s,e,1),o=T.o.beforeShowMonth(n);o===!1&&t(i).addClass("disabled")}})}b="",s=10*parseInt(s/10,10);var D=this.picker.find(".datepicker-years").find("th:eq(1)").text(s+"-"+(s+9)).end().find("td");s-=1;for(var E,M=t.map(this.dates,function(t){return t.getUTCFullYear()}),$=-1;11>$;$++)E=["year"],-1===$?E.push("old"):10===$&&E.push("new"),-1!==t.inArray(s,M)&&E.push("active"),(a>s||s>u)&&E.push("disabled"),b+='<span class="'+E.join(" ")+'">'+s+"</span>",s+=1;D.html(b)}},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.picker.find(".prev").css(this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&e>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"});break;case 1:case 2:this.picker.find(".prev").css(this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&e>=this.o.endDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"})}}},click:function(e){e.preventDefault();var n,o,s,r=t(e.target).closest("span, td, th");if(1===r.length)switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var a=m.modes[this.viewMode].navStep*("prev"===r[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,a),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,a),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var l=new Date;l=i(l.getFullYear(),l.getMonth(),l.getDate(),0,0,0),this.showMode(-2);var u="linked"===this.o.todayBtn?null:"view";this._setDate(l,u);break;case"clear":this.clearDates()}break;case"span":r.hasClass("disabled")||(this.viewDate.setUTCDate(1),r.hasClass("month")?(s=1,o=r.parent().find("span").index(r),n=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(o),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(i(n,o,s))):(s=1,o=0,n=parseInt(r.text(),10)||0,this.viewDate.setUTCFullYear(n),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(i(n,o,s))),this.showMode(-1),this.fill());break;case"td":r.hasClass("day")&&!r.hasClass("disabled")&&(s=parseInt(r.text(),10)||1,n=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),r.hasClass("old")?0===o?(o=11,n-=1):o-=1:r.hasClass("new")&&(11===o?(o=0,n+=1):o+=1),this._setDate(i(n,o,s)))}this.picker.is(":visible")&&this._focused_from&&t(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t||this.dates.clear(),-1!==e?(this.o.multidate===!0||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(e):this.o.multidate===!1?(this.dates.clear(),this.dates.push(t)):this.dates.push(t),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),e&&"view"!==e||(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),e&&"view"===e||this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&i.change(),!this.o.autoclose||e&&"date"!==e||this.hide()},moveMonth:function(t,i){if(!t)return e;if(!i)return t;var n,o,s=new Date(t.valueOf()),r=s.getUTCDate(),a=s.getUTCMonth(),l=Math.abs(i);if(i=i>0?1:-1,1===l)o=-1===i?function(){return s.getUTCMonth()===a}:function(){return s.getUTCMonth()!==n},n=a+i,s.setUTCMonth(n),(0>n||n>11)&&(n=(n+12)%12);else{for(var u=0;l>u;u++)s=this.moveMonth(s,i);n=s.getUTCMonth(),s.setUTCDate(r),o=function(){return n!==s.getUTCMonth()}}for(;o();)s.setUTCDate(--r),s.setUTCMonth(n);return s},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(!this.picker.is(":visible"))return void(27===t.keyCode&&this.show());var e,i,o,s=!1,r=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;e=37===t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.dates.get(-1)||n(),e),o=this.moveYear(r,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(i=this.moveMonth(this.dates.get(-1)||n(),e),o=this.moveMonth(r,e),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||n()),i.setUTCDate(i.getUTCDate()+e),o=new Date(r),o.setUTCDate(r.getUTCDate()+e)),this.dateWithinRange(o)&&(this.focusDate=this.viewDate=o,this.setValue(),this.fill(),t.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;e=38===t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.dates.get(-1)||n(),e),o=this.moveYear(r,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(i=this.moveMonth(this.dates.get(-1)||n(),e),o=this.moveMonth(r,e),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||n()),i.setUTCDate(i.getUTCDate()+7*e),o=new Date(r),o.setUTCDate(r.getUTCDate()+7*e)),this.dateWithinRange(o)&&(this.focusDate=this.viewDate=o,this.setValue(),this.fill(),t.preventDefault());break;case 32:break;case 13:r=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(r),s=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),"function"==typeof t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(s){this._trigger(this.dates.length?"changeDate":"clearDate");var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.change()}},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+t))),this.picker.children("div").hide().filter(".datepicker-"+m.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var c=function(e,i){this.element=t(e),this.inputs=t.map(i.inputs,function(t){return t.jquery?t[0]:t}),delete i.inputs,d.call(t(this.inputs),i).bind("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};c.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.getUTCDate()}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,i){i.setRange(e)})},dateUpdated:function(e){if(!this.updating){this.updating=!0;var i=t(e.target).data("datepicker"),n=i.getUTCDate(),o=t.inArray(e.target,this.inputs),s=o-1,r=o+1,a=this.inputs.length;if(-1!==o){if(t.each(this.pickers,function(t,e){e.getUTCDate()||e.setUTCDate(n)}),n<this.dates[s])for(;s>=0&&n<this.dates[s];)this.pickers[s--].setUTCDate(n);else if(n>this.dates[r])for(;a>r&&n>this.dates[r];)this.pickers[r++].setUTCDate(n);this.updateDates(),delete this.updating}}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var h=t.fn.datepicker,d=function(i){var n=Array.apply(null,arguments);n.shift();var o;return this.each(function(){var s=t(this),l=s.data("datepicker"),h="object"==typeof i&&i;if(!l){var d=r(this,"date"),f=t.extend({},p,d,h),g=a(f.language),m=t.extend({},p,g,d,h);if(s.hasClass("input-daterange")||m.inputs){var v={inputs:m.inputs||s.find("input").toArray()};s.data("datepicker",l=new c(this,t.extend(m,v)))}else s.data("datepicker",l=new u(this,m))}return"string"==typeof i&&"function"==typeof l[i]&&(o=l[i].apply(l,n),o!==e)?!1:void 0}),o!==e?o:this};t.fn.datepicker=d;var p=t.fn.datepicker.defaults={autoclose:!1,beforeShowDay:t.noop,beforeShowMonth:t.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,container:"body"},f=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=u;var g=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},m={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,m.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\x00").split("\x00"),i=t.match(this.validParts);if(!e||!e.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:e,parts:i}},parseDate:function(n,o,s){function r(){var t=this.slice(0,d[c].length),e=d[c].slice(0,t.length);return t.toLowerCase()===e.toLowerCase()}if(!n)return e;if(n instanceof Date)return n;"string"==typeof o&&(o=m.parseFormat(o));var a,l,c,h=/([\-+]\d+)([dmwy])/,d=n.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(n)){for(n=new Date,c=0;c<d.length;c++)switch(a=h.exec(d[c]),l=parseInt(a[1]),a[2]){case"d":n.setUTCDate(n.getUTCDate()+l);break;case"m":n=u.prototype.moveMonth.call(u.prototype,n,l);break;case"w":n.setUTCDate(n.getUTCDate()+7*l);break;case"y":n=u.prototype.moveYear.call(u.prototype,n,l)}return i(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),0,0,0)}d=n&&n.match(this.nonpunctuation)||[],n=new Date;var p,f,v={},y=["yyyy","yy","M","MM","m","mm","d","dd"],b={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){if(isNaN(t))return t;for(e-=1;0>e;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};b.M=b.MM=b.mm=b.m,b.dd=b.d,n=i(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0);var w=o.parts.slice();if(d.length!==w.length&&(w=t(w).filter(function(e,i){return-1!==t.inArray(i,y)}).toArray()),d.length===w.length){var _;for(c=0,_=w.length;_>c;c++){if(p=parseInt(d[c],10),a=w[c],isNaN(p))switch(a){case"MM":f=t(g[s].months).filter(r),p=t.inArray(f[0],g[s].months)+1;break;case"M":f=t(g[s].monthsShort).filter(r),p=t.inArray(f[0],g[s].monthsShort)+1}v[a]=p}var k,C;for(c=0;c<y.length;c++)C=y[c],C in v&&!isNaN(v[C])&&(k=new Date(n),b[C](k,v[C]),isNaN(k)||(n=k))}return n},formatDate:function(e,i,n){if(!e)return"";"string"==typeof i&&(i=m.parseFormat(i));var o={d:e.getUTCDate(),D:g[n].daysShort[e.getUTCDay()],DD:g[n].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:g[n].monthsShort[e.getUTCMonth()],MM:g[n].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};o.dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m,e=[];for(var s=t.extend([],i.separators),r=0,a=i.parts.length;a>=r;r++)s.length&&e.push(s.shift()),e.push(o[i.parts[r]]);return e.join("")},headTemplate:'<thead><tr><th class="prev">&#171;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&#187;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};m.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+m.headTemplate+"<tbody></tbody>"+m.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=m,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=h,this},t.fn.datepicker.version="1.4.1",t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var i=t(this);i.data("datepicker")||(e.preventDefault(),d.call(i,"show"))}),t(function(){d.call(t('[data-provide="datepicker-inline"]'))})}(window.jQuery),!function(t){t.fn.datepicker.dates.vi={days:["Ch\u1ee7 nh\u1eadt","Th\u1ee9 hai","Th\u1ee9 ba","Th\u1ee9 t\u01b0","Th\u1ee9 n\u0103m","Th\u1ee9 s\xe1u","Th\u1ee9 b\u1ea3y","Ch\u1ee7 nh\u1eadt"],daysShort:["CN","Th\u1ee9 2","Th\u1ee9 3","Th\u1ee9 4","Th\u1ee9 5","Th\u1ee9 6","Th\u1ee9 7","CN"],daysMin:["CN","T2","T3","T4","T5","T6","T7","CN"],months:["Th\xe1ng 1","Th\xe1ng 2","Th\xe1ng 3","Th\xe1ng 4","Th\xe1ng 5","Th\xe1ng 6","Th\xe1ng 7","Th\xe1ng 8","Th\xe1ng 9","Th\xe1ng 10","Th\xe1ng 11","Th\xe1ng 12"],monthsShort:["Th1","Th2","Th3","Th4","Th5","Th6","Th7","Th8","Th9","Th10","Th11","Th12"],today:"H\xf4m nay",clear:"X\xf3a",format:"dd/mm/yyyy"}}(jQuery),function(t){"use strict";function e(e,i){this.itemsArray=[],this.$element=t(e),this.$element.hide(),this.isSelect="SELECT"===e.tagName,this.multiple=this.isSelect&&e.hasAttribute("multiple"),this.objectItems=i&&i.itemValue,this.placeholderText=e.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=t('<div class="bootstrap-tagsinput"></div>'),this.$input=t('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.after(this.$container);var n=(this.inputSize<3?3:this.inputSize)+"em";this.$input.get(0).style.cssText="width: "+n+" !important;",this.build(i)}function i(t,e){if("function"!=typeof t[e]){var i=t[e];t[e]=function(t){return t[i]}}}function n(t,e){if("function"!=typeof t[e]){var i=t[e];t[e]=function(){return i}}}function o(t){return t?l.text(t).html():""}function s(t){var e=0;if(document.selection){t.focus();var i=document.selection.createRange();i.moveStart("character",-t.value.length),e=i.text.length}else(t.selectionStart||"0"==t.selectionStart)&&(e=t.selectionStart);return e}function r(e,i){var n=!1;return t.each(i,function(t,i){if("number"==typeof i&&e.which===i)return n=!0,!1;if(e.which===i.which){var o=!i.hasOwnProperty("altKey")||e.altKey===i.altKey,s=!i.hasOwnProperty("shiftKey")||e.shiftKey===i.shiftKey,r=!i.hasOwnProperty("ctrlKey")||e.ctrlKey===i.ctrlKey;if(o&&s&&r)return n=!0,!1}}),n}var a={tagClass:function(){return"label label-info"},itemValue:function(t){return t?t.toString():t},itemText:function(t){return this.itemValue(t)},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],onTagExists:function(t,e){e.hide().fadeIn()},trimValue:!1,allowDuplicates:!1};e.prototype={constructor:e,add:function(e,i){var n=this;if(!(n.options.maxTags&&n.itemsArray.length>=n.options.maxTags||e!==!1&&!e)){if("string"==typeof e&&n.options.trimValue&&(e=t.trim(e)),"object"==typeof e&&!n.objectItems)throw"Can't add objects when itemValue option is not set";if(!e.toString().match(/^\s*$/)){if(n.isSelect&&!n.multiple&&n.itemsArray.length>0&&n.remove(n.itemsArray[0]),"string"==typeof e&&"INPUT"===this.$element[0].tagName){var s=e.split(",");if(s.length>1){for(var r=0;r<s.length;r++)this.add(s[r],!0);return void(i||n.pushVal())}}var a=n.options.itemValue(e),l=n.options.itemText(e),u=n.options.tagClass(e),c=t.grep(n.itemsArray,function(t){return n.options.itemValue(t)===a})[0];if(!c||n.options.allowDuplicates){if(!(n.items().toString().length+e.length+1>n.options.maxInputLength)){var h=t.Event("beforeItemAdd",{item:e,cancel:!1});if(n.$element.trigger(h),!h.cancel){n.itemsArray.push(e);var d=t('<span class="tag '+o(u)+'">'+o(l)+'<span data-role="remove"></span></span>');if(d.data("item",e),n.findInputWrapper().before(d),d.after(" "),n.isSelect&&!t('option[value="'+encodeURIComponent(a)+'"]',n.$element)[0]){var p=t("<option selected>"+o(l)+"</option>");p.data("item",e),p.attr("value",a),n.$element.append(p)}i||n.pushVal(),(n.options.maxTags===n.itemsArray.length||n.items().toString().length===n.options.maxInputLength)&&n.$container.addClass("bootstrap-tagsinput-max"),n.$element.trigger(t.Event("itemAdded",{item:e}))}}}else if(n.options.onTagExists){var f=t(".tag",n.$container).filter(function(){return t(this).data("item")===c});n.options.onTagExists(e,f)}}}},remove:function(e,i){var n=this;if(n.objectItems&&(e="object"==typeof e?t.grep(n.itemsArray,function(t){return n.options.itemValue(t)==n.options.itemValue(e)}):t.grep(n.itemsArray,function(t){return n.options.itemValue(t)==e}),e=e[e.length-1]),e){var o=t.Event("beforeItemRemove",{item:e,cancel:!1});if(n.$element.trigger(o),o.cancel)return;t(".tag",n.$container).filter(function(){return t(this).data("item")===e}).remove(),t("option",n.$element).filter(function(){return t(this).data("item")===e}).remove(),-1!==t.inArray(e,n.itemsArray)&&n.itemsArray.splice(t.inArray(e,n.itemsArray),1)}i||n.pushVal(),n.options.maxTags>n.itemsArray.length&&n.$container.removeClass("bootstrap-tagsinput-max"),n.$element.trigger(t.Event("itemRemoved",{item:e}))},removeAll:function(){var e=this;for(t(".tag",e.$container).remove(),t("option",e.$element).remove();e.itemsArray.length>0;)e.itemsArray.pop();e.pushVal()},refresh:function(){var e=this;t(".tag",e.$container).each(function(){var i=t(this),n=i.data("item"),s=e.options.itemValue(n),r=e.options.itemText(n),a=e.options.tagClass(n);if(i.attr("class",null),i.addClass("tag "+o(a)),i.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=o(r),e.isSelect){var l=t("option",e.$element).filter(function(){return t(this).data("item")===n});l.attr("value",s)}})},items:function(){return this.itemsArray},pushVal:function(){var e=this,i=t.map(e.items(),function(t){return e.options.itemValue(t).toString()});e.$element.val(i,!0).trigger("change")},build:function(e){var o=this;if(o.options=t.extend({},a,e),o.objectItems&&(o.options.freeInput=!1),i(o.options,"itemValue"),i(o.options,"itemText"),n(o.options,"tagClass"),o.options.typeahead){var l=o.options.typeahead||{};n(l,"source"),o.$input.typeahead(t.extend({},l,{source:function(e,i){function n(t){for(var e=[],n=0;n<t.length;n++){var r=o.options.itemText(t[n]);s[r]=t[n],e.push(r)}i(e)}this.map={};var s=this.map,r=l.source(e);t.isFunction(r.success)?r.success(n):t.isFunction(r.then)?r.then(n):t.when(r).then(n)},updater:function(t){o.add(this.map[t])},matcher:function(t){return-1!==t.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(t){return t.sort()},highlighter:function(t){var e=new RegExp("("+this.query+")","gi");return t.replace(e,"<strong>$1</strong>")}}))}if(o.options.typeaheadjs){var u=o.options.typeaheadjs||{};o.$input.typeahead(null,u).on("typeahead:selected",t.proxy(function(t,e){o.add(u.valueKey?e[u.valueKey]:e),o.$input.typeahead("val","")},o))}o.$container.on("click",t.proxy(function(){o.$element.attr("disabled")||o.$input.removeAttr("disabled"),o.$input.focus()},o)),o.options.addOnBlur&&o.options.freeInput&&o.$input.on("focusout",t.proxy(function(){0===t(".typeahead, .twitter-typeahead",o.$container).length&&(o.add(o.$input.val()),o.$input.val(""))},o)),o.$container.on("keydown","input",t.proxy(function(e){var i=t(e.target),n=o.findInputWrapper();if(o.$element.attr("disabled"))return void o.$input.attr("disabled","disabled");switch(e.which){case 8:if(0===s(i[0])){var r=n.prev();r&&o.remove(r.data("item"))}break;case 46:if(0===s(i[0])){var a=n.next();a&&o.remove(a.data("item"))}break;case 37:var l=n.prev();0===i.val().length&&l[0]&&(l.before(n),i.focus());break;case 39:var u=n.next();0===i.val().length&&u[0]&&(u.after(n),i.focus())}{var c=i.val().length;Math.ceil(c/5)}i.attr("size",Math.max(this.inputSize,i.val().length))},o)),o.$container.on("keypress","input",t.proxy(function(e){var i=t(e.target);if(o.$element.attr("disabled"))return void o.$input.attr("disabled","disabled");var n=i.val(),s=o.options.maxChars&&n.length>=o.options.maxChars;o.options.freeInput&&(r(e,o.options.confirmKeys)||s)&&(o.add(s?n.substr(0,o.options.maxChars):n),i.val(""),e.preventDefault());{var a=i.val().length;Math.ceil(a/5)}i.attr("size",Math.max(this.inputSize,i.val().length))},o)),o.$container.on("click","[data-role=remove]",t.proxy(function(e){o.$element.attr("disabled")||o.remove(t(e.target).closest(".tag").data("item"))},o)),o.options.itemValue===a.itemValue&&("INPUT"===o.$element[0].tagName?o.add(o.$element.val()):t("option",o.$element).each(function(){o.add(t(this).attr("value"),!0)}))},destroy:function(){var t=this;t.$container.off("keypress","input"),t.$container.off("click","[role=remove]"),t.$container.remove(),t.$element.removeData("tagsinput"),t.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var e=this.$input[0],i=this.$container[0];e&&e.parentNode!==i;)e=e.parentNode;return t(e)}},t.fn.tagsinput=function(i,n){var o=[];return this.each(function(){var s=t(this).data("tagsinput");if(s)if(i||n){if(void 0!==s[i]){var r=s[i](n);void 0!==r&&o.push(r)}}else o.push(s);else s=new e(this,i),t(this).data("tagsinput",s),o.push(s),"SELECT"===this.tagName&&t("option",t(this)).attr("selected","selected"),t(this).val(t(this).val())
}),"string"==typeof i?o.length>1?o:o[0]:o},t.fn.tagsinput.Constructor=e;var l=t("<div />");t(function(){t("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery),!function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Spinner=e()}(this,function(){"use strict";function t(t,e){var i,n=document.createElement(t||"div");for(i in e)n[i]=e[i];return n}function e(t){for(var e=1,i=arguments.length;i>e;e++)t.appendChild(arguments[e]);return t}function i(t,e,i,n){var o=["opacity",e,~~(100*t),i,n].join("-"),s=.01+i/n*100,r=Math.max(1-(1-t)/e*(100-s),t),a=l.substring(0,l.indexOf("Animation")).toLowerCase(),u=a&&"-"+a+"-"||"";return c[o]||(h.insertRule("@"+u+"keyframes "+o+"{0%{opacity:"+r+"}"+s+"%{opacity:"+t+"}"+(s+.01)+"%{opacity:1}"+(s+e)%100+"%{opacity:"+t+"}100%{opacity:"+r+"}}",h.cssRules.length),c[o]=1),o}function n(t,e){var i,n,o=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<u.length;n++)if(i=u[n]+e,void 0!==o[i])return i;return void 0!==o[e]?e:void 0}function o(t,e){for(var i in e)t.style[n(t,i)||i]=e[i];return t}function s(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)void 0===t[n]&&(t[n]=i[n])}return t}function r(t,e){return"string"==typeof t?t:t[e%t.length]}function a(t){this.opts=s(t||{},a.defaults,d)}var l,u=["webkit","Moz","ms","O"],c={},h=function(){var i=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}(),d={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};a.defaults={},s(a.prototype,{spin:function(e){this.stop();var i=this,n=i.opts,s=i.el=o(t(0,{className:n.className}),{position:n.position,width:0,zIndex:n.zIndex});if(n.radius,n.length,n.width,o(s,{left:n.left,top:n.top}),e&&e.insertBefore(s,e.firstChild||null),s.setAttribute("role","progressbar"),i.lines(s,i.opts),!l){var r,a=0,u=(n.lines-1)*(1-n.direction)/2,c=n.fps,h=c/n.speed,d=(1-n.opacity)/(h*n.trail/100),p=h/n.lines;!function f(){a++;for(var t=0;t<n.lines;t++)r=Math.max(1-(a+(n.lines-t)*p)%h*d,n.opacity),i.opacity(s,t*n.direction+u,r,n);i.timeout=i.el&&setTimeout(f,~~(1e3/c))}()}return i},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(n,s){function a(e,i){return o(t(),{position:"absolute",width:s.length+s.width+"px",height:s.width+"px",background:e,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/s.lines*c+s.rotate)+"deg) translate("+s.radius+"px,0)",borderRadius:(s.corners*s.width>>1)+"px"})}for(var u,c=0,h=(s.lines-1)*(1-s.direction)/2;c<s.lines;c++)u=o(t(),{position:"absolute",top:1+~(s.width/2)+"px",transform:s.hwaccel?"translate3d(0,0,0)":"",opacity:s.opacity,animation:l&&i(s.opacity,s.trail,h+c*s.direction,s.lines)+" "+1/s.speed+"s linear infinite"}),s.shadow&&e(u,o(a("#000","0 0 4px #000"),{top:"2px"})),e(n,e(u,a(r(s.color,c),"0 0 1px rgba(0,0,0,.1)")));return n},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}});var p=o(t("group"),{behavior:"url(#default#VML)"});return!n(p,"transform")&&p.adj?function(){function i(e,i){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}h.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(t,n){function s(){return o(i("group",{coordsize:c+" "+c,coordorigin:-u+" "+-u}),{width:c,height:c})}function a(t,a,l){e(d,e(o(s(),{rotation:360/n.lines*t+"deg",left:~~a}),e(o(i("roundrect",{arcsize:n.corners}),{width:u,height:n.width,left:n.radius,top:-n.width>>1,filter:l}),i("fill",{color:r(n.color,t),opacity:n.opacity}),i("stroke",{opacity:0}))))}var l,u=n.length+n.width,c=2*u,h=2*-(n.width+n.length)+"px",d=o(s(),{position:"absolute",top:h,left:h});if(n.shadow)for(l=1;l<=n.lines;l++)a(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=n.lines;l++)a(l);return e(t,d)},a.prototype.opacity=function(t,e,i,n){var o=t.firstChild;n=n.shadow&&n.lines||0,o&&e+n<o.childNodes.length&&(o=(o=(o=o.childNodes[e+n])&&o.firstChild)&&o.firstChild)&&(o.opacity=i)}}():l=n(p,"animation"),a}),!function(t,e){"use strict";"object"==typeof exports?module.exports=e(require("spin.js")):"function"==typeof define&&define.amd?define(["spin"],e):t.Ladda=e(t.Spinner)}(this,function(t){"use strict";function e(e){if(void 0!==e){if(/ladda-button/i.test(e.className)||(e.className+=" ladda-button"),e.hasAttribute("data-style")||e.setAttribute("data-style","expand-right"),!e.querySelector(".ladda-label")){var i=document.createElement("span");i.className="ladda-label",o=e,s=i,(r=document.createRange()).selectNodeContents(o),r.surroundContents(s),o.appendChild(s)}var o,s,r,a,l,u=e.querySelector(".ladda-spinner");u||((u=document.createElement("span")).className="ladda-spinner"),e.appendChild(u);var c={start:function(){return a||(a=function(e){var i,n,o=e.offsetHeight;0===o&&(o=parseFloat(window.getComputedStyle(e).height)),o>32&&(o*=.8),e.hasAttribute("data-spinner-size")&&(o=parseInt(e.getAttribute("data-spinner-size"),10)),e.hasAttribute("data-spinner-color")&&(i=e.getAttribute("data-spinner-color")),e.hasAttribute("data-spinner-lines")&&(n=parseInt(e.getAttribute("data-spinner-lines"),10));var s=.2*o;return new t({color:i||"#fff",lines:n||12,radius:s,length:.6*s,width:7>s?2:3,zIndex:"auto",top:"auto",left:"auto",className:""})}(e)),e.disabled=!0,e.setAttribute("data-loading",""),clearTimeout(l),a.spin(u),this.setProgress(0),this},startAfter:function(t){return clearTimeout(l),l=setTimeout(function(){c.start()},t),this},stop:function(){return c.isLoading()&&(e.disabled=!1,e.removeAttribute("data-loading")),clearTimeout(l),a&&(l=setTimeout(function(){a.stop()},1e3)),this},toggle:function(){return this.isLoading()?this.stop():this.start()},setProgress:function(t){t=Math.max(Math.min(t,1),0);var i=e.querySelector(".ladda-progress");0===t&&i&&i.parentNode?i.parentNode.removeChild(i):(i||((i=document.createElement("div")).className="ladda-progress",e.appendChild(i)),i.style.width=(t||0)*e.offsetWidth+"px")},enable:function(){return this.stop()},disable:function(){return this.stop(),e.disabled=!0,this},isLoading:function(){return e.hasAttribute("data-loading")},remove:function(){clearTimeout(l),e.disabled=!1,e.removeAttribute("data-loading"),a&&(a.stop(),a=null),n.splice(n.indexOf(c),1)}};return n.push(c),c}console.warn("Ladda button target must be defined.")}function i(t,i){if("function"==typeof t.addEventListener){var n=e(t),o=-1;t.addEventListener("click",function(){var e,s,r=!0,a=function(t,e){for(;t.parentNode&&t.tagName!==e;)t=t.parentNode;return e===t.tagName?t:void 0}(t,"FORM");if(void 0!==a&&!a.hasAttribute("novalidate"))if("function"==typeof a.checkValidity)r=a.checkValidity();else for(var l=(e=a,s=[],["input","textarea","select"].forEach(function(t){for(var i=e.getElementsByTagName(t),n=0;n<i.length;n++)i[n].hasAttribute("required")&&s.push(i[n])}),s),u=0;u<l.length;u++){var c=l[u],h=c.getAttribute("type");if(""===c.value.replace(/^\s+|\s+$/g,"")&&(r=!1),"checkbox"!==h&&"radio"!==h||c.checked||(r=!1),"email"===h&&(r=/^[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9-]+(\.[a-z0-9-]+)*$/i.test(c.value)),"url"===h&&(r=/^([a-z]([a-z]|\d|\+|-|\.)*):(\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?((\[(|(v[\da-f]{1,}\.(([a-z]|\d|-|\.|_|~)|[!\$&'\(\)\*\+,;=]|:)+))\])|((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=])*)(:\d*)?)(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*|(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)){0})(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(c.value)),!r)break}r&&(n.startAfter(1),"number"==typeof i.timeout&&(clearTimeout(o),o=setTimeout(n.stop,i.timeout)),"function"==typeof i.callback&&i.callback.apply(null,[n]))},!1)}}var n=[];return{bind:function(t,e){var n;if("string"==typeof t)n=document.querySelectorAll(t);else{if("object"!=typeof t)throw new Error("target must be string or object");n=[t]}e=e||{};for(var o=0;o<n.length;o++)i(n[o],e)},create:e,stopAll:function(){for(var t=0,e=n.length;e>t;t++)n[t].stop()}}}),!function(t,e){"use strict";if(void 0===e)return console.error("jQuery required for Ladda.jQuery");var i=[];(e=e.extend(e,{ladda:function(e){"stopAll"===e&&t.stopAll()}})).fn=e.extend(e.fn,{ladda:function(n){var o=i.slice.call(arguments,1);if("bind"===n)o.unshift(e(this).selector),t.bind.apply(t,o);else{if("isLoading"===n)return e(this).data("ladda").isLoading();e(this).each(function(){var i,s=e(this);void 0===n?s.data("ladda",t.create(this)):(i=s.data("ladda"))[n].apply(i,o)})}return this}})}(this.Ladda,this.jQuery),function(){window.Kiddi={Images:{},Models:{},Collections:{},Components:{},Views:{},Routers:{},Cartography:{},Utilities:{},initialize:function(){return this.initRouter()},initRouter:function(){return Kiddi.Routers.Kiddi?(Kiddi.app=new Kiddi.Routers.Kiddi,Backbone.history.start({pushState:!0,hashChange:!1})):setTimeout(this.initRouter,100)}},$(document).ready(function(){return Kiddi.initialize()})}.call(this),function(){this.JST||(this.JST={}),this.JST["ad/custom_ad+mobile"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t;t=this.ad.get("link"),i.push('\n<div class="'),i.push(n(this.ad.ad_class())),i.push('" '),this.section&&(i.push('data-section="'),i.push(n(this.section)),i.push('"')),i.push('>\n  <a class="link-wrapper-custom-ad" href="'),i.push(n(t)),i.push('" target="_blank" '),this.ad.get("listing_uuid")&&(i.push('data-track-click="'),i.push(n(this.ad.get("listing_uuid"))),i.push('" data-position='),i.push(n(this.index))),i.push('>\n    <figure>\n      <img src="'),i.push(n(this.ad.image_url())),i.push('" alt="'),i.push(n(this.ad.get("title"))),i.push('" class="center-block" />\n    </figure>\n  </a>\n</div>\n')}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["ad/custom_ad"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t;t=this.ad.get("link"),i.push('\n<div class="inner" '),this.section&&(i.push('data-section="'),i.push(n(this.section)),i.push('"')),i.push('>\n  <div class="'),i.push(n(this.ad.ad_class())),i.push('">\n    <a class="link-wrapper-custom-ad" href="'),i.push(n(t)),i.push('" target="_blank" '),this.ad.get("listing_uuid")&&(i.push('data-track-click="'),i.push(n(this.ad.get("listing_uuid"))),i.push('" data-position='),i.push(n(this.index))),i.push('>\n      <figure>\n        <img src="'),i.push(n(this.ad.image_url())),i.push('" alt="'),i.push(n(this.ad.get("title"))),i.push('" />\n      </figure>\n    </a>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["ad/html_code_ad+mobile"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t;t=this.ad.get("link"),i.push('\n<div class="html-code-ad" '),this.section&&(i.push('data-section="'),i.push(n(this.section)),i.push('"')),i.push('>\n  <a class="link-wrapper-html-code-ad" href="'),i.push(n(t)),i.push('" target="_blank" '),this.ad.get("listing_uuid")&&(i.push('data-track-click="'),i.push(n(this.ad.get("listing_uuid"))),i.push('" data-position='),i.push(n(this.index))),i.push(">\n    "),i.push(this.ad.device_html_code()),i.push("\n  </a>\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["ad/html_code_ad"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t;t=this.ad.get("link"),i.push('\n<div class="inner" '),this.section&&(i.push('data-section="'),i.push(n(this.section)),i.push('"')),i.push('>\n  <div class="html-code-ad">\n    <a class="link-wrapper-html-code-ad" href="'),i.push(n(t)),i.push('" target="_blank" '),this.ad.get("listing_uuid")&&(i.push('data-track-click="'),i.push(n(this.ad.get("listing_uuid"))),i.push('" data-position='),i.push(n(this.index))),i.push(">\n      "),i.push(this.ad.device_html_code()),i.push("\n    </a>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["admin/ad_item"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<a href="#" class="list-group-item">\n  <button type="button" class="close" aria-label="Close">\n    <span aria-hidden="true">\xd7</span>\n  </button>\n  <h4 class="list-group-item-heading">'),i.push(n(this.ad.get("title"))),i.push("</h4>\n  "),this.ad.get("start_date")&&this.ad.get("end_date")&&(i.push('\n    <p class="list-group-item-text">'),i.push(n(this.ad.get("start_date"))),i.push(" - "),i.push(n(this.ad.get("end_date"))),i.push("</p>\n  ")),i.push("\n</a>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["admin/info_window"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="object-info-window media">\n  <a href="'),i.push(n(this.objectUrl)),i.push('" target="_blank">\n    <div class="media-body">\n      <h4 class="media-heading">'),i.push(n(this.objectName)),i.push("</h4>\n    </div>\n  </a>\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["admin/list_brand"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<li data-brand-id="'),i.push(n(this.id)),i.push('">\n  <span class="label label-default">'),i.push(n(this.name)),i.push('</span>\n  <a href="#" class="remove" data-remove-brand="'),i.push(n(this.id)),i.push('">&times;</a>\n</li>\n')}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["admin/list_listing"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<li data-listing-id="'),i.push(n(this.id)),i.push('">\n  <input id="user[ownership_ids][]" name="user_ownership_ids_'),i.push(n(this.id)),i.push('" type="checkbox" value="'),i.push(n(this.id)),i.push('">\n  <span class="label label-default">'),i.push(n(this.name)),i.push('</span>\n  <a href="#" class="remove" data-remove-listing="'),i.push(n(this.id)),i.push('">&times;</a>\n</li>\n')}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["brand/listing_info_window"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="listing-info-window media">\n  <a href="'),i.push(n(this.listingUrl)),i.push('">\n    <div class="media-left">\n      <img src="'),i.push(n(this.listing.get("thumbnail_url"))),i.push('" class="img-rounded" />\n    </div>\n    <div class="media-body">\n      <h4 class="media-heading">'),i.push(n(this.listing.get("full_name"))),i.push("</h4>\n      "),null!=this.brand&&(i.push("\n        <small>"),i.push(n(I18n.find_listing.info_window["in"])),i.push(" "),i.push(n(this.brand.get("full_name"))),i.push("</small>\n      ")),i.push("\n      "),this.listing.get("faves")>0&&(i.push('\n        <div class="faves">\n          <span class="icon hs-icon-heart"></span>\n          '),i.push(n(this.listing.get("faves"))),i.push("\n        </div>\n      ")),i.push("\n    </div>\n  </a>\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["common/add_tip+mobile"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="modal-dialog">\n  <div class="modal-content">\n\n    <div class="modal-header">\n      <button class="btn btn-link btn-close" type="button" data-dismiss="modal" aria-label="Back">\n        '),i.push(n(I18n.common.add_tip.back)),i.push('\n      </button>\n      <h4 class="modal-title">\n        '),i.push(n(this.title)),i.push('\n      </h4>\n      <button class="btn btn-link btn-post" type="button" aria-label="Post" id="submit-tip-form">\n        '),i.push(n(I18n.common.add_tip.post)),i.push('\n      </button>\n    </div>\n\n    <div class="modal-body add-tip-body">\n      <form action="'),i.push(n(this.url)),i.push('" method="post" id="tip-form">\n        <textarea name="tip[description]" class="form-control" id="tip_description"\n                  placeholder="'),i.push(n(I18n.common.add_tip.write_your_review_here)),i.push('" maxlength="4000"></textarea>\n        <small class="counter" id="desc-remaining-chars">4000</small>\n      </form>\n      <div class="hs-errors"></div>\n    </div>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["common/add_tip"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="modal-dialog">\n  <div class="modal-content">\n\n    <div class="modal-header">\n      <button aria-label="\u0110\xf3ng l\u1ea1i" data-dismiss="modal" class="close" type="button">\n        <span aria-hidden="true">\xd7</span>\n      </button>\n      <h4 class="modal-title">B\xecnh lu\u1eadn</h4>\n      <span class="location text-muted">\n        '),i.push(n(this.title)),i.push('\n      </span>\n    </div>\n\n    <div class="modal-body add-tip-body">\n      <form action="'),i.push(n(this.url)),i.push('" method="post" id="tip-form">\n        <textarea name="tip[description]" class="form-control" id="tip_description" rows="6"\n          placeholder="'),i.push(n(I18n.common.add_tip.write_your_review_here)),i.push('" maxlength="4000"></textarea>\n        <small class="counter" id="desc-remaining-chars">4000</small>\n      </form>\n      <div class="hs-errors"></div>\n    </div>\n\n    <div class="modal-footer">\n      <button class="btn btn-primary-green btn-close" type="button" data-dismiss="modal" aria-label="Back">\n        '),i.push(n(I18n.common.add_tip.back)),i.push('\n      </button>\n      <button class="btn btn-primary-green btn-post" type="button" aria-label="Post" id="submit-tip-form" disabled="true">\n        '),i.push(n(I18n.common.add_tip.post)),i.push("\n      </button>\n    </div>\n\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["common/tip"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="media">\n  <div class="media-left">\n    '),null!=this.tip.get("user_profile_url")?(i.push('\n      <a href="'),i.push(n(this.tip.get("user_profile_url"))),i.push('" title="'),i.push(n(this.tip.get("user_full_name"))),i.push('">\n        <img class="media-object avatar img-circle" src="'),i.push(n(this.tip.get("user_avatar_url"))),i.push('" alt="kiddier" />\n      </a>\n    ')):(i.push('\n      <img class="media-object avatar img-circle" src="'),i.push(n(this.tip.get("user_avatar_url"))),i.push('" alt="kiddier" />\n    ')),i.push('\n  </div>\n  <div class="media-body">\n    <div class="author">\n      '),null!=this.tip.get("user_profile_url")?(i.push('\n        <a href="'),i.push(n(this.tip.get("user_profile_url"))),i.push('" title="'),i.push(n(this.tip.get("user_full_name"))),i.push('">'),i.push(n(this.tip.get("user_full_name"))),i.push("</a>\n      ")):(i.push("\n        "),i.push(n(this.tip.get("user_full_name"))),i.push("\n      ")),i.push('\n    </div>\n    <div class="date">\n      '),this.fromBrandPage&&this.tip.get("listing_name")&&(i.push('\n        <span class="location">\n          <span class="hs-icon-location-pin"></span>\n          <a href="'),i.push(n(this.tip.get("area_url"))),i.push('">'),i.push(n(this.tip.get("listing_name"))),i.push("</a>,\n        </span>\n      ")),i.push("\n      "),i.push(n(this.tip.get("formatted_created_at"))),i.push('\n    </div>\n    <div read-more-short="">\n      '),i.push(this.tip.get("formatted_description")),i.push('\n    </div>\n\n    <div class="hover-links">\n      '),this.tip.get("user_is_current")&&(i.push('\n        <a href="#" class="btn btn-sm btn-link report-link" data-delete-tip>\n          <span class="fa fa-trash"></span>\n          <strong>'),i.push(n(I18n.common.tip["delete"])),i.push("</strong>\n        </a>\n      ")),i.push('\n      <a href="'),i.push(n(this.tip.get("report_link"))),i.push('" class="btn btn-sm btn-link report-link" title="'),i.push(n(I18n.common.tip.flag_inappropriate)),i.push('">\n        <span class="hs-icon-new"></span>\n        <strong>'),i.push(n(I18n.common.tip.report)),i.push('</strong>\n      </a>\n    </div>\n\n    <a href="#" class="btn btn-primary upvote-btn'),this.tip.get("already_upvoted")&&i.push(n(" upvoted ago")),i.push('"\n       data-upvote-btn=""\n       data-id="'),i.push(n(this.tip.get("id"))),i.push('"\n       data-upvotable-type="tip">\n      <div class="state_active">\n        <span class="icon glyphicon glyphicon-upload"></span>\n        '),i.push(n(I18n.common.tip.upvote)),i.push('!\n        <span class="counter">'),i.push(n(this.tip.get("upvotes_count"))),i.push('</span>\n      </div>\n      <div class="state_upvoted">\n        <span class="icon glyphicon glyphicon-upload"></span>\n        '),i.push(n(I18n.common.tip.upvoted)),i.push('\n        <span class="counter">'),i.push(n(this.tip.get("upvotes_count"))),i.push('</span>\n      </div>\n      <div class="state_upvoted_hover">\n        '),i.push(n(I18n.common.tip.remove_vote)),i.push(" :(\n      </div>\n    </a>\n\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["dashboard/branches"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,e,o,s;for(i.push('<div class="branches">\n  <table class="table">\n    <tbody>\n      <tr class="search-row">\n        <td colspan="2">\n          <div class="search-container" data-search-input></div>\n        </td>\n      </tr>\n      <tr class="search-summary">\n        <td colspan="2">\n          <div data-search-summary></div>\n        </td>\n      </tr>\n      <tr class="pagination-row">\n        <td colspan="2">\n          <div data-pagination-container></div>\n        </td>\n      </tr>\n      '),s=this.branches,e=0,o=s.length;o>e;e++)t=s[e],i.push('\n        <tr>\n          <td class="branch-tile" colspan="2">\n            <div class="branch-details-wrapper">\n              <div class="branch-details-img-bg" style="background-image: url('),i.push(n(t.image_url)),i.push(')">\n                <div class="inner">\n                  <h4>'),i.push(n(Kiddi.Utilities.Basics.truncate(t.full_name,33))),i.push("</h4>\n                  "),t.brand_name&&(i.push("\n                    thu\u1ed9c "),i.push(n(Kiddi.Utilities.Basics.truncate(t.brand_name,40))),i.push("\n                  ")),i.push('\n                  <p>\n                    <a class="btn btn-white btn-ghost btn-default" href="'),i.push(n(t.edit_url)),i.push('">C\u1eadp nh\u1eadt th\xf4ng tin</a>\n                    '),t.brand_edit_url&&this.user.isAdmin()&&(i.push('\n                      <a class="btn btn-white btn-ghost btn-default" href="'),i.push(n(t.brand_edit_url)),i.push('">C\u1eadp nh\u1eadt th\xf4ng tin v\u1ec1 h\u1ec7 th\u1ed1ng</a>\n                    ')),i.push("\n                  </p>\n                </div>\n              </div>\n            </div>\n          </td>\n        </tr>\n      ");i.push('\n      <tr class="pagination-row">\n        <td colspan="2">\n          <div data-pagination-container></div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n')}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["dashboard/panel"]=function(t){t||(t={});var e,i=[],n=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="dashboard-panel-overlay" data-close-panel>\n  <div class="dashboard-panel-container">\n    <a class="close-panel-btn" data-close-panel><i class="fa fa-times"></i></a>\n    <div class="dashboard-panel-content">\n      <div class="loading">\n        <div class="sk-spinner spinner-gray">\n          <div class="dot1"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=n,t.escape=o,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["dashboard/upload_photos"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<form id="cover-photo-file-form" data-cloudinary-field="'),i.push(n(this.cloudinary.cloudinaryField)),i.push('"\n                                data-form-data="'),i.push(n(JSON.stringify(this.cloudinary.formData))),i.push('"\n                                data-url="'),i.push(n(this.cloudinary.url)),i.push('">\n  <input type="file" name="file" accept="image/*" />\n</form>\n')}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["find_listing/info_window"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="listing-info-window media">\n  <a href="'),i.push(n(this.listingUrl)),i.push('">\n    <div class="media-left">\n      <img src="'),i.push(n(this.listing.get("thumbnail_url"))),i.push('" class="img-rounded" />\n    </div>\n    <div class="media-body">\n      <h4 class="media-heading">'),i.push(n(this.listing.get("full_name"))),i.push("</h4>\n      "),null!=this.listing.get("brand_name")&&(i.push("\n        <small>"),i.push(n(I18n.find_listing.info_window["in"])),i.push(" "),i.push(n(this.listing.get("brand_name"))),i.push("</small>\n      ")),i.push("\n      "),this.listing.get("faves")>0&&(i.push('\n        <div class="faves">\n          <span class="icon hs-icon-heart"></span>\n          '),i.push(n(this.listing.get("faves"))),i.push("\n        </div>\n      ")),i.push("\n    </div>\n  </a>\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["find_listing/no_results"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<p class="lead title">\n  '),i.push(n(I18n.find_listing.no_results.could_not_find)),i.push('\n</p>\n<!--\n<div class="alert alert-success">\n  <a href="/dashboard/new-listing" class="alert-link" target="_blank">'),i.push(n(I18n.find_listing.no_results.list_your_own_listing)),i.push("</a>\n</div>\n-->\n<hr/>\n<h5>"),i.push(n(I18n.find_listing.no_results.check_out_others)),i.push(':</h5>\n<div class="other-results" id="other-results">\n  <div class="loading">\n    <div class="sk-spinner spinner-gray"><div class="dot1"></div><div class="dot2"></div></div>\n  </div>\n</div>\n')
}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["find_listing/results_pepper"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<!--\n<div class="alert alert-success">\n  <a href="/dashboard/new-listing" class="alert-link" target="_blank">'),i.push(n(I18n.find_listing.results_pepper.list_your_own_listing)),i.push("</a>\n</div>\n-->\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["find_listing/selected_place+mobile"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<a href="'),i.push(n(this.listing.get("listing_url"))),i.push('" class="link-wrapper">\n  <div class="background" style="background-image: url('),i.push(n(this.listing.get("image_url"))),i.push(')">\n    <div class="faves">\n      <span class="heart heart-big active hs-icon-heart" />\n      <span class="counter">'),i.push(n(this.listing.get("faves"))),i.push("</span>\n    </div>\n    <figcaption>\n      <h2>\n        <small>"),i.push(n(this.index+1)),i.push(".</small>\n        <span>"),i.push(n(this.listing.get("full_name"))),i.push('</span>\n      </h2>\n      <span class="subtitle">\n        '),i.push(n(I18n.find_listing.info_window["in"])),i.push(" "),i.push(n(this.listing.get("brand_name"))),i.push("\n      </span>\n    </figcaption>\n  </div>\n</a>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["listing/listing+mobile"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t;t=this.listing.promotion,i.push('\n<a class="link-wrapper" target="_blank" href="'),i.push(n(this.listing.get("listing_url"))),i.push('" '),this.listing.get("uuid")&&(i.push('data-track-click="'),i.push(n(this.listing.get("uuid"))),i.push('" data-position='),i.push(n(this.index))),i.push('>\n  <figure>\n    <img src="'),i.push(n(this.listing.get("image_url"))),i.push('" alt="'),i.push(n(this.listing.get("full_name"))),i.push('" />\n  </figure>\n  '),this.listing.get("recommends_count")>=this.minimumRecommends&&(i.push('\n    <div class="recommend">\n      <span class="thumb fa fa-thumbs-up"></span>\n      <span class="percentage">'),i.push(n(parseInt(this.listing.get("recommends_percentage")))),i.push("%</span>\n      "),i.push(n(I18n.listing.listing.recommend)),i.push("\n    </div>\n  ")),i.push("\n  "),this.listing.get("tution_fee")&&(i.push('\n    <div class="tution_fee">\n      <strong>'),i.push(n(I18n.listing.listing.tution_fee)),i.push(":</strong>\n      "),i.push(this.listing.get("tution_fee")),i.push("\n      "),null!=t&&(i.push('\n        <span class="icon hs-icon-promotion" data-toggle="tooltip" title="'),i.push(n(t.get("subtitle"))),i.push('" />\n      ')),i.push("\n    </div>\n  ")),i.push("\n  <figcaption>\n    <h2>\n      "),i.push(n(this.index)),i.push(".\n      "),i.push(n(this.listing.get("full_name"))),i.push('\n    </h2>\n    <span class="subtitle">\n      '),i.push(n(I18n.listing.listing["in"])),i.push("\n      "),this.listing.get("brand_name")?(i.push("\n        "),i.push(n(this.listing.get("brand_name"))),i.push("\n      ")):(i.push("\n        "),i.push(n(this.listing.get("city_name"))),i.push("\n      ")),i.push("\n    </span>\n  </figcaption>\n</a>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["listing/listing"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,e,o;o=this.listing.tip,i.push("\n"),e=this.listing.promotion,i.push("\n"),t=this.listing.get("listing_url"),i.push('\n<div class="inner">\n  <div class="picture'),this.highlight&&i.push(n(" highlight")),i.push('">\n    <a class="link-wrapper" target="_blank" href="'),i.push(n(t)),i.push('" '),this.listing.get("uuid")&&(i.push('data-track-click="'),i.push(n(this.listing.get("uuid"))),i.push('" data-position='),i.push(n(this.index))),i.push('>\n      <figure>\n        <img src="'),i.push(n(this.listing.get("image_url"))),i.push('" alt="'),i.push(n(this.listing.get("full_name"))),i.push('" />\n      </figure>\n      '),this.listing.get("tution_fee")&&(i.push('\n        <div class="tution_fee visible-xs-block visible-sm-block">\n          <strong>'),i.push(n(I18n.listing.listing.tution_fee)),i.push(":</strong>\n          "),i.push(this.listing.get("tution_fee")),i.push("\n          "),null!=e&&(i.push('\n            <span class="icon hs-icon-promotion" data-toggle="tooltip" title="'),i.push(n(e.get("subtitle"))),i.push('" />\n          ')),i.push("\n        </div>\n      ")),i.push("\n      "),this.listing.get("faves")>0&&(i.push('\n        <div class="faves">\n          <span class="heart heart-big active hs-icon-heart" />\n          <span class="counter">\n            '),i.push(n(this.listing.get("faves"))),i.push("\n            "),this.listing.get("faves")>1?(i.push("\n              "),i.push(n(I18n.listing.listing.favorite.other)),i.push("\n            ")):(i.push("\n              "),i.push(n(I18n.listing.listing.favorite.one)),i.push("\n            ")),i.push("\n          </span>\n        </div>\n      ")),i.push('\n    </a>\n  </div>\n  <div class="description">\n    <div class="inner">\n      <figcaption>\n        <h2>\n          '),i.push(n(this.index)),i.push('.\n          <a target="_blank" href="'),i.push(n(t)),i.push('" '),this.listing.get("uuid")&&(i.push('data-track-click="'),i.push(n(this.listing.get("uuid"))),i.push('" data-position='),i.push(n(this.index))),i.push(">"),i.push(n(this.listing.get("full_name"))),i.push('</a>\n        </h2>\n        <div class="subtitle visible-lg-block visible-md-block">\n          '),i.push(n(I18n.listing.listing["in"])),i.push("\n          "),this.listing.get("brand_name")?(i.push('\n            <a href="'),i.push(n(this.listing.get("brand_url"))),i.push(n(this.paramsHash)),i.push('">'),i.push(n(this.listing.get("brand_name"))),i.push('</a>,\n            <a href="/tim-kiem/'),i.push(n(this.listing.get("city_slug"))),i.push("/"),i.push(n(this.listing.get("district_slug"))),i.push('">'),i.push(n(this.listing.get("district_name"))),i.push("</a>\n          ")):(i.push("\n            "),i.push(n(this.listing.get("city_name"))),i.push("\n          ")),i.push("\n        </div>\n      </figcaption>\n      "),this.listing.get("recommends_count")>=this.minimumRecommends&&(i.push('\n        <div class="recommend">\n          <span class="thumb fa fa-thumbs-up"></span>\n          <strong>\n            <span class="percentage">'),i.push(n(parseInt(this.listing.get("recommends_percentage")))),i.push("%</span>\n            "),i.push(n(I18n.listing.listing.recommend)),i.push('\n          </strong>\n          (<a target="_blank" href="'),i.push(n(t)),i.push('#reviews">'),i.push(n(this.listing.get("tips_count"))),i.push("\n            "),this.listing.get("tips_count")>1?(i.push("\n              "),i.push(n(I18n.listing.listing.review.other)),i.push("\n            ")):(i.push("\n              "),i.push(n(I18n.listing.listing.review.one)),i.push("\n            ")),i.push("\n          </a>)\n        </div>\n      ")),i.push("\n      "),this.listing.get("short_overview")&&(i.push('\n        <p class="overview visible-lg-block">\n          <strong>'),i.push(n(I18n.listing.listing.kiddi_says)),i.push(":</strong>\n          "),i.push(this.listing.get("short_overview")),i.push("\n        </p>\n      ")),i.push("\n      "),null!=o&&(i.push('\n        <div class="media hidden-xs">\n          <div class="media-left">\n            '),null!=o.get("user_profile_url")?(i.push('\n              <a href="'),i.push(n(o.get("user_profile_url"))),i.push('" title="'),i.push(n(o.get("user_short_name"))),i.push('">\n                <img class="media-object" src="'),i.push(n(o.get("user_avatar_url"))),i.push('" />\n              </a>\n            ')):(i.push('\n              <img class="media-object" src="'),i.push(n(o.get("user_avatar_url"))),i.push('" />\n            ')),i.push('\n          </div>\n          <div class="media-body">\n            <strong>'),i.push(n(o.get("user_first_name"))),i.push(" "),i.push(n(I18n.listing.listing.says)),i.push(":</strong>\n            "),i.push(o.get("description_truncated")),i.push("\n          </div>\n        </div>\n      ")),i.push("\n      "),this.listing.get("tution_fee")&&(i.push('\n        <div class="tution_fee visible-lg-block visible-md-block">\n          <strong>'),i.push(n(I18n.listing.listing.tution_fee)),i.push(":</strong>\n          "),i.push(this.listing.get("tution_fee")),i.push("\n          "),null!=e&&(i.push('\n            <span class="icon hs-icon-promotion" data-toggle="tooltip" title="'),i.push(n(e.get("subtitle"))),i.push('" />\n          ')),i.push("\n        </div>\n      ")),i.push("\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["nearby_listing/listing+mobile"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t;t=this.listing.promotion,i.push('\n<a class="listing" href="'),i.push(n(this.listing.get("listing_url"))),i.push('" style="background-image: url(\''),i.push(n(this.listing.get("image_url"))),i.push('\')" alt="'),i.push(n(this.listing.get("full_name"))),i.push('" data-track-click="'),i.push(n(this.listing.get("uuid"))),i.push('" data-position='),i.push(n(this.index)),i.push(">\n  <h4>\n    <strong>"),i.push(n(this.listing.get("full_name"))),i.push("</strong>\n    "),i.push(n(I18n.listing.listing["in"])),i.push("\n    "),this.listing.get("brand_name")?(i.push("\n      "),i.push(n(this.listing.get("brand_name"))),i.push("\n    ")):(i.push("\n      "),i.push(n(this.listing.get("city_name"))),i.push("\n    ")),i.push("\n  </h4>\n  "),this.listing.get("tution_fee")&&(i.push('\n    <div class="tution_fee">\n      <strong>'),i.push(n(I18n.listing.listing.tution_fee)),i.push(":</strong>\n      <strong>"),i.push(this.listing.get("tution_fee")),i.push("</strong>\n      "),null!=t&&(i.push('\n        <span class="icon hs-icon-promotion" data-toggle="tooltip" title="'),i.push(n(t.get("subtitle"))),i.push('" />\n      ')),i.push("\n    </div>\n  ")),i.push("\n</a>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["nearby_listing/listing"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t;t=this.listing.promotion,i.push('\n<div class="row">\n  <div class="col-xs-12 nearby-listing">\n    <a class="listing" href="'),i.push(n(this.listing.get("listing_url"))),i.push('" style="background-image: url(\''),i.push(n(this.listing.get("image_url"))),i.push('\')" alt="'),i.push(n(this.listing.get("full_name"))),i.push('" data-track-click="'),i.push(n(this.listing.get("uuid"))),i.push('" data-position='),i.push(n(this.index)),i.push(">\n      "),this.listing.get("tution_fee")&&(i.push('\n        <span class="tution_fee">\n          <strong>'),i.push(n(I18n.listing.listing.tution_fee)),i.push(":</strong>\n          <strong>"),i.push(this.listing.get("tution_fee")),i.push("</strong>\n          "),null!=t&&(i.push('\n            <span class="icon hs-icon-promotion" data-toggle="tooltip" title="'),i.push(n(t.get("subtitle"))),i.push('" />\n          ')),i.push("\n        </span>\n      ")),i.push('\n    </a>\n    <div class="listing-info">\n      <h3>\n        <a href="'),i.push(n(this.listing.get("listing_url"))),i.push('">\n          '),i.push(n(this.listing.get("full_name"))),i.push("\n        </a>\n      </h3>\n      "),this.listing.get("brand_name")&&(i.push('\n        <div class="subtitle">\n          '),i.push(n(I18n.listing.listing["in"])),i.push('\n          <a href="'),i.push(n(this.listing.get("brand_url"))),i.push('">\n            '),i.push(n(this.listing.get("brand_name"))),i.push("\n          </a>\n        </div>\n      ")),i.push("\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["photos/gallery"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<!-- Root element of PhotoSwipe. Must have class pswp. -->\n<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n\n  <!-- Background of PhotoSwipe.\n       It\'s a separate element as animating opacity is faster than rgba(). -->\n  <div class="pswp__bg"></div>\n\n  <!-- Slides wrapper with overflow:hidden. -->\n  <div class="pswp__scroll-wrap">\n\n    <!-- Container that holds slides.\n        PhotoSwipe keeps only 3 of them in the DOM to save memory.\n        Don\'t modify these 3 pswp__item elements, data is added later on. -->\n    <div class="pswp__container">\n      <div class="pswp__item"></div>\n      <div class="pswp__item"></div>\n      <div class="pswp__item"></div>\n    </div>\n\n    <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->\n    <div class="pswp__ui pswp__ui--hidden">\n\n      <div class="pswp__top-bar">\n        <div class="pswp__counter"></div>\n\n        <div class="gallery-item-report-links">\n          <a href="#" title="'),i.push(n(I18n.photos.gallery.flag_inappropriate)),i.push('" class="btn btn-sm btn-link report-link" data-report-link>\n            <span class="hs-icon-new"></span>\n            <strong>'),i.push(n(I18n.photos.gallery.report)),i.push('</strong>\n          </a>\n          <a href="#" title="'),i.push(n(I18n.photos.gallery.delete_this_photo)),i.push('" class="btn btn-sm btn-link report-link hide" data-delete-photo>\n            <span class="fa fa-trash"></span>\n            <strong>'),i.push(n(I18n.photos.gallery["delete"])),i.push('</strong>\n          </a>\n        </div>\n\n        <button class="pswp__button pswp__button--close" title="'),i.push(n(I18n.photos.gallery.close_esc)),i.push('"></button>\n        <!-- <button class="pswp__button pswp__button--share" title="Share"></button> -->\n        <!-- <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button> -->\n        <!-- <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button> -->\n\n        <div class="gallery-item-details">\n        </div>\n        <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->\n        <!-- element will get class pswp__preloader--active when preloader is running -->\n        <div class="pswp__preloader">\n            <div class="pswp__preloader__icn">\n              <div class="pswp__preloader__cut">\n                <div class="pswp__preloader__donut"></div>\n              </div>\n            </div>\n        </div>\n      </div>\n\n      <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n        <div class="pswp__share-tooltip"></div>\n      </div>\n\n      <button class="pswp__button pswp__button--arrow--left" title="'),i.push(n(I18n.photos.gallery.previous_arrow_left)),i.push('">\n      </button>\n\n      <button class="pswp__button pswp__button--arrow--right" title="'),i.push(n(I18n.photos.gallery.next_arrow_right)),i.push('">\n      </button>\n\n      <div class="pswp__caption">\n        <div class="pswp__caption__center"></div>\n      </div>\n\n    </div>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["photos/gallery_item"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="media">\n  <div class="media-left">\n    '),null!=this.photo.get("user_profile_url")?(i.push('\n      <a href="'),i.push(n(this.photo.get("user_profile_url"))),i.push('" title="'),i.push(n(this.photo.get("user_full_name"))),i.push('">\n        <img src="'),i.push(n(this.photo.get("user_avatar_url"))),i.push('"\n             alt="'),i.push(n(this.photo.get("user_full_name"))),i.push('"\n             class="media-object avatar img-bordered img-rounded-sm" />\n      </a>\n    ')):(i.push('\n      <img src="'),i.push(n(this.photo.get("user_avatar_url"))),i.push('"\n           alt="'),i.push(n(this.photo.get("user_full_name"))),i.push('"\n           class="media-object avatar img-bordered img-rounded-sm" />\n    ')),i.push('\n  </div>\n  <div class="media-body">\n    <div class="user-name">\n      '),null!=this.photo.get("user_profile_url")?(i.push('\n        <a href="'),i.push(n(this.photo.get("user_profile_url"))),i.push('"\n           title="'),i.push(n(this.photo.get("user_full_name"))),i.push('"\n           '),this.photo.get("has_attribution")&&i.push('target="_blank" '),i.push(">\n          "),i.push(n(this.photo.get("user_full_name"))),i.push("\n        </a>\n      ")):(i.push("\n        "),i.push(n(this.photo.get("user_full_name"))),i.push("\n      ")),i.push("\n    </div>\n    <small>"),i.push(n(I18n.photos.gallery_item.posted_on)),i.push(" "),i.push(n(this.photo.get("formatted_created_at"))),i.push('</small>\n  </div>\n</div>\n\n<a href="#" class="btn btn-primary upvote-btn'),this.alreadyUpvoted&&i.push(n(" upvoted ago")),i.push('"\n   data-upvote-btn=""\n   data-id="'),i.push(n(this.photo.get("id"))),i.push('"\n   data-upvotable-type="photo">\n  <div class="state_active">\n    <span class="icon glyphicon glyphicon-upload"></span>\n    '),i.push(n(I18n.photos.gallery_item.upvote)),i.push('!\n    <span class="counter">'),i.push(n(this.upvotesCount)),i.push('</span>\n  </div>\n  <div class="state_upvoted">\n    <span class="icon glyphicon glyphicon-upload"></span>\n    '),i.push(n(I18n.photos.gallery_item.upvoted)),i.push('!\n    <span class="counter">'),i.push(n(this.upvotesCount)),i.push('</span>\n  </div>\n  <div class="state_upvoted_hover">\n    '),i.push(n(I18n.photos.gallery_item.remove_vote)),i.push('! :(\n  </div>\n</a>\n\n<div class="location small">\n  <span class="icon hs-icon-location-pin"></span>\n  <a href="'),i.push(n(this.photo.get("area_url"))),i.push('">'),i.push(n(this.photo.get("location"))),i.push('</a>\n</div>\n\n<div class="social-share-links">\n  <span>'),i.push(n(I18n.photos.gallery_item.share)),i.push('!</span>\n  <a class="btn btn-social" data-share-facebook="" href="#" title="'),i.push(n(I18n.photos.gallery_item.share_on_facebook)),i.push('!">\n    <span class="fa fa-facebook-official"></span>\n  </a>\n  <a class="btn btn-social" data-share-twitter="" href="#" title="'),i.push(n(I18n.photos.gallery_item.share_on_twitter)),i.push('!">\n    <span class="fa fa-twitter"></span>\n  </a>\n  <a class="btn btn-social" data-copy-link="" href="#" title="'),i.push(n(I18n.photos.gallery_item.link_to_this_photo)),i.push('!">\n    <span class="fa fa-link"></span>\n  </a>\n</div>\n')}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["photos/listing_photos_page_photo"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="background" style="background-image: url(\''),i.push(n(this.photo.get("standard_square_url"))),i.push('\')">\n  <a href="#" class="inner" data-photo="'),i.push(n(this.photo.get("id"))),i.push('">\n    <div class="photo-author photo-author-left">\n      <img class="img-circle img-bordered" src="'),i.push(n(this.photo.get("user_avatar_url"))),i.push('">\n      <span>'),i.push(n(this.photo.get("user_full_name"))),i.push("</span>\n    </div>\n  </a>\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["photos/no_photo"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<figure title="'),i.push(n(I18n.photos.no_photo.no_photo)),i.push('">\n  <img src="'),i.push(n(this.defaultPhotoUrl)),i.push('" class="img-rounded" />\n</figure>\n')}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["photos/photo+mobile"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<figure class="clickable" itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">\n  <img src="'),i.push(n(this.photo.get("large_thumbnail_url"))),i.push('" class="img-rounded" itemprop="thumbnail"\n       alt="'),i.push(n(this.photo.get("location"))),i.push('" title="'),i.push(n(this.photo.get("location"))),i.push('" />\n\n  <meta itemprop="width" content="'),i.push(n(this.photo.get("width"))),i.push('"/>\n  <meta itemprop="height" content="'),i.push(n(this.photo.get("height"))),i.push('"/>\n  <meta itemprop="contentUrl" content="'),i.push(n(this.photo.get("gallery_url"))),i.push('"/>\n\n  '),this.seeMore&&(i.push('\n    <div class="see_more">\n      <span class="glyphicon glyphicon-camera"></span>\n      <small>\n        '),this.nbMorePhotos>1?(i.push("\n          "),i.push(n(I18n.photos.photo.see_more_photo.other.replace("{nb_more_photos}",this.nbMorePhotos))),i.push("\n        ")):(i.push("\n          "),i.push(n(I18n.photos.photo.see_more_photo.one)),i.push("\n        ")),i.push("\n      </small>\n    </div>\n  ")),i.push('\n  <div class="panel-overlay-top-right panel-overlay-label panel-overlay-button-icon">\n    <i class="glyphicon glyphicon-resize-full icon-white icon-size-2"></i>\n  </div>\n</figure>\n')}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["photos/photo"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<figure class="clickable" itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">\n  <img src="'),i.push(n(this.photo.get("main_thumbnail_url"))),i.push('" class="img-rounded" itemprop="thumbnail"\n       alt="'),i.push(n(this.photo.get("location"))),i.push('" title="'),i.push(n(this.photo.get("location"))),i.push('" />\n\n  <meta itemprop="width" content="'),i.push(n(this.photo.get("width"))),i.push('"/>\n  <meta itemprop="height" content="'),i.push(n(this.photo.get("height"))),i.push('"/>\n  <meta itemprop="contentUrl" content="'),i.push(n(this.photo.get("gallery_url"))),i.push('"/>\n\n  <figcaption class="media" itemprop="caption">\n    <div class="media-left">\n      <img src="'),i.push(n(this.photo.get("user_avatar_url"))),i.push('" class="media-object avatar img-bordered" alt="kiddier" />\n    </div>\n    <div class="media-body">\n      <span class="name" itemprop="author">'),i.push(n(this.photo.get("user_short_name"))),i.push('</span>\n      <small class="text-muted" itemprop="uploadDate">'),i.push(n(this.photo.get("formatted_created_at"))),i.push("</small>\n    </div>\n  </figcaption>\n\n  "),this.seeMore&&(i.push('\n    <div class="see_more">\n      <span class="glyphicon glyphicon-camera"></span>\n      <small>\n        '),this.nbMorePhotos>1?(i.push("\n          "),i.push(n(I18n.photos.photo.see_more_photo.other.replace("{nb_more_photos}",this.nbMorePhotos))),i.push("\n        ")):(i.push("\n          "),i.push(n(I18n.photos.photo.see_more_photo.one)),i.push("\n        ")),i.push("\n      </small>\n    </div>\n  ")),i.push("\n</figure>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["photos/upload_photo"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="media-left">\n  <div class="photo-preview" style="background-image: url(\''),i.push(n(this.previewUrl)),i.push('\')">\n    <div class="loading">\n      <div class="sk-spinner"><div class="dot1"></div><div class="dot2"></div></div>\n    </div>\n  </div>\n</div>\n<div class="media-body caption-field">\n  <label>'),i.push(n(I18n.photos.upload_photo.photo_caption)),i.push(': <span class="optional">('),i.push(n(I18n.photos.upload_photo.optional)),i.push(')</span></label>\n  <textarea name="caption_'),i.push(n(this.index)),i.push("\"\n            data-caption=''\n            data-index=\""),i.push(n(this.index)),i.push('"\n            class="form-control"\n            rows="5"\n            placeholder="'),i.push(n(I18n.photos.upload_photo.write_something_here)),i.push('"\n            maxlength="750"></textarea>\n  <small class="counter" data-remaining-chars>750</small>\n</div>\n')}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["photos/upload_photos+mobile"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="modal-dialog">\n  <div class="modal-content">\n\n    <div class="modal-header">\n      <button class="btn btn-link btn-close" type="button" data-dismiss="modal" aria-label="Back">\n        '),i.push(n(I18n.photos.upload_photos.back)),i.push('\n      </button>\n      <h4 class="modal-title">\n        '),i.push(n(this.subtitle)),i.push('\n      </h4>\n      <button class="btn btn-link btn-post" type="button" aria-label="'),i.push(n(I18n.photos.upload_photos.post)),i.push('" disabled="disabled" id="upload-submit-btn">\n        '),i.push(n(I18n.photos.upload_photos.post)),i.push('\n      </button>\n    </div>\n\n    <div class="modal-body upload-photo-body">\n      <form id="photos-upload-form"\n            action="'),i.push(n(this.url)),i.push('"\n            data-cloudinary-field="'),i.push(n(this.cloudinary.cloudinaryField)),i.push('"\n            data-form-data="'),i.push(n(JSON.stringify(this.cloudinary.formData))),i.push('"\n            data-url="'),i.push(n(this.cloudinary.url)),i.push('"\n            method="post">\n\n        <div id="photos-to-upload" class="photos-to-upload"></div>\n\n        <div class="dropzone" id="photos-dropzone">\n          <a href="#" class="dropzone-link" id="select-files-link"></a>\n          <input type="file" name="file" multiple="multiple" accept="image/*" />\n          <big>\n            <span class="icon glyphicon glyphicon-camera"></span>\n            <br>'),i.push(n(I18n.photos.upload_photos.select_up_to)),i.push(" <span data-count-left>"),i.push(n(this.maxPhotosCount)),i.push("</span> "),i.push(n(I18n.photos.upload_photos.photo)),i.push("<span data-count-left-plural>"),i.push(n(I18n.photos.upload_photos.s)),i.push('</span>.\n          </big>\n          <br>\n          <small class="upload-notes">'),i.push(n(I18n.photos.upload_photos.image_width_size_note)),i.push('</small>\n        </div>\n\n        <div class="hs-errors" data-errors></div>\n      </form>\n    </div>\n  </div>\n</div>\n')}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["photos/upload_photos"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="modal-dialog">\n  <div class="modal-content">\n\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-label="'),i.push(n(I18n.photos.upload_photos.close)),i.push('">\n        <span aria-hidden="true">&times;</span>\n      </button>\n      <h4 class="modal-title">'),i.push(n(I18n.photos.upload_photos.upload_photos)),i.push('</h4>\n      <span class="location text-muted">\n        <span class="icon hs-icon-location-pin"></span>\n        '),i.push(n(this.subtitle)),i.push('\n      </span>\n    </div>\n\n    <div class="modal-body">\n      <form id="photos-upload-form"\n            action="'),i.push(n(this.url)),i.push('"\n            data-cloudinary-field="'),i.push(n(this.cloudinary.cloudinaryField)),i.push('"\n            data-form-data="'),i.push(n(JSON.stringify(this.cloudinary.formData))),i.push('"\n            data-url="'),i.push(n(this.cloudinary.url)),i.push('"\n            method="post">\n\n        <div id="photos-to-upload" class="photos-to-upload"></div>\n\n        <div class="dropzone" id="photos-dropzone">\n          <a href="#" class="dropzone-link" id="select-files-link"></a>\n          <input type="file" name="file" multiple="multiple" accept="image/*" />\n          <big>\n            <span class="icon glyphicon glyphicon-camera"></span>\n            <br>'),i.push(n(I18n.photos.upload_photos.select_or_drag_and_drop)),i.push("<br>\n            "),1===this.maxPhotosCount?(i.push("\n              1 "),i.push(n(I18n.photos.upload_photos.photo)),i.push("\n            ")):(i.push("\n              "),i.push(n(I18n.photos.upload_photos.up_to)),i.push(" <span data-count-left>"),i.push(n(this.maxPhotosCount)),i.push("</span> "),i.push(n(I18n.photos.upload_photos.photo)),i.push("<span data-count-left-plural>"),i.push(n(I18n.photos.upload_photos.s)),i.push("</span>\n            ")),i.push("\n            "),i.push(n(I18n.photos.upload_photos.here)),i.push('.\n          </big>\n          <br>\n          <small class="upload-notes">'),i.push(n(I18n.photos.upload_photos.image_width_size_note)),i.push('</small>\n        </div>\n\n        <div class="hs-errors" data-errors></div>\n\n        <div class="buttons">\n          <button type="button" class="btn btn-larger btn-default" data-dismiss="modal">'),i.push(n(I18n.photos.upload_photos.cancel)),i.push('</button>\n          <input type="submit" class="btn btn-larger btn-primary" value="'),i.push(n(I18n.photos.upload_photos.upload_and_post)),i.push('" id="upload-submit-btn" disabled="disabled" />\n        </div>\n      </form>\n    </div>\n\n  </div>\n</div>\n')
}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["search/google_empty"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="tt-empty">\n  <div class="no-result">\n    '),i.push(n(I18n.search.google_empty.no_result)),i.push("\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["search/google_footer"]=function(t){t||(t={});var e,i=[],n=t.safe,o=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},o||(o=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){}).call(this)}.call(t),t.safe=n,t.escape=o,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["search/google_header"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="label label-google-suggestions">'),i.push(n(I18n.search.google_header.listings_near)),i.push(":</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["search/google_suggestion"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t;i.push('<div class="google-suggestion">\n  <strong>'),i.push(n(this.terms[0].value)),i.push("</strong>\n  "),null!=(null!=(t=this.terms[1])?t.value:void 0)&&(i.push("\n    "),i.push(n(this.terms[1].value)),i.push("\n  ")),i.push("\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["search/kiddi_empty"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="tt-empty">\n  <div class="no-result">\n    '),i.push(n(I18n.search.kiddi_empty.we_can_not_find_that)),i.push("\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["search/kiddi_footer"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="footer">\n  <span class="icon fa fa-question-circle"></span>\n  '),i.push(n(I18n.search.kiddi_footer.can_not_find_listing)),i.push('\n  <a href="https://goo.gl/gQviFH" target="_blank">'),i.push(n(I18n.search.kiddi_footer.let_us_know)),i.push("</a>\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["search/kiddi_header"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<div class="label label-kiddi-suggestions">'),i.push(n(I18n.search.kiddi_header.listings)),i.push(":</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["search/kiddi_suggestion"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){this.image_url||(this.image_url=Kiddi.Utilities.Basics.defaultSuggestionImage()),i.push('\n\n<div class="media kiddi-suggestion">\n  <div class="media-left">\n    <img src="'),i.push(n(this.image_url)),i.push('" class="media-object img-circle" alt="'),i.push(n(I18n.search.kiddi_suggestion.kiddi_result)),i.push('" />\n  </div>\n  <div class="media-body">\n    <h4 class="media-heading">'),i.push(n(this.label)),i.push("</h4>\n    "),null!=this.sublabel&&(i.push("\n      <small>"),i.push(n(this.sublabel)),i.push("</small>\n    ")),i.push("\n  </div>\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["user/favorite"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t;t=this.favorite.get("user_is_current")?I18n.user.favorite.you:this.favorite.get("user_first_name"),i.push('\n<div class="result normal photo">\n  <a href="'),i.push(n(""+this.favorite.get("area_url"))),i.push('">\n    <div class="inner" style="background-image: url('),i.push(n(this.favorite.get("area_image_url"))),i.push(')">\n      <div class="legend">\n        '),i.push(n(t)),i.push(" "),i.push(n(I18n.user.favorite.favorited)),i.push("\n        <strong>"),i.push(n(this.favorite.get("area_name"))),i.push("</strong>\n      </div>\n    </div>\n  </a>\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["user/photo"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,e,o;t="large"===this.size?"gallery_url":"standard_square_url",i.push("\n"),o=parseInt(this.photo.get("upvotes_count")),i.push("\n"),e=this.photo.get("user_is_current")?I18n.user.photo.you:this.photo.get("user_first_name"),i.push('\n<div class="result '),i.push(n(this.size)),i.push(' photo">\n  <a href="'),i.push(n(this.photo.get("area_url")+"?pic="+this.photo.get("id"))),i.push('">\n    <div class="inner" style="background-image: url('),i.push(n(this.photo.get(t))),i.push(')">\n      <div class="legend">\n        <div class="counters">\n          <span class="upvotes">\n            '),o>0&&(i.push("\n              "),o>1?(i.push("\n                "),i.push(n(I18n.user.tip.upvote.other.replace("{upvotes_count}",o))),i.push("\n              ")):(i.push("\n                "),i.push(n(I18n.user.photo.upvote.one)),i.push("\n              ")),i.push("\n            ")),i.push("\n          </span>\n        </div>\n        "),i.push(n(e)),i.push(" "),i.push(n(I18n.user.photo.added_a_photo_to)),i.push("\n        <strong>"),i.push(n(this.photo.get("location"))),i.push("</strong>\n      </div>\n    </div>\n  </a>\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["user/tip"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,e;e=parseInt(this.tip.get("upvotes_count")),i.push("\n"),t=this.tip.get("user_is_current")?I18n.user.tip.you:this.tip.get("user_first_name"),i.push('\n<div class="result '),i.push(n(this.size)),i.push(' tip">\n  <a href="'),i.push(n(this.tip.get("area_url")+"#tip-"+this.tip.get("id"))),i.push('">\n    <div class="inner">\n      <blockquote>\n        "'),i.push(this.tip.get("description_without_tags")),i.push('"\n      </blockquote>\n      <div class="legend">\n        <div class="counters">\n          <span class="upvotes">\n            '),e>0&&(i.push("\n              "),e>1?(i.push("\n                "),i.push(n(I18n.user.tip.upvote.other.replace("{upvotes_count}",e))),i.push("\n              ")):(i.push("\n                "),i.push(n(I18n.user.tip.upvote.one)),i.push("\n              ")),i.push("\n            ")),i.push("\n          </span>\n        </div>\n        "),i.push(n(t)),i.push(" "),i.push(n(I18n.user.tip.left_a_review_on)),i.push("\n        <strong>"),i.push(n(this.tip.get("location"))),i.push("</strong>\n      </div>\n    </div>\n  </a>\n</div>\n")}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["user/upload_photos"]=function(t){t||(t={});var e,i=[],n=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?s(t):""},o=t.safe,s=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},s||(s=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){i.push('<form id="user-photo-file-form" data-cloudinary-field="'),i.push(n(this.cloudinary.cloudinaryField)),i.push('"\n                                data-form-data="'),i.push(n(JSON.stringify(this.cloudinary.formData))),i.push('"\n                                data-url="'),i.push(n(this.cloudinary.url)),i.push('">\n  <input type="file" name="file" accept="image/*" />\n</form>\n')}).call(this)}.call(t),t.safe=o,t.escape=s,i.join("")}}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Utilities.Analytics=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.initialize=function(){},i.prototype._validateAndBuildEventName=function(t,e){return t+" "+e},i.prototype.alias=function(){},i.prototype.identify=function(){},i.prototype.track=function(t,e,i){return"undefined"!=typeof analytics&&null!==analytics&&analytics.track(t,e),null!=i?i():void 0},i.prototype.mpEvent_DEP=function(){},i.prototype.gaEvent=function(t,e,i){var n;if(null!=window._gaq)return n=["_trackEvent"],null!=t&&n.push(t),null!=t&&null!=e&&n.push(e),null!=t&&null!=e&&null!=i&&n.push(i),window._gaq.push(n)},i.prototype.gaPageView=function(t){return null!=window._gaq?window._gaq.push(["_trackPageview",t]):void 0},i.prototype.fbCustomEvents=function(t,e){return null==e&&(e={}),"undefined"!=typeof fbq&&null!==fbq?fbq("trackCustom",t,e):void 0},i.prototype.ahoyCustomEvents=function(t,e){return null==e&&(e={}),"undefined"!=typeof ahoy&&null!==ahoy?ahoy.track(t,e):void 0},i}(Backbone.View)}.call(this),function(){Kiddi.Utilities.Authentication={isLoggedIn:function(){return null!=Kiddi.app.user&&Kiddi.app.user.isLoggedIn()},isLoggedOut:function(){return!Kiddi.Utilities.Authentication.isLoggedIn()},showLoginModal:function(t){return Kiddi.app.header.login.callback=t,Kiddi.app.header.login.render()},showSignupModal:function(t){return Kiddi.app.header.signup.callback=t,Kiddi.app.header.signup.render()}}}.call(this),function(){Kiddi.Utilities.Basics={capitalizeFirstLetter:function(t){return t&&t.length>0?""+t.charAt(0).toUpperCase()+t.slice(1):""},round:function(t,e){return e||(e=0),Number(t.toFixed(e))},redirectToLocation:function(t){return window.location.replace(t)},replaceVietnameseCharacters:function(t){var e,i;return i=["\xe0","\xe1","\u1ea1","\u1ea3","\xe3","\xe2","\u1ea7","\u1ea5","\u1ead","\u1ea9","\u1eab","\u0103","\u1eb1","\u1eaf","\u1eb7","\u1eb3","\u1eb5","\xe8","\xe9","\u1eb9","\u1ebb","\u1ebd","\xea","\u1ec1","\u1ebf","\u1ec7","\u1ec3","\u1ec5","\xec","\xed","\u1ecb","\u1ec9","\u0129","\xf2","\xf3","\u1ecd","\u1ecf","\xf5","\xf4","\u1ed3","\u1ed1","\u1ed9","\u1ed5","\u1ed7","\u01a1","\u1edd","\u1edb","\u1ee3","\u1edf","\u1ee1","\xf9","\xfa","\u1ee5","\u1ee7","\u0169","\u01b0","\u1eeb","\u1ee9","\u1ef1","\u1eed","\u1eef","\u1ef3","\xfd","\u1ef5","\u1ef7","\u1ef9","\u0111","\xc0","\xc1","\u1ea0","\u1ea2","\xc3","\xc2","\u1ea6","\u1ea4","\u1eac","\u1ea8","\u1eaa","\u0102","\u1eb0","\u1eae","\u1eb6","\u1eb2","\u1eb4","\xc8","\xc9","\u1eb8","\u1eba","\u1ebc","\xca","\u1ec0","\u1ebe","\u1ec6","\u1ec2","\u1ec4","\xcc","\xcd","\u1eca","\u1ec8","\u0128","\xd2","\xd3","\u1ecc","\u1ece","\xd5","\xd4","\u1ed2","\u1ed0","\u1ed8","\u1ed4","\u1ed6","\u01a0","\u1edc","\u1eda","\u1ee2","\u1ede","\u1ee0","\xd9","\xda","\u1ee4","\u1ee6","\u0168","\u01af","\u1eea","\u1ee8","\u1ef0","\u1eec","\u1eee","\u1ef2","\xdd","\u1ef4","\u1ef6","\u1ef8","\u0110","\xea","\xf9","\xe0"],e=["a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","e","e","e","e","e","e","e","e","e","e","e","i","i","i","i","i","o","o","o","o","o","o","o","o","o","o","o","o","o","o","o","o","o","u","u","u","u","u","u","u","u","u","u","u","y","y","y","y","y","d","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","A","E","E","E","E","E","E","E","E","E","E","E","I","I","I","I","I","O","O","O","O","O","O","O","O","O","O","O","O","O","O","O","O","O","U","U","U","U","U","U","U","U","U","U","U","Y","Y","Y","Y","Y","D","e","u","a"],t.replaceArray(i,e)},defaultSuggestionImage:function(){return"https://res.cloudinary.com/kiddi-vn/image/upload/c_fill,h_500,w_500/v1456051900/v5rxukz9ggzhiq0zs7rc_qnhdwk.png"},placesPrefetchUrl:function(){return"https://s3-ap-southeast-1.amazonaws.com/kiddi-listings/places.json"},resultsCap:function(){return 200},truncate:function(t,e){return t&&t.length>e?t.substring(0,e)+"...":t},maxNumOfFavs:function(){return parseInt("100")},cplListingRating:function(){return parseInt("500")},maxSponsoredListings:function(){return parseInt("5")},maxListingsBeforeCPL:function(){return parseInt("5")}}}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Utilities.GooglePlacesSource=function(e){function i(t){null==t&&(t={}),this.onSelectAddress=t.onSelectAddress||$.noop,this.options=$.extend({local:[],datumTokenizer:function(t){return Bloodhound.tokenizers.whitespace(t.num)},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:3,autocompleteService:{componentRestrictions:{country:"vn"},types:["geocode"]},rateLimitWait:600,zoomForLocation:16,reverseGeocoding:!1},t),this.placesCache={},i.__super__.constructor.call(this,this.options),"undefined"!=typeof google&&null!==google&&(this.placeService=new google.maps.places.PlacesService(document.createElement("div"))),"undefined"!=typeof google&&null!==google&&(this.autocompleteService=new google.maps.places.AutocompleteService)}return t(i,e),i.prototype.predictions=[],i.prototype.get=function(t,e){return this.options.autocompleteService.input=t,this.autocompleteService.getPlacePredictions(this.options.autocompleteService,function(t){return function(i){var n;return t.predictions=i,n=_.map(t.predictions,function(e){var i;return i=new $.Deferred,t.placesCache[e.place_id]?(e.details=t.placesCache[e.place_id],i.resolve()):t.placeService.getDetails({placeId:e.place_id},function(n,o){return o===google.maps.GeocoderStatus.OK&&(t.placesCache[e.place_id]=n,e.details=n),i.resolve()}),i.promise()}),$.when.apply(null,n).then(function(){return e(t.predictions)})}}(this))},i.prototype.selectAddress=function(t){var e;return t.details?this.onGetPlaceDetails(t.details,google.maps.GeocoderStatus.OK):(e=t.reference,this.placeService.getDetails({reference:e},$.proxy(this.onGetPlaceDetails,this)))},i.prototype.onGetPlaceDetails=function(t,e){return e!==google.maps.GeocoderStatus.OK&&window.alert("Location was not found. Please try again."),this.onSelectAddress(t,"google-places")},i}(Bloodhound)}.call(this),checkIE10Version(),function(){Kiddi.Utilities.PlacesTypeahead=function(){function t(t,e,i,n){var o,s;this.element=t,o={datumTokenizer:function(t){var e,i,n,o;return e=Bloodhound.tokenizers.whitespace(t.label),t.sublabel&&(o=Bloodhound.tokenizers.whitespace(t.sublabel.replace(/'/g,"")),e=e.concat(o)),i=Kiddi.Utilities.Basics.replaceVietnameseCharacters(t.label),i=i.replace(/'/g,""),n=Bloodhound.tokenizers.whitespace(i),e.concat(n)},queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:{url:Kiddi.Utilities.Basics.placesPrefetchUrl(),ttl:36e5}},this.placesJSON=new Bloodhound(o),this.placesJSON.initialize(),this.placesSource={displayKey:"label",name:"kiddi",source:this.placesJSON.ttAdapter(),templates:e},this.googlePlaces=new Kiddi.Utilities.GooglePlacesSource({onSelectAddress:n}),this.googlePlacesSource={displayKey:function(t){return t.terms[0].value},name:"google-places",source:this.googlePlaces.ttAdapter(),templates:i},s={highlight:!0,minLenght:1,hint:!1,autoselect:!0},this.typeahead=this.element.typeahead(s,this.googlePlacesSource,this.placesSource)}return t.prototype.getTopSuggestion=function(){return this.googlePlaces.predictions.length>0?this.googlePlaces.predictions[0]:void 0},t.prototype.selectAddress=function(t){return this.googlePlaces.selectAddress(t)},t.prototype.hidePopOver=function(){return this.typeahead.typeahead("close")},t}()}.call(this),function(){Kiddi.Utilities.SocialSharing={copyLink:function(t){return window.prompt(I18n.helpers.social_sharing.copy_to_clipboard+": ",t)},openFacebookWindow:function(t){var e;return e=encodeURIComponent(t),this.openWindow("https://www.facebook.com/sharer/sharer.php?u="+e)},openPinterestWindow:function(t,e,i){var n;return"#"===t[t.length-1]&&(t=t.substr(0,t.length-1)),n="https://www.pinterest.com/pin/create/button/?url="+t+"&media="+e+"&description="+encodeURIComponent(i),this.openWindow(n)},openTwitterWindow:function(t,e,i){var n,o,s;return n=null!=t?"url="+encodeURIComponent(t)+"&":"",s=i?"":"via=kiddiers&",o=null!=e?"text="+encodeURIComponent(e):"",this.openWindow("https://twitter.com/intent/tweet?"+n+s+o)},openWindow:function(t){var e;return e="height=250, width=550, top=300, left=300, toolbar=no, menubar=no, scrollbars=no, resizable=yes, location=no, directories=no, status=no",window.open(t,"Kiddi",e)}}}.call(this),String.prototype.replaceArray=function(t,e){for(var i,n=this,o=0;o<t.length;o++)i=new RegExp(t[o],"g"),n=n.replace(i,e[o]);return n},function(){Kiddi.Models.AuthenticatedUser=Backbone.Model.extend({isAdmin:function(){return"admin"===this.get("role")},isLoggedIn:function(){var t;return null!=(t=null!=this.get("id"))?t:{"true":!1}},isLoggedOut:function(){return!this.isLoggedIn()},isOperator:function(){return"operator"===this.get("role")},analyticsTraits:function(){return{email:this.get("email"),name:this.get("full_name"),avatar:this.get("avatar_url")}}})}.call(this),function(){Kiddi.Models.Listing=Backbone.Model.extend({eventData:function(){return{listingId:this.id,listingName:this.get("full_name"),listingType:this.get("type")}}})}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Models.BrandListing=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.parse=function(t){return this.tip=t.tip?new Kiddi.Models.Tip(t.tip):null,this.promotion=t.promotion?new Kiddi.Models.PromotionPost(t.promotion):null,t},i}(Kiddi.Models.Listing)}.call(this),function(){Kiddi.Models.City=Backbone.Model.extend}.call(this),function(){Kiddi.Models.CurrentLocation=Backbone.Model.extend({initialize:function(){}})}.call(this),function(){Kiddi.Models.District=Backbone.Model.extend}.call(this),function(){Kiddi.Models.Favorite=Backbone.Model.extend({isFavorite:function(){return this.get("is_favorite")},parse:function(t){var e;return(null!=(e=t.meta)?e.success:void 0)&&t.favorite?t.favorite:{}},toggle:function(){return this.save({is_favorite:!this.isFavorite()},{patch:!0})},url:function(){return this.get("url")}})}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Models.FindListing=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.parse=function(t){return this.tip=t.tip?new Kiddi.Models.Tip(t.tip):null,this.promotion=t.promotion?new Kiddi.Models.PromotionPost(t.promotion):null,t},i}(Kiddi.Models.Listing)}.call(this),function(){Kiddi.Models.FindListingFilter=Backbone.Model.extend({defaultPerPage:15,initialize:function(){var t;return t={page:1,perPage:this.get("perPage")||this.defaultPerPage,query:"",loadListings:1},this.set(t),this.currentLocations=this.get("currentLocations"),this.mapState=this.get("mapState")},filterOptions:function(t){var e;return e=null!=this.get(t)?this.get(t):[]},filterOption:function(t,e){var i;return i=this.filterOptions(t),_.contains(i,e)},getCenter:function(){return this.hasCenter()?new google.maps.LatLng(this.get("lat"),this.get("lng")):void 0},hasCenter:function(){return null!=this.get("lat")&&null!=this.get("lng")},setLocation:function(t,e,i){var n;return n={lat:t,lng:e,locationSource:i},"map"===i&&this.mapState.set({mode:"dragging",highlightItem:null,showItem:null}),("map"===i||"search"===i)&&1!==this.get("page")&&this.set({page:1}),"browser"===i&&this.currentLocations.updateCurrent(t,e),this.set(n)},setPage:function(t){return this.mapState.set({mode:"pagination",highlightItem:null,showItem:null}),this.set({page:t})},toggleFilterOption:function(t,e){var i,n;return n=this.filterOptions(t),i=_.contains(n,e)?_.without(n,e):n.concat([e]),this.set(t,i)},toData:function(){var t,e,i;return t={distance:this.get("distance")||"10",page:this.get("page")||1,limit:this.get("perPage"),by_slug:this.get("slug"),listingType:this.get("listingType")||"School"},e=["lat","lng"],_.each(e,function(e){return function(i){return e.get(i)?t[i]=parseFloat(e.get(i)):void 0}}(this)),i=["min_price","max_price"],_.each(i,function(e){return function(i){return e.get(i)?t[i]=parseInt(e.get(i)):void 0}}(this)),t}})}.call(this),function(){Kiddi.Models.KiddiMapState=Backbone.Model.extend({initialize:function(){return this.set({highlightItem:null,showItem:null})},highlightItem:function(t){return this.set({highlightItem:t})},revealItem:function(t){return this.set({revealItem:t})},showItem:function(t){return this.set({showItem:t})}})}.call(this),function(){Kiddi.Models.FindListingMapState=Kiddi.Models.KiddiMapState.extend({initialize:function(t){return null==t&&(t={}),this.set(_.extend({highlightItem:null,showItem:null,revealItem:null,mode:"pagination"},t))}})}.call(this),function(){Kiddi.Models.UrlFilterHash=function(){function t(t){this.options=t,this.filter=this.options.filter,this.parseUrl(),this.filter.on("change",function(t){return function(){return t.updateUrl()}}(this))}return t.prototype.parse=function(t){var e;if(null!=t)return"#"===t.substring(0,1)&&(t=t.substring(1)),e={},_.each(t.split("&"),function(){return function(t){var i,n,o;switch(n=t.split("="),i=n[0],o=n[1],o=decodeURIComponent(o),i){case"lat":return e.lat=o;case"lng":return e.lng=o;case"q":return e.query=o.replace(/\+/g," ")}}}(this)),this.filter.set(e)},t.prototype.parseUrl=function(){return this.parse(window.location.hash)},t.prototype.searchParams=function(){var t;return t={},this.filter.get("lat")&&(t.lat=this.filter.get("lat")),this.filter.get("lng")&&(t.lng=this.filter.get("lng")),this.filter.get("query")&&(t.q=this.filter.get("query")),t},t.prototype.searchParamsToString=function(t){var e;return e=_.map(t,function(t,e){return[e,encodeURIComponent(t)].join("=")}),e.join("&")},t.prototype.toString=function(){var t,e;return t={},this.filter.get("lat")&&(t.lat=this.filter.get("lat")),this.filter.get("lng")&&(t.lng=this.filter.get("lng")),this.filter.get("query")&&(t.q=this.filter.get("query")),e=_.map(t,function(t,e){return[e,encodeURIComponent(t)].join("=")}),e.join("&")},t.prototype.updateUrl=function(){var t,e;return t=window.location.pathname,e=this.searchParams(),Object.keys(e).length&&(t=t+"#"+this.searchParamsToString(e)),history.pushState("",document.title,t)},t}()}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Models.FindListingUrlFilterHash=function(e){function i(t){this.options=t,i.__super__.constructor.call(this,this.options),this.options.pubsub.on("set:citySlug",_.bind(this.updateUrl,this))}return t(i,e),i.prototype.parsePath=function(t){var e;if(null!=t)return e=_.compact(t.split("/")),e[1]&&this.filter.set({city:e[1]}),e[2]?this.filter.set({area:e[2]}):void 0},i.prototype.parseSearch=function(t){var e;if(null!=t)return e={},"?"===t.substring(0,1)&&(t=t.substring(1)),_.each(t.split("&"),function(){return function(t){var i,n,o;switch(n=t.split("="),i=n[0],o=n[1],o=decodeURIComponent(o),i){case"lat":return e.lat=o;case"lng":return e.lng=o;case"q":return e.query=o.replace(/\+/g," ");case"min_price":return e.min_price=parseInt(o);case"max_price":return e.max_price=parseInt(o)}}}(this)),(e.lat||e.lng)&&(e.locationSource="url"),this.filter.set(e)},i.prototype.parseUrl=function(){return this.parsePath(window.location.pathname),this.parseSearch(window.location.search)},i.prototype.pathParams=function(){var t;return t=[],this.filter.get("city")&&t.push(this.filter.get("city")),this.filter.get("slug")&&t.push(this.filter.get("slug")),t},i.prototype.pathParamsToString=function(t){return t.join("/")},i.prototype.searchParams=function(){var t;return t={},this.filter.get("lat")&&(t.lat=this.filter.get("lat")),this.filter.get("lng")&&(t.lng=this.filter.get("lng")),this.filter.get("query")&&(t.q=this.filter.get("query")),this.filter.get("min_price")&&(t.min_price=this.filter.get("min_price")),this.filter.get("max_price")&&(t.max_price=this.filter.get("max_price")),t},i.prototype.updateUrl=function(){var t,e,i;return t="/tim-kiem",e=this.pathParams(),i=this.searchParams(),Object.keys(e).length&&(t=t+"/"+this.pathParamsToString(e)),Object.keys(i).length&&(t=t+"?"+this.searchParamsToString(i)),history.pushState("",document.title,t)},i}(Kiddi.Models.UrlFilterHash)}.call(this),function(){Kiddi.Models.KiddiAd=Backbone.Model.extend({initialize:function(){return this.tip=this.get("tip")?new Kiddi.Models.Tip(this.get("tip")):null,this.promotion=this.get("promotion")?new Kiddi.Models.PromotionPost(this.get("promotion")):null},slug:function(){return this.get("slug")},image_url:function(){return Kiddi.app.isMobile?this.get("banner").mobile:this.get("banner").desktop},device_html_code:function(){var t;return Kiddi.app.isMobile?(t=this.get("html_code").replace(/w_638/gi,"w_424"),t.replace(/h_243/gi,"h_160")):this.get("html_code")},ad_class:function(){return"leader_board"===this.get("ad_version")?"leader-board":"banner"}})}.call(this),function(){Kiddi.Models.ListingMapState=Kiddi.Models.KiddiMapState}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Models.Pagination=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.defaults=function(){return{current:1,next:null,prev:null,pages:1,perPage:6,range:8,total:0}},i.prototype.initialize=function(t){return this.set(this.defaults()),null!=t?this.set(t):void 0},i.prototype.fromIndex=function(){return(this.get("current")-1)*this.get("perPage")},i.prototype.reset=function(){return this.set(this.defaults())},i.prototype.resetCurrents=function(){return this.set(_.omit(this.defaults(),"perPage"),{silent:!0})},i.prototype.toIndex=function(){return this.fromIndex()+this.get("perPage")},i}(Backbone.Model)}.call(this),function(){Kiddi.Models.Photo=Backbone.Model.extend({initialize:function(){},remove:function(){return this.url=this.collection.url+"/"+this.get("id")+"/remove",this.destroy()},url:function(){return this.get("url")}})}.call(this),function(){Kiddi.Models.PromotionPost=Backbone.Model.extend({initialize:function(){}})}.call(this),function(){Kiddi.Models.Tip=Backbone.Model.extend({initialize:function(){},remove:function(){return this.url=this.collection.url+"/"+this.get("id")+"/remove",this.destroy()},url:function(){return this.get("url")}})}.call(this),function(){Kiddi.Models.Upvote=Backbone.Model.extend({toggleUpvote:function(){return this.baseUrl=this.get("baseUrl")+"/"+this.get("id"),this.get("upvoted")?this.downvote():this.upvote()},upvote:function(){return this.url=this.baseUrl+"/upvote",this.save({},{patch:!0})},downvote:function(){return this.url=this.baseUrl+"/downvote",this.save({},{patch:!0})},defaults:function(){return{upvoted:!1}},isNew:function(){return!1}})}.call(this),function(){Kiddi.Models.UserFavorite=Backbone.Model.extend({initialize:function(){}})}.call(this),function(){Kiddi.Collections.BrandListings=Backbone.Collection.extend({model:Kiddi.Models.BrandListing,url:"/api/listings.json",initialize:function(t,e){this.options=e},load:function(t){return this.trigger("loading"),this.fetch({data:{brand_id:t.get("id")},reset:!0}).done(function(e){return function(){return e.loaded=!0,e.reorder(t)}}(this))},reorder:function(){return this.comparator=function(t){return-1*t.get("faves")},this.sort(),this.trigger("loaded")},parse:function(t){var e;return e=null!=t.listings?t.listings:[]}})}.call(this),function(){Kiddi.Collections.CurrentLocations=Backbone.Collection.extend({model:Kiddi.Models.CurrentLocation,initialize:function(){return this.push(new this.model(Kiddi.Cartography.VietNam.defaultLocation))},getCurrent:function(){return this.at(0)},fetchCurrent:function(){var t;return t=jQuery.Deferred(),null!=this.at(0)&&t.resolveWith(this,this.at(0)),t.promise()},updateCurrent:function(t,e){var i;return i={lat:t,lng:e},null!=this.at(0)?this.at(0).set(i):this.push(new this.model(i))}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;Kiddi.Collections.DashboardHomeBranches=function(i){function n(){return this.url=t(this.url,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.comparator="brand_name",n.prototype.all=!1,n.prototype.url=function(){var t,e,i;return e=""!==this.searchModel.get("query")?"&search="+this.searchModel.get("query"):"",i="live"===this.status?"":"&status="+this.status,t="live"===this.status?"&per_page=6":"&per_page=20","/dashboard/api/branches?page="+(this.paginationModel.get("current")||1)+"&all="+this.all+e+i+t},n.prototype.initialize=function(t){return this.options=t,this.all=this.options.all,this.status=this.options.status||"live",this.comparator="live"===this.status?"brand_name":"-updated_at",this.paginationModel=this.options.pagination,this.searchModel=this.options.search
},n.prototype.parse=function(t){var e;return e={current:t.meta.pagination.current,total:t.meta.pagination.total,pages:t.meta.pagination.pages,perPage:t.meta.pagination.per_page},this.paginationModel.set(e,{silent:!0}),t.meta.success?t.branches:[]},n}(Backbone.Collection)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;Kiddi.Collections.DashboardHomeBrands=function(i){function n(){return this.url=t(this.url,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.comparator="full_name",n.prototype.all=!1,n.prototype.url=function(){var t,e,i;return e=""!==this.searchModel.get("query")?"&search="+this.searchModel.get("query"):"",i="live"===this.status?"":"&status="+this.status,t="live"===this.status?"&per_page=6":"&per_page=20","/dashboard/api/brands.json?page="+(this.paginationModel.get("current")||1)+"&all="+this.all+e+i+t},n.prototype.initialize=function(t){return this.options=t,this.all=this.options.all,this.status=this.options.status||"live",this.comparator="live"===this.status?"full_name":"-updated_at",this.paginationModel=this.options.pagination,this.searchModel=this.options.search},n.prototype.parse=function(t){var e;return e={current:t.meta.pagination.current,total:t.meta.pagination.total,pages:t.meta.pagination.pages,perPage:t.meta.pagination.per_page},this.paginationModel.set(e,{silent:!0}),t.meta.success?t.brands:[]},n}(Backbone.Collection)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Collections.Districts=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.url="/dashboard/api/districts.json",i.prototype.initialize=function(){return this.loaded=!1,this.city_id=""},i.prototype.load=function(t){var e;return this.trigger("loading"),this.reset(),this.city_id=t,e={city_id:t},""===this.city_id?(this.loaded=!0,this.trigger("loaded")):this.fetch({data:e,reset:!0}).done(function(t){return function(){return t.loaded=!0,t.trigger("loaded")}}(this))},i.prototype.parse=function(t){return t.meta.success?t.districts:[]},i}(Backbone.Collection)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Collections.FindListings=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.model=Kiddi.Models.FindListing,i.prototype.url="/api/listings/discover.json",i.prototype.initialize=function(t,e){return this.options=e,this.loaded=!1,this.currentPage=1,this.totalListings=0,this.customAds=[],this.comparator=this.sortByAllAspects},i.prototype.sortByAllAspects=function(t,e){return this.options.unlimitedDistance?0:this.query&&this._eitherContainsQuery(t,e)?this._sortByQuery(t,e):this._sortByRating(t,e)},i.prototype.load=function(t){var e;return this.query=null!=t.get("query")?t.get("query"):null,this.trigger("loading"),this.reset(),e=t.toData(),this.options.unlimitedDistance&&(e.distance="unlimited",e.limit=5),this.fetch({data:e,reset:!0}).done(function(t){return function(){return t.loaded=!0,t.trigger("loaded")}}(this))},i.prototype.parse=function(t){var e;return e=[],null==t?(this.totalListings=0,this.currentPage=1,this.customAds=[],e):(this.totalListings=null!=t.pager_info&&t.pager_info.total_listings?t.pager_info.total_listings:null!=t.listings?t.listings.length:0,this.currentPage=null!=t.pager_info&&t.pager_info.current_page?t.pager_info.current_page:1,this.customAds=null!=t.custom_ads?t.custom_ads:[],null!=t.listings&&(e=t.listings),e)},i.prototype._eitherContainsQuery=function(t,e){var i;return(i=this.query)===t.get("full_name")||i===e.get("full_name")},i.prototype._sortByRating=function(t,e){var i,n;return i=parseFloat(t.get("rating")||0),n=parseFloat(e.get("rating")||0),i>n?-1:i===n?this._sortByFavesAndDistance(t,e):1},i.prototype._sortByFavesAndDistance=function(t,e){var i,n,o,s,r,a;return n=parseInt(t.get("faves")),r=parseInt(e.get("faves")),i=parseFloat(t.get("distance")),s=parseFloat(e.get("distance")),o=i-n/Kiddi.Utilities.Basics.maxNumOfFavs(),a=s-r/Kiddi.Utilities.Basics.maxNumOfFavs(),a>o?-1:o===a?0:1},i.prototype._sortByQuery=function(t){var e;return(e=this.query)===t.get("full_name")?-1:1},i}(Backbone.Collection)}.call(this),function(){Kiddi.Collections.Photos=Backbone.Collection.extend({model:Kiddi.Models.Photo,initialize:function(t){return this.url=t.url,this.loaded=!1},load:function(t){return this.trigger("loading"),this.fetch().done(function(e){return function(){return e.loaded=!0,e.reorder(t)}}(this))},parse:function(t){var e;return(null!=(e=t.meta)?e.success:void 0)&&null!=t.photos?t.photos:[]},reorder:function(t){return this.comparator=function(e){var i;return i="recent"===t?moment(e.get("created_at")).valueOf():e.get("upvotes_count"),-1*i},this.sort(),this.trigger("loaded")}})}.call(this),function(){Kiddi.Collections.Tips=Backbone.Collection.extend({model:Kiddi.Models.Tip,initialize:function(t){return this.url=t.url,this.loaded=!1},load:function(t){return this.trigger("loading"),this.fetch().done(function(e){return function(){return e.loaded=!0,e.reorder(t)}}(this))},parse:function(t){var e;return(null!=(e=t.meta)?e.success:void 0)&&null!=t.tips?t.tips:[]},reorder:function(t){return this.comparator=function(e){var i;return i="recent"===t?moment(e.get("created_at")).valueOf():e.get("upvotes_count"),-1*i},this.sort(),this.trigger("loaded")}})}.call(this),function(){Kiddi.Collections.UserExpertises=Backbone.Collection.extend({model:function(t,e){return"tip"===t.type?new Kiddi.Models.Tip(t,e):new Kiddi.Models.Photo(t,e)},initialize:function(t){return this.url=t.url,this.loaded=!1},load:function(t){return this.trigger("loading"),this.fetch().done(function(e){return function(){return e.loaded=!0,e.reorder(t)}}(this))},parse:function(t){var e;return(null!=(e=t.meta)?e.success:void 0)&&null!=t.expertises?t.expertises:[]},reorder:function(t){return this.comparator=function(e){var i;return i="popular"===t?e.get("upvotes_count"):moment(e.get("created_at")).valueOf(),-1*i},this.sort(),this.trigger("loaded")}})}.call(this),function(){Kiddi.Collections.UserFavorites=Backbone.Collection.extend({model:Kiddi.Models.UserFavorite,initialize:function(t){return this.url=t.url,this.loaded=!1},load:function(t){return this.trigger("loading"),this.fetch().done(function(e){return function(){return e.loaded=!0,e.reorder(t)}}(this))},parse:function(t){var e;return(null!=(e=t.meta)?e.success:void 0)&&null!=t.favorites?t.favorites:[]},reorder:function(){return this.comparator=function(t){return-1*moment(t.get("created_at")).valueOf()},this.sort(),this.trigger("loaded")}})}.call(this),function(){var t;Kiddi.Cartography.KiddiInfoWindow=t=function(){function t(t,e,i,n){this.item=t,this.map=e,this.marker=i,this.options=n,this.gMapsInfoWindow=null}return t.prototype.content=function(){},t.prototype.show=function(){var t;return t={content:this.content(),maxWidth:250,disableAutoPan:!0},this.gMapsInfoWindow=new google.maps.InfoWindow(t),google.maps.event.addListener(this.gMapsInfoWindow,"closeclick",function(t){return function(){return t.map.mapState.showItem(null)}}(this)),this.gMapsInfoWindow.open(this.map.map,this.marker),this.gMapsInfoWindow},t}()}.call(this),function(){var t,e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;Kiddi.Cartography.BrandListingInfoWindow=t=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.template=JST["brand/listing_info_window"],i.prototype.content=function(){var t,e;return e=this.item.get("listing_url"),null!=window.location.hash&&(e+=window.location.hash),t={listing:this.item,listingUrl:e,brand:this.options.brand},this.template(t)},i}(Kiddi.Cartography.KiddiInfoWindow)}.call(this),function(){var t;Kiddi.Cartography.KiddiMap=t=function(){function t(t,e,i){this.center=e,this.defaultLocation=Kiddi.Cartography.VietNam.defaultLocation,this.highlightThisItem=null,this.icons=null,this.infoWindow=null,this.itemClickListeners=[],this.itemMouseOutListeners=[],this.itemMouseOverListeners=[],this.itemMarkers={},this.map=null,this.mapElement=document.getElementById(t),this.mapState=i,this.showThisItem=null}return t.prototype.addDragListener=function(t){return google.maps.event.addListener(this.map,"dragend",t)},t.prototype.addItemClickListener=function(t){return this.itemClickListeners.push(t),this.attachNewListener(t,"click")},t.prototype.addItemMouseOutListener=function(t){return this.itemMouseOutListeners.push(t),this.attachNewListener(t,"mouseout")},t.prototype.addItemMouseOverListener=function(t){return this.itemMouseOverListeners.push(t),this.attachNewListener(t,"mouseover")},t.prototype.addMapClickListener=function(t){return google.maps.event.addListener(this.map,"click",t)},t.prototype.addZoomListener=function(t){return google.maps.event.addListener(this.map,"zoom_changed",t)},t.prototype.attachNewListener=function(t,e){return _.each(this.itemMarkers,function(i){return google.maps.event.addListener(i,e,function(e){return t(i,i.item,e)})})},t.prototype.attachItemListeners=function(t,e,i){return _.each(i,function(i){return google.maps.event.addListener(t,e,function(e){return i(t,t.item,e)})})},t.prototype.fitBoundsToMarkers=function(t){var e,i,n,o;if(!_.isEmpty(this.itemMarkers)&&1!==Object.keys(this.itemMarkers).length){e=new google.maps.LatLngBounds,t&&e.extend(this.center),o=this.itemMarkers;for(i in o)n=o[i],e.extend(n.getPosition());return this.map.fitBounds(e)}},t.prototype.closeInfoWindow=function(){return this.infoWindow&&this.infoWindow.gMapsInfoWindow.close(),this.infoWindow=null},t.prototype.drawItems=function(t,e){var i,n,o,s,r,a,l,u,c,h;for(null==e&&(e={}),c={},i=e.fromIndex?e.fromIndex:0,o=n=0,a=t.length;a>n;o=++n)s=t[o],l=s.get("mapIndex")||o+i,c[s.id]=this.markerForItem(s,l);h=this.itemMarkers;for(r in h)u=h[r],u.setMap(null);return this.itemMarkers=c,e.fitToBounds===!0?this.fitBoundsToMarkers(e.includeCenterInBounds===!0):void 0},t.prototype.hideLoader=function(){return $("#mapLoadingImg").fadeOut()},t.prototype.highlightItem=function(t){var e;if(t!==this.highlightThisItem)return e=this.highlightThisItem,this.highlightThisItem=t,this.updateItemIcon(e),this.updateItemIcon(t)},t.prototype.iconForItem=function(){},t.prototype.generateLoadingImage=function(){return $("<div></div>").addClass("sk-spinner").attr({id:"mapLoadingImg",style:"display: none; margin-top: -20px; margin-left: -20px"}).append($("<div></div>").addClass("dot1")).append($("<div></div>").addClass("dot2"))[0]},t.prototype.markerForItem=function(t,e){var i,n,o;return i=t.get("lat")&&t.get("lng")?new google.maps.LatLng(t.get("lat"),t.get("lng")):new google.maps.LatLng(this.defaultLocation.lat,this.defaultLocation.lng),o={icon:this.iconForItem(t,e),position:i,title:t.get("name")},n=new google.maps.Marker(o),n.set("item",t),n.set("itemId",t.id),n.set("itemIndex",e),n.setMap(this.map),this.attachItemListeners(n,"click",this.itemClickListeners),this.attachItemListeners(n,"mouseout",this.itemMouseOutListeners),this.attachItemListeners(n,"mouseover",this.itemMouseOverListeners),n},t.prototype.refreshMapState=function(){return this.highlightItem(this.mapState.get("highlightItem")),this.revealItem(this.mapState.get("revealItem")),this.showItem(this.mapState.get("showItem"))},t.prototype.revealItem=function(t){return null!=t&&null!=this.itemMarkers[t.id]?(this.map.panTo(this.itemMarkers[t.id].getPosition()),this.mapState.set("revealItem",null)):void 0},t.prototype.showItem=function(t){var e;if(t!==this.showThisItem)return e=this.showThisItem,this.showThisItem=t,this.updateItemIcon(e),this.updateItemIcon(t)},t.prototype.showLoader=function(){return $("#mapLoadingImg").fadeIn()},t.prototype.updateItemIcon=function(t){var e;if(null!=t&&null!=this.itemMarkers[t.id])return e=this.itemMarkers[t.id],e.setIcon(this.iconForItem(t,e.itemIndex)),e.setZIndex(this.zIndexForItem(t,e.itemIndex))},t.prototype.zIndexForItem=function(){return null},t.prototype.setZoom=function(t){return this.map.setZoom(t)},t}()}.call(this),function(){var t,e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;Kiddi.Cartography.BrandMap=t=function(t){function i(t,e,n,o){var s;this.options=o,i.__super__.constructor.call(this,t,e,n),this.icons=new Kiddi.Cartography.NumberedIcons,s={center:this.center,draggable:!0,mapTypeId:google.maps.MapTypeId.TERRAIN,zoom:15,disableDefaultUI:!0,scaleControl:!0,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL}},this.map=new google.maps.Map(this.mapElement,s),this.map.controls[google.maps.ControlPosition.CENTER].push(this.generateLoadingImage()),this.addItemClickListener(function(t){return function(e,i){return t.mapState.showItem(i)}}(this)),this.addItemMouseOutListener(function(t){return function(){return t.mapState.highlightItem(null)}}(this)),this.addItemMouseOverListener(function(t){return function(e,i){return t.mapState.highlightItem(i)}}(this)),this.addMapClickListener(function(t){return function(){return t.mapState.showItem(null)}}(this)),this.mapState.on("change",function(t){return function(){return t.refreshMapState()}}(this))}return e(i,t),i.prototype.iconForItem=function(t,e){return null!=this.highlightThisItem&&this.highlightThisItem===t?this.icons.hover[e]:null!=this.showThisItem&&this.showThisItem===t?this.icons.hover[e]:this.icons.normal[e]},i.prototype.showItem=function(t){var e;if(t!==this.showThisItem)return i.__super__.showItem.call(this,t),this.closeInfoWindow(),null!=t?(e=this.itemMarkers[t.id],this.infoWindow=new Kiddi.Cartography.BrandListingInfoWindow(t,this,e,{brand:this.options.brand}),this.infoWindow.show(),this.map.setCenter(e.position)):void 0},i.prototype.zIndexForItem=function(t){return null!=this.highlightThisItem&&this.highlightThisItem===t?google.maps.Marker.MAX_ZINDEX+1:null!=this.showThisItem&&this.showThisItem===t?google.maps.Marker.MAX_ZINDEX+2:null},i}(Kiddi.Cartography.KiddiMap)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;Kiddi.Cartography.CoordinatePicker=function(i){function n(){return this.updateFromSearchBox=t(this.updateFromSearchBox,this),this.updateFromFields=t(this.updateFromFields,this),this.updateFromMap=t(this.updateFromMap,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.latField="#lat",n.prototype.lngField="#lng",n.prototype.el="[data-coordinate-picker]",n.prototype.initialize=function(t){return null==t&&(t={}),this.$coordinates=$(this.latField+", "+this.lngField),this.$el.length&&this.$coordinates.length?(this.useDefaultIcon=t.useDefaultIcon,this.otherBranches=t.otherBranches,this.icons=new Kiddi.Cartography.CoordinatePickerIcons,this.center=this.latLngFromCoords(),this.initMap(),this.initSearchBox(),this.otherBranches&&this.addGhostMarkers(),this.addMainMarker(),this.$coordinates.on("change",this.updateFromFields)):void 0},n.prototype.addMainMarker=function(){var t;return t={draggable:!0,icon:this.icons.main,map:this.map,position:this.center,visible:!0},this.useDefaultIcon&&(t.icon=null),this.marker=new google.maps.Marker(t),google.maps.event.addListener(this.marker,"dragend",this.updateFromMap)},n.prototype.addGhostMarkers=function(){var t,e,i,n,o,s;for(o=this.otherBranches,s=[],e=0,i=o.length;i>e;e++)t=o[e],n={draggable:!1,icon:this.icons.ghost,map:this.map,position:new google.maps.LatLng(t[0],t[1]),visible:!0},s.push(this.marker=new google.maps.Marker(n));return s},n.prototype.initMap=function(){var t,e;return e=[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],t={center:this.center,draggable:!0,mapTypeId:google.maps.MapTypeId.HYBRID,zoom:13,minZoom:5,streetViewControl:!1,styles:e},this.map=new google.maps.Map(this.$el[0],t)},n.prototype.initSearchBox=function(){var t;return t=$("[data-map-search-box]"),t.length>0?(this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(t[0]),this.searchBox=new google.maps.places.SearchBox(t[0]),google.maps.event.addListener(this.searchBox,"places_changed",this.updateFromSearchBox)):void 0},n.prototype.latLngFromCoords=function(){return new google.maps.LatLng($(this.latField).val(),$(this.lngField).val())},n.prototype.updateFromMap=function(t){return $(this.latField).val(t.latLng.lat().toFixed(4)),$(this.lngField).val(t.latLng.lng().toFixed(4))},n.prototype.updateFromFields=function(){var t;return t=this.latLngFromCoords(),this.marker.setPosition(t),this.map.setCenter(t)},n.prototype.updateFromSearchBox=function(){var t,e,i;return i=this.searchBox.getPlaces(),0!==i.length?(t=new google.maps.LatLngBounds,e=i[0].geometry.location,this.marker.setPosition(e),t.extend(e),this.map.fitBounds(t),this.map.setZoom(13),$(this.latField).val(e.lat().toFixed(4)),$(this.lngField).val(e.lng().toFixed(4))):void 0},n}(Backbone.View)}.call(this),function(){var t;Kiddi.Cartography.CoordinatePickerIcons=t=function(){function t(){this.main=this.icon(Kiddi.Images.mainPin),this.ghost=this.icon(Kiddi.Images.ghostPin)}return t.prototype.anchor=[25,50],t.prototype.origin=[0,0],t.prototype.scaledSize=[50,50],t.prototype.icon=function(t){var e;return e={anchor:new google.maps.Point(this.anchor[0],this.anchor[1]),origin:new google.maps.Point(this.origin[0],this.origin[1]),scaledSize:new google.maps.Size(this.scaledSize[0],this.scaledSize[1]),url:t}},t}()}.call(this),function(){var t,e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;Kiddi.Cartography.FindListingInfoWindow=t=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.template=JST["find_listing/info_window"],i.prototype.content=function(){var t;return t=this.item.get("listing_url"),null!=window.location.hash&&(t+=window.location.hash),this.template({listing:this.item,listingUrl:t})},i}(Kiddi.Cartography.KiddiInfoWindow)}.call(this),function(){var t,e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;Kiddi.Cartography.FindListingMap=t=function(t){function i(t,e,n,o){var s,r;this.showInfoWindow=null!=o?o:!0,i.__super__.constructor.call(this,t,e,n),this.icons=new Kiddi.Cartography.NumberedIcons,s={center:this.center,draggable:!0,mapTypeId:google.maps.MapTypeId.TERRAIN,zoom:12,minZoom:8,maxZoom:17,disableDefaultUI:!0,scaleControl:!0,zoomControl:!Kiddi.app.isMobile,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.TOP_RIGHT}},this.map=new google.maps.Map(this.mapElement,s),r={visible:!1,map:this.map,draggable:!1},this.locationMarker=new google.maps.Marker(r),this.locationMarker.setPosition(e),this.locationMarker.setVisible(!0),this.map.controls[google.maps.ControlPosition.CENTER].push(this.generateLoadingImage()),this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(this.generateRefreshButton()),this.addItemClickListener(function(t){return function(e,i){return t.mapState.showItem(i)}}(this)),this.addItemMouseOutListener(function(t){return function(){return t.mapState.highlightItem(null)}}(this)),this.addItemMouseOverListener(function(t){return function(e,i){return t.mapState.highlightItem(i)}}(this)),this.addMapClickListener(function(t){return function(){return t.mapState.showItem(null)}}(this)),this.mapState.on("change",function(t){return function(){return t.refreshMapState()}}(this))}return e(i,t),i.prototype.closeInfoWindow=function(){return this.infoWindow?(this.infoWindow.gMapsInfoWindow.close(),this.infoWindow=null):void 0},i.prototype.closeOpenedInfoWindow=function(){return this.openedInfoWindow?(this.openedInfoWindow.gMapsInfoWindow.close(),this.openedInfoWindow=null):void 0},i.prototype.getCenter=function(){return this.map.getCenter()},i.prototype.highlightItem=function(t){var e;if(t!==this.highlightThisItem)return i.__super__.highlightItem.call(this,t),this.closeInfoWindow(),null!=t&&this.showInfoWindow?(e=this.itemMarkers[t.id],this.infoWindow=new Kiddi.Cartography.FindListingInfoWindow(t,this,e),this.infoWindow.show()):void 0},i.prototype.generateRefreshButton=function(){var t;return t=$("<a></a>").addClass("btn refresh-btn").attr({href:"#",id:"map-refresh-btn",title:I18n.cartography.find_listing_map.research_in_this_area}),Kiddi.app.isMobile||t.tooltip({placement:"right",trigger:"manual"}),t[0]},i.prototype.iconForItem=function(t,e){return null!=this.highlightThisItem&&this.highlightThisItem===t?this.icons.hover[e]:null!=this.showThisItem&&this.showThisItem===t?this.icons.hover[e]:this.icons.normal[e]},i.prototype.showItem=function(t){var e;if(t!==this.showThisItem)return i.__super__.showItem.call(this,t),this.closeInfoWindow(),this.closeOpenedInfoWindow(),null!=t&&this.showInfoWindow?(e=this.itemMarkers[t.id],this.openedInfoWindow=new Kiddi.Cartography.FindListingInfoWindow(t,this,e),this.openedInfoWindow.show()):void 0},i.prototype.zIndexForItem=function(t){return null!=this.highlightThisItem&&this.highlightThisItem===t?google.maps.Marker.MAX_ZINDEX+1:null!=this.showThisItem&&this.showThisItem===t?google.maps.Marker.MAX_ZINDEX+2:null},i.prototype.updateLocationMarker=function(t){return this.locationMarker.setPosition(null!=t&&null!=t.lat&&null!=t.lng?t:this.getCenter())},i.prototype.setCenter=function(t){return this.map.setCenter(t)},i}(Kiddi.Cartography.KiddiMap)}.call(this),function(){var t;Kiddi.Cartography.KiddiIcons=t=function(){function t(){this.normal=this.icon(Kiddi.Images.pin),this.hover=this.icon(Kiddi.Images.pinHover)}return t.prototype.anchor=[25,50],t.prototype.origin=[0,0],t.prototype.scaledSize=[50,50],t.prototype.size=[200,200],t.prototype.icon=function(t){var e;return e={anchor:new google.maps.Point(this.anchor[0],this.anchor[1]),origin:new google.maps.Point(this.origin[0],this.origin[1]),scaledSize:new google.maps.Size(this.scaledSize[0],this.scaledSize[1]),size:new google.maps.Size(this.size[0],this.size[1]),url:t}},t}()}.call(this),function(){var t,e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;Kiddi.Cartography.ListingMap=t=function(t){function i(t,e){var n,o,s;i.__super__.constructor.call(this,t,e),this.icons=new Kiddi.Cartography.KiddiIcons,this.map=null,null!=this.mapElement&&(n={center:this.center,draggable:$(document).width()>480,mapTypeId:google.maps.MapTypeId.TERRAIN,scrollwheel:!1,zoom:13,disableDefaultUI:!0,scaleControl:!0,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL}},this.map=new google.maps.Map(this.mapElement,n),this.map.panBy(-160,0),s={draggable:!1,icon:this.icons.normal,map:this.map},o=new google.maps.Marker(s),o.setPosition(this.center),o.setVisible(!0))}return e(i,t),i}(Kiddi.Cartography.KiddiMap)}.call(this),function(){var t;Kiddi.Cartography.NumberedIcons=t=function(){function t(){this.normal=this.numberedIcons(Kiddi.Images.numberedPins,0),this.hover=this.numberedIcons(Kiddi.Images.numberedPins,4)}return t.prototype.anchor=[17,47],t.prototype.origin=[0,0],t.prototype.scaledSize=[1577,380],t.prototype.size=[31.5,47],t.prototype.markersPerRow=50,t.prototype.numberedIcons=function(t,e){var i,n;return function(){for(n=[],i=0;199>=i;i++)n.push(i);return n}.apply(this).map(function(i){return function(n){var o,s,r,a,l;return r=Math.floor(n/i.markersPerRow),o=n-r*i.markersPerRow,l=(r+e)*i.size[1],a=o*i.size[0],s={anchor:new google.maps.Point(i.anchor[0],i.anchor[1]),origin:new google.maps.Point(i.origin[0]+a,i.origin[1]+l),scaledSize:new google.maps.Size(i.scaledSize[0],i.scaledSize[1]),size:new google.maps.Size(i.size[0],i.size[1]),url:t}}}(this))},t}()}.call(this),function(){Kiddi.Cartography.VietNam={defaultLocation:{lat:21.027479,lng:105.819452,name:"Gi\u1ea3ng V\xf5, Qu\u1eadn Ba \u0110\xecnh"},cityNames:{HN:"H\xe0 N\u1ed9i",Hanoi:"H\xe0 N\u1ed9i","Ho Chi Minh":"H\u1ed3 Ch\xed Minh","Ho Chi Minh City":"H\u1ed3 Ch\xed Minh"},citySlugs:{HN:"ha-noi",Hanoi:"ha-noi","Ho Chi Minh":"ho-chi-minh","Ho Chi Minh City":"ho-chi-minh"},isCovered:function(t){return t?!0:!1},cityAbbrv:function(t){var e,i,n,o;e=t,n=this.cityNames;for(i in n)o=n[i],o.toLowerCase()===t.toLowerCase()&&(e=i);return e},cityName:function(t){return this.cityNames[t]||t},citySlug:function(t){return this.citySlugs[t]||t}}}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.Base=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.include=function(t){var e,i,n;for(e in t)n=t[e],"events"===e&&(e+="_mixed"),this.prototype[e]=n;return null!=(i=t.included)&&i.apply(this),this},i.prototype.initialize=function(t){return this.options=t,this.analytics=new Kiddi.Utilities.Analytics,this.options&&(this.options.template&&(this.template||(this.template=this.options.template)),this.options.mobileTemplate&&(this.mobileTemplate||(this.mobileTemplate=this.options.mobileTemplate)),this.options.desktopTemplate)?this.desktopTemplate||(this.desktopTemplate=this.options.desktopTemplate):void 0},i.prototype.chooseTemplate=function(){return this.isMobile()&&this.mobileTemplate?this.mobileTemplate:this.isDesktop()&&this.desktopTemplate?this.desktopTemplate:this.template},i.prototype.delegateEvents=function(){var t;return this.events_mixed&&(t=_.extend(this.events,this.events_mixed)),i.__super__.delegateEvents.call(this,t)},i.prototype.hasRootElement=function(){return this.$el.length?!0:!1},i.prototype.insertSubview=function(t,e){return this.$(e).append(t.el),this.subviews.push(t),this},i.prototype.isDesktop=function(){return!Kiddi.app.isMobile},i.prototype.isLoggedIn=function(){return Kiddi.Utilities.Authentication.isLoggedIn()},i.prototype.isLoggedOut=function(){return Kiddi.Utilities.Authentication.isLoggedOut()},i.prototype.isMobile=function(){return Kiddi.app.isMobile},i.prototype.pleaseSignIn=function(t){return this.isMobile()?this.redirectToSignIn():this.showSignInModal(t)},i.prototype.pleaseSignUp=function(t){return this.isMobile()?this.redirectToSignUp():this.showSignupModal(t)},i.prototype.redirectToSignIn=function(){return Kiddi.Utilities.Basics.redirectToLocation("/users/sign_in")},i.prototype.redirectToSignUp=function(){return Kiddi.Utilities.Basics.redirectToLocation("/users/sign_up")},i.prototype.render=function(){var t,e;return t=this.chooseTemplate(),null==t?this:(e=null!=this.templateData?this.templateData():{},this.$el.html(t(e)),this)},i.prototype.renderSubviews=function(t){var e,i,n,o,s,r,a;for(s=this.subviews,e=0,n=s.length;n>e;e++)a=s[e],a.remove();for(this.subviews=t,r=this.subviews,i=0,o=r.length;o>i;i++)a=r[i],this.$el.append(a.el);return this},i.prototype.setViews=function(t){var e,i;for(e in t)i=t[e],i.setElement(this.$(e)).render();return this},i.prototype.showSignInModal=function(t){return Kiddi.Utilities.Authentication.showLoginModal(t)},i.prototype.showSignupModal=function(t){return Kiddi.Utilities.Authentication.showSignupModal(t)},i.prototype.templateData=function(){return{}},i.prototype.track=function(t,e,i){return null==e&&(e={}),e.layout=this.isMobile()?"Web (Mobile)":"Web (Desktop)",this.analytics.track(t,e,i)},i.prototype.buildAnalyticsProperties=function(t,e){var i,n,o,s;for(null==this.analyticsProperties&&(this.analyticsProperties={layout:this.isMobile()?"Web (Mobile)":"Web (Desktop)"}),i=_.clone(this.analyticsProperties),n=0,o=e.length;o>n;n++)s=e[n],null!=(null!=s?s.eventData:void 0)&&_.extend(i,s.eventData());return _.extend(i,t)},i.prototype.trackEventData=function(t,e){var i,n,o,s,r;for(null==e&&(e=[]),i=null!=this.analyticsDefaults?_.clone(this.analyticsDefaults):{},s=0,r=e.length;r>s;s++)n=e[s],null!=(null!=n?n.eventData:void 0)&&_.extend(i,n.eventData());return o={"Form Factor":this.isMobile()?{"Web (Mobile)":"Web (Desktop)"}:void 0},_.extend(i,t,o)},i.prototype.trackEventWithData=function(t,e,i){return null==i&&(i=[]),this.analytics.mpEvent_DEP(t,this.trackEventData(e,i))},i.prototype.fbCustomEvents=function(t,e){return null==e&&(e={}),null!=this.analytics?this.analytics.fbCustomEvents(t,e):void 0},i.prototype.ahoyCustomEvents=function(t,e){return null==e&&(e={}),null!=this.analytics?this.analytics.ahoyCustomEvents(t,e):void 0},i}(Backbone.View)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.CustomAd=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.attributes={"class":"custom-ad"},i.prototype.desktopTemplate=JST["ad/custom_ad"],i.prototype.mobileTemplate=JST["ad/custom_ad+mobile"],i.prototype.initialize=function(t){return i.__super__.initialize.call(this,arguments),this.options=t,this.ad=new Kiddi.Models.KiddiAd(this.options.ad),this.index=this.options.index},i.prototype.render=function(){return i.__super__.render.call(this,arguments),this},i.prototype.templateData=function(){var t;return t={ad:this.ad,index:this.index,section:this.options.section}},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.HtmlCodeAd=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.attributes={"class":"custom-ad"},i.prototype.desktopTemplate=JST["ad/html_code_ad"],i.prototype.mobileTemplate=JST["ad/html_code_ad+mobile"],i.prototype.initialize=function(t){return i.__super__.initialize.call(this,arguments),this.options=t,this.ad=new Kiddi.Models.KiddiAd(this.options.ad),this.index=this.options.index},i.prototype.render=function(){return i.__super__.render.call(this,arguments),this.initListeners(),this},i.prototype.templateData=function(){var t;return t={ad:this.ad,index:this.index,section:this.options.section}},i.prototype.initListeners=function(){return this.$("video").on("ended",_.bind(this.onVideoEnded,this))},i.prototype.onVideoEnded=function(t){return t.currentTarget?t.currentTarget.currentTime=0:void 0},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.ListingAd=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.attributes={"class":"listing-ad"},i.prototype.desktopTemplate=JST["nearby_listing/listing"],i.prototype.mobileTemplate=JST["nearby_listing/listing+mobile"],i.prototype.initialize=function(t){return i.__super__.initialize.call(this,arguments),this.options=t,this.listing=new Kiddi.Models.KiddiAd(this.options.ad),this.index=this.options.index},i.prototype.render=function(){return i.__super__.render.call(this,arguments),this},i.prototype.templateData=function(){var t;return t={listing:this.listing,index:this.index}},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.Gallery=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="#gallery",i.prototype.events={"click [data-delete-photo]":"onDeletePhotoClicked"},i.prototype.template=JST["photos/gallery"],i.prototype.initialize=function(t){return i.__super__.initialize.call(this,arguments),this.options=t,this.listing=this.options.listing,this.brand=this.options.brand,this.photos=this.options.photos,this.photo_format=this.isMobile()?"gallery_mobile_url":"gallery_url",this.previouslyOpened=!1,this.pswp=null,this.photos.on("loaded",function(t){return function(){return t.render()
}}(this)),this.photos.load()},i.prototype.initGallery=function(t){var e;return e=this.$(".pswp")[0],this.pswp=new PhotoSwipe(e,PhotoSwipeUI_Kiddi,this.items(),this.galleryOptions(t)),this.pswp.init(),this.pswp.listen("beforeChange",function(t){return function(){return t.removeVideo(),t.onPhotoChanged()}}(this)),this.pswp.listen("close",function(t){return function(){return t.removeVideo(),t.onGalleryClosed()}}(this)),this.pswp.listen("afterChange",function(t){return function(){return t.detectVideo(t.pswp)}}(this)),this.pswp.listen("resize",function(t){return function(){return $(".kiddiVideoHolder").length>0?t.updateVideoPosition(t.pswp):void 0}}(this)),this.pswp.listen("gettingData",function(t){return function(e,i){return t.doGetSlideDimensions(i),i.doGetSlideDimensions?setTimeout(function(){return t.getSlideDimensions(i,t.pswp)},300):void 0}}(this)),this.pswp.listen("imageLoadComplete",function(t){return function(e,i){return t.doGetSlideDimensions(i),i.doGetSlideDimensions?t.getSlideDimensions(i,t.pswp):void 0}}(this)),this.onPhotoChanged(),setTimeout(function(t){return function(){return t.detectVideo(t.pswp)}}(this),500),this.triggerEvent("hs_gallery:initialized")},i.prototype.triggerEvent=function(t){return null!=this.options.pubsub?this.options.pubsub.trigger(t):void 0},i.prototype.items=function(){return this.photos.models.map(function(t){return function(e){return{src:e.get(t.photo_format),w:e.get("width"),h:e.get("height"),photo:e}}}(this))},i.prototype.galleryOptions=function(t){var e,i;return i=this.photos.pluck("id"),e=_.indexOf(i,t),0>e&&(e=0),{index:e,preload:[1,3],history:!1,escKey:!0,bgOpacity:.9,barsSize:{top:110,bottom:110},captionEl:!0,fullscreenEl:!1,shareEl:!1,zoomEl:!1,preloaderEl:!0,timeToIdle:null,showAnimationDuration:150,hideAnimationDuration:150,tapToToggleControls:!1,clickToCloseNonZoomable:!1,getThumbBoundsFn:function(e){return function(i){var n,o,s;return t=e.pswp.currItem.photo.id,s=$(".vibe-grid-container [data-photo='"+t+"']").length?$(".vibe-grid-container [data-photo='"+t+"']")[0].getBoundingClientRect():$(".contributed-photo figure")[i]?$(".contributed-photo figure")[i].getBoundingClientRect():{left:400,top:250,width:300},o=window.pageYOffset||document.documentElement.scrollTop,n={x:s.left,y:s.top+o,w:s.width}}}(this),addCaptionHTMLFn:function(t,e){return $(e).find("div").html(t.photo.get("description"))}}},i.prototype.onDeletePhotoClicked=function(t){var e;return t.preventDefault(),confirm(I18n.common.gallery.confirm_delete)?(e=this.pswp.currItem.photo.remove(),$.when(e).done(function(t){return function(){var i;return i=$.parseJSON(e.getResponseHeader("X-FlashMessage")),Cookies.set("flashMessage",JSON.stringify(i)),location.href=t.pswp.currItem.photo.get("area_url")}}(this))):void 0},i.prototype.onGalleryClosed=function(){var t;if(this.triggerEvent("hs_gallery:closed"),this.baseUrl())try{return history.replaceState("",document.title,this.baseUrl())}catch(e){return t=e,console.log(t)}},i.prototype.onPhotoChanged=function(){var t;return t={gallery:this.$el,photo:this.pswp.currItem.photo,baseUrl:this.baseUrl(),areaName:this.areaName()},new Kiddi.Views.GalleryItem(_.extend(t,this.options)).render()},i.prototype.open=function(t){return this.photos.loaded?this.initGallery(t):setTimeout(function(e){return function(){return e.open(t)}}(this),200)},i.prototype.removeVideo=function(){return $(".kiddiVideoHolder").length>0?$("#kiddiVideo").length?($(".kiddiVideoHolder").remove(),this.showImages()):$(".kiddiVideoHolder").remove():void 0},i.prototype.detectVideo=function(t){var e,i;return i=t.currItem.photo.get("id"),$(".header-carousel [data-photo='"+i+"']").length&&(e=$(".header-carousel [data-photo='"+i+"']")[0],$(e).data("video"))?(this.addVideo(t.currItem,$(e).data("video")),this.updateVideoPosition(t)):void 0},i.prototype.addVideo=function(t,e){var i,n,o,s;return i='<div id="kiddiVideo" class="embed-responsive embed-responsive-16by9"><iframe class"embed-responsive-item" src="https://www.youtube.com/embed/'+e+'?rel=0&amp;showinfo=0&amp;autoplay=1&amp;mute=1" frameborder="0" allowfullscreen gesture="media"></iframe></div>',o=9*t.w/16,s={"class":"kiddiVideoHolder",html:i,css:{position:"absolute",width:t.w,height:o}},n=$("<div />",s),n.appendTo(".pswp__scroll-wrap"),this.hideImages()},i.prototype.hideImages=function(){return $(".pswp__img").css("visibility","hidden")},i.prototype.showImages=function(){return $(".pswp__img").css("visibility","visible")},i.prototype.updateVideoPosition=function(t){var e,i,n,o,s,r,a;return i=t.currItem,a=t.viewportSize,s=9*i.w/16,o=(a.y-s)/2,n=(a.x-i.w)/2,e=$(".gallery-item-details").outerHeight(!0),e>o&&(o=e),r={position:"absolute",top:o,left:n},$(".kiddiVideoHolder").css(r),this.hideImages()},i.prototype.getSlideDimensions=function(t,e){var i,n,o;if(t.doGetSlideDimensions&&(o=t.photo.get("id"),!$(".header-carousel [data-photo='"+o+"']").length||(n=$(".header-carousel [data-photo='"+o+"']")[0],!$(n).data("video"))))return i=new Image,$(i).on("error",function(){return function(){return t.doGetSlideDimensions=!1}}(this)),$(i).on("load",function(){return function(){return t.doGetSlideDimensions=!1,t.w=i.naturalWidth||800,t.h=i.naturalHeight||600,t.needsUpdate=!0,e.updateSize(!0)}}(this)),i.src=t.src},i.prototype.doGetSlideDimensions=function(t){return null==t.doGetSlideDimensions&&null!=t.w&&null!=t.h&&800===t.w&&600===t.h?t.doGetSlideDimensions=!0:void 0},i}(Kiddi.Views.Base)}.call(this),function(){Kiddi.Views.BrandGallery=Kiddi.Views.Gallery.extend({areaName:function(){return window.brand.full_name},baseUrl:function(){return window.brand.url}})}.call(this),function(){Kiddi.Views.BrandListings=Kiddi.Views.Base.extend({el:$("#brand-listings"),events:{".btn-show-more":"showMore"},initialize:function(t){return this.options=t,this.subviews=[],this.listings=this.options.listings,this.firstRender=!0,this.numberToShow=6,this.moreStep=6,this.pager=new Backbone.Model({show:this.numberToShow,step:this.moreStep}),this.pager.on("change",function(t){return function(){return t.render()}}(this)),this.listings.on("loaded",function(t){return function(){return t.pager.set({show:t.numberToShow}),t.render()}}(this))},render:function(){var t,e,i,n;if(this.listings.loaded)return this.firstRender&&(this.firstRender=!1,this.$el.html("")),e=this.isMobile()?this.listings.slice(0,this.pager.get("show")):this.listings.models,n=e.map(function(t){return function(e,i){return new Kiddi.Views.BaseListing(_.extend({listing:e},t.options,{index:i+1})).render()}}(this)),_.isEmpty(e)&&(t=(new Kiddi.Views.NoListings).render(),n.push(t)),e.length<this.listings.length&&(i=new Kiddi.Views.MoreListings({pager:this.pager}).render(),n.push(i)),this.renderSubviews(n),this.$el.find('[data-toggle="tooltip"]').tooltip(),this},showMore:function(t){return t.preventDefault(),this.numberToShow+=this.moreStep,this.pager.set({show:this.numberToShow},{silent:!0}),this.render(),!1}})}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.BrandPhotos=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="#photos",i.prototype.events={"click [data-add-photos]":"onAddPhotosClicked"},i.prototype.initialize=function(t){var e;return i.__super__.initialize.call(this,arguments),this.options=t,this.listing=this.options.listing,this.brand=this.options.brand,this.photos=this.options.photos,this.gallery=new Kiddi.Views.BrandGallery(_.clone(this.options)).render(),new Kiddi.Views.CoverPhoto(_.extend({gallery:this.gallery},this.options)).render(),e={el:"#some-contributed-photos",gallery:this.gallery,nbPhotosToShow:this.isMobile()?1:3},this.photoList=new Kiddi.Views.PhotoList(_.extend(e,this.options)).render(),this.photos.on("loaded",function(t){return function(){var e;return t.isMobile()&&t.photos.length>1&&(e=t.photos.where({id:window.cover_photo_id}),e&&(t.photos.remove(e,{silent:!0}),t.photos.add(e,{silent:!0}))),t.render()}}(this))},i.prototype.onAddPhotosClicked=function(t){return t.preventDefault(),this.isLoggedIn()?this.showAddPhotosModal():this.pleaseSignIn(_.bind(this.showAddPhotosModal,this)),!1},i.prototype.openPhotoIfIdGiven=function(){var t;return t=window.location.href.match(/pic=([^&]+)/),null!=t?this.gallery.open(t[1]):void 0},i.prototype.render=function(){return this.photos.loaded?(this.photos.isEmpty()?(this.$("#no-contributed-photos").removeClass("hide"),this.$("#some-contributed-photos").addClass("hide")):(this.$("#no-contributed-photos").addClass("hide"),this.$("#some-contributed-photos").removeClass("hide"),this.openPhotoIfIdGiven()),this.photoList.render(),this):this},i.prototype.showAddPhotosModal=function(){var t;return t={listing:this.listing,cloudinary:$("#add-photo-modal").data(),el:$("#add-photo-modal"),brand:this.brand,photos:this.photos,url:this.$("[data-add-photos]").data("href")},new Kiddi.Views.BrandUploadPhotos(t).render(),!1},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.UploadPhotos=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.events={"submit #photos-upload-form":"submitCloudinaryForm","click .modal-header .btn-post":"submitCloudinaryForm","click #select-files-link":"onSelectFilesClicked"},i.prototype.desktopTemplate=JST["photos/upload_photos"],i.prototype.mobileTemplate=JST["photos/upload_photos+mobile"],i.prototype.initialize=function(t){return i.__super__.initialize.call(this,arguments),this.listing=t.listing,this.cloudinary=t.cloudinary,this.fullPagePhotoGrid=t.fullPagePhotoGrid,this.brand=t.brand,this.photos=t.photos,this.url=t.url,this.reloadPageAfterSuccessUploading=t.reloadPageAfterSuccessUploading,null==this.reloadPageAfterSuccessUploading&&(this.reloadPageAfterSuccessUploading=!1),this.pubsub=_.extend({},Backbone.Events),this.data=null,this.files=[],this.fileIndex=0,this.subviews=[],this.uploadedFileUrl=[],this.uploader=null,this.uploadInProgress=null,this.isFileUploaded=!1,this.uploadFilesInProgress=!1,this.pubsub.on("validated:photos",function(t){return function(e){return e?t.uploadFile(0):void 0}}(this))},i.prototype.cacheDOMElements=function(){return this.$form=this.$("#photos-upload-form"),this.$fileInput=this.$form.find('input[type="file"]'),this.$submitBtn=this.$("#upload-submit-btn"),this.$dropZone=this.$("#photos-dropzone"),this.$countPhotosLeft=this.$dropZone.find("[data-count-left]"),this.$filesContainer=this.$("#photos-to-upload"),this.$errors=this.$("[data-errors]")},i.prototype.disableForm=function(){return this.$submitBtn.attr("disabled",!0)},i.prototype.enableForm=function(){return this.$submitBtn.attr("disabled",!1)},i.prototype.filesData=function(){var t;return t=[],this.$filesContainer.find("textarea[data-caption]").each(function(e){return function(i){var n;return n=e.$filesContainer.find("textarea[data-caption]").eq(i),t.push({caption:n.val(),file:e.uploadedFileUrl[n.data("index")]})}}(this)),t},i.prototype.maxPhotosCount=function(){return 6},i.prototype.onAdd=function(t,e){var i,n,o,s,r,a;for(r=e.files,n=0,o=r.length;o>n;n++)if(i=r[n],i.preview&&!_.contains(_.map(this.files,function(t){return t.name}),i.name)){if(this.files.length>=this.maxPhotosCount())break;this.files.push(i),s={index:this.files.length-1,previewCanvas:i.preview},a=new Kiddi.Views.UploadPhoto(s).render(),this.$filesContainer.append(a.el),this.subviews.push(a),this.updateFormUI()}return this.data=e},i.prototype.updateFormUI=function(){var t;return this.$dropZone.removeClass("dragover"),this.enableForm(),t=this.maxPhotosCount()-this.files.length,this.$countPhotosLeft.text(t),1===t&&this.$dropZone.find("[data-count-left-plural]").text(""),0>=t?this.$dropZone.remove():void 0},i.prototype.onCloudinaryError=function(){return this.uploadFilesInProgress=!1,this.enableForm(),this.$errors.show().text(I18n.common.upload_photos.on_cloudinary_error_message),this.$filesContainer.removeClass("uploading")},i.prototype.onCloudinarySubmit=function(){return this.uploadFilesInProgress=!0,this.disableForm(),this.$errors.hide(),this.$filesContainer.addClass("uploading"),this.$dropZone.slideUp("fast"),!0},i.prototype.onCloudinarySuccess=function(t,e){return this.uploadedFileUrl[this.fileIndex]=this._cloudinaryUrl(e.result),this.fileIndex++,this.files[this.fileIndex]?this.uploadFile(this.fileIndex):this.saveOnKiddi()},i.prototype.onDragOver=function(){return this.$dropZone.addClass("dragover")},i.prototype.onHidden=function(){return this.uploader&&(this.$form.fileupload("destroy"),this.uploader=null),this.uploadInProgress&&this.uploadInProgress.abort(),this.unbind(),this.undelegateEvents(),this.$el.unbind("hidden"),this.stopListening(),this.$el.html(""),this.isFileUploaded?(this.isFileUploaded=!1,this.showUploadFilesSuccessModal()):void 0},i.prototype.onHide=function(t){var e;return this.uploadFilesInProgress&&(e=confirm(I18n.common.upload_photos.confirm_close_message),e===!0)?t.preventDefault():void 0},i.prototype.onKiddiError=function(t){var e,i;try{i=t.responseJSON.message||t.responseJSON.meta.message}catch(n){e=n,i=null}return null==i&&(i=I18n.common.upload_photos.on_kiddi_error_message),this.$errors.text(i).show(),this.$filesContainer.removeClass("uploading"),this.uploadFilesInProgress=!1,this.enableForm()},i.prototype.onKiddiSuccess=function(t,e,i){var n,o,s,r,a,l,u;if(null!=(l=t.meta)?l.success:void 0){if(this.isFileUploaded=!0,this.uploadFilesInProgress=!1,this.photos)for(u=t.photos,o=0,s=u.length;s>o;o++)a=u[o],r=new this.photos.model(a),this.photos.add(r),this.photos.reorder();!this.listing||this.fullPagePhotoGrid||this.isMobile()||(n=$.parseJSON(i.getResponseHeader("X-FlashMessage")),Cookies.set("flashMessage",JSON.stringify(n))),this.reloadPageAfterSuccessUploading&&location.reload(),this.$el.modal("hide")}return this.$el},i.prototype.onSelectFilesClicked=function(t){return t.preventDefault(),this.$fileInput.click(),!1},i.prototype.removeSmallPhotos=function(t){return _.each(t,function(t){return function(e){var i,n;return i=t.files.indexOf(e),t.files.splice(i,1),t.data.files.splice(i,1),t.data.originalFiles.splice(i,1),n=t.subviews.splice(i,1),n[0].remove()}}(this)),this.updateFormUI()},i.prototype.render=function(){var t,e,i;return i=this.chooseTemplate(),t={listing:this.listing,cloudinary:this.cloudinary,brand:this.brand,maxPhotosCount:this.maxPhotosCount(),subtitle:this.modalSubtitle(),url:this.url},this.$el.html(i(t)),this.cacheDOMElements(),this.setupDragAndDrop(),this.setupUploader(),this.$el.on("hide.bs.modal",function(t){return function(e){return t.onHide(e)}}(this)),this.$el.on("hidden.bs.modal",function(t){return function(){return t.onHidden()}}(this)),e={backdrop:"static",keyboard:!1},this.$el.modal(e),this.$el.modal("show"),this},i.prototype.saveOnKiddi=function(){var t;return t={data:{photos:this.filesData()},dataType:"JSON",error:_.bind(this.onKiddiError,this),success:_.bind(this.onKiddiSuccess,this),type:"POST",url:this.$form.attr("action")},$.ajax(t)},i.prototype.setupDragAndDrop=function(){return $(document).on("drop dragover",function(t){return function(e){var i;return e.preventDefault(),i=$(e.target),!e.target.id||i!==t.$dropZone&&!$("#"+e.target.id,t.$dropZone).length?t.$dropZone.removeClass("dragover"):void 0}}(this))},i.prototype.setupUploader=function(){var t;return t={acceptFileTypes:/(\.|\/)(jpe?g|png)$/i,autoUpload:!1,dataType:"JSON",disableExifThumbnail:!0,dropZone:this.$dropZone,fileInput:this.$fileInput,limitConcurrentUploads:1,limitMultiFileUploads:this.maxPhotosCount(),maxFileSize:2e7,loadImageMaxFileSize:2e7,imageMinWidth:640,previewMaxWidth:150,previewMaxHeight:150,previewCrop:!0,replaceFileInput:!1,sequentialUploads:!0,singleFileUploads:!1,limitMultiFileUploadSizeOverhead:1e7},this.uploader=this.$form.cloudinary_fileupload(t),this.uploader.on("fileuploadprocessalways",_.bind(this.onAdd,this)),this.uploader.on("fileuploaddragover",_.bind(this.onDragOver,this)),this.uploader.on("fileuploadsubmit",_.bind(this.onCloudinarySubmit,this)),this.uploader.on("fileuploaddone",_.bind(this.onCloudinarySuccess,this)),this.uploader.on("fileuploadfail",_.bind(this.onCloudinaryError,this))},i.prototype.submitCloudinaryForm=function(t){return t.preventDefault(),this.validatePhotos(),!1},i.prototype.uploadFile=function(t){var e;return e=_.extend({},this.data),e.files=[this.files[t]],this.uploadInProgress=e.submit()},i.prototype.validatePhotos=function(){var t,e,i;return this.$errors.hide(),i=[],t=0,e=function(t){return function(){var e;return i.length>0&&(t.$errors.show().text(I18n.common.upload_photos.min_width_error),t.removeSmallPhotos(i)),e=t.files.length>0&&t.data&&0===i.length,t.pubsub.trigger("validated:photos",e)}}(this),_.each(this.files,function(n){return function(o){var s;return s=new FileReader,s.onloadend=function(){var r;return r=new Image,r.src=s.result,r.onload=function(){return r.width<640&&i.push(o),t++,t===n.files.length?e():void 0}},s.readAsDataURL(o)}}(this))},i.prototype._cloudinaryUrl=function(t){return t.secure_url+"#"+t.signature},i.prototype.showUploadFilesSuccessModal=function(){var t,e,i,n;return i=new Kiddi.Views.UploadPhotosSuccess({listing_name:this.modalSubtitle()}),e=I18n.common.upload_photos.upload_photos_success_title,n={content:i,title:e,cancelText:!1,modalClass:"upload-photos-success"},t=new Backbone.BootstrapModal(n).open()},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.BrandUploadPhotos=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.modalSubtitle=function(){return this.brand.get("full_name")},i}(Kiddi.Views.UploadPhotos)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.CoverPhoto=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="#cover-photo",i.prototype.events={"click button.carousel-nav":"onNavClicked","click [data-photo]":"onPhotoClicked"},i.prototype.initialize=function(t){return i.__super__.initialize.call(this,arguments),this.options=t},i.prototype.onNavClicked=function(t){var e;return t.preventDefault(),e=$(t.target).hasClass("next")?this.$(".photo:last").data("photo"):this.$(".photo:first").data("photo"),this.options.gallery.open(e)},i.prototype.onPhotoClicked=function(t){var e;return t.preventDefault(),e=$(t.target).data("photo"),this.options.gallery.open(e)},i}(Kiddi.Views.Base)}.call(this),function(){Kiddi.Views.CreateTipFailed=Kiddi.Views.Base.extend({attributes:{"class":"create-tip-failed"},tagName:"div",template:I18n.common.tips.create_tip_failed_message,initialize:function(t){this.response=t},render:function(){var t,e;return this.$el.text((null!=(t=this.response)&&null!=(e=t.meta)?e.message:void 0)||this.template),this}})}.call(this),function(){Kiddi.Views.CreateTipSuccess=Kiddi.Views.Base.extend({attributes:{"class":"create-tip-success"},tagName:"div",template:I18n.common.tips.create_tip_success_message,initialize:function(t){this.options=t},render:function(){var t,e;return e=(null!=(t=this.options)?t.message:void 0)||this.template,this.options.listing_name&&(e=e.replace("{listing_name}",this.options.listing_name)),this.$el.text(e),this}})}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.Favorite=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="#fav-btn",i.prototype.events={click:"onClick"},i.prototype.initialize=function(t){return i.__super__.initialize.call(this,arguments),this.options=t,this.favorite=this.options.favorite,this.listenTo(this.favorite,"change",function(t){return function(){return t.render()}}(this))},i.prototype.render=function(){var t,e;return this.favorite.isFavorite()?(this.$el.addClass("favorited"),this.$("span.icon").addClass("hs-icon-heart").removeClass("hs-icon-heart-outlined"),this.$("span.text").text(this.isMobile()?I18n.common.favorite.favorited_mobile:I18n.common.favorite.favorited)):(this.$el.removeClass("favorited ago"),this.$("span.icon").removeClass("hs-icon-heart").addClass("hs-icon-heart-outlined"),this.$("span.text").text(this.isMobile()?I18n.common.favorite.favorite_mobile:I18n.common.favorite.favorite)),t=this.favorite.get("faves"),0===t&&(t="",e="",e=this.isMobile()?I18n.common.favorite.favorite_mobile+"!":I18n.common.favorite.favorite+"!",this.$("span.text").text(e)),this.$(".counter").text(t),this},i.prototype.onClick=function(t){return t.preventDefault(),this.isLoggedIn()?this.toggleFav():(this.trigger("signingUp"),this.pleaseSignIn(_.bind(this.toggleFav,this))),!1},i.prototype.toggleFav=function(){return this.favorite.toggle()},i}(Kiddi.Views.Base)}.call(this),function(){Kiddi.Views.GalleryItem=Kiddi.Views.Base.extend({template:JST["photos/gallery_item"],initialize:function(t){return this.options=t,this.$el=this.options.gallery.find(".gallery-item-details"),this.photo=this.options.photo,this.baseUrl=this.options.baseUrl,this.areaName=this.options.areaName,this.setPhotoUrl()},initListeners:function(){return this.$("[data-share-facebook]").on("click",_.bind(this.onShareFacebookClicked,this)),this.$("[data-share-twitter]").on("click",_.bind(this.onShareTwitterClicked,this)),this.$("[data-copy-link]").on("click",_.bind(this.onCopyLinkClicked,this))},onCopyLinkClicked:function(t){return t.preventDefault(),Kiddi.Utilities.SocialSharing.copyLink(this.photoUrl()),!1},onShareFacebookClicked:function(t){return t.preventDefault(),Kiddi.Utilities.SocialSharing.openFacebookWindow(this.photoUrl("facebook")),!1},onShareTwitterClicked:function(t){return t.preventDefault(),Kiddi.Utilities.SocialSharing.openTwitterWindow(this.photoUrl("twitter"),""+this.areaName),!1},photoUrl:function(t){var e,i,n,o;return t?(o=moment().format("YYYY"),i=moment().format("MMMM").toLowerCase(),e=window.brand?"brand":"listing",n="&utm_campaign=photo-sharing-"+o+"-"+i+"&utm_medium=photopost&utm_source="+t+"&utm_content="+e):n="",this.baseUrl+"?pic="+this.photo.id+n},setPhotoUrl:function(){var t;if(this.baseUrl)try{return history.replaceState("",document.title,this.photoUrl())}catch(e){return t=e,console.log(t)}},templateData:function(){var t,e,i,n,o;return i=_.contains(window.downvotes,this.photo.get("id")),n=_.contains(window.upvotes,this.photo.get("id")),t=i?!1:this.photo.get("already_upvoted")||n,o=this.photo.get("upvotes_count"),!this.photo.get("already_upvoted")&&n&&(o+=1),this.photo.get("already_upvoted")&&i&&(o-=1),e={photo:this.photo,alreadyUpvoted:t,upvotesCount:o}},render:function(){var t;return this.constructor.__super__.render.apply(this,arguments),t=null!=Kiddi.app.user&&Kiddi.app.user.isAdmin()||this.photo.get("user_is_current"),this.$el.parent().find("[data-report-link]").attr("href",this.photo.get("report_link")),this.$el.parent().find("[data-delete-photo]").toggleClass("hide",!t),this.initListeners(),this}})}.call(this),function(){Kiddi.Views.BaseListing=Kiddi.Views.Base.extend({attributes:{"class":"listing"},dataDateFormat:"YYYY-MM-DD",events:{mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"},tagName:"div",desktopTemplate:JST["listing/listing"],mobileTemplate:JST["listing/listing+mobile"],initialize:function(t){return this.options=t,this.listing=this.options.listing,this.index=this.options.index,this.mapState=this.options.mapState,this.filter=this.options.filter,this.listenTo(this.mapState,"change",function(t){return function(){return t.updateHighlightState()}}(this))},listingUrlWithDates:function(){return""+this.listing.get("listing_url")+window.location.hash},highlight:function(){return this.mapState.get("highlightItem")===this.listing||this.mapState.get("showItem")===this.listing},onMouseEnter:function(){return this.mapState.highlightItem(this.listing)},onMouseLeave:function(){return this.mapState.highlightItem(null)},templateData:function(){var t;return t={listing:this.listing,listingUrlWithDates:this.listingUrlWithDates(),listingUrlWithFilterOptions:this.listing.get("listing_url")+window.location.hash,defaultAvatarUrl:Kiddi.Images.defaultAvatar,highlight:this.highlight(),index:this.index,minimumRecommends:5,paramsHash:window.location.hash}},updateHighlightState:function(){return this.highlight()?this.$el.addClass("highlight"):this.$el.removeClass("highlight")}})}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.ListingAhoyEvents=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.initialize=function(){return i.__super__.initialize.call(this,arguments),this.readyToSend()?this.sendAhoyCustomEvents():void 0},i.prototype.readyToSend=function(){return this.listingPublished()&&this.geoDataReady()&&this.isCustomer()},i.prototype.listingPublished=function(){return null!=window.listingVisibility&&"public"===window.listingVisibility},i.prototype.geoDataReady=function(){return null!=window.listing&&null!=window.listing.lat&&null!=window.listing.lng},i.prototype.isCustomer=function(){return null==window.user||null!=window.user.role&&"customer"===window.user.role},i.prototype.sendAhoyCustomEvents=function(){var t,e;return t=window.listing,e={lat:t.lat,lng:t.lng,uuid:t.uuid},e.variant=this.isMobile()?"mobile":"desktop",this.ahoyCustomEvents("Viewed-"+t.uuid,e)},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;Kiddi.Views.ListingContact=function(i){function n(){return this.btnCancelClicked=t(this.btnCancelClicked,this),this.onSubmit=t(this.onSubmit,this),this.onModalHidden=t(this.onModalHidden,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.el=$("#listing-contact-request"),n.prototype.events={"submit form":"onSubmit","click .btn-cancel":"btnCancelClicked","blur .form-control":"onBlurInput","click input[type=radio]":"onRadioClicked"},n.prototype.initialize=function(){return n.__super__.initialize.call(this,arguments),this.callback=null,this.isModal=this.$el.hasClass("modal"),this.isModal&&this.$el.on("hidden.bs.modal",this.onModalHidden),this.cacheDOMElements(),this.submitting=!1},n.prototype.cacheDOMElements=function(){return this.laddaButton=this.$(".ladda-button").ladda(),this.laddaButton.ladda("stop"),this.cancelButtons=this.$(".btn-cancel")},n.prototype.onError=function(){return this.trackEvent("Listing Contact Request Error"),this.submitting=!1,this.$(".errors").removeClass("hide"),this.$(".errors p").text(I18n.common.listing_tour_request.unable_to_submit),null!=this.laddaButton&&this.laddaButton.ladda("stop"),null!=this.cancelButtons?this.cancelButtons.removeAttr("disabled"):void 0},n.prototype.onModalHidden=function(){return null!=this.callback&&this.callback(),this.callback=null,null!=this.laddaButton&&this.laddaButton.ladda("remove"),null!=this.cancelButtons&&this.cancelButtons.removeAttr("disabled"),this.submitting=!1},n.prototype.onSubmit=function(t){var e,i;return t.preventDefault(),this.trackEvent("Listing Contact Request Attempt"),e=this.$("form"),null!=this.laddaButton&&this.laddaButton.ladda("start"),null!=this.cancelButtons&&this.cancelButtons.attr("disabled",!0),this.submitting=!0,i={data:e.serialize(),dataType:"JSON",error:_.bind(this.onError,this),success:_.bind(this.onSuccess,this),type:"POST",url:e.attr("action")},$.ajax(i),!1},n.prototype.onSuccess=function(t){var e,i,n,o,s,r,a,l,u,c;if(this.submitting=!1,null!=this.laddaButton&&this.laddaButton.ladda("stop"),null!=this.cancelButtons&&this.cancelButtons.removeAttr("disabled"),null!=(l=t.meta)?l.success:void 0)return this.isModal?this.$el.modal("hide"):window.location=this.$el.data("href");for(e=(null!=(u=t.meta)?u.errors:void 0)||{},this.$(".form-group").removeClass("has-error"),o=null,c=_.keys(e),i=0,s=c.length;s>i;i++)n=c[i],a=this.$("prefer_way"===n?"#prefer_way_email":"#"+n),a.closest(".form-group").addClass("has-error"),o=a;return null!=o&&o.focus(),r=_.values(e).length>1?"Vui l\xf2ng \u0111i\u1ec1n nh\u1eefng th\xf4ng tin c\xf2n thi\u1ebfu \u0111\u01b0\u1ee3c \u0111\xe1nh d\u1ea5u \u0111\u1ecf \u1edf tr\xean":null!=e.email&&e.email.trim().length>1?"Email kh\xf4ng h\u1ee3p l\u1ec7":"Vui l\xf2ng \u0111i\u1ec1n nh\u1eefng th\xf4ng tin c\xf2n thi\u1ebfu \u0111\u01b0\u1ee3c \u0111\xe1nh d\u1ea5u \u0111\u1ecf \u1edf tr\xean",this.$(".errors p").text(r),this.$(".errors").removeClass("hide")},n.prototype.render=function(){var t;return this.trackEvent("Send Listing Contact Request",{action:"Header"}),this.isModal&&(t={backdrop:"static",keyboard:!1},this.$el.modal(t),this.$el.modal("show")),this.$(".errors").addClass("hide"),this.$(".form-group").removeClass("has-error"),this.$(".form-control").first().focus(),this},n.prototype.trackEvent=function(t){return this.trackEventWithData(t)},n.prototype.btnCancelClicked=function(t){return this.submitting?t.preventDefault():this.isModal&&this.$el.modal("hide"),!1},n.prototype.onBlurInput=function(t){return $(t.target).val().trim().length>1&&$(t.target).closest(".form-group").removeClass("has-error"),this.$(".has-error").length<1&&!this.$(".errors").hasClass("hide")?this.$(".errors").addClass("hide"):void 0},n.prototype.onRadioClicked=function(t){return $(t.target).closest(".form-group").removeClass("has-error"),this.$(".has-error").length<1&&!this.$(".errors").hasClass("hide")?this.$(".errors").addClass("hide"):void 0},n}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.ListingFpEvents=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.initialize=function(){return i.__super__.initialize.call(this,arguments),this.cacheDOMElements(),this.readyToSend()?this.sendFpCustomEvents():void 0},i.prototype.readyToSend=function(){return this.listingPublished()&&this.geoDataReady()&&this.isCustomer()},i.prototype.listingPublished=function(){return null!=window.listingVisibility&&"public"===window.listingVisibility},i.prototype.geoDataReady=function(){return this.$city.length>0&&this.$district.length>0},i.prototype.isCustomer=function(){return null==window.user||null!=window.user.role&&"customer"===window.user.role},i.prototype.sendFpCustomEvents=function(){return this.sendDistrictInfo(),this.sendAreasInfo()},i.prototype.cacheDOMElements=function(){return this.$city=$("ol.breadcrumb > li.listing-city > a"),this.$district=$("ol.breadcrumb > li.listing-district > a")},i.prototype.sendDistrictInfo=function(){return this.fbCustomEvents(this.$district.text()+" - "+this.$city.text())},i.prototype.sendAreasInfo=function(){var t,e;return t=$(".nearby-areas b.listing-area-name"),t.length>0?(e=" - "+this.$district.text()+" - "+this.$city.text(),_.each(t,function(t){return function(i){return t.fbCustomEvents($(i).text()+e)}}(this))):void 0},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.ListingKiddiEvents=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.initialize=function(t){return i.__super__.initialize.call(this,t),this.pagination=t.pagination,this.initListeners(t.selectors)},i.prototype.initListeners=function(t){return null!=t&&$(t).length>0?$(t).on("click","[data-track-click]",_.bind(this.onClickListing,this)):void 0},i.prototype.readyToSend=function(){return this.isCustomer()},i.prototype.isCustomer=function(){return null==window.user||null!=window.user.role&&"customer"===window.user.role},i.prototype.getClosestSection=function(t){var e,i;for(i=!1,e=t;e&&e!==document&&!i;)e.hasAttribute("data-section")?i=!0:e=e.parentNode;
return i?e.getAttribute("data-section"):null},i.prototype.pageName=function(){return window.pageName||window.location.pathname},i.prototype.pageId=function(){return window.pageId||window.location.pathname},i.prototype.cleanObject=function(t){var e,i;for(e in t)i=t[e],t.hasOwnProperty(e)&&null===t[e]&&delete t[e];return t},i.prototype.presence=function(t){return t&&t.length>0?t:null},i.prototype.eventProperties=function(t){var e;return e=t.currentTarget,this.cleanObject({tag:e.tagName.toLowerCase(),uuid:$(e).data("track-click"),"class":this.presence(e.className),page:this.pageName(),pageId:this.pageId(),section:this.getClosestSection(e),href:e.href,text:this.elementText(t),position:$(e).data("position")})},i.prototype.elementText=function(t){var e,i;return e=t.currentTarget,i=e.textContent||e.innerText||e.innerHTML,null!=i?i.replace(/[\s\r\n]+/g," ").trim():null},i.prototype.includeKiddiProperties=function(t){return t.variant=this.isMobile()?"mobile":"desktop",this.pagination&&this.pagination.get("current")?t.currentPage=parseInt(this.pagination.get("current"),10):void 0},i.prototype.clickEventName=function(t){var e;return e="Clicked-"+t.uuid,null!=t.section?e+"-"+t.section:e},i.prototype.onClickListing=function(t){var e,i;if(this.readyToSend())return i=this.eventProperties(t),this.includeKiddiProperties(i),e=this.clickEventName(i),this.formatProperties(i),this.ahoyCustomEvents(e,i)},i.prototype.formatProperties=function(t){return null!=t.position?t.position=parseInt(t.position,10):void 0},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;Kiddi.Views.ListingTourRequest=function(i){function n(){return this.btnCancelClicked=t(this.btnCancelClicked,this),this.onSubmit=t(this.onSubmit,this),this.onModalHidden=t(this.onModalHidden,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.el=$("#listing-tour-request"),n.prototype.events={"submit form":"onSubmit","click .btn-cancel":"btnCancelClicked","blur .form-control":"onBlurInput","click input[type=radio]":"onRadioClicked"},n.prototype.initialize=function(){return n.__super__.initialize.call(this,arguments),this.callback=null,this.isModal=this.$el.hasClass("modal"),this.isModal&&this.$el.on("hidden.bs.modal",this.onModalHidden),this.initializeBirthdayDatePicker(),this.initializeAppointmentDatePicker(),this.cacheDOMElements(),this.submitting=!1},n.prototype.initializeBirthdayDatePicker=function(){var t;return t=this.$(".birthday-datepicker").datepicker({format:"dd/mm/yyyy",autoclose:!0,todayHighlight:!0,startView:2,startDate:"-2160d",endDate:"+0d",language:"vi",orientation:"auto"})},n.prototype.initializeAppointmentDatePicker=function(){var t;return t=this.$(".appointment-datepicker").datepicker({format:"dd/mm/yyyy",autoclose:!0,todayHighlight:!0,startDate:"+1d",endDate:"+14d",daysOfWeekDisabled:"0,6",language:"vi",orientation:"auto"})},n.prototype.cacheDOMElements=function(){return this.laddaButton=this.$(".ladda-button").ladda(),this.laddaButton.ladda("stop"),this.cancelButtons=this.$(".btn-cancel")},n.prototype.onError=function(){return this.trackEvent("Listing Tour Request Error"),this.submitting=!1,this.$(".errors").removeClass("hide"),this.$(".errors p").text(I18n.common.listing_tour_request.unable_to_submit),null!=this.laddaButton&&this.laddaButton.ladda("stop"),null!=this.cancelButtons?this.cancelButtons.removeAttr("disabled"):void 0},n.prototype.onModalHidden=function(){return null!=this.callback&&this.callback(),this.callback=null,null!=this.laddaButton&&this.laddaButton.ladda("remove"),null!=this.cancelButtons&&this.cancelButtons.removeAttr("disabled"),this.submitting=!1},n.prototype.onSubmit=function(t){var e,i;return t.preventDefault(),this.trackEvent("Listing Tour Request Attempt"),e=this.$("form"),null!=this.laddaButton&&this.laddaButton.ladda("start"),null!=this.cancelButtons&&this.cancelButtons.attr("disabled",!0),this.submitting=!0,i={data:e.serialize(),dataType:"JSON",error:_.bind(this.onError,this),success:_.bind(this.onSuccess,this),type:"POST",url:e.attr("action")},$.ajax(i),!1},n.prototype.onSuccess=function(t){var e,i,n,o,s,r,a,l,u,c;if(this.submitting=!1,null!=this.laddaButton&&this.laddaButton.ladda("stop"),null!=this.cancelButtons&&this.cancelButtons.removeAttr("disabled"),null!=(l=t.meta)?l.success:void 0)return this.isModal?this.$el.modal("hide"):window.location=this.$el.data("href");for(e=(null!=(u=t.meta)?u.errors:void 0)||{},this.$(".form-group").removeClass("has-error"),o=null,c=_.keys(e),i=0,s=c.length;s>i;i++)n=c[i],a=this.$("prefer_way"===n?"#prefer_way_email":"#"+n),a.closest(".form-group").addClass("has-error"),o=a;return null!=o&&o.focus(),r=_.values(e).length>1?"Vui l\xf2ng \u0111i\u1ec1n nh\u1eefng th\xf4ng tin c\xf2n thi\u1ebfu \u0111\u01b0\u1ee3c \u0111\xe1nh d\u1ea5u \u0111\u1ecf \u1edf tr\xean":null!=e.email&&e.email.trim().length>1?"Email kh\xf4ng h\u1ee3p l\u1ec7":"Vui l\xf2ng \u0111i\u1ec1n nh\u1eefng th\xf4ng tin c\xf2n thi\u1ebfu \u0111\u01b0\u1ee3c \u0111\xe1nh d\u1ea5u \u0111\u1ecf \u1edf tr\xean",this.$(".errors p").text(r),this.$(".errors").removeClass("hide")},n.prototype.render=function(){var t;return this.trackEvent("Send Listing Tour Request",{action:"Header"}),this.isModal&&(t={backdrop:"static",keyboard:!1},this.$el.modal(t),this.$el.modal("show")),this.$(".errors").addClass("hide"),this.$(".form-group").removeClass("has-error"),this.$(".form-control").first().focus(),this},n.prototype.trackEvent=function(t){return this.trackEventWithData(t)},n.prototype.btnCancelClicked=function(t){return this.submitting?t.preventDefault():this.isModal&&this.$el.modal("hide"),!1},n.prototype.onBlurInput=function(t){return $(t.target).val().trim().length>1&&$(t.target).closest(".form-group").removeClass("has-error"),this.$(".has-error").length<1&&!this.$(".errors").hasClass("hide")?this.$(".errors").addClass("hide"):void 0},n.prototype.onRadioClicked=function(t){return $(t.target).closest(".form-group").removeClass("has-error"),this.$(".has-error").length<1&&!this.$(".errors").hasClass("hide")?this.$(".errors").addClass("hide"):void 0},n}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.ListingUserRequests=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el=$(".listing-user-requests"),i.prototype.events={"click .listing-tour-request-link":"showListingTourRequest","click .listing-contact-link":"showListingContact"},i.prototype.initialize=function(){return this.listingTourRequest=new Kiddi.Views.ListingTourRequest,this.listingContact=new Kiddi.Views.ListingContact},i.prototype.showListingTourRequest=function(t){return t.preventDefault(),this.listingTourRequest.render(),!1},i.prototype.showListingContact=function(t){return t.preventDefault(),this.listingContact.render(),!1},i}(Kiddi.Views.Base)}.call(this),function(){Kiddi.Views.MoreListings=Kiddi.Views.Base.extend({attributes:{"class":"btn-show-more",href:"#"},id:"more-listings",events:{click:"onClick"},tagName:"a",initialize:function(t){return this.options=t,this.pager=this.options.pager},onClick:function(t){return t.preventDefault(),this.pager.set({show:this.pager.get("show")+this.pager.get("step")}),!1},render:function(){return this.$el.text(this.options.text||"Show more listings."),this}})}.call(this),function(){Kiddi.Views.NoListings=Kiddi.Views.Base.extend({attributes:{"class":"no-results"},tagName:"div",initialize:function(t){this.options=t},render:function(){var t;return this.$el.text((null!=(t=this.options)?t.text:void 0)||"Kh\xf4ng t\xecm th\u1ea5y c\u01a1 s\u1edf n\xe0o"),this}})}.call(this),function(){Kiddi.Views.NoPhoto=Kiddi.Views.Base.extend({attributes:{"class":"contributed-photo no-photo"},events:{click:"onClick"},tagName:"div",template:JST["photos/no_photo"],onClick:function(t){return t.preventDefault(),$("[data-add-photos]").first().click(),!1},templateData:function(){return{defaultPhotoUrl:Kiddi.Images.noPhoto}}})}.call(this),function(){Kiddi.Views.Photo=Kiddi.Views.Base.extend({attributes:{"class":"contributed-photo"},tagName:"div",events:{click:"onClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"},desktopTemplate:JST["photos/photo"],mobileTemplate:JST["photos/photo+mobile"],initialize:function(t){this.options=t},onClick:function(t){return t.preventDefault(),this.options.gallery.open(this.options.photo.id),!1},onMouseEnter:function(){return this.$el.addClass("hover")},onMouseLeave:function(){return this.$el.removeClass("hover")},render:function(){return this.constructor.__super__.render.apply(this,arguments),this.options.seeMore&&this.$el.addClass("more"),this},templateData:function(){var t;return t={photo:this.options.photo,seeMore:this.options.seeMore,nbMorePhotos:this.options.nbMorePhotos}}})}.call(this),function(){Kiddi.Views.PhotoList=Kiddi.Views.Base.extend({initialize:function(t){return this.options=t,this.firstRender=!0,this.photos=this.options.photos,this.nbPhotosToShow=this.options.nbPhotosToShow,this.subviews=[],this.photos.on("change",function(t){return function(){return t.render()}}(this))},render:function(){var t,e;if(!this.photos.loaded)return this;if(t=this.photos.length,this.firstRender&&(this.$el.html(""),this.firstRender=!1),this.nbPhotosToShow)for(e=this.photos.slice(0,this.nbPhotosToShow).map(function(e){return function(i,n){var o,s,r;return o=t-e.nbPhotosToShow,r=o>0&&n+1===e.nbPhotosToShow,s={gallery:e.options.gallery,photo:i,seeMore:r,nbMorePhotos:o},new Kiddi.Views.Photo(s).render()}}(this));e.length<this.nbPhotosToShow;)e.push((new Kiddi.Views.NoPhoto).render());else e=this.photos.map(function(t){return function(e){var i;return i={gallery:t.options.gallery,photo:e},new Kiddi.Views.ListingPhotosPagePhoto(i).render()}}(this));return this.renderSubviews(e)}})}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.ReadMoreContent=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.initialize=function(){return this.initializeReadmore()},i.prototype.initializeReadmore=function(){return this.initializeReadmoreWithHeight("read-more-long",200),this.initializeReadmoreWithHeight("read-more-short",80)},i.prototype.initializeReadmoreWithHeight=function(t,e){return this.$("["+t+"]").readmore({moreLink:'<a href="#" class="read-more-link"><strong>\u0110\u1ecdc th\xeam...</strong></a>',lessLink:"",collapsedHeight:e,blockProcessed:function(t,e){var i;return e?(t.hasClass("expandable")||t.addClass("expandable"),i=$("<div class='expandable-indicator expandable-indicator-light'></div>"),t.append(i)):void 0},afterToggle:function(t,e,i){return i&&!e.hasClass("expanded")?e.addClass("expanded"):void 0}})},i.prototype.render=function(){return this},i}(Backbone.View)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.Search=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.events={"submit form":"onSubmit"},i.prototype.googleTemplates={empty:JST["search/google_empty"],footer:JST["search/google_footer"],header:JST["search/google_header"],suggestion:JST["search/google_suggestion"]},i.prototype.kiddiTemplates={empty:JST["search/kiddi_empty"],footer:JST["search/kiddi_footer"],header:JST["search/kiddi_header"],suggestion:JST["search/kiddi_suggestion"]},i.prototype.initialize=function(t){return this.hasRootElement()&&this.$input?(i.__super__.initialize.call(this,arguments),this.options=t,"string"==typeof this.$input&&(this.$input=$(this.$input)),this.search=new Kiddi.Utilities.PlacesTypeahead(this.$input,this.kiddiTemplates,this.googleTemplates,_.bind(this.selectGooglePlaceWithDetails,this)),this.search.typeahead.on("typeahead:selected",_.bind(this.onSelect,this))):void 0},i.prototype.navigateTo=function(t){return Kiddi.Utilities.Basics.redirectToLocation(t)},i.prototype.navigateToBase=function(t){return Kiddi.Utilities.Basics.redirectToLocation(t)},i.prototype.selectGooglePlaceWithDetails=function(t){return this.selectGooglePlace(t)},i.prototype.onSelect=function(t,e,i){return this.search.hidePopOver(),"google-places"===i?this.selectGoogleAutoccompletePlace(e):"kiddi"===i?this.selectKiddi(e):void 0},i.prototype.onSubmit=function(t){var e,i;return t&&t.preventDefault(),i=this.search.getTopSuggestion(),null!=i?this.onSelect(this.$input,i,"google-places"):(this.$input.focus(),this.search.typeahead.typeahead("open"),e=this.search.typeahead.typeahead("val")||this.$input.attr("placeholder").replace("...",""),this.search.typeahead.typeahead("val",""),this.search.typeahead.typeahead("val",e).trigger("input")),!1},i.prototype.generateNavigateToUrl=function(t,e){var i,n,o,s;return"google-places"===e?(null!=(o=t.geometry)?o.location:void 0)&&(i=t.geometry.location,n={lat:i.lat(),lng:i.lng(),q:t.name},s="/tim-kiem?"+$.param(n)):"kiddi"===e?t.url&&(s=t.url):"city-slug"===e&&(s="/tim-kiem/"+t),s},i.prototype.selectGoogleAutoccompletePlace=function(t){return this.search.selectAddress(t)},i.prototype.selectGooglePlace=function(t){var e;if(!this.navigateToCityPage(t))return e=this.generateNavigateToUrl(t,"google-places"),e?this.navigateTo(e):void 0},i.prototype.selectKiddi=function(t){var e;return e=this.generateNavigateToUrl(t,"kiddi"),e?this.navigateTo(e):void 0},i.prototype.navigateToCityPage=function(t){var e,i,n,o;return(null!=(n=t.address_components[0])?n.short_name:void 0)&&(e=t.address_components[0].short_name,i=Kiddi.Cartography.VietNam.citySlugs[e])?(o=this.generateNavigateToUrl(i,"city-slug"),o&&this.navigateToBase(o),!0):!1},i}(Kiddi.Views.Base)}.call(this),function(){Kiddi.Views.Tip=Kiddi.Views.Base.extend({attributes:{"class":"tip"},tagName:"div",events:{"click [data-delete-tip]":"onDeleteClicked"},template:JST["common/tip"],initialize:function(t){return this.options=t,this.tip=this.options.tip,this.fromBrandPage=!this.options.listing},onDeleteClicked:function(t){return t.preventDefault(),confirm(I18n.common.tip.confirm_delete)?this.removeTip():void 0},removeTip:function(){return this.tip.remove(),this.undelegateEvents(),this.remove(),Backbone.View.prototype.remove.call(this)},templateData:function(){var t;return t={tip:this.options.tip,fromBrandPage:this.fromBrandPage}}})}.call(this),function(){Kiddi.Views.TipList=Kiddi.Views.Base.extend({el:"#some-contributed-tips",initialize:function(t){return this.options=t,this.firstRender=!0,this.tips=this.options.tips,this.subviews=[]},render:function(){var t;return this.tips.loaded?(this.firstRender&&(this.$el.html(""),this.firstRender=!1),t=this.tips.map(function(t){return function(e,i){var n;return n=_.extend({index:i,tip:e},t.options),new Kiddi.Views.Tip(n).render()}}(this)),this.renderSubviews(t),new Kiddi.Views.ReadMoreContent({el:this.el}),this):this}})}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.UgcActions=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el=".ugc-actions-container",i.prototype.events={"click [data-add-photos]":"onAddPhotosClicked","click [data-add-tip]":"onAddTipClicked","click [data-copy-link]":"onCopyLinkClicked","click [data-jump-to-reviews]":"onReviewsCountClicked","click [data-share-facebook]":"onShareFacebookClicked","click [data-share-twitter]":"onShareTwitterClicked","click [data-share-pinterest]":"onSharePinterestClicked"},i.prototype.initialize=function(t){return i.__super__.initialize.call(this,arguments),this.options=t,this.listing=this.options.listing,this.brand=this.options.brand,this.photos=this.options.photos,this.linkToShare=window.location.href},i.prototype.onAddPhotosClicked=function(t){var e;return t.preventDefault(),$("#vibe-grid").length>0||$("#photos").length>0?(e=$("#vibe-grid").length?"#vibe-grid":"#photos",$(e+" [data-add-photos]").first().click(),!1):this.onUgcActionsAddPhotosClicked(t)},i.prototype.onAddTipClicked=function(t){var e;return t.preventDefault(),$("#tips").length>0?(e=$("#tips").offset().top-100,$("html, body").animate({scrollTop:e},400),$("#tip_description").focus(),!1):this.onUgcActionsAddTipClicked(t)},i.prototype.onCopyLinkClicked=function(t){return t.preventDefault(),Kiddi.Utilities.SocialSharing.copyLink(this.linkToShare),!1},i.prototype.onReviewsCountClicked=function(t){var e;return t.preventDefault(),e=$("a[name='reviews']").offset().top-35,$("html, body").animate({scrollTop:e},400),location.hash="reviews",!1},i.prototype.onShareFacebookClicked=function(t){return t.preventDefault(),Kiddi.Utilities.SocialSharing.openFacebookWindow(this.linkToShare),!1},i.prototype.onSharePinterestClicked=function(t){var e;return t.preventDefault(),e=$(t.target).parent(),Kiddi.Utilities.SocialSharing.openPinterestWindow(this.linkToShare,e.data("pinterest-media"),e.data("pinterest-description")),!1},i.prototype.onShareTwitterClicked=function(t){return t.preventDefault(),Kiddi.Utilities.SocialSharing.openTwitterWindow(this.linkToShare),!1},i.prototype.onUgcActionsAddPhotosClicked=function(){return this.isLoggedIn()?this.showAddPhotosModal():this.pleaseSignIn(_.bind(this.showAddPhotosModal,this)),!1},i.prototype.showAddPhotosModal=function(){var t;return t={listing:this.listing,cloudinary:$("#add-photo-modal").data(),el:$("#add-photo-modal"),brand:this.brand,photos:this.photos,url:this.$("[data-add-photos]").data("href")},new Kiddi.Views.ListingUploadPhotos(t).render(),!1},i.prototype.onUgcActionsAddTipClicked=function(t){return t.preventDefault(),!1},i.prototype.showAddTipModal=function(){var t;return console.log("showAddTipModal"),t={tip:new Kiddi.Models.Tip,url:this.$("[data-add-tip]").data("href"),title:this.listing.get("full_name")},new Kiddi.Views.AddTip(t).render(),!1},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.UploadPhoto=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.attributes={"class":"media"},i.prototype.tagName="div",i.prototype.events={"keyup textarea":"countChars"},i.prototype.template=JST["photos/upload_photo"],i.prototype.initialize=function(t){return this.options=t,this.options.previewCanvas&&(this.previewUrl=this.options.previewCanvas.toDataURL()),this.descMaxChars=260},i.prototype.countChars=function(t){var e;return e=this.descMaxChars-t.target.textLength,this.$charsCounter.text(e)},i.prototype.render=function(){var t;return t=this.chooseTemplate(),this.$el.html(t(this.templateData())),this.$charsCounter=this.$("[data-remaining-chars]"),this},i.prototype.templateData=function(){var t;return t={index:this.options.index,previewUrl:this.previewUrl}},i}(Kiddi.Views.Base)}.call(this),function(){Kiddi.Views.UploadPhotosSuccess=Kiddi.Views.Base.extend({attributes:{"class":"upload-photos-success"},tagName:"div",template:I18n.common.upload_photos.upload_photos_success_message,initialize:function(t){this.options=t},render:function(){var t,e;return e=(null!=(t=this.options)?t.message:void 0)||this.template,this.options.listing_name&&(e=e.replace("{listing_name}",this.options.listing_name)),this.$el.text(e),this}})}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.Upvote=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.initialize=function(t){return i.__super__.initialize.call(this,arguments),this.options=t,window.upvotes=[],window.downvotes=[],$("body").on("click","[data-upvote-btn]",_.bind(this.onClick,this))},i.prototype.isUpvoted=function(t){var e;return e=parseInt(this.$counter[0].innerHTML)+1,this.$counter.text(e),this.$button.addClass("upvoted"),window.upvotes.push(t),window.downvotes=_.reject(window.downvotes,function(e){return e===t})},i.prototype.isDownvoted=function(t){var e;return e=parseInt(this.$counter[0].innerHTML)-1,this.$counter.text(e),this.$button.removeClass("upvoted ago"),window.upvotes=_.reject(window.upvotes,function(e){return e===t}),window.downvotes.push(t)},i.prototype.onClick=function(t){return t.preventDefault(),this.$button=$(t.currentTarget),this.$counter=this.$button.find(".counter"),this.upvotableType=this.$button.data("upvotable-type"),this.isLoggedIn()?this.toggleUpvote():(this.trigger("signingUp"),this.pleaseSignIn(_.bind(this.toggleUpvote,this))),!1},i.prototype.render=function(){return this},i.prototype.toggleUpvote=function(){var t,e,i,n;return i=this.$button.data("id"),t="tip"===this.upvotableType?"tips":"gallery",e={id:i,baseUrl:$("#"+t).data("url"),upvoted:this.$button.hasClass("upvoted")},this.model=new Kiddi.Models.Upvote(e),n=this.model.toggleUpvote(),$.when(n).done(function(t){return function(){return n.responseJSON.success?n.responseJSON.upvoted?t.isUpvoted(i):t.isDownvoted(i):t.$button.addClass("upvoted")}}(this))},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;Kiddi.Views.DashboardContentContainer=function(i){function n(){return this.setHeight=t(this.setHeight,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.el="[account-content-container]",n.prototype.initialize=function(){return this.hasRootElement()?(this.topOffset=this.$el.offset().top,this.setHeight(),window.onresize=this.setHeight):void 0},n.prototype.setHeight=function(){return this.$el.css({"min-height":$(window).height()-this.topOffset})},n}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;Kiddi.Views.DashboardHomeBranches=function(i){function n(){return this.startResourceFetchingDance=t(this.startResourceFetchingDance,this),this.setWidthsOfHeaderCells=t(this.setWidthsOfHeaderCells,this),this.onSearchQueryChanged=t(this.onSearchQueryChanged,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.el="#branches-table",n.prototype.template=JST["dashboard/branches"],n.prototype.initialize=function(){var t,e,i;return this.paginationModel=new Kiddi.Models.Pagination,this.searchModel=new Backbone.Model({query:""}),e={all:window.show_all,pagination:this.paginationModel,search:this.searchModel},this.branches=new Kiddi.Collections.DashboardHomeBranches(e),this.loader=new Backbone.Model({show:!0}),t=React.createFactory(Kiddi.Components.LoadingSpinner),i=t({model:this.loader}),ReactDOM.render(i,$("[data-loading-spinner]")[0]),this.paginationModel.on("change",this.startResourceFetchingDance),this.searchModel.on("change:query",this.onSearchQueryChanged),this.startResourceFetchingDance()},n.prototype.cacheTableDOMElements=function(){return this.$jumpToDateInput=this.$el.find("input[data-jump-to-date]")},n.prototype.onSearchQueryChanged=function(){return this.paginationModel.reset()},n.prototype.render=function(){var t,e,i,n,o,s,r;return n={branches:this.branches.toJSON(),user:Kiddi.app.user},this.$el.html(this.template(n)),this.$el.css({opacity:1}),this.cacheTableDOMElements(),this.setupFixedTableHead(),this.loader.set({show:!1}),t=React.createFactory(Kiddi.Components.DashboardPaginationControls),o=t({model:this.paginationModel}),_.each($("[data-pagination-container]"),function(t){return ReactDOM.render(o,t)}),e=React.createFactory(Kiddi.Components.SearchInput),s=e({model:this.searchModel}),ReactDOM.render(s,$("[data-search-input]")[0]),i=React.createFactory(Kiddi.Components.SearchSummary),r=i({model:this.searchModel}),ReactDOM.render(r,$("[data-search-summary]")[0])},n.prototype.setupFixedTableHead=function(){return this.$document=$(document),this.$fixedHeader=this.$el.find("[data-fixed-header]"),this.setWidthsOfHeaderCells(),this.topOffset=$(".dashboard-wrapper").offset().top,this.$document.on("scroll",this.onScroll),this.$document.on("resize",this.setWidthsOfHeaderCells)},n.prototype.setWidthsOfHeaderCells=function(){var t;return t=this.$el.find("thead > tr:first-child"),_.each(this.$fixedHeader.find("th"),function(e){var i,n;return n=$(e),i=t.find("th:eq("+n.index()+")"),n.css({width:i[0].offsetWidth})})},n.prototype.startResourceFetchingDance=function(){return this.$el.css({opacity:.5}),this.loader.set({show:!0}),this.branches.fetch({success:function(t){return function(){return t.render()}}(this),error:function(t){return console.log("Error fetching branches: ",t)}})},n}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.DashboardHome=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.initialize=function(){var t;return new Kiddi.Views.DashboardSideMenu,new Kiddi.Views.DashboardContentContainer,$("#branches-table").length&&new Kiddi.Views.DashboardHomeBranches,t=new Backbone.Model({query:""}),$("#brand-pending-submitted").length&&new Kiddi.Views.DashboardPending({el:"#brand-pending-submitted",modelType:"brands",status:"submitted",searchModel:t}),$("#brand-pending-in-review").length&&new Kiddi.Views.DashboardPending({el:"#brand-pending-in-review",modelType:"brands",status:"in_review",searchModel:t}),$("#pending-submitted").length&&new Kiddi.Views.DashboardPending({el:"#pending-submitted",status:"submitted",searchModel:t}),$("#pending-in-review").length&&new Kiddi.Views.DashboardPending({el:"#pending-in-review",status:"in_review",searchModel:t}),$("#pending-complete").length&&new Kiddi.Views.DashboardPending({el:"#pending-complete",status:"complete",searchModel:t}),$("#pending-incomplete").length?new Kiddi.Views.DashboardPending({el:"#pending-incomplete",status:"incomplete",searchModel:t}):void 0},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;Kiddi.Views.DashboardHomePanel=function(i){function n(){return this.slideOutPanel=t(this.slideOutPanel,this),this.onCloseBtnClicked=t(this.onCloseBtnClicked,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.baseTemplate=JST["dashboard/panel"],n.prototype.initialize=function(t){return this.options=t,this.cacheDOMElements(),this.slideInPanel()},n.prototype.cacheDOMElements=function(){return this.$body=$("body")},n.prototype.onCloseBtnClicked=function(){return this.slideOutPanel()},n.prototype.render=function(t){return this.$container.html(this.template(t))},n.prototype.slideInPanel=function(){return this.$body.append(this.baseTemplate()),this.$overlay=$(".dashboard-panel-overlay"),this.$overlay.on("click","[data-close-panel]",this.onCloseBtnClicked),this.$container=this.$overlay.find(".dashboard-panel-content"),this.setElement(this.$container)},n.prototype.slideOutPanel=function(){return this.$overlay.remove()},n}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;Kiddi.Views.DashboardPending=function(i){function n(){return this.onSearchQueryChanged=t(this.onSearchQueryChanged,this),this.fetchBranches=t(this.fetchBranches,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.initialize=function(t){var e,i,n;return this.options=t,this.loader=new Backbone.Model({show:!0}),e=React.createFactory(Kiddi.Components.LoadingSpinner),n=e({model:this.loader}),_.each($("[data-loading-spinner]"),function(t){return ReactDOM.render(n,t)}),this.paginationModel=new Kiddi.Models.Pagination,this.searchModel=this.options.searchModel,i={all:window.show_all,pagination:this.paginationModel,search:this.searchModel,status:this.options.status},this.listings=this.options.modelType&&"brands"===this.options.modelType?new Kiddi.Collections.DashboardHomeBrands(i):new Kiddi.Collections.DashboardHomeBranches(i),this.paginationModel.on("change",this.fetchBranches),this.searchModel.on("change:query",this.onSearchQueryChanged),this.fetchBranches()},n.prototype.fetchBranches=function(){return this.$el.css({opacity:.5}),this.loader.set({show:!0}),this.listings.fetch({success:function(t){return function(){return t.render()}}(this),error:function(t){return console.log("Error fetching listings: ",t)}})},n.prototype.onSearchQueryChanged=function(){return this.paginationModel.reset()},n.prototype.render=function(){var t,e,i,n;return t=React.createFactory(Kiddi.Components.PendingBranchesTable),n=t({collection:this.listings,paginationModel:this.paginationModel,searchModel:this.searchModel}),ReactDOM.render(n,this.$el[0]),this.$el.css({opacity:1}),this.loader.set({show:!1}),e=React.createFactory(Kiddi.Components.SearchInput),i=e({model:this.searchModel}),ReactDOM.render(i,$("[data-search-input]")[0])},n.prototype.initCustomParser=function(){return $.tablesorter.addParser({id:"boolean",is:function(){return!1},format:function(t){return"\u2022"===t?1:0},type:"numeric"})},n}(Kiddi.Views.Base)}.call(this),function(){var extend=function(t,e){function i(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;Kiddi.Views.DashboardJournal=function(superClass){function DashboardJournal(){return DashboardJournal.__super__.constructor.apply(this,arguments)}return extend(DashboardJournal,superClass),DashboardJournal.prototype.el="#dashboard-journal",DashboardJournal.prototype.initialize=function(){return this.cacheDOMElements(),this.postTitle=$("#journal_post_title").val(),this.initComponents(),this.initListeners(),this.listingListTemplate=JST["admin/list_listing"],this.linkedListingsIds=eval("["+this.$listingsIdsField.val()+"]")},DashboardJournal.prototype.cacheDOMElements=function(){return this.$image=$("#journal_post_image_file_name"),this.$imagePreview=$("#image-preview"),this.$fileInputButton=$("#file-input-btn"),this.$fileInput=$("#upload-image-form input:file"),this.$uploadForm=$("#upload-image-form form"),this.$listingsIdsField=$("#journal_post_listing_ids"),this.$linkedListingsList=$("[data-linked-listings]")},DashboardJournal.prototype.initComponents=function(){var t,e;return t=window.inReview||0,$("#journal_post_content").redactor({minHeight:400,replaceDivs:!1,deniedTags:[],imageUpload:window.upload_image_url,imageUploadCallback:_.bind(this.onImageUploaded,this),modalClosedCallback:_.bind(this.onModalClosed,this)}),1===t?this.$("[data-disabled-in-review]").attr("disabled",!0):($(".datepicker").datepicker({format:"dd-mm-yyyy",autoclose:!0,todayHighlight:!0}),$("#post_tags").tagsinput({typeaheadjs:{name:"tagnames",displayKey:"name",valueKey:"name",source:this.tagNamesTypeahead()}}),e=$("#post_listings").typeahead(null,{name:"listings",displayKey:"name",valueKey:"id",source:this.listingsTypeahead()}),e.on("typeahead:selected",_.bind(this.onSelectedListing,this)))},DashboardJournal.prototype.initListeners=function(){return this.$fileInputButton.on("click",_.bind(this.onFileInputButtonClicked,this)),this.$fileInput.on("change",_.bind(this.onImageSelected,this)),$("#floating-save-btn").length>0&&$("#floating-save-btn").on("click",function(){return $("#edit_post_form").submit()}),$(document).on("click","[data-remove-listing]",_.bind(this.onRemoveListing,this))
},DashboardJournal.prototype.onFileInputButtonClicked=function(){return this.$fileInput.click()},DashboardJournal.prototype.onImageSelected=function(){var t;return this.$fileInputButton.attr("disabled",!0),this.$imagePreview.html('<p class="form-control-static text-muted">\u0110ang t\u1ea3i...</p>'),t=this.$uploadForm.cloudinary_fileupload(),t.on("fileuploaddone",_.bind(this.onUploadSuccess,this)),t.on("fileuploadfail",_.bind(this.onUploadError,this))},DashboardJournal.prototype.onImageUploaded=function(t){return $(t).attr("alt",this.postTitle)},DashboardJournal.prototype.onModalClosed=function(t){var e;return"imageEdit"===t?(e=$(".redactor-editor"),e.find("img[style*='float: left']").addClass("left").removeClass("right"),e.find("img.left:not([style*='float: left'])").removeClass("left"),e.find("img[style*='float: right']").addClass("right").removeClass("left"),e.find("img.right:not([style*='float: right'])").removeClass("right")):void 0},DashboardJournal.prototype.onRemoveListing=function(t){var e;return t.preventDefault(),e=$(t.target).data("remove-listing"),this._removeLinkedListingId(e),this.$linkedListingsList.find("[data-listing-id='"+e+"']").remove(),0===this.linkedListingsIds.length?this.$linkedListingsList.find(".no-result").show():void 0},DashboardJournal.prototype.onSelectedListing=function(t,e){var i;return $("#post_listings").typeahead("val",""),i=this.listingListTemplate({id:e.id,name:e.name}),this.$linkedListingsList.append(i),0===this.linkedListingsIds.length&&this.$linkedListingsList.find(".no-result").hide(),this._addLinkedListingId(e.id)},DashboardJournal.prototype.onUploadSuccess=function(t,e){var i,n;return this.$fileInputButton.attr("disabled",!1),n="v"+e.result.version+"/"+e.result.public_id+".jpg",this.$image.val(n),i=$.cloudinary.image(e.result.public_id,{format:e.result.format,version:e.result.version,crop:"fill",width:80,height:80})[0],this.$imagePreview.html("<br/><small class='text-success'>Nh\u1ea5n n\xfat 'L\u01b0u thay \u0111\u1ed5i' \u0111\u1ec3 c\u1eadp nh\u1eadt \u1ea3nh n\xe0y.</small>").prepend($(i))},DashboardJournal.prototype.onUploadError=function(){return this.$fileInputButton.attr("disabled",!1),console.log("An error occured while uploading the photo:",data)},DashboardJournal.prototype.tagNamesTypeahead=function(){var t;return t=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("name"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:window.tags_url+"?t=%QUERY",wildcard:"%QUERY",filter:function(t){return $.map(t,function(t){return{name:t}})}}}),t.initialize(),t.ttAdapter()},DashboardJournal.prototype.listingsTypeahead=function(){var t;return t=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("full_name"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:window.listings_url+"?active_only=1&t=%QUERY",wildcard:"%QUERY",filter:function(t){return $.map(t,function(t){return{name:t.name,id:t.id}})}}}),t.initialize(),t.ttAdapter()},DashboardJournal.prototype._addLinkedListingId=function(t){return this.linkedListingsIds.push(t),this.$listingsIdsField.val(this.linkedListingsIds)},DashboardJournal.prototype._removeLinkedListingId=function(t){return this.linkedListingsIds=this.linkedListingsIds.filter(function(e){return e!==t}),this.$listingsIdsField.val(this.linkedListingsIds)},DashboardJournal}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.DashboardListingBlogPosts=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.initialize=function(){return new Kiddi.Views.DashboardSideMenu,new Kiddi.Views.DashboardContentContainer,new Kiddi.Views.DashboardJournal},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;Kiddi.Views.DashboardSelfListingBase=function(i){function n(){return this.onInputChanged=t(this.onInputChanged,this),this.onBeforeUnload=t(this.onBeforeUnload,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.el="#self-listing",n.prototype._events={"submit [data-login-required]":"onLoginRequiredFormSubmitted","click  [data-save-listing]":"onSaveListingClicked","change input":"onInputChanged","change select":"onInputChanged","change textarea":"onInputChanged","click  .redactor-editor":"onInputChanged"},n.prototype.initialize=function(t){var e,i,o,s,r;if(this.options=t,this.events=_.extend(this.events||{},this._events),n.__super__.initialize.call(this,this.options),new Kiddi.Views.DashboardSideMenu,new Kiddi.Views.DashboardContentContainer,(this.options.branch||this.options.brand)&&(window.onbeforeunload=this.onBeforeUnload),this.$alertMessages=this.$el.find("[data-alert-name]"),this.$alertMessages.length>0)for(r=this.$alertMessages,i=0,o=r.length;o>i;i++)s=r[i],e=$(s),this.track("Viewed message",{name:e.data("alert-name"),content:e.html()});return this.track("Viewed page"),this.initFormPlugins(),this.showFlashMessage()},n.prototype.initFormPlugins=function(){var t;return t=window.inReview||0,this.$('input[type="tel"]').mask("(999) 999-9999?9"),t||this.$("textarea.redactor").redactor(),this.$('[data-toggle="popover"]').popover({title:"G\u1ee3i \xfd cho b\u1ea1n",trigger:"focus"}),1===t?this.$("[data-disabled-in-review]").attr("disabled",!0):void 0},n.prototype.onBeforeUnload=function(){return this.track("Viewed message",{name:"unsaved changes"}),this.dirty?'\u1ed2, h\xecnh nh\u01b0 b\u1ea1n c\xf3 v\xe0i thay \u0111\u1ed5i ch\u01b0a \u0111\u01b0\u1ee3c l\u01b0u l\u1ea1i.\n\nH\xe3y ch\u1edd m\u1ed9t ch\xfat, k\xe9o chu\u1ed9t xu\u1ed1ng ph\xeda d\u01b0\u1edbi v\xe0 b\u1ea5m v\xe0o n\xfat "L\u01b0u l\u1ea1i v\xe0 ti\u1ebfp t\u1ee5c" \u0111\u1ec3 l\u01b0u l\u1ea1i nh\u1eefng thay \u0111\u1ed5i c\u1ee7a b\u1ea1n tr\u01b0\u1edbc khi b\u1ea1n \u0111\xf3ng trang n\xe0y.':void 0},n.prototype.onInputChanged=function(t){return this.track("Changed input",{name:$(t.target).attr("name")}),this.dirty=!0},n.prototype.onLoginRequiredFormSubmitted=function(t){return this.isLoggedOut()?(t.preventDefault(),$("#signup h2").text("\u0110\u0103ng k\xfd \u0111\u1ec3 th\xeam tr\u01b0\u1eddng c\u1ee7a b\u1ea1n v\xe0o Kiddi"),this.pleaseSignUp(function(){return function(){return $(t.target).submit()}}(this))):void 0},n.prototype.onSaveListingClicked=function(t){var e,i;return window.onbeforeunload=null,e=$(t.target),this.tracked?void 0:(t.preventDefault(),i=function(t){return function(){return t.tracked=!0,e.trigger("click")}}(this),this.track("Clicked save",{},i))},n.prototype.showFlashMessage=function(){var t,e;if(Cookies.get("flashMessage"))return t=$.parseJSON(Cookies.get("flashMessage")),Cookies.remove("flashMessage"),t?(e=decodeURIComponent(escape(t.message)),(new Kiddi.Views.FeedbackIndicator).render(e,t.type)):void 0},n}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;Kiddi.Views.DashboardSelfListingBranch=function(i){function n(){return this.preventFormSubmission=t(this.preventFormSubmission,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.events={"keyup #full_name":"onNameBeingChanged"},n.prototype.initialize=function(t){var e,i,o;return this.options=t,n.__super__.initialize.call(this,this.options),this.branch=this.options.branch,this.cacheDOMElements(),o={otherBranches:window.other_branches},this.coordinatePicker=new Kiddi.Cartography.CoordinatePicker(o),$("[data-name-sub-text]").length&&(e=React.createFactory(Kiddi.Components.BranchNameSubText),i=e({model:this.branch}),ReactDOM.render(i,$("[data-name-sub-text]")[0])),$("body").on("keydown",this.preventFormSubmission),this.$city.length>0&&this.$district.length>0?this.initializeCityAndDistrict():void 0},n.prototype.cacheDOMElements=function(){return this.$mapSearchBox=this.$("[data-map-search-box]"),this.$branchMap=this.$("[data-branch-coordinate-picker]"),this.$city=this.$("#city_id"),this.$district=this.$("#district_id")},n.prototype.onNameBeingChanged=function(t){return this.branch.set("full_name",t.target.value)},n.prototype.preventFormSubmission=function(t){return 13===t.keyCode&&this.$mapSearchBox.is(":focus")?t.preventDefault():void 0},n.prototype.initializeCityAndDistrict=function(){return this.districtsCollection=new Kiddi.Collections.Districts,null!=window.districts&&this.districtsCollection.reset(window.districts),new Kiddi.Views.DashboardCity({districts:this.districtsCollection}),new Kiddi.Views.DashboardDistricts({districts:this.districtsCollection}),this.districtsCollection.on("loaded",function(t){return function(){return t.$("[data-save-listing]").removeAttr("disabled")}}(this)),this.districtsCollection.on("loading",function(t){return function(){return t.$("[data-save-listing]").attr("disabled",!0)}}(this))},n}(Kiddi.Views.DashboardSelfListingBase)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.DashboardSelfListingBranchPhotos=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.events={"click  [data-add-photos]":"onAddPhotosClicked","click  [data-photo-thumb]":"onPhotoThumbClicked"},i.prototype.initialize=function(t){return i.__super__.initialize.call(this,arguments),this.photos=t.photos,this.listing=t.listing,new Kiddi.Views.Upvote(_.clone(t)).render(),this.gallery=new Kiddi.Views.ListingGallery(_.clone(t)).render()},i.prototype.onAddPhotosClicked=function(){var t;return this.track("Changed Input",{name:"add_photos"}),t={listing:this.listing,cloudinary:$("#add-photo-modal").data(),el:$("#add-photo-modal"),photos:this.photos,url:this.$("[data-add-photos]").data("href"),reloadPageAfterSuccessUploading:!0},this.photoUpload=new Kiddi.Views.ListingUploadPhotos(t).render(),!1},i.prototype.onPhotoThumbClicked=function(t){var e;return t.preventDefault(),this.gallery?(e=$(t.target).data("photo-thumb"),this.gallery.open(e)):void 0},i}(Kiddi.Views.DashboardSelfListingBase)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;Kiddi.Views.DashboardSelfListingBrand=function(i){function n(){return this.preventFormSubmission=t(this.preventFormSubmission,this),this.onUserLocated=t(this.onUserLocated,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.events={"click [data-toggle-insurance]":"onToggleInsurance","click  #upload-cover-photo-button":"selectFile"},n.prototype.template=JST["dashboard/upload_photos"],n.prototype.initialize=function(t){var e;return this.options=t,n.__super__.initialize.call(this,this.options),this.cacheDOMElements(),e={useDefaultIcon:!0},this.coordinatePicker=new Kiddi.Cartography.CoordinatePicker(e),$("body").on("keydown",this.preventFormSubmission),$("#overlay-message").length&&(this.showOverlayMessage(),$("[data-dismiss-overlay]").on("click",_.bind(this.onDismissOverlayClicked,this))),this.$city.length>0&&this.$district.length>0?this.initializeCityAndDistrict():void 0},n.prototype.initializeCityAndDistrict=function(){return this.districtsCollection=new Kiddi.Collections.Districts,new Kiddi.Views.DashboardCity({districts:this.districtsCollection}),new Kiddi.Views.DashboardDistricts({districts:this.districtsCollection}),this.districtsCollection.on("loaded",function(t){return function(){return t.$("[data-save-listing]").removeAttr("disabled")}}(this)),this.districtsCollection.on("loading",function(t){return function(){return t.$("[data-save-listing]").attr("disabled",!0)}}(this))},n.prototype.cacheDOMElements=function(){return this.$mapSearchBox=this.$("[data-map-search-box]"),this.$brandMap=this.$("[data-brand-coordinate-picker]"),this.$insuranceHiddenField=$("#commercial_insurance"),this.$uploadFormContainer=$("#upload-cover-photo-form"),this.$uploadForm=null,this.cloudinary=this.$uploadFormContainer.data(),this.$currentUploadButton=null,this.url=null,this.$uploadProgress=$("#upload-progress"),this.$city=this.$("#city_id"),this.$district=this.$("#district_id")},n.prototype.onDismissOverlayClicked=function(){return $("#overlay-message").removeClass("visible"),setTimeout(function(){return $("#overlay-message").remove()},500)},n.prototype.onToggleInsurance=function(t){var e,i;return t.preventDefault(),e=$(t.target),this.$("[data-toggle-insurance].selected").removeClass("selected"),e.addClass("selected"),i=e.data("toggle-insurance"),this.$insuranceHiddenField.val(i),this.$("[data-no-insurance-blurb]").toggleClass("hide",i)},n.prototype.onUserLocated=function(t){return $(this.coordinatePicker.latField).val(t.latitude.toFixed(4)),$(this.coordinatePicker.lngField).val(t.longitude.toFixed(4)).trigger("change")},n.prototype.preventFormSubmission=function(t){return 13===t.keyCode&&this.$mapSearchBox.is(":focus")?t.preventDefault():void 0},n.prototype.showOverlayMessage=function(){return $("#overlay-message").show(),setTimeout(function(){return $("#overlay-message").addClass("visible")},500)},n.prototype.selectFile=function(t){var e;return console.log("selectFile"),t.preventDefault(),e=window.inReview||0,0===e&&(this.$currentUploadButton=$(t.target),this.url=this.$currentUploadButton.data("url"),this.$uploadForm.find('input[type="file"]').click()),!1},n.prototype.setupUploader=function(){var t,e;return t=100,e={acceptFileTypes:/(\.|\/)(jpe?g|png)$/i,autoUpload:!0,dataType:"JSON",disableExifThumbnail:!0,maxFileSize:1e7,previewMaxWidth:t,previewMaxHeight:t,previewCrop:!0,singleFileUploads:!0},this.$uploadForm.cloudinary_fileupload?(this.uploader=this.$uploadForm.cloudinary_fileupload(e),this.uploader.on("fileuploadsubmit",_.bind(this.onCloudinarySubmit,this)),this.uploader.on("fileuploaddone",_.bind(this.onCloudinarySuccess,this)),this.uploader.on("fileuploadfail",_.bind(this.onCloudinaryError,this))):void 0},n.prototype.onCloudinaryError=function(){return this.$("[data-photo-errors]").removeClass("hide"),this.$uploadProgress.text("").addClass("hide"),this.$currentUploadButton.attr("disabled",!1)},n.prototype.onCloudinarySubmit=function(){return this.$("[data-photo-errors], [data-photo-success]").addClass("hide"),this.$currentUploadButton.attr("disabled",!0),this.$uploadProgress.text("\u0110ang t\u1ea3i \u1ea3nh l\xean...").removeClass("hide"),!0},n.prototype.onCloudinarySuccess=function(){var t,e;return t={photo:this.$uploadForm.find("input[name='photo_url']").val()},e={data:t,dataType:"JSON",error:_.bind(this.onKiddiError,this),success:_.bind(this.onKiddiSuccess,this),complete:_.bind(this.onKiddiComplete,this),type:"PUT",url:this.url},$.ajax(e)},n.prototype.onKiddiError=function(t){var e,i;try{i=t.responseJSON.message||t.responseJSON.meta.message}catch(n){e=n,i=null}return null==i&&(i="Xin l\u1ed7i! \u0110\xe3 x\u1ea3y ra l\u1ed7i khi t\u1ea3i l\xean \u1ea3nh c\u1ee7a b\u1ea1n. H\xe3y th\u1eed l\u1ea1i l\u1ea7n n\u1eefa!"),this.$("[data-photo-errors]").text(i).removeClass("hide"),this.$uploadProgress.text("").addClass("hide")},n.prototype.onKiddiSuccess=function(t){return t.thumb_url&&(this.$currentUploadButton.parent().parent().find("img").attr("src",t.thumb_url),this.$("[data-photo-success]").removeClass("hide"),this.$uploadProgress.text("").addClass("hide"),1===t.listing_visible)?location.reload():void 0},n.prototype.onKiddiComplete=function(){return this.$currentUploadButton.attr("disabled",!1)},n.prototype.render=function(){var t,e;return e=window.inReview||0,this.cloudinary&&0===e&&(t={cloudinary:this.cloudinary},this.$uploadFormContainer.html(this.template(t)),this.$uploadForm=$("#cover-photo-file-form"),this.setupUploader()),this},n}(Kiddi.Views.DashboardSelfListingBase)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.DashboardCity=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="#city_id",i.prototype.events={change:"onCityChanged"},i.prototype.initialize=function(t){return this.options=t,this.hasRootElement()?this.districts=this.options.districts:void 0},i.prototype.onCityChanged=function(){var t;return t=this.$el.val(),this.districts.load(t)},i}(Kiddi.Views.Base)}.call(this),function(){Kiddi.Views.BaseDistrict=Kiddi.Views.Base.extend({attributes:{"class":"district-option"},tagName:"option",initialize:function(t){return this.options=t,this.district=this.options.district},render:function(){return this.$el.text(this.district.get("name")),this.$el.val(this.district.get("id")),this}})}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.DashboardDistricts=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="#district_id",i.prototype.events={change:"onDistrictChanged"},i.prototype.initialize=function(t){return this.options=t,this.hasRootElement()?(this.cacheDOMElements(),this.subviews=[],this.districts=this.options.districts,this.districtsLoaded=this.districts.loaded,this.hasDistricts=this.districtsLoaded,this.districts.on("loaded",function(t){return function(){return t.hasDistricts=!0,t.districtsLoaded=!0,t.render(),t.districts.length>0?t.updateLatLngIfNeeded(t.districts.at(0)):void 0}}(this)),this.districts.on("loading",function(t){return function(){return t.hasDistricts&&t.$el.html("").append(t.generateLoadingIndicator()),t.$el.attr("disabled",!0),t.hasDistricts=!1,t.districtsLoaded=!1}}(this))):void 0},i.prototype.cacheDOMElements=function(){return this.$lat=$("#lat"),this.$lng=$("#lng")},i.prototype.generateLoadingIndicator=function(){var t;return t=$('<option val="">\u0110ang t\u1ea3i th\xf4ng tin...</option>')},i.prototype.generateDefaultOption=function(){return $('<option val="">Qu\u1eadn/Huy\u1ec7n</option>')},i.prototype.render=function(){var t,e,i,n,o,s,r;if(this.districtsLoaded){if(""===this.districts.city_id)this.$el.html("").append(this.generateDefaultOption());else{for(r=[],o=this.districts.models,i=e=0,n=o.length;n>e;i=++e)t=o[i],s={district:t,id:"district-"+t.id},r.push(new Kiddi.Views.BaseDistrict(s).render());this.$el.html(""),this.$el.removeAttr("disabled"),this.renderSubviews(r)}return this}},i.prototype.onDistrictChanged=function(){var t,e;return e=this.$el.val(),t=this.districts.get(e),null!=t?this.updateLatLngIfNeeded(t):void 0},i.prototype.updateLatLngIfNeeded=function(t){return null!=this.$lat&&null!=this.$lng?(this.$lat.val(t.get("lat")),this.$lng.val(t.get("lng")),this.$lat.change()):void 0},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;Kiddi.Views.DashboardSideMenu=function(i){function n(){return this.onScroll=t(this.onScroll,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.el="#dashboard-side-menu",n.prototype.initialize=function(){return this.hasRootElement()?(this.$document=$(document),this.$topBar=$("#top-bar"),this.$content=this.$el.next(),this.topOffset=this.$el.offset().top,this.$topBar.length&&(this.topOffset-=58),this.$document.on("scroll",this.onScroll),this.onScroll()):void 0},n.prototype.onScroll=function(){if(this.$document.scrollTop()>this.topOffset){if(this.$el.addClass("fixed"),this.$topBar.length)return this.$topBar.addClass("fixed"),this.$content.addClass("top-bar-fixed")}else if(this.$el.removeClass("fixed"),this.$topBar.length)return this.$topBar.removeClass("fixed"),this.$content.removeClass("top-bar-fixed")},n}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.FindListingFiltersArea=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="#filters-area",i.prototype.events={"click button":"onDeselectAreaClicked"},i.prototype.initialize=function(t){return i.__super__.initialize.call(this,t),this.options=t,this.filter=this.options.filter,this.pagination=this.options.pagination,this.filter.on("change:slug",function(t){return function(){return t.filter.get("slug")?void 0:(delete window.area_name,t.hideFiltersHorizontalBar())}}(this))},i.prototype.onDeselectAreaClicked=function(t){return t.preventDefault(),this.deselectArea(),!1},i.prototype.deselectArea=function(){return this.pagination.resetCurrents(),delete window.area_name,this.hideFiltersHorizontalBar(),this.filter.set("loadListings",0),this.filter.unset("slug"),this.filter.set("loadListings",1)},i.prototype.hideFiltersHorizontalBar=function(){return $(this.el).length>0?$(this.el).remove():void 0},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.FindListingFiltersPrice=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="#filters-price",i.prototype.$input="#price-slider",i.prototype.$minPrice="#min-price",i.prototype.$maxPrice="#max-price",i.prototype.initialize=function(t){return i.__super__.initialize.call(this,t),this.options=t,this.filter=this.options.filter,this.pagination=this.options.pagination,"string"==typeof this.$input&&(this.$input=$(this.$input)),this.$minPrice=$(this.$minPrice),this.$maxPrice=$(this.$maxPrice),this.$input?(this.priceSlider=this.$input.slider({}),this.setPricesIfNeeded(),this.$input.on("slideStop",function(t){return function(){return t.selectedPricesChanged()}}(this)),this.$input.on("change",function(t){return function(){return t.changedPriceRangeSelection()}}(this))):void 0},i.prototype.setPricesIfNeeded=function(){var t;return this.priceSlider&&this.filter.get("min_price")&&this.filter.get("max_price")?(t=[this.filter.get("min_price"),this.filter.get("max_price")],this.priceSlider.slider("setValue",t),this.changedPriceRangeSelection()):void 0},i.prototype.selectedPricesChanged=function(){var t;return this.priceSlider&&(t=this.priceSlider.slider("getValue"),2===t.length)?(this.filter.set("loadListings",0),this.pagination.resetCurrents(),this.filter.setPage(1),this.filter.set({min_price:t[0],max_price:t[1]}),this.filter.set("loadListings",1)):void 0},i.prototype.changedPriceRangeSelection=function(){var t;return this.priceSlider&&(t=this.priceSlider.slider("getValue"),2===t.length)?(this.$minPrice.text(t[0]+"k"),this.$maxPrice.text(t[1]+"k")):void 0},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.FindListing=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.events={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",click:"onClick"},i.prototype.onClick=function(t){var e;return e=t.target.tagName,"A"!==e&&"FIGURE"!==e?this.mapState.revealItem(this.listing):void 0},i.prototype.onMouseEnter=function(){return this.mapState.highlightItem(this.listing)},i.prototype.onMouseLeave=function(){return this.mapState.highlightItem(null)},i}(Kiddi.Views.BaseListing)}.call(this),function(){Kiddi.Views.FindListings=Kiddi.Views.Base.extend({el:$("#discover-results"),resultsCap:Kiddi.Utilities.Basics.resultsCap(),cplListingRating:Kiddi.Utilities.Basics.cplListingRating(),maxSponsoredListings:Kiddi.Utilities.Basics.maxSponsoredListings(),maxListingsBeforeCPL:Kiddi.Utilities.Basics.maxListingsBeforeCPL(),initialize:function(t){return this.options=t,this.restartShowingCPLListings=this.maxSponsoredListings+this.maxListingsBeforeCPL,this.subviews=[],this.filter=this.options.filter,this.listings=this.options.listings,this.mapState=this.options.mapState,this.pagination=this.options.pagination,this.perPage=this.pagination.get("perPage"),this.canUpdateSlugs=null==window.fetched_coords,this.listingLoaded=this.listings.loaded,this.hasListings=!1,this.filter.on("change",function(t){return function(){return t.canUpdateSlugs=!0,t.filter.hasChanged("slug")&&!t.isMobile()?t.setVerticalScroll():void 0}}(this)),this.listings.on("loaded",function(t){return function(){return t.hasListings=!0,t.canUpdateSlugs&&t.updateCitySlug(),t.listingLoaded=!0,t.render()}}(this)),this.listings.on("loading",function(t){return function(){return t.hasListings&&t.$el.html("").append(t.generateLoadingIndicator()),t.hasListings=!1,t.listingLoaded=!1}}(this)),this.pagination.on("change",function(t){return function(){return t.listingLoaded=!1,t.filter.set("loadListings",0),t.filter.setPage(t.pagination.get("current")),t.filter.set("loadListings",1)}}(this)),this.isMobile()||($(window).resize(function(t){return function(){return t.setVerticalScroll()}}(this)),this.setVerticalScroll()),this.initTrackClickListeners()},render:function(){var t,e,i,n,o,s,r,a,l,u,c,h,d,p,f,g,m,v,y;if(this.listingLoaded){for(this.$(".loading").hide(),this.totalListings=this.listings.totalListings,this.totalListings>this.resultsCap&&(this.totalListings=this.resultsCap),0===this.pagination.get("total")&&(p=Math.ceil(this.totalListings/this.perPage),this.pagination.set({total:this.totalListings,pages:p},{silent:!0}),this.options.pubsub.trigger("update:updateCounter")),r=this.pagination.fromIndex(),y=[],g=this.listings.customAds,l=a=0,c=g.length;c>a;l=++a)n=g[l],y.push(this.getCustomAdViewBy(n,l));for(o=[],i=0,m=this.listings.models,l=u=0,h=m.length;h>u&&(d=m[l],i=l+1+r,!(i>this.resultsCap));l=++u)v={listing:d,id:"discover-listing-"+d.id,index:i,filter:this.filter,mapState:this.mapState},this.storeIntoDelayingSubViews(i,d)?o.push(v):(this.addToSubViews(i,o)&&(this.addDelayingSubViews(y,o,i),o=[]),v.index-=o.length,y.push(new Kiddi.Views.FindListing(v).render()));return this.addDelayingSubViews(y,o,i+1),0===this.totalListings&&(s=new Kiddi.Views.FindListingNoListings(_.clone(this.options)).render(),y.push(s)),this.$el.html("").removeClass("greyed-over"),this.$el.scrollTop(),this.renderSubviews(y),this.$el.find('[data-toggle="tooltip"]').tooltip(),0!==this.totalListings&&this.totalListings>this.perPage&&(e=React.createFactory(Kiddi.Components.PaginationControls),f=e({model:this.pagination}),t=$("<div></div>"),t.appendTo("#discover-results"),ReactDOM.render(f,t[0])),this}},setVerticalScroll:function(){var t;return t=$(window).height()-this.$el.offset().top,this.$el.css({height:t,minHeight:t})},updateCitySlug:function(){var t,e;return(t=this.listings.models[0])?(e={city:t.get("city_slug")},this.filter.set(e,{silent:!0}),this.filter.hasChanged()?this.options.pubsub.trigger("set:citySlug"):void 0):void 0},generateLoadingIndicator:function(){var t;return t=$("<div></div>").addClass("sk-spinner").append($("<div></div>").addClass("dot1")).append($("<div></div>").addClass("dot2")),$("<div></div>").addClass("loading").append(t)},initTrackClickListeners:function(){var t;return t={selectors:"#discover-results",pagination:this.pagination},this.listingEvents=new Kiddi.Views.ListingKiddiEvents(t)},isCPLListing:function(t){var e;return e=t.get("rating"),null!=e&&e>=this.cplListingRating},storeIntoDelayingSubViews:function(t,e){return t>this.maxSponsoredListings&&t<=this.restartShowingCPLListings&&this.isCPLListing(e)},addToSubViews:function(t,e){return t>this.restartShowingCPLListings&&e.length>0},addDelayingSubViews:function(t,e,i){var n,o,s,r,a,l;for(n=e.length,r=[],a=o=0,s=e.length;s>o;a=++o)l=e[a],l.index=i-n+a,r.push(t.push(new Kiddi.Views.FindListing(l).render()));return r},getCustomAdViewBy:function(t,e){var i;return i={id:"custom-ad-"+t.slug,ad:t,index:e+1,section:"discover-banner-ad"},this.adWithHtmlCode(t)?(i.section="discover-html-code-ad",new Kiddi.Views.HtmlCodeAd(i).render()):new Kiddi.Views.CustomAd(i).render()},adWithHtmlCode:function(t){return null!=t.html_code&&t.html_code.length>0}})}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.FindListingBaseMap=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="#discover-map-canvas",i.prototype.events={"click #map-refresh-btn":"onRefreshClicked"},i.prototype.numberOfListings=20,i.prototype.cplListingRating=Kiddi.Utilities.Basics.cplListingRating(),i.prototype.maxSponsoredListings=Kiddi.Utilities.Basics.maxSponsoredListings(),i.prototype.maxListingsBeforeCPL=Kiddi.Utilities.Basics.maxListingsBeforeCPL(),i.prototype.initialize=function(t){return i.__super__.initialize.call(this,arguments),this.restartShowingCPLListings=this.maxSponsoredListings+this.maxListingsBeforeCPL,this.options=t,this.filter=this.options.filter,this.mapState=this.options.mapState,this.listings=this.options.listings,this.currentLocations=this.options.currentLocations,this.pagination=this.options.pagination,this.askedForLocation=!1,this.defaultLocation=Kiddi.Cartography.VietNam.defaultLocation,this.fetchedLocation=!1,this.fetchedListings=!1,this.map=null,this.$searchInput=$("#location"),this.showedOutsideCoverageModal=!1,this.filter.get("lat")&&this.filter.get("lng")||this.filter.setLocation(this.defaultLocation.lat,this.defaultLocation.lng,"default"),this.filter.on("change",function(t){return function(){return t.updateMap(),t.checkCoverage("Search")}}(this)),this.listings.on("loading",function(t){return function(){return null!=t.map?t.map.showLoader():void 0}}(this)),this.listings.on("loaded",function(t){return function(){return null!=t.map&&t.map.hideLoader(),t.updateMap()}}(this)),this.checkCoverage("Search")},i.prototype.askForLocation=function(){var t,e;return this.askedForLocation?!1:(this.askedForLocation=!0,this.canAskForLocation()?(e=function(t){return function(e){return t.fetchedLocation=!0,e&&e.coords?(t.filter.setLocation(e.coords.latitude,e.coords.longitude,"browser"),t.createMap(),t.checkCoverage("Location")):t.fetchCurrentLocation()}}(this),t=function(t){return function(){return t.fetchCurrentLocation()}}(this),navigator.geolocation.getCurrentPosition(e,t),!0):!1)},i.prototype.canAskForLocation=function(){return navigator.geolocation?!0:!1},i.prototype.checkCoverage=function(){},i.prototype.createMap=function(){},i.prototype.disableRefreshButton=function(){var t;return t=$("#map-refresh-btn"),t.hasClass("enabled")&&(t.removeClass("enabled"),!this.isMobile())?t.tooltip("hide"):void 0},i.prototype.enableRefreshButton=function(){var t;return t=$("#map-refresh-btn"),t.hasClass("enabled")||(t.addClass("enabled"),this.isMobile())?void 0:t.tooltip("show")},i.prototype.fetchListings=function(){return this.fetchedListings?void 0:(this.fetchedListings=!0,this.listings.load(this.filter))},i.prototype.fetchCurrentLocation=function(){var t;if(!this.fetchedLocation)return this.fetchedLocation=!0,t=function(t){return function(){var e;return e=t.currentLocations.getCurrent(),null!=e&&t.filter.setLocation(e.get("lat"),e.get("lng"),"server"),t.createMap(),t.fetchListings(),t.checkCoverage("Location")}}(this),this.currentLocations.fetchCurrent().done(t).fail(t)},i.prototype.fetchCurrentLocationLater=function(){return setTimeout(_.bind(this.fetchCurrentLocation,this),5e3)},i.prototype.getLocation=function(){return this.shouldDetectLocation()?this.canAskForLocation()?(this.askForLocation(),this.fetchCurrentLocationLater()):this.fetchCurrentLocation():(this.createMap(),this.fetchListings())},i.prototype.latLng=function(){return new google.maps.LatLng(this.filter.get("lat"),this.filter.get("lng"))},i.prototype.onMapDragged=function(){return this.enableRefreshButton(),this.updateSearchContent()
},i.prototype.onMapZoomed=function(){return this.enableRefreshButton()},i.prototype.onRefreshClicked=function(t){var e;return t.preventDefault(),e=this.map.getCenter(),this.pagination.resetCurrents(),this.filter.set("loadListings",0),this.filter.get("slug")&&this.filter.unset("slug"),this.filter.setLocation(e.lat(),e.lng(),"map"),this.filter.set("loadListings",1)},i.prototype.render=function(){return this.getLocation(),this.updateMap(),this},i.prototype.shouldDetectLocation=function(){return!1},i.prototype.updateMap=function(){var t,e;if(this.map)return e=this.pagination.fromIndex(),t="pagination"===this.mapState.get("mode"),this.setListingMapIndex(),this.map.drawItems(this.listings.models,{fitToBounds:t,fromIndex:e}),this.disableRefreshButton(),this.map.updateLocationMarker(this.latLng())},i.prototype.updateSearchContent=function(){return this.$searchInput.val()?this.$searchInput.val(I18n.find_listing.map.current_map_view):void 0},i.prototype.setCenter=function(t){return this.map?this.map.setCenter(t):void 0},i.prototype.setListingMapIndex=function(){var t,e,i,n,o,s,r,a;if(i=this.pagination.fromIndex(),1>i){for(t=0,e=[],a=this.listings.models,o=n=0,s=a.length;s>n;o=++n)r=a[o],t=o,this.storeIntoDelayingModels(t,r)?e.push(r):(this.changeListingMapIndex(t,e)&&(this.setDelayingModelsMapIndex(e,t),e=[]),r.set("mapIndex",t-e.length));return this.setDelayingModelsMapIndex(e,t+1)}},i.prototype.isCPLListing=function(t){var e;return e=t.get("rating"),null!=e&&e>=this.cplListingRating},i.prototype.storeIntoDelayingModels=function(t,e){return t>=this.maxSponsoredListings&&t<this.restartShowingCPLListings&&this.isCPLListing(e)},i.prototype.changeListingMapIndex=function(t,e){return t>=this.restartShowingCPLListings&&e.length>0},i.prototype.setDelayingModelsMapIndex=function(t,e){var i,n,o,s,r,a;for(i=t.length,a=[],o=n=0,s=t.length;s>n;o=++n)r=t[o],a.push(r.set("mapIndex",e-i+o));return a},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.FindListingNoListings=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.attributes={"class":"no-results"},i.prototype.template=JST["find_listing/no_results"],i.prototype.initialize=function(t){return i.__super__.initialize.call(this,arguments),this.options=t,this.mapState=this.options.mapState,this.filter=this.options.filter,this.otherListings=new Kiddi.Collections.FindListings([],{unlimitedDistance:!0}),this.otherListings.load(this.filter),this.otherListings.on("loaded",function(t){return function(){return t.renderClosestResults()}}(this))},i.prototype.render=function(){return i.__super__.render.call(this,arguments),this.$otherResults=this.$("#other-results"),this.track("Find Listing: No Results",{lat:this.filter.get("lat"),lng:this.filter.get("lng")}),this},i.prototype.renderClosestResults=function(){var t,e,i,n;if(this.otherListings.loaded){for(this.isMobile()||window.discover_map.drawItems(this.otherListings.models,{fitToBounds:!1}),n=this.otherListings.map(function(t){return function(e,i){var n;return n="discover-listing-"+e.id,new Kiddi.Views.FindListing({listing:e,id:n,index:i+1,filter:t.filter,mapState:t.mapState}).render()}}(this)),this.$otherResults.html(""),t=0,e=n.length;e>t;t++)i=n[t],this.$otherResults.append(i.el);return this}},i.prototype.templateData=function(){return{}},i}(Kiddi.Views.Base)}.call(this),function(){Kiddi.Views.FindListingResultsPepper=Kiddi.Views.Base.extend({attributes:{"class":"results-pepper"},template:JST["find_listing/results_pepper"],initialize:function(t){this.options=t}})}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.FindListingSearch=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="#discover-search",i.prototype.events={click:"onClick","focus #location":"onFocus","focusout #location":"onFocusOut"},i.prototype.$input="#location",i.prototype.initialize=function(t){return i.__super__.initialize.call(this,t),this.options=t,this.filter=this.options.filter,this.defaultLocation=Kiddi.Cartography.VietNam.defaultLocation,this.setDefaultSearchValueIfNeeded()},i.prototype.setDefaultSearchValueIfNeeded=function(){return this.filter.get("query")&&this.defaultLocation.name||parseFloat(this.filter.get("lat"))===this.defaultLocation.lat&&parseFloat(this.filter.get("lng"))===this.defaultLocation.lng&&this.filter.set({query:this.defaultLocation.name}),this.filter&&this.filter.get("query")?this.search.typeahead.typeahead("val",this.filter.get("query")):void 0},i.prototype.onClick=function(){return this.$(".inner").hasClass("highlight")?void 0:this.$(".inner").addClass("highlight")},i.prototype.onFocus=function(){return this.$(".inner").hasClass("highlight")||this.$(".inner").addClass("highlight"),this.$input.one("mouseup",function(t){return function(){return t.$input.select(),!1}}(this)).select(),null!=this.$input.setSelectionRange?setTimeout(function(t){return function(){return t.$input.setSelectionRange(0,t.$input.value.length)}}(this),1):void 0},i.prototype.onFocusOut=function(){return this.$(".inner").removeClass("highlight"),null!=this.filter?this.filter.set("query",this.$input.val()):void 0},i.prototype.selectGooglePlace=function(t){var e,i;return(null!=(i=t.geometry)?i.location:void 0)?(e=t.geometry.location,this.options.mapState.set({mode:"pagination"}),this.setParams(e.lat(),e.lng(),t.name)):void 0},i.prototype.selectKiddi=function(t){return null!=t.lat&&null!=t.lng?this.setParams(t.lat,t.lng,t.label):void 0},i.prototype.setParams=function(t,e,i){return this.options.pagination.resetCurrents(),this.setLocation(t,e,i)},i.prototype.setLocation=function(t,e,i){return this.options.filter.set("loadListings",0),this.options.filter.get("slug")&&this.options.filter.unset("slug"),this.options.filter.setLocation(t,e,"search").set("query",i).set("loadListings",1)},i}(Kiddi.Views.Search)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.FindListingTitleBar=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="#discover-title-bar",i.prototype.resultsCap=Kiddi.Utilities.Basics.resultsCap(),i.prototype.initialize=function(t){return this.options=t,this.filter=this.options.filter,this.listings=this.options.listings,this.options.pubsub.on("update:updateCounter",_.bind(this.updateCounter,this)),this.listings.on("loaded",function(t){return function(){return t.updateText()}}(this))},i.prototype.updateCounter=function(){var t,e;return this.totalListings=this.listings.totalListings,t=$("#discover-results-counter"),1===this.totalListings?t.text(I18n.find_listing.title_bar.result.one):(e=this.totalListings>=this.resultsCap?"+":"",this.totalListings>this.resultsCap&&(this.totalListings=this.resultsCap),t.text(I18n.find_listing.title_bar.result.other.replace("{nb_results}",""+this.totalListings+e)))},i.prototype.updateText=function(){var t,e;return t=$("#discover-title-bar h1"),this.filter.get("query")?t.text(I18n.find_listing.title_bar.best_results_near.replace("{location}",this.filter.get("query"))):this.filter.get("slug")&&window.area_name?t.text(I18n.find_listing.title_bar.best_results_in.replace("{location}",window.area_name)):(e=this.listings.models[0],t.text(e?I18n.find_listing.title_bar.best_results_in.replace("{location}",e.get("city_name")):I18n.find_listing.title_bar.best_results_near_me))},i}(Kiddi.Views.Base)}.call(this),function(){Kiddi.Views.FacebookChat=Kiddi.Views.Base.extend({el:$("#facebook-inbox"),events:{"click .facebook-inbox-tab":"toggleFacebookChat"},initialize:function(){return this.cacheDOMElements()},toggleFacebookChat:function(t){return t.preventDefault(),null!=this.$facebookInboxFrame&&this.$facebookInboxFrame.toggle(),!1},cacheDOMElements:function(){return this.$facebookInboxFrame=this.$("#facebook-inbox-frame")}})}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.FeedbackIndicator=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="#feedback-indicator",i.prototype.initialize=function(){},i.prototype.render=function(t,e){return null==e&&(e="notice"),window.fadeTimeout&&clearTimeout(window.fadeTimeout),this.$el.hide().removeClass().addClass(e).html(t).fadeIn(),window.fadeTimeout=setTimeout(function(t){return function(){return t.$el.fadeOut()}}(this),3e3),this},i}(Kiddi.Views.Base)}.call(this),function(){Kiddi.Views.Header=Kiddi.Views.Base.extend({el:"#nav-header",events:{"click #dashboard-link":"showSignupIfNeeded"},initialize:function(){return this.login=new Kiddi.Views.Login,this.signup=new Kiddi.Views.Signup,this.logged_out=new Kiddi.Views.LoggedOut({login:this.login,signup:this.signup}),this.search=new Kiddi.Views.HeaderSearch,this.menu=new Kiddi.Views.UserMenu,this.listenTo(Kiddi.app,"user:change",this.render)},showSignupIfNeeded:function(t){return this.isLoggedOut()?(t.preventDefault(),this.pleaseSignIn(_.bind(this.gotoDashboardPage,this)),!1):void 0},gotoDashboardPage:function(){var t;return t=this.$("#dashboard-link").attr("href"),Kiddi.Utilities.Basics.redirectToLocation(t)},render:function(){var t,e,i,n;return n=Kiddi.app.user,t=this.$("#dashboard-link"),null!=n&&n.isLoggedIn()&&(n.isOperator()||n.isAdmin())?(e=t.attr("data-branches-url"),i=t.attr("data-branches-title")):(e=t.attr("data-new-brand-url"),i=t.attr("data-new-brand-title")),t.attr("href",e),t.find("strong").html(i),this}})}.call(this),function(){Kiddi.Views.LoggedOut=Kiddi.Views.Base.extend({el:$("#logged-out"),events:{"click #login-link":"showLogin","click #signup-link":"showSignup","click #new-brand":"showSignupIfNeeded"},initialize:function(t){this.options=t},showLogin:function(t){return t.preventDefault(),this.options.login.render(),!1},showSignup:function(t){return t.preventDefault(),this.options.signup.render(),!1}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;Kiddi.Views.Login=function(i){function n(){return this.onModalHidden=t(this.onModalHidden,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.el=$("#login"),n.prototype.events={"submit form":"onSubmit"},n.prototype.initialize=function(){return n.__super__.initialize.call(this,arguments),this.callback=null,this.$el.on("hidden.bs.modal",this.onModalHidden)},n.prototype.onError=function(){return this.$(".form-group").addClass("has-error"),this.$(".errors").removeClass("hide"),this.$(".errors p").text(I18n.global.login.unable_to_login)},n.prototype.onModalHidden=function(t){return null!=$(t.target).data("signed-in")?(null!=this.callback&&this.callback(),this.callback=null):void 0},n.prototype.onSubmit=function(t){var e,i;return t.preventDefault(),e=this.$("form"),i={data:e.serialize(),dataType:"JSON",error:_.bind(this.onError,this),success:_.bind(this.onSuccess,this),type:"POST",url:e.attr("action")},$.ajax(i),!1},n.prototype.onSuccess=function(t,e,i){var n,o,s;return(null!=(n=t.meta)?n.success:void 0)?(s=i.getResponseHeader("X-CSRF-Token"),$("meta[name='csrf-token']").attr("content",s),Cookies.set("XSRF-TOKEN",s),this.$el.data("signed-in",""),this.$el.modal("hide"),Kiddi.app.setUser(new Kiddi.Models.AuthenticatedUser(t.user)),this.analytics.identify()):(this.$(".form-group").addClass("has-error"),this.$(".errors").removeClass("hide"),this.$(".errors p").text(null!=(o=t.meta)?o.errors:void 0))},n.prototype.render=function(){return this.$el.modal("show"),this.$(".errors").addClass("hide"),this.$(".form-group").removeClass("has-error"),this.$(".form-control").first().focus(),this},n}(Kiddi.Views.Base)}.call(this),function(){Kiddi.Views.HeaderSearch=Kiddi.Views.Search.extend({el:"#nav-header .search-nav",$input:"#nav-header #location-nav"})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;Kiddi.Views.Signup=function(i){function n(){return this.onSubmit=t(this.onSubmit,this),this.onModalHidden=t(this.onModalHidden,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.el=$("#signup"),n.prototype.events={"submit form":"onSubmit"},n.prototype.initialize=function(){return n.__super__.initialize.call(this,arguments),this.callback=null,this.$el.on("hidden.bs.modal",this.onModalHidden)},n.prototype.onError=function(){return this.trackEvent("Sign Up Error"),this.$(".errors").removeClass("hide"),this.$(".errors p").text(I18n.global.signup.unable_sign_up)},n.prototype.onModalHidden=function(){return null!=this.callback&&this.callback(),this.callback=null},n.prototype.onSubmit=function(t){var e,i;return t.preventDefault(),this.trackEvent("Sign Up Attempt"),e=this.$("form"),i={data:e.serialize(),dataType:"JSON",error:_.bind(this.onError,this),success:_.bind(this.onSuccess,this),type:"POST",url:e.attr("action")},$.ajax(i),!1},n.prototype.onSuccess=function(t,e,i){var n,o,s,r,a,l,u,c,h;if(null!=(l=t.meta)?l.success:void 0)return h=i.getResponseHeader("X-CSRF-Token"),$("meta[name='csrf-token']").attr("content",h),Cookies.set("XSRF-TOKEN",h),this.$el.modal("hide"),Kiddi.app.setUser(new Kiddi.Models.AuthenticatedUser(t.user)),this.analytics.alias();for(n=(null!=(u=t.meta)?u.errors:void 0)||{},this.$(".form-group").removeClass("has-error"),c=_.keys(n),o=0,r=c.length;r>o;o++)s=c[o],this.$("#signup_"+s).closest(".form-group").addClass("has-error");return a=_.values(n).join(", "),this.$(".errors p").text(a),this.$(".errors").removeClass("hide")},n.prototype.render=function(){return this.trackEvent("Please Sign Up",{action:"Header"}),this.$el.modal("show"),this.$(".errors").addClass("hide"),this.$(".form-group").removeClass("has-error"),this.$(".form-control").first().focus(),this},n.prototype.trackEvent=function(t){return this.trackEventWithData(t)},n}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.Homepage=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="body",i.prototype.initialize=function(t){var e;return i.__super__.initialize.call(this,arguments),new Kiddi.Views.HomepageSearch(_.clone(t)).render(),e={selectors:"body"},new Kiddi.Views.ListingKiddiEvents(e)},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.HomepageSearch=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="#search-box",i.prototype.$input=$("#location"),i.prototype.events={click:"onClick","focus #location":"onFocus","submit form":"onSubmit",'click input[type="submit"]':"onSearchClicked"},i.prototype.initialize=function(){var t;return i.__super__.initialize.call(this,arguments),this.pubsub=_.extend({},Backbone.Events),this.filter=new Kiddi.Models.FindListingFilter,t={pubsub:this.pubsub,filter:this.filter},this.isMobile()?void 0:(new Kiddi.Models.FindListingUrlFilterHash(t),this.$input.focus())},i.prototype.buildNavigateToUrl=function(){var t,e;return this.filter.get("kiddiUrl")?e=this.filter.get("kiddiUrl"):(t={},this.filter.get("lat")&&(t.lat=this.filter.get("lat")),this.filter.get("lng")&&(t.lng=this.filter.get("lng")),this.filter.get("query")&&(t.q=this.filter.get("query")),e="/tim-kiem?"+$.param(t)),e},i.prototype.navigateTo=function(){return i.__super__.navigateTo.call(this,this.buildNavigateToUrl())},i.prototype.onClick=function(t){return"commit"!==$(t.target).attr("name")&&this.$input?this.$input.focus():void 0},i.prototype.onFocus=function(){return this.isMobile()?$("html, body").animate({scrollTop:170},400):void 0},i.prototype.onSearchClicked=function(t){return t&&t.preventDefault(),this.navigateTo()},i.prototype.onSubmit=function(t){return t&&t.preventDefault(),i.__super__.onSubmit.call(this,t)},i.prototype.selectGooglePlace=function(t){var e,i,n;return this.filter.unset("kiddiUrl",{silent:!0}),this.navigateToCityPage(t)!==!0&&(null!=(n=t.geometry)?n.location:void 0)?(e=t.geometry.location,i={lat:e.lat(),lng:e.lng(),query:t.name},this.filter.set(i),this.navigateTo()):void 0},i.prototype.selectKiddi=function(t){return this.filter.unset("lat",{silent:!0}),this.filter.unset("lng",{silent:!0}),this.filter.set({query:t.label,kiddiUrl:t.url}),i.__super__.selectKiddi.call(this,t)},i}(Kiddi.Views.Search)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.JournalCategories=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el=$("#journal_category"),i.prototype.events={change:"onOptionChanged"},i.prototype.onOptionChanged=function(){return window.location.href=this.$el.val()},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.BlogPost=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="article.blog",i.prototype.events={"click .at-svc-email":"onSocialShareEmailClicked","click .at-svc-facebook":"onSocialShareFacebookClicked","click .at-svc-pinterest_share":"onSocialSharePinterestClicked","click .at-svc-twitter":"onSocialShareTwitterClicked"},i.prototype.initialize=function(){return i.__super__.initialize.call(this,arguments),this.postSlug=window.post_slug},i.prototype.onSocialShareEmailClicked=function(){return this.track("Blog: Share by Email clicked")},i.prototype.onSocialShareFacebookClicked=function(){return this.track("Blog: Share on Facebook clicked")},i.prototype.onSocialSharePinterestClicked=function(){return this.track("Blog: Share on Pinterest clicked")},i.prototype.onSocialShareTwitterClicked=function(){return this.track("Blog: Share on Twitter clicked")},i.prototype.track=function(t,e,n){return null==e&&(e={}),e.blog_post=this.postSlug,i.__super__.track.call(this,t,e,n)},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.PostEvents=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="article.blog",i.prototype.initialize=function(t){return i.__super__.initialize.call(this,t),this.makeLinksTrackable(),this.initTrackClickListeners()},i.prototype.makeLinksTrackable=function(){var t,e,i,n,o,s;if(o=this.$el.find(".text-content a"),o.length>0){for(n=1,s=[],t=0,e=o.length;e>t;t++)i=o[t],this.isKiddiLink(i)&&($(i).attr("data-track-click","link-to-kiddi"),$(i).attr("data-position",n),s.push(n+=1));return s}},i.prototype.isKiddiLink=function(t){return t.hostname.includes("kiddi.vn")},i.prototype.initTrackClickListeners=function(){var t;return console.log(this.el),console.log(this.$el),t={selectors:"article.blog"},new Kiddi.Views.ListingKiddiEvents(t)},i}(Kiddi.Views.Base)}.call(this),function(){Kiddi.Views.ListingGallery=Kiddi.Views.Gallery.extend({areaName:function(){return window.listing.full_name},baseUrl:function(){return window.listing.url}})}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.ListingSave=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="#fav-btn",i}(Kiddi.Views.Favorite)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.ListingBlogTabs=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el=$("#listing_blog_tabs"),i.prototype.events={change:"onOptionChanged"},i.prototype.onOptionChanged=function(){return window.location.href=this.$el.val()},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.ListingUploadPhotos=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.modalSubtitle=function(){var t;return t=this.listing.get("full_name"),null!=this.brand&&this.isDesktop()&&(t+=", "+this.brand.get("full_name")),t},i}(Kiddi.Views.UploadPhotos)}.call(this),function(){Kiddi.Views.UserEdit=Kiddi.Views.Base.extend({el:$("#form-edit-user"),events:{"keyup  #user_details_attributes_tagline":"countTaglineChars","click  #upload-profile-photo-button":"selectFile","click  #upload-cover-photo-button":"selectFile"},template:JST["user/upload_photos"],initialize:function(){return this.$uploadFormContainer=$("#upload-user-photos-form"),this.$uploadForm=null,this.cloudinary=this.$uploadFormContainer.data(),this.$currentUploadButton=null,this.url=null,this.taglineMaxChars=140},countTaglineChars:function(t){var e;return e=this.taglineMaxChars-t.target.textLength,this.$("#tagline-remaining-chars").text(e)},onCloudinaryError:function(){return this.$("[data-photo-errors]").removeClass("hide"),this.$currentUploadButton.attr("disabled",!1)},onCloudinarySubmit:function(){return this.$("[data-photo-errors], [data-photo-success]").addClass("hide"),this.$currentUploadButton.attr("disabled",!0),!0},onCloudinarySuccess:function(){var t,e;return t={photo:this.$uploadForm.find("input[name='photo_url']").val()},e={data:t,dataType:"JSON",error:_.bind(this.onKiddiError,this),success:_.bind(this.onKiddiSuccess,this),complete:_.bind(this.onKiddiComplete,this),type:"PUT",url:this.url},$.ajax(e)},onKiddiError:function(t){var e,i;try{i=t.responseJSON.message||t.responseJSON.meta.message}catch(n){e=n,i=null}return null==i&&(i="Xin l\u1ed7i! \u0110\xe3 x\u1ea3y ra l\u1ed7i khi t\u1ea3i l\xean \u1ea3nh c\u1ee7a b\u1ea1n. H\xe3y th\u1eed l\u1ea1i l\u1ea7n n\u1eefa!"),this.$("[data-photo-errors]").text(i).removeClass("hide")},onKiddiSuccess:function(t){return t.thumb_url?(this.$currentUploadButton.parent().find("img").attr("src",t.thumb_url),"upload-profile-photo-button"===this.$currentUploadButton.attr("id")&&$("#user-menu .avatar img").attr("src",t.thumb_url),this.$("[data-photo-success]").removeClass("hide")):void 0},onKiddiComplete:function(){return this.$currentUploadButton.attr("disabled",!1)},render:function(){var t;return this.cloudinary&&(t={cloudinary:this.cloudinary},this.$uploadFormContainer.html(this.template(t)),this.$uploadForm=$("#user-photo-file-form"),this.setupUploader()),this},selectFile:function(t){return console.log("selectFile"),t.preventDefault(),this.$currentUploadButton=$(t.target),this.url=this.$currentUploadButton.data("url"),this.$uploadForm.find('input[type="file"]').click(),!1},setupUploader:function(){var t,e;return t=80,e={acceptFileTypes:/(\.|\/)(jpe?g|png)$/i,autoUpload:!0,dataType:"JSON",disableExifThumbnail:!0,maxFileSize:1e7,previewMaxWidth:t,previewMaxHeight:t,previewCrop:!0,singleFileUploads:!0},this.$uploadForm.cloudinary_fileupload?(this.uploader=this.$uploadForm.cloudinary_fileupload(e),this.uploader.on("fileuploadsubmit",_.bind(this.onCloudinarySubmit,this)),this.uploader.on("fileuploaddone",_.bind(this.onCloudinarySuccess,this)),this.uploader.on("fileuploadfail",_.bind(this.onCloudinaryError,this))):void 0}})}.call(this),function(){Kiddi.Views.UserExpertiseList=Kiddi.Views.Base.extend({el:$("#profile-content-results"),initialize:function(t){return this.options=t,this.expertises=this.options.expertises,this.subviews=[]},render:function(){var t;return this.expertises.loaded?(t=this.expertises.map(function(t){return function(e,i){var n;return e instanceof Kiddi.Models.Tip?(n=_.extend({index:i,tip:e},t.options),new Kiddi.Views.UserTip(n).render()):(n=_.extend({index:i,photo:e},t.options),new Kiddi.Views.UserPhoto(n).render())}}(this)),this.renderSubviews(t)):this}})}.call(this),function(){Kiddi.Views.UserFavorite=Kiddi.Views.Base.extend({template:JST["user/favorite"],initialize:function(t){this.options=t},render:function(){var t;return t=this.template(this.templateData()),this.setElement(t),this},templateData:function(){return{favorite:this.options.favorite}}})}.call(this),function(){Kiddi.Views.UserFavoriteList=Kiddi.Views.Base.extend({el:$("#profile-content-results"),initialize:function(t){return this.options=t,this.favorites=this.options.favorites,this.subviews=[]},render:function(){var t;return this.favorites.loaded?(t=this.favorites.map(function(t){return function(e,i){var n;return n=_.extend({index:i,favorite:e},t.options),new Kiddi.Views.UserFavorite(n).render()}}(this)),this.renderSubviews(t)):this}})}.call(this),function(){Kiddi.Views.UserPhoto=Kiddi.Views.Base.extend({template:JST["user/photo"],initialize:function(t){this.options=t},render:function(){var t;return t=this.template(this.templateData()),this.setElement(t),this},templateData:function(){var t;return t={photo:this.options.photo,size:this.getSize(this.options.index)}},getSize:function(t){var e;return e=t%9,_.contains([3,6,7],e)?"large":"normal"}})}.call(this),function(){Kiddi.Views.UserProfile=Kiddi.Views.Base.extend({el:$("#profile-content"),events:{"click  [data-expertises]":"onExpertisesTabClicked","click  [data-favorites]":"onFavoritesTabClicked"},initialize:function(t){return this.options=t,this.resultsBlock=$("#profile-content-results"),this.loadingBlock=this.$(".loading"),this.noResultsBlock=this.$(".no-result"),this.expertises=this.options.expertises,this.favorites=this.options.favorites,this.expertiseList=new Kiddi.Views.UserExpertiseList(_.clone(this.options)),this.favoriteList=new Kiddi.Views.UserFavoriteList(_.clone(this.options)),null!=window.location.hash&&("#yeu-thich"===window.location.hash?(this.switchMenuTo("favorites"),this.favorites.load()):this.expertises.load()),this.listenTo(this.expertises,"loaded",function(t){return function(){return t.resultsBlock.html(""),t.expertiseList.render(),t.onExpertisesLoaded()}}(this)),this.listenTo(this.favorites,"loaded",function(t){return function(){return t.resultsBlock.html(""),t.favoriteList.render(),t.onFavoritesLoaded()}}(this))},hideLoading:function(){return this.loadingBlock.hide(),this.resultsBlock.show()},onExpertisesTabClicked:function(t){return t.preventDefault(),this.showLoading(),this.switchMenuTo("expertises"),this.expertises.load(),!1},onExpertisesLoaded:function(){return 0===this.expertises.length&&$("#no-expertises").show(),this.hideLoading()},onFavoritesTabClicked:function(t){return t.preventDefault(),this.showLoading(),this.switchMenuTo("favorites"),this.favorites.load(),!1},onFavoritesLoaded:function(){return 0===this.favorites.length&&$("#no-favorites").show(),this.hideLoading()},render:function(){return this},showLoading:function(){return this.resultsBlock.hide().html(""),this.loadingBlock.show(),this.noResultsBlock.hide()},switchMenuTo:function(t){return this.$(".nav-pills .active").removeClass("active"),this.$("[data-"+t+"]").parent().addClass("active"),window.location.hash="expertises"===t?"chia-se":"yeu-thich"}})}.call(this),function(){Kiddi.Views.UserTip=Kiddi.Views.Base.extend({template:JST["user/tip"],initialize:function(t){this.options=t},render:function(){var t;return t=this.template(this.templateData()),this.setElement(t),this},templateData:function(){var t;return t={tip:this.options.tip,size:this.getSize(this.options.index)}},getSize:function(t){var e;return e=t%9,_.contains([3,6,7],e)?"large":"normal"}})}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.Brand=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="#brand",i.prototype.events={"click [data-see-all-listings]":"onSeeAllClicked"},i.prototype.initialize=function(t){var e;return i.__super__.initialize.call(this,arguments),this.options=t,new Kiddi.Views.Favorite(_.clone(this.options)).render(),new Kiddi.Views.BrandListings(_.clone(this.options)).render(),new Kiddi.Views.BrandMap(_.clone(this.options)).render(),new Kiddi.Views.BrandPhotos(_.clone(this.options)).render(),new Kiddi.Views.Tips(_.clone(this.options)).render(),new Kiddi.Views.UgcActions(_.clone(this.options)).render(),new Kiddi.Views.Upvote(_.clone(this.options)).render(),new Kiddi.Views.ReadMoreContent({el:this.el}),this.options.listings.load(this.options.brand),e={selectors:"#brand-listings"},new Kiddi.Views.ListingKiddiEvents(e)},i.prototype.onSeeAllClicked=function(t){return t.preventDefault(),$(t.target).hide(),$("#brand-listings").removeClass("truncated")},i}(Kiddi.Views.Base)}.call(this),function(){Kiddi.Views.BrandMap=Kiddi.Views.Base.extend({el:$("#brand-map-canvas"),initialize:function(t){return this.options=t,this.map=null,this.options.listings.on("loading",function(t){return function(){return null!=t.map?t.map.showLoader():void 0}}(this)),this.options.listings.on("loaded",function(t){return function(){return null!=t.map&&t.map.hideLoader(),t.updateMap()}}(this))},createMap:function(){return this.map?void 0:this.map=new Kiddi.Cartography.BrandMap("brand-map-canvas",this.latLng(),this.options.mapState,{brand:this.options.brand})},latLng:function(){var t;return this.options.brand.get("lat")&&this.options.brand.get("lng")?new google.maps.LatLng(this.options.brand.get("lat"),this.options.brand.get("lng")):(t=Kiddi.Cartography.VietNam.defaultLocation,new google.maps.LatLng(t.lat,t.lng))},render:function(){return this.createMap(),this.updateMap(),this},updateMap:function(){return this.map?this.map.drawItems(this.options.listings.models,{fitToBounds:!0}):void 0}})}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.AddTip=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.attributes={"class":"modal modal-fullscreen"},i.prototype.events={"click button.btn-post":"submit","submit form":"onSubmit","keyup #tip_description":"countChars"},i.prototype.tagName="div",i.prototype.template=JST["common/add_tip"],i.prototype.initialize=function(t){return i.__super__.initialize.call(this,arguments),this.options=t,this.tip=this.options.tip,this.title=this.options.title,this.url=this.options.url,this.descMaxChars=4e3},i.prototype.countChars=function(t){var e,i;return e=t.target.textLength,i=this.descMaxChars-e,this.$("#desc-remaining-chars").text(i),this.$("form textarea").val().trim().length<1?this.$("#submit-tip-form").attr("disabled",!0):this.$("#submit-tip-form").removeAttr("disabled")},i.prototype.isFormValid=function(){return this.$("form textarea").val().length>0},i.prototype.onSubmit=function(t){var e,i;return t.preventDefault(),this.isLoggedOut()?this.pleaseSignIn():this.isFormValid()?(i=$(t.currentTarget),e={data:i.serializeArray(),dataType:"JSON",error:_.bind(this.onError,this),success:_.bind(this.onSuccess,this),type:i.attr("method"),url:this.url},$.ajax(e)):this.$("form textarea").focus(),!1},i.prototype.onError=function(t){var e,i;try{i=t.responseJSON.meta.message}catch(n){e=n,i=null
}return null==i&&(i=I18n.common.add_tip.on_error_message),$(".hs-errors").text(i).show()},i.prototype.onSuccess=function(t){return t.meta.success&&this.tip.set(t.tip),this.$el.on("hidden.bs.modal",function(t){return function(){return t.showCreateSuccessModal()}}(this)),this.$el.modal("hide")},i.prototype.render=function(){var t;return this.$el.html(this.template({title:this.title,url:this.url})),t={backdrop:"static",keyboard:!1},this.$el.modal(t),this.$el.modal("show"),this},i.prototype.resetForm=function(){return this.$("form textarea").val("")},i.prototype.submit=function(t){return t.preventDefault(),this.isFormValid()&&this.$("form").submit(),!1},i.prototype.showCreateSuccessModal=function(){var t,e,i,n;return i=new Kiddi.Views.CreateTipSuccess({listing_name:this.title}),e=I18n.common.tips.create_tip_success_title,n={content:i,title:e,cancelText:!1,modalClass:"create-tip-success"},t=new Backbone.BootstrapModal(n).open()},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.Tips=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="#tips",i.prototype.events={"click  .add-tip":"focusNewTip","submit #new-tip form":"createTip","focus  #tip_description":"checkLoggedIn","keyup  #tip_description":"countChars","click  [data-sort-by]":"sortBy"},i.prototype.template=JST["common/tip"],i.prototype.initialize=function(t){return i.__super__.initialize.call(this,arguments),this.options=t,this.listing=this.options.listing,this.brand=this.options.brand,this.tips=this.options.tips,this.tipList=new Kiddi.Views.TipList(_.clone(this.options)),this.descMaxChars=4e3,this.$sortSwitch=this.$(".sort-switch"),this.listenTo(Kiddi.app,"user:change",this.renderAvatar),this.listenTo(this.tips,"loaded",function(t){return function(){return t.tipList.render()}}(this)),this.tips.load(),null!=location.hash?this.scrollToLinkedTip():void 0},i.prototype.checkLoggedIn=function(){return this.isLoggedOut()?this.pleaseSignIn():void 0},i.prototype.countChars=function(t){var e;return e=this.descMaxChars-t.target.textLength,this.$("#desc-remaining-chars").text(e)},i.prototype.focusNewTip=function(t){var e;return t.preventDefault(),e=$("#tips").offset().top-$(".actions-bar").height(),$("html, body").animate({scrollTop:e},200,"swing",function(t){return function(){return t.$("form textarea").focus()}}(this)),!1},i.prototype.isFormValid=function(){return this.$("form textarea").val().length>0},i.prototype.renderAvatar=function(){return this.$("#new-tip img").attr("src",Kiddi.app.user.get("avatar_url"))},i.prototype.resetForm=function(){return this.$("form textarea").val("")},i.prototype.createTip=function(t){var e,i,n;return t.preventDefault(),this.isLoggedOut()?this.pleaseSignIn():this.isFormValid()?(e={url:this.$("form").attr("action"),tip:{description:this.$("form textarea").val()}},n=new Kiddi.Models.Tip(e),i=n.save(),$.when(i).done(function(t){return function(){return i.responseJSON.meta.success?(t.resetForm(),t.onCreateSuccess(i.responseJSON)):t.onCreateFailed(i.responseJSON)}}(this)).fail(function(t){return function(){return t.onCreateFailed(i.responseJSON)}}(this))):this.$("form textarea").focus(),!1},i.prototype.onCreateSuccess=function(t){return this.tips.add(t.tip),this.switchSortByTo("recent"),this.tips.load("recent"),$("#no-contributed-tips").remove(),$("#some-contributed-tips").removeClass("hide"),this.showCreateSuccessModal()},i.prototype.scrollToLinkedTip=function(){var t;return null!=location.hash&&"#tip"===location.hash.substring(0,4)&&(t=$(".tip[data-tip-id='"+location.hash.substring(5)+"']"),t.length)?$("html, body").animate({scrollTop:t.offset().top-100},400):void 0},i.prototype.sortBy=function(t){var e;return t.preventDefault(),e=$(t.target).data("sort-by"),this.switchSortByTo(e),this.tips.load(e),!1},i.prototype.switchSortByTo=function(t){return this.$sortSwitch.find(".active").removeClass("active"),this.$sortSwitch.find("[data-sort-by='"+t+"']").addClass("active")},i.prototype.render=function(){return this},i.prototype.onCreateFailed=function(t){var e,i,n,o;return n=new Kiddi.Views.CreateTipFailed(t),i=I18n.common.tips.create_tip_failed_title,o={content:n,title:i,cancelText:!1,modalClass:"create-tip-failed"},e=new Backbone.BootstrapModal(o).open()},i.prototype.getListingName=function(){var t;return t=I18n.common.tips.default_listing_name,this.listing?t=this.listing.get("full_name"):this.brand&&(t=this.brand.get("full_name")),t},i.prototype.showCreateSuccessModal=function(){var t,e,i,n;return i=new Kiddi.Views.CreateTipSuccess({listing_name:this.getListingName()}),e=I18n.common.tips.create_tip_success_title,n={content:i,title:e,cancelText:!1,modalClass:"create-tip-success"},t=new Backbone.BootstrapModal(n).open()},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.Find=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="body",i.prototype.initialize=function(t){return i.__super__.initialize.call(this,arguments),this.options=t,this.options.pubsub=_.extend({},Backbone.Events),new Kiddi.Models.FindListingUrlFilterHash(this.options),new Kiddi.Views.FindListingFiltersPrice(_.clone(this.options)).render(),new Kiddi.Views.FindListingFiltersArea(_.clone(this.options)).render(),new Kiddi.Views.FindListings(_.clone(this.options)).render(),new Kiddi.Views.FindListingMap(_.clone(this.options)).render(),new Kiddi.Views.FindListingSearch(_.clone(this.options)).render(),new Kiddi.Views.FindListingTitleBar(_.clone(this.options)).render(),this.options.filter.on("change",function(t){return function(){return 1===parseInt(t.options.filter.get("loadListings"))?t.options.listings.load(t.options.filter):void 0}}(this))},i.prototype.render=function(){return this},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.FindListingMap=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.initialize=function(){return this.constructor.__super__.initialize.apply(this,arguments),-1!==getInternetExplorerVersion()?($(window).resize(function(t){return function(){return t.setMapHeightForIE()}}(this)),setTimeout(function(t){return function(){return _.bind(t.setMapHeightForIE,t)}}(this),1e3)):void 0},i.prototype.createMap=function(){return this.map?void 0:($(".dp-left-map-box").removeClass("loading"),this.map=new Kiddi.Cartography.FindListingMap("discover-map-canvas",this.latLng(),this.mapState),this.initMapListeners(),window.discover_map=this.map)},i.prototype.initMapListeners=function(){return this.map.addDragListener(function(t){return function(){return t.onMapDragged()}}(this)),setTimeout(function(t){return function(){return t.map.addZoomListener(function(){return t.onMapZoomed()})}}(this),1e3),this.map.addItemClickListener(_.bind(this.onItemClick,this))},i.prototype.onItemClick=function(t,e){var i,n,o;return i=$("#discover-listing-"+e.id),n=$("#discover-results"),o=n.scrollTop()-200+i.offset().top,n.animate({scrollTop:o})},i.prototype.onMapDragged=function(){return i.__super__.onMapDragged.call(this,arguments)},i.prototype.setMapHeightForIE=function(){var t;return t=$(window).height(),$("#discover-map-canvas > div").css({height:t-98})},i}(Kiddi.Views.FindListingBaseMap)}.call(this),function(){Kiddi.Views.UserMenu=Kiddi.Views.Base.extend({el:"#user-menu",events:{"click [data-user-name]":"onNameClicked","click .avatar":"onAvatarClicked","mouseenter .wrapper":"onMouseEnter","mouseleave .wrapper":"onMouseLeave"},initialize:function(){return this.hasRootElement()?(this.listenTo(Kiddi.app,"user:change",this.render),this.$avatar=this.$(".avatar"),this.$popoverUserMenu=$("#popover-user-menu"),this.$avatar.popover({html:!0,placement:"bottom",trigger:"manual",container:"#user-menu .avatar",content:function(){return $("#popover-user-menu").html()}}).data("bs.popover").tip().addClass("popover-menu")):void 0},onAvatarClicked:function(t){return"IMG"===t.target.tagName?this.$avatar.popover("show"):void 0},onNameClicked:function(t){return t.preventDefault(),this.$avatar.popover("show")},onMouseEnter:function(){return this.fadeTimeout?clearTimeout(this.fadeTimeout):void 0},onMouseLeave:function(){return this.fadeTimeout=setTimeout(function(t){return function(){return t.$avatar.popover("hide")}}(this),500)},render:function(){var t;return this.hasRootElement()?(t=Kiddi.app.user,null!=t&&t.isLoggedIn()?($("#logged-out").addClass("hide"),this.$el.removeClass("hide"),this.$("[data-user-avatar]").attr("src",t.get("avatar_url")),this.$("[data-user-name]").html(t.get("full_name")+" <span class='chevron hs-icon-chevron-small-down'></span>"),this.$popoverUserMenu.find("[data-dashboard-link]").toggleClass("hide",!(t.isOperator()||t.isAdmin())),this.$popoverUserMenu.find("[data-profile-link]").attr("href",t.get("profile_url"))):(this.$el.addClass("hide"),$("#logged-out").removeClass("hide"))):this}})}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.Listing=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="#listing",i.prototype.initialize=function(t){var e;return i.__super__.initialize.call(this,arguments),this.options=t,this.options.pubsub=_.extend({},Backbone.Events),new Kiddi.Views.ListingMap(_.clone(this.options)).render(),new Kiddi.Views.ListingPhotos(_.clone(this.options)).render(),new Kiddi.Views.ListingSave(_.clone(this.options)).render(),new Kiddi.Views.Tips(_.clone(this.options)).render(),new Kiddi.Views.UgcActions(_.clone(this.options)).render(),new Kiddi.Views.Upvote(_.clone(this.options)).render(),new Kiddi.Views.ReadMoreContent({el:this.el}),new Kiddi.Views.ListingUserRequests,new Kiddi.Views.ListingFpEvents,new Kiddi.Views.ListingAhoyEvents,e={selectors:".nearby-listings-container"},new Kiddi.Views.ListingKiddiEvents(e),new Kiddi.Views.ListingTopActionsBar(_.clone(this.options))},i.prototype.render=function(){return this},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.ListingNewsPage=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el=".listing-news",i.prototype.initialize=function(t){return i.__super__.initialize.call(this,arguments),this.options=t,this.options.pubsub=_.extend({},Backbone.Events),new Kiddi.Views.ListingSave(_.clone(this.options)).render(),new Kiddi.Views.UgcActions(_.clone(this.options)).render(),new Kiddi.Views.Upvote(_.clone(this.options)).render(),new Kiddi.Views.ListingUserRequests,new Kiddi.Views.ListingTopActionsBar(_.clone(this.options))},i.prototype.render=function(){return this},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.ListingPhotosPage=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="#photo_grid",i.prototype.events={"click [data-add-photos]":"onAddPhotosClicked","click [data-sort-by]":"sortBy"},i.prototype.initialize=function(t){var e;return i.__super__.initialize.call(this,arguments),this.options=t,this.options.pubsub=_.extend({},Backbone.Events),new Kiddi.Views.ListingSave(_.clone(this.options)).render(),new Kiddi.Views.UgcActions(_.clone(this.options)).render(),new Kiddi.Views.Upvote(_.clone(this.options)).render(),new Kiddi.Views.ListingUserRequests,this.gallery=new Kiddi.Views.ListingGallery(_.clone(this.options)).render(),new Kiddi.Views.CoverPhoto(_.extend({gallery:this.gallery},this.options)).render(),new Kiddi.Views.ListingTopActionsBar(_.clone(this.options)),this.listing=this.options.listing,this.brand=this.options.brand,this.photos=this.options.photos,this.$sortSwitch=this.$(".sort-switch"),e={el:"#contributed-photos",gallery:this.gallery},this.photoList=new Kiddi.Views.PhotoList(_.extend(e,this.options)).render(),this.photos.on("loaded",function(t){return function(){return t.render()}}(this))},i.prototype.onAddPhotosClicked=function(t){return t.preventDefault(),this.isLoggedIn()?this.showAddPhotosModal():this.pleaseSignIn(_.bind(this.showAddPhotosModal,this)),!1},i.prototype.openPhotoIfIdGiven=function(){var t;return t=window.location.href.match(/pic=([^&]+)/),null!=t?this.gallery.open(t[1]):void 0},i.prototype.render=function(){return this.photos.loaded?(this.photos.isEmpty()?(this.$("#no-contributed-photos").removeClass("hide"),this.$("#contributed-photos").addClass("hide")):(this.$("#no-contributed-photos").addClass("hide"),this.$("#contributed-photos").removeClass("hide"),this.openPhotoIfIdGiven()),this.photoList.render(),this):this},i.prototype.showAddPhotosModal=function(){var t;return t={listing:this.listing,cloudinary:$("#add-photo-modal").data(),el:$("#add-photo-modal"),fullPagePhotoGrid:!0,brand:this.brand,photos:this.photos,url:this.$("[data-add-photos]").data("href")},new Kiddi.Views.ListingUploadPhotos(t).render(),!1},i.prototype.sortBy=function(t){var e;return t.preventDefault(),e=$(t.target).data("sort-by"),this.switchSortByTo(e),this.photos.load(e),!1},i.prototype.switchSortByTo=function(t){return this.$sortSwitch.find(".active").removeClass("active"),this.$sortSwitch.find("[data-sort-by='"+t+"']").addClass("active")},i}(Kiddi.Views.Base)}.call(this),function(){Kiddi.Views.ListingPhotosPagePhoto=Kiddi.Views.Base.extend({attributes:{"class":"vibe-grid-box medium photo"},tagName:"div",events:{click:"onClick"},template:JST["photos/listing_photos_page_photo"],initialize:function(t){this.options=t},onClick:function(t){return t.preventDefault(),this.options.gallery.open(this.options.photo.id)},templateData:function(){return{photo:this.options.photo}}})}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.ListingPromotionsPage=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el=".listing-promotions",i.prototype.initialize=function(t){return i.__super__.initialize.call(this,arguments),this.options=t,this.options.pubsub=_.extend({},Backbone.Events),new Kiddi.Views.ListingSave(_.clone(this.options)).render(),new Kiddi.Views.UgcActions(_.clone(this.options)).render(),new Kiddi.Views.Upvote(_.clone(this.options)).render(),new Kiddi.Views.ListingUserRequests,new Kiddi.Views.ListingTopActionsBar(_.clone(this.options))},i.prototype.render=function(){return this},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.ListingReviewsPage=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el=".listing-reviews",i.prototype.initialize=function(t){return i.__super__.initialize.call(this,arguments),this.options=t,this.options.pubsub=_.extend({},Backbone.Events),new Kiddi.Views.ListingSave(_.clone(this.options)).render(),new Kiddi.Views.Tips(_.clone(this.options)).render(),new Kiddi.Views.UgcActions(_.clone(this.options)).render(),new Kiddi.Views.Upvote(_.clone(this.options)).render(),new Kiddi.Views.ReadMoreContent({el:this.el}),new Kiddi.Views.ListingUserRequests,new Kiddi.Views.ListingTopActionsBar(_.clone(this.options))},i.prototype.render=function(){return this},i}(Kiddi.Views.Base)}.call(this),function(){Kiddi.Views.ListingMap=Kiddi.Views.Base.extend({el:"#listing-map-canvas",initialize:function(t){return this.options=t,this.listing=this.options.listing,this.mapState=this.options.mapState,this.map=null,$("[data-scroll-to-map]").on("click",_.bind(this.onScrollToMapClicked,this))},createMap:function(){return this.map=new Kiddi.Cartography.ListingMap("listing-map-canvas",this.latLng(),this.mapState),this.map.setZoom(17)},latLng:function(){return new google.maps.LatLng(this.mapState.get("lat"),this.mapState.get("lng"))},onScrollToMapClicked:function(t){var e;return t.preventDefault(),e=this.$el.offset().top-200,$("html, body").animate({scrollTop:e},400)},render:function(){return this}})}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.ListingPhotos=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el="#vibe-grid",i.prototype.events={"click [data-add-photos]":"onAddPhotosClicked","click [data-photo]":"onPhotoClicked"},i.prototype.initialize=function(t){return i.__super__.initialize.call(this,arguments),this.options=t,this.listing=this.options.listing,this.brand=this.options.brand,this.photos=this.options.photos,this.gallery=new Kiddi.Views.ListingGallery(_.clone(this.options)).render(),new Kiddi.Views.CoverPhoto(_.extend({gallery:this.gallery},this.options)).render(),this.showFlashMessage()},i.prototype.onAddPhotosClicked=function(t){return t.preventDefault(),this.isLoggedIn()?this.showAddPhotosModal():this.pleaseSignIn(_.bind(this.showAddPhotosModal,this)),!1},i.prototype.onPhotoClicked=function(t){var e;return t.preventDefault(),e=$(t.currentTarget).data("photo"),this.gallery.open(e)},i.prototype.openPhotoIfIdGiven=function(){var t;return t=window.location.href.match(/pic=([^&]+)/),null!=t?this.gallery.open(t[1]):void 0},i.prototype.render=function(){return this.openPhotoIfIdGiven(),this},i.prototype.showFlashMessage=function(){var t,e;if(Cookies.get("flashMessage"))return t=$.parseJSON(Cookies.get("flashMessage")),Cookies.remove("flashMessage"),t?(e=decodeURIComponent(escape(t.message)),(new Kiddi.Views.FeedbackIndicator).render(e,t.type)):void 0},i.prototype.showAddPhotosModal=function(){var t;return t={listing:this.listing,cloudinary:$("#add-photo-modal").data(),el:$("#add-photo-modal"),brand:this.brand,photos:this.photos,url:this.$("[data-add-photos]").data("href")},new Kiddi.Views.ListingUploadPhotos(t).render(),!1},i}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;Kiddi.Views.ListingTopActionsBar=function(i){function n(){return this.onScroll=t(this.onScroll,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.el=".top-actions-bar",n.prototype.initialize=function(t){return this.hasRootElement()?(n.__super__.initialize.call(this,arguments),this.options=t,this.galleryOn=!1,this.$document=$(document),this.$listingUserRequests=$(".listing-user-requests"),this.topOffset=this.$listingUserRequests.offset().top+this.$listingUserRequests.height(),this.$document.on("scroll",this.onScroll),this.onScroll(),new Kiddi.Views.TopInfoButtons,this.initGalleryEvents()):void 0},n.prototype.onScroll=function(){if(null!=this.$document)if(this.galleryOn||this.$document.scrollTop()<=this.topOffset){if(this.$el.hasClass("show"))return this.$el.removeClass("show")}else if(!this.$el.hasClass("show"))return this.$el.addClass("show")},n.prototype.initGalleryEvents=function(){return null!=this.options.pubsub?(this.options.pubsub.on("hs_gallery:initialized",_.bind(this.onGalleryOpen,this)),this.options.pubsub.on("hs_gallery:closed",_.bind(this.onGalleryClose,this))):void 0},n.prototype.onGalleryOpen=function(){return this.galleryOn=!0,this.onScroll()},n.prototype.onGalleryClose=function(){return this.galleryOn=!1,this.onScroll()},n}(Kiddi.Views.Base)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;Kiddi.Views.TopInfoButtons=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el=".top-info-buttons",i.prototype.events={"click [data-tution-fee]":"onTutionFeeClicked","click [data-amenities]":"onAmenitiesClicked","click [data-extra-info]":"onExtraInfoClicked"},i.prototype.initialize=function(){return i.__super__.initialize.call(this,arguments),this.deleteButtonsIfNeeded()},i.prototype.onTutionFeeClicked=function(t){var e;return t.preventDefault(),$(".listing-details").length>0?(e=$(".listing-details").offset().top-60,$("html, body").animate({scrollTop:e},400),!1):void 0},i.prototype.onAmenitiesClicked=function(t){var e;return t.preventDefault(),$(".listing-amenities").length>0?(e=$(".listing-amenities").offset().top-60,$("html, body").animate({scrollTop:e},400),!1):void 0},i.prototype.onExtraInfoClicked=function(t){var e;return t.preventDefault(),$(".listing-extra-info").length>0?(e=$(".listing-extra-info").offset().top-60,$("html, body").animate({scrollTop:e},400),!1):void 0},i.prototype.deleteButtonsIfNeeded=function(){return $(".listing-details").length<1&&this.$el.find("[data-tution-fee]").remove(),$(".listing-amenities").length<1&&this.$el.find("[data-amenities]").remove(),$(".listing-extra-info").length<1?this.$el.find("[data-extra-info]").remove():void 0},i}(Kiddi.Views.Base)}.call(this),function(){Kiddi.Routers.Kiddi=Backbone.Router.extend({routes:{"":"showHomepage","tim-kiem*subRoute":"invokeFindListingRoutes","thuong-hieu/*subRoute":"invokeBrandRoutes","tai-khoan/*subRoute":"invokeUserAccountRoutes","thanh-vien/*subRoute":"invokeUserRoutes","bai-viet*subRoute":"invokeBlogRoutes","dashboard*subRoute":"invokeDashboardRoutes",":city/*subRoute":"invokeListingRoutes"},isMobile:!1,initialize:function(){return Kiddi.app||(Kiddi.app=this),null!=window.user&&this.setUser(new Kiddi.Models.AuthenticatedUser(window.user)),this.isMobile=window.kiddiVnIsMobile?!0:!1,this.header=(new Kiddi.Views.Header).render(),this.facebookChat=new Kiddi.Views.FacebookChat,$('[data-toggle="tooltip"]').tooltip()},showHomepage:function(){return new Kiddi.Views.Homepage(this.loadData()).render()},invokeFindListingRoutes:function(){return Kiddi.app.findListingRouter?void 0:Kiddi.app.findListingRouter=new Kiddi.Routers.Kiddi.FindListing("tim-kiem")},invokeBrandRoutes:function(){return Kiddi.app.brandRouter?void 0:Kiddi.app.brandRouter=new Kiddi.Routers.Kiddi.Brand("thuong-hieu/")},setUser:function(t){return this.user=t,this.trigger("user:change")},invokeUserRoutes:function(){return Kiddi.app.userRouter?void 0:Kiddi.app.userRouter=new Kiddi.Routers.Kiddi.User("thanh-vien/")},invokeUserAccountRoutes:function(){return Kiddi.app.userAccountRouter?void 0:Kiddi.app.userAccountRouter=new Kiddi.Routers.Kiddi.UserAccount("tai-khoan/")},invokeListingRoutes:function(t){return Kiddi.app.listingRouter?void 0:Kiddi.app.listingRouter=new Kiddi.Routers.Kiddi.Listing(t+"/")},invokeBlogRoutes:function(){return Kiddi.app.blogRouter?void 0:Kiddi.app.blogRouter=new Kiddi.Routers.Kiddi.Blog("bai-viet")},invokeDashboardRoutes:function(){return Kiddi.app.dashboardRouter?void 0:Kiddi.app.dashboardRouter=new Kiddi.Routers.Kiddi.Dashboard("dashboard")},loadData:function(){return{}}})}.call(this),function(){Kiddi.Routers.Kiddi.Blog=Backbone.SubRoute.extend({routes:{"*params":"showBlog","":"showCategory"},showBlog:function(){return new Kiddi.Views.BlogPost(this.loadBlogData()).render(),new Kiddi.Views.JournalCategories(this.loadBlogData()).render(),new Kiddi.Views.PostEvents({}).render()},showCategory:function(){return new Kiddi.Views.JournalCategories(this.loadBlogData()).render()},loadBlogData:function(){return{}}})}.call(this),function(){Kiddi.Routers.Kiddi.Brand=Backbone.SubRoute.extend({routes:{":brand":"showBrand"},initialize:function(t){this.options=t},showBrand:function(){return new Kiddi.Views.Brand(this.loadBrandData()).render()},loadBrandData:function(){var t,e,i,n,o,s,r;return t=new Kiddi.Models.Listing(window.brand),i=new Kiddi.Models.Favorite(window.favorite),o=new Kiddi.Models.ListingMapState({lat:t.get("lat"),lng:t.get("lng")}),n=new Kiddi.Collections.BrandListings([],{}),s=new Kiddi.Collections.Photos({url:$("#gallery").data("url")}),r=new Kiddi.Collections.Tips({url:$("#tips").data("url")}),e={brand:t,favorite:i,mapState:o,listings:n,photos:s,tips:r}}})}.call(this),function(){Kiddi.Routers.Kiddi.Dashboard=Backbone.SubRoute.extend({routes:{brand:"dashboardShowBrand","brand/:brand_id":"dashboardShowBrand","branch/:branch_id/photos":"dashboardBranchPhotos",branches:"dashboardShowHome","branch*params":"dashboardShowBranch","posts*params":"dashboardListingBlogPosts","*params":"dashboardShowHome"},dashboardShowHome:function(){return new Kiddi.Views.DashboardHome(this.loadDashboardHomeData()).render()},loadDashboardHomeData:function(){return{}},dashboardShowBrand:function(){return new Kiddi.Views.DashboardSelfListingBrand(this.loadDashboardBrandData()).render()},loadDashboardBrandData:function(){var t,e;return window.brand&&(t=new Kiddi.Models.Listing(window.brand)),e={brand:t}},dashboardShowBranch:function(){return new Kiddi.Views.DashboardSelfListingBranch(this.loadDashboardBranchData()).render()},loadDashboardBranchData:function(){var t,e;return window.branch&&(t=new Kiddi.Models.Listing(window.branch)),e={branch:t}},dashboardBranchPhotos:function(){return new Kiddi.Views.DashboardSelfListingBranchPhotos(this.loadDashboardBranchPhotosData()).render()},loadDashboardBranchPhotosData:function(){var t,e,i;return window.listing&&(e=new Kiddi.Models.Listing(window.listing)),i=new Kiddi.Collections.Photos({url:$("#gallery").data("url")}),t={listing:e,photos:i}},dashboardListingBlogPosts:function(){return new Kiddi.Views.DashboardListingBlogPosts(this.loadDashboardListingBlogPostsData()).render()},loadDashboardListingBlogPostsData:function(){return{}}})}.call(this),function(){Kiddi.Routers.Kiddi.FindListing=Backbone.SubRoute.extend({routes:{"*params":"showFindListing","":"showFindListing"},showFindListing:function(){return new Kiddi.Views.Find(this.loadData()).render()},loadData:function(){var t,e,i,n,o,s,r,a;return o=new Kiddi.Collections.FindListings([],{}),t=new Kiddi.Collections.CurrentLocations,s=new Kiddi.Models.FindListingMapState,n={currentLocations:t,mapState:s},window.fetched_coords&&_.extend(n,window.fetched_coords,{locationSource:"url"}),window.fetched_slug&&_.extend(n,{slug:window.fetched_slug}),i=new Kiddi.Models.FindListingFilter(n),a={perPage:15},this.isMobile&&(a.range=4),r=new Kiddi.Models.Pagination(a),e={listings:o,currentLocations:t,filter:i,mapState:s,pagination:r}}})}.call(this),function(){Kiddi.Routers.Kiddi.Listing=Backbone.SubRoute.extend({routes:{":slug":"showListing",":slug/album-anh":"showListingPhotos",":slug/binh-luan":"showListingReviews",":slug/dat-lich":"showListingScheduleAppointment",":slug/tin-nhan":"showListingSendMessage",":slug/tin-tuc*params":"showListingNews",":slug/uu-dai*params":"showListingPromotions"},showListing:function(){return null!=window.listing?new Kiddi.Views.Listing(this.loadShowListingData()).render():void 0},showListingPhotos:function(){return new Kiddi.Views.ListingPhotosPage(this.loadShowListingPhotosData()).render()},showListingReviews:function(){return null!=window.listing?new Kiddi.Views.ListingReviewsPage(this.loadShowListingReviewsData()).render():void 0},showListingPromotions:function(){return new Kiddi.Views.ListingPromotionsPage(this.loadShowListingPromotionsData()).render()},showListingNews:function(){return new Kiddi.Views.ListingNewsPage(this.loadShowListingNewsData()).render()},showListingScheduleAppointment:function(){return new Kiddi.Views.ListingScheduleAppointment(this.loadShowListingScheduleAppointmentData()).render()},showListingSendMessage:function(){return new Kiddi.Views.ListingSendMessage(this.loadShowListingSendMessageData()).render()},loadShowListingData:function(){var t,e,i,n,o,s,r;return n=new Kiddi.Models.Listing(window.listing),window.brand&&(t=new Kiddi.Models.Listing(window.brand)),window.favorite&&(i=new Kiddi.Models.Favorite(window.favorite)),o=new Kiddi.Models.ListingMapState({lat:n.get("lat"),lng:n.get("lng")}),s=new Kiddi.Collections.Photos({url:$("#gallery").data("url")}),r=new Kiddi.Collections.Tips({url:$("#tips").data("url")}),e={listing:n,brand:t,favorite:i,mapState:o,photos:s,tips:r}},loadShowListingPhotosData:function(){var t,e,i,n,o;return n=new Kiddi.Models.Listing(window.listing),window.brand&&(t=new Kiddi.Models.Listing(window.brand)),o=new Kiddi.Collections.Photos({url:$("#gallery").data("url")}),window.favorite&&(i=new Kiddi.Models.Favorite(window.favorite)),e={listing:n,brand:t,photos:o,favorite:i}},loadShowListingReviewsData:function(){var t,e,i,n,o,s;return n=new Kiddi.Models.Listing(window.listing),window.brand&&(t=new Kiddi.Models.Listing(window.brand)),s=new Kiddi.Collections.Tips({url:$("#tips").data("url")}),window.favorite&&(i=new Kiddi.Models.Favorite(window.favorite)),o=new Kiddi.Collections.Photos({url:null}),e={listing:n,brand:t,tips:s,favorite:i,photos:o}},loadShowListingPromotionsData:function(){var t,e,i,n,o;return n=new Kiddi.Models.Listing(window.listing),window.brand&&(t=new Kiddi.Models.Listing(window.brand)),o=new Kiddi.Collections.Photos({url:null}),window.favorite&&(i=new Kiddi.Models.Favorite(window.favorite)),e={listing:n,brand:t,photos:o,favorite:i}},loadShowListingNewsData:function(){var t,e,i,n,o;return n=new Kiddi.Models.Listing(window.listing),window.brand&&(t=new Kiddi.Models.Listing(window.brand)),o=new Kiddi.Collections.Photos({url:null}),window.favorite&&(i=new Kiddi.Models.Favorite(window.favorite)),e={listing:n,brand:t,photos:o,favorite:i}},loadShowListingScheduleAppointmentData:function(){var t,e,i,n,o;return n=new Kiddi.Models.Listing(window.listing),window.brand&&(t=new Kiddi.Models.Listing(window.brand)),o=new Kiddi.Collections.Photos({url:null}),window.favorite&&(i=new Kiddi.Models.Favorite(window.favorite)),e={listing:n,brand:t,photos:o,favorite:i}},loadShowListingSendMessageData:function(){var t,e,i,n,o;return n=new Kiddi.Models.Listing(window.listing),window.brand&&(t=new Kiddi.Models.Listing(window.brand)),o=new Kiddi.Collections.Photos({url:null}),window.favorite&&(i=new Kiddi.Models.Favorite(window.favorite)),e={listing:n,brand:t,photos:o,favorite:i}}})}.call(this),function(){Kiddi.Routers.Kiddi.User=Backbone.SubRoute.extend({routes:{":slug":"viewProfile"},viewProfile:function(t){return console.log("viewProfile with slug = "+t),this.userProfile=new Kiddi.Views.UserProfile(this.loadProfileData()).render()},loadProfileData:function(){var t,e,i;return e=new Kiddi.Collections.UserExpertises({url:$("[data-expertises]").data("url")}),i=new Kiddi.Collections.UserFavorites({url:$("[data-favorites]").data("url")}),t={expertises:e,favorites:i}}})}.call(this),function(){Kiddi.Routers.Kiddi.UserAccount=Backbone.SubRoute.extend({routes:{"cap-nhat":"editProfile","doi-mat-khau":"editPassword"},editProfile:function(t){return console.log("editProfile with slug = "+t),this.sideMenu=new Kiddi.Views.DashboardSideMenu,this.contentContainer=new Kiddi.Views.DashboardContentContainer,this.userEdit=(new Kiddi.Views.UserEdit).render()},editPassword:function(t){return console.log("editPassword with slug = "+t),this.sideMenu=new Kiddi.Views.DashboardSideMenu}})}.call(this),function(){Kiddi.LoadAdsWorker={start:function(){var t,e,i,n,o,s;for(o=$(".kiddi-ad-slot"),s=[],i=e=0,n=o.length;n>e;i=++e)t=o[i],s.push(this.loadAdForSlot(t,i));return s},loadAdForSlot:function(t){var e,i,n;return e=$(t),n={lat:e.data("ad-lat"),lng:e.data("ad-lng"),ad_size:e.data("ad-size"),ad_type:e.data("ad-type"),ad_source:e.data("ad-source"),source_slug:e.data("ad-source-slug"),limit:e.data("ad-limit"),offset:e.data("ad-offset")},i={data:n,dataType:"JSON",success:function(t){return function(i){var o,s,r,a,l,u,c,h,d,p;if(i.meta&&i.meta.success){for(s=t.parentElement(e),o=t.cssClasses(s,e),d=i.ads,p=[],l=c=0,h=d.length;h>c;l=++c)a=d[l],u={ad:a,index:l+1},"banner"===n.ad_type?(u.id="kiddi-ad-"+a.slug,r=new Kiddi.Views.CustomAd(u).render()):(u.id="kiddi-ad-"+a.id,r=new Kiddi.Views.ListingAd(u).render()),t.addAdElementToContainer(s,e,r,a,o),t.showParentIfNeeded(e),t.showToolTips(r),p.push(t.initClickListener(r));
return p}}}(this),type:"GET",url:e.data("ad-url")},$.ajax(i)},showParentIfNeeded:function(t){var e,i;if(!this.addToOtherContainer(t))return i=t.data("ad-parent"),i&&i.length>0&&(e=$("."+i),e.length>0&&e.hasClass("hidden"))?e.removeClass("hidden"):void 0},showToolTips:function(t){var e;return e=$(t.el),e.find('[data-toggle="tooltip"]').tooltip()},initClickListener:function(t){var e;return e={selectors:t.el},new Kiddi.Views.ListingKiddiEvents(e)},parentElement:function(t){var e;return e=t.data("append-ads-to"),e&&$(e).length>0?$(e):t},addToOtherContainer:function(t){var e;return e=t.data("append-ads-to"),null!=e&&$(e).length>0},addAdElementToContainer:function(t,e,i,n,o){return this.addToOtherContainer(e)&&e!==t?this.addAdElementToContainerByRating(t,i,n,o):e.append(i.el)},addAdElementToContainerByRating:function(t,e,i,n){var o,s,r,a,l;for(l=t.children(),s=r=0,a=l.length;a>r;s=++r)if(o=l[s],$(o).data("rating")&&null!=i.rating&&parseFloat(i.rating,10)>=parseFloat($(o).data("rating"),10))return this.addCssClassesToAdElement(e,n),$(e.el).data("rating",i.rating),void $(e.el).insertBefore($(o));return t.append(e.el)},copyCssClasses:function(t){var e;return e=t.data("copy-classes"),null!=e&&1===parseInt(e,10)},cssClasses:function(t,e){var i;return this.addToOtherContainer(e)&&this.copyCssClasses(e)&&t.children().length>0?(i=t.children()[0],i.className.split(" ")):[]},addCssClassesToAdElement:function(t,e){var i,n,o,s,r;for(i=$(t.el),r=[],o=0,s=e.length;s>o;o++)n=e[o],r.push(i.hasClass(n)?void 0:i.addClass(n));return r}},$(function(){return Kiddi.LoadAdsWorker.start()})}.call(this),!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var n=i(155),o=i(153);window.React=n,window.ReactDOM=o},function(t){"use strict";function e(t,e,i,n,o,s,r,a){if(!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[i,n,o,s,r,a],c=0;l=new Error(e.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}t.exports=e},function(t){"use strict";function e(t){if(null==t)throw new TypeError("Object.assign target cannot be null or undefined");for(var e=Object(t),i=Object.prototype.hasOwnProperty,n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o){var s=Object(o);for(var r in s)i.call(s,r)&&(e[r]=s[r])}}return e}t.exports=e},function(t,e,i){"use strict";var n=i(7),o=n;t.exports=o},function(t){"use strict";var e=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:e,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:e&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:e&&!!window.screen,isInWorker:!e};t.exports=i},function(t,e,i){"use strict";var n=i(10),o=i(2),s=(i(23),"function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103),r={key:!0,ref:!0,__self:!0,__source:!0},a=function(t,e,i,n,o,r,a){var l={$$typeof:s,type:t,key:e,ref:i,props:a,_owner:r};return l};a.createElement=function(t,e,i){var o,s={},l=null,u=null,c=null,h=null;if(null!=e){u=void 0===e.ref?null:e.ref,l=void 0===e.key?null:""+e.key,c=void 0===e.__self?null:e.__self,h=void 0===e.__source?null:e.__source;for(o in e)e.hasOwnProperty(o)&&!r.hasOwnProperty(o)&&(s[o]=e[o])}var d=arguments.length-2;if(1===d)s.children=i;else if(d>1){for(var p=Array(d),f=0;d>f;f++)p[f]=arguments[f+2];s.children=p}if(t&&t.defaultProps){var g=t.defaultProps;for(o in g)"undefined"==typeof s[o]&&(s[o]=g[o])}return a(t,l,u,c,h,n.current,s)},a.createFactory=function(t){var e=a.createElement.bind(null,t);return e.type=t,e},a.cloneAndReplaceKey=function(t,e){var i=a(t.type,e,t.ref,t._self,t._source,t._owner,t.props);return i},a.cloneAndReplaceProps=function(t,e){var i=a(t.type,t.key,t.ref,t._self,t._source,t._owner,e);return i},a.cloneElement=function(t,e,i){var s,l=o({},t.props),u=t.key,c=t.ref,h=t._self,d=t._source,p=t._owner;if(null!=e){void 0!==e.ref&&(c=e.ref,p=n.current),void 0!==e.key&&(u=""+e.key);for(s in e)e.hasOwnProperty(s)&&!r.hasOwnProperty(s)&&(l[s]=e[s])}var f=arguments.length-2;if(1===f)l.children=i;else if(f>1){for(var g=Array(f),m=0;f>m;m++)g[m]=arguments[m+2];l.children=g}return a(t.type,u,c,h,d,p,l)},a.isValidElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===s},t.exports=a},function(t,e,i){"use strict";function n(t,e){for(var i=Math.min(t.length,e.length),n=0;i>n;n++)if(t.charAt(n)!==e.charAt(n))return n;return t.length===e.length?-1:i}function o(t){return t?t.nodeType===V?t.documentElement:t.firstChild:null}function s(t){var e=o(t);return e&&G.getID(e)}function r(t){var e=a(t);if(e)if(U.hasOwnProperty(e)){var i=U[e];i!==t&&(h(i,e)?O(!1):void 0,U[e]=t)}else U[e]=t;return e}function a(t){return t&&t.getAttribute&&t.getAttribute(B)||""}function l(t,e){var i=a(t);i!==e&&delete U[i],t.setAttribute(B,e),U[e]=t}function u(t){return U.hasOwnProperty(t)&&h(U[t],t)||(U[t]=G.findReactNodeByID(t)),U[t]}function c(t){var e=T.get(t)._rootNodeID;return x.isNullComponentID(e)?null:(U.hasOwnProperty(e)&&h(U[e],e)||(U[e]=G.findReactNodeByID(e)),U[e])}function h(t,e){if(t){a(t)!==e?O(!1):void 0;var i=G.findReactContainerForID(e);if(i&&A(i,t))return!0}return!1}function d(t){delete U[t]}function p(t){var e=U[t];return e&&h(e,t)?void(J=e):!1}function f(t){J=null,S.traverseAncestors(t,p);var e=J;return J=null,e}function g(t,e,i,n,o,s){k.useCreateElement&&(s=P({},s),s[j]=i.nodeType===V?i:i.ownerDocument);var r=M.mountComponent(t,e,n,s);t._renderedComponent._topLevelWrapper=t,G._mountImageIntoNode(r,i,o,n)}function m(t,e,i,n,o){var s=I.ReactReconcileTransaction.getPooled(n);s.perform(g,null,t,e,i,s,n,o),I.ReactReconcileTransaction.release(s)}function v(t,e){for(M.unmountComponent(t),e.nodeType===V&&(e=e.documentElement);e.lastChild;)e.removeChild(e.lastChild)}function y(t){var e=s(t);return e?e!==S.getReactRootIDFromNodeID(e):!1}function b(t){for(;t&&t.parentNode!==t;t=t.parentNode)if(1===t.nodeType){var e=a(t);if(e){var i,n=S.getReactRootIDFromNodeID(e),o=t;do if(i=a(o),o=o.parentNode,null==o)return null;while(i!==n);if(o===q[n])return t}}return null}var w=i(17),_=i(25),k=(i(10),i(59)),C=i(5),x=i(55),S=i(16),T=i(18),D=i(61),E=i(8),M=i(14),$=i(32),I=i(9),P=i(2),L=i(19),A=i(57),R=i(37),O=i(1),N=i(29),F=i(33),B=(i(40),i(3),w.ID_ATTRIBUTE_NAME),U={},K=1,V=9,z=11,j="__ReactMount_ownerDocument$"+Math.random().toString(36).slice(2),H={},q={},W=[],J=null,Y=function(){};Y.prototype.isReactComponent={},Y.prototype.render=function(){return this.props};var G={TopLevelWrapper:Y,_instancesByReactRootID:H,scrollMonitor:function(t,e){e()},_updateRootComponent:function(t,e,i,n){return G.scrollMonitor(i,function(){$.enqueueElementInternal(t,e),n&&$.enqueueCallbackInternal(t,n)}),t},_registerComponent:function(t,e){!e||e.nodeType!==K&&e.nodeType!==V&&e.nodeType!==z?O(!1):void 0,_.ensureScrollValueMonitoring();var i=G.registerContainer(e);return H[i]=t,i},_renderNewRootComponent:function(t,e,i,n){var o=R(t,null),s=G._registerComponent(o,e);return I.batchedUpdates(m,o,s,e,i,n),o},renderSubtreeIntoContainer:function(t,e,i,n){return null==t||null==t._reactInternalInstance?O(!1):void 0,G._renderSubtreeIntoContainer(t,e,i,n)},_renderSubtreeIntoContainer:function(t,e,i,n){C.isValidElement(e)?void 0:O(!1);var r=new C(Y,null,null,null,null,null,e),l=H[s(i)];if(l){var u=l._currentElement,c=u.props;if(F(c,e)){var h=l._renderedComponent.getPublicInstance(),d=n&&function(){n.call(h)};return G._updateRootComponent(l,r,i,d),h}G.unmountComponentAtNode(i)}var p=o(i),f=p&&!!a(p),g=y(i),m=f&&!l&&!g,v=G._renderNewRootComponent(r,i,m,null!=t?t._reactInternalInstance._processChildContext(t._reactInternalInstance._context):L)._renderedComponent.getPublicInstance();return n&&n.call(v),v},render:function(t,e,i){return G._renderSubtreeIntoContainer(null,t,e,i)},registerContainer:function(t){var e=s(t);return e&&(e=S.getReactRootIDFromNodeID(e)),e||(e=S.createReactRootID()),q[e]=t,e},unmountComponentAtNode:function(t){!t||t.nodeType!==K&&t.nodeType!==V&&t.nodeType!==z?O(!1):void 0;var e=s(t),i=H[e];if(!i){var n=(y(t),a(t));return n&&n===S.getReactRootIDFromNodeID(n),!1}return I.batchedUpdates(v,i,t),delete H[e],delete q[e],!0},findReactContainerForID:function(t){var e=S.getReactRootIDFromNodeID(t),i=q[e];return i},findReactNodeByID:function(t){var e=G.findReactContainerForID(t);return G.findComponentRoot(e,t)},getFirstReactDOM:function(t){return b(t)},findComponentRoot:function(t,e){var i=W,n=0,o=f(e)||t;for(i[0]=o.firstChild,i.length=1;n<i.length;){for(var s,r=i[n++];r;){var a=G.getID(r);a?e===a?s=r:S.isAncestorIDOf(a,e)&&(i.length=n=0,i.push(r.firstChild)):i.push(r.firstChild),r=r.nextSibling}if(s)return i.length=0,s}i.length=0,O(!1)},_mountImageIntoNode:function(t,e,i,s){if(!e||e.nodeType!==K&&e.nodeType!==V&&e.nodeType!==z?O(!1):void 0,i){var r=o(e);if(D.canReuseMarkup(t,r))return;var a=r.getAttribute(D.CHECKSUM_ATTR_NAME);r.removeAttribute(D.CHECKSUM_ATTR_NAME);var l=r.outerHTML;r.setAttribute(D.CHECKSUM_ATTR_NAME,a);var u=t,c=n(u,l);" (client) "+u.substring(c-20,c+20)+"\n (server) "+l.substring(c-20,c+20),e.nodeType===V?O(!1):void 0}if(e.nodeType===V?O(!1):void 0,s.useCreateElement){for(;e.lastChild;)e.removeChild(e.lastChild);e.appendChild(t)}else N(e,t)},ownerDocumentContextKey:j,getReactRootID:s,getID:r,setID:l,getNode:u,getNodeFromInstance:c,isValid:h,purgeID:d};E.measureMethods(G,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),t.exports=G},function(t){"use strict";function e(t){return function(){return t}}function i(){}i.thatReturns=e,i.thatReturnsFalse=e(!1),i.thatReturnsTrue=e(!0),i.thatReturnsNull=e(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(t){return t},t.exports=i},function(t){"use strict";function e(t,e,i){return i}var i={enableMeasure:!1,storedMeasure:e,measureMethods:function(){},measure:function(t,e,i){return i},injection:{injectMeasure:function(t){i.storedMeasure=t}}};t.exports=i},function(t,e,i){"use strict";function n(){T.ReactReconcileTransaction&&w?void 0:m(!1)}function o(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=c.getPooled(),this.reconcileTransaction=T.ReactReconcileTransaction.getPooled(!1)}function s(t,e,i,o,s,r){n(),w.batchedUpdates(t,e,i,o,s,r)}function r(t,e){return t._mountOrder-e._mountOrder}function a(t){var e=t.dirtyComponentsLength;e!==v.length?m(!1):void 0,v.sort(r);for(var i=0;e>i;i++){var n=v[i],o=n._pendingCallbacks;if(n._pendingCallbacks=null,p.performUpdateIfNecessary(n,t.reconcileTransaction),o)for(var s=0;s<o.length;s++)t.callbackQueue.enqueue(o[s],n.getPublicInstance())}}function l(t){return n(),w.isBatchingUpdates?void v.push(t):void w.batchedUpdates(l,t)}function u(t,e){w.isBatchingUpdates?void 0:m(!1),y.enqueue(t,e),b=!0}var c=i(34),h=i(13),d=i(8),p=i(14),f=i(28),g=i(2),m=i(1),v=[],y=c.getPooled(),b=!1,w=null,_={initialize:function(){this.dirtyComponentsLength=v.length},close:function(){this.dirtyComponentsLength!==v.length?(v.splice(0,this.dirtyComponentsLength),x()):v.length=0}},k={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},C=[_,k];g(o.prototype,f.Mixin,{getTransactionWrappers:function(){return C},destructor:function(){this.dirtyComponentsLength=null,c.release(this.callbackQueue),this.callbackQueue=null,T.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(t,e,i){return f.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,t,e,i)}}),h.addPoolingTo(o);var x=function(){for(;v.length||b;){if(v.length){var t=o.getPooled();t.perform(a,null,t),o.release(t)}if(b){b=!1;var e=y;y=c.getPooled(),e.notifyAll(),c.release(e)}}};x=d.measure("ReactUpdates","flushBatchedUpdates",x);var S={injectReconcileTransaction:function(t){t?void 0:m(!1),T.ReactReconcileTransaction=t},injectBatchingStrategy:function(t){t?void 0:m(!1),"function"!=typeof t.batchedUpdates?m(!1):void 0,"boolean"!=typeof t.isBatchingUpdates?m(!1):void 0,w=t}},T={ReactReconcileTransaction:null,batchedUpdates:s,enqueueUpdate:l,flushBatchedUpdates:x,injection:S,asap:u};t.exports=T},function(t){"use strict";var e={current:null};t.exports=e},function(t,e,i){"use strict";var n=i(24),o=n({bubbled:null,captured:null}),s=n({topAbort:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topVolumeChange:null,topWaiting:null,topWheel:null}),r={topLevelTypes:s,PropagationPhases:o};t.exports=r},function(t){"use strict";var e=function(t){var e;for(e in t)if(t.hasOwnProperty(e))return e;return null};t.exports=e},function(t,e,i){"use strict";var n=i(1),o=function(t){var e=this;if(e.instancePool.length){var i=e.instancePool.pop();return e.call(i,t),i}return new e(t)},s=function(t,e){var i=this;if(i.instancePool.length){var n=i.instancePool.pop();return i.call(n,t,e),n}return new i(t,e)},r=function(t,e,i){var n=this;if(n.instancePool.length){var o=n.instancePool.pop();return n.call(o,t,e,i),o}return new n(t,e,i)},a=function(t,e,i,n){var o=this;if(o.instancePool.length){var s=o.instancePool.pop();return o.call(s,t,e,i,n),s}return new o(t,e,i,n)},l=function(t,e,i,n,o){var s=this;if(s.instancePool.length){var r=s.instancePool.pop();return s.call(r,t,e,i,n,o),r}return new s(t,e,i,n,o)},u=function(t){var e=this;t instanceof e?void 0:n(!1),t.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(t)},c=10,h=o,d=function(t,e){var i=t;return i.instancePool=[],i.getPooled=e||h,i.poolSize||(i.poolSize=c),i.release=u,i},p={addPoolingTo:d,oneArgumentPooler:o,twoArgumentPooler:s,threeArgumentPooler:r,fourArgumentPooler:a,fiveArgumentPooler:l};t.exports=p},function(t,e,i){"use strict";function n(){o.attachRefs(this,this._currentElement)}var o=i(95),s={mountComponent:function(t,e,i,o){var s=t.mountComponent(e,i,o);return t._currentElement&&null!=t._currentElement.ref&&i.getReactMountReady().enqueue(n,t),s},unmountComponent:function(t){o.detachRefs(t,t._currentElement),t.unmountComponent()},receiveComponent:function(t,e,i,s){var r=t._currentElement;if(e!==r||s!==t._context){var a=o.shouldUpdateRefs(r,e);a&&o.detachRefs(t,r),t.receiveComponent(e,i,s),a&&t._currentElement&&null!=t._currentElement.ref&&i.getReactMountReady().enqueue(n,t)}},performUpdateIfNecessary:function(t,e){t.performUpdateIfNecessary(e)}};t.exports=s},function(t,e,i){"use strict";function n(t,e,i,n){this.dispatchConfig=t,this.dispatchMarker=e,this.nativeEvent=i,this.target=n,this.currentTarget=n;var o=this.constructor.Interface;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];this[s]=a?a(i):i[s]}var l=null!=i.defaultPrevented?i.defaultPrevented:i.returnValue===!1;this.isDefaultPrevented=l?r.thatReturnsTrue:r.thatReturnsFalse,this.isPropagationStopped=r.thatReturnsFalse}var o=i(13),s=i(2),r=i(7),a=(i(3),{type:null,currentTarget:r.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null});s(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this.isDefaultPrevented=r.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this.isPropagationStopped=r.thatReturnsTrue)},persist:function(){this.isPersistent=r.thatReturnsTrue},isPersistent:r.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)this[e]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),n.Interface=a,n.augmentClass=function(t,e){var i=this,n=Object.create(i.prototype);s(n,t.prototype),t.prototype=n,t.prototype.constructor=t,t.Interface=s({},i.Interface,e),t.augmentClass=i.augmentClass,o.addPoolingTo(t,o.fourArgumentPooler)},o.addPoolingTo(n,o.fourArgumentPooler),t.exports=n},function(t,e,i){"use strict";function n(t){return p+t.toString(36)}function o(t,e){return t.charAt(e)===p||e===t.length}function s(t){return""===t||t.charAt(0)===p&&t.charAt(t.length-1)!==p}function r(t,e){return 0===e.indexOf(t)&&o(e,t.length)}function a(t){return t?t.substr(0,t.lastIndexOf(p)):""}function l(t,e){if(s(t)&&s(e)?void 0:d(!1),r(t,e)?void 0:d(!1),t===e)return t;var i,n=t.length+f;for(i=n;i<e.length&&!o(e,i);i++);return e.substr(0,i)}function u(t,e){var i=Math.min(t.length,e.length);if(0===i)return"";for(var n=0,r=0;i>=r;r++)if(o(t,r)&&o(e,r))n=r;else if(t.charAt(r)!==e.charAt(r))break;var a=t.substr(0,n);return s(a)?void 0:d(!1),a}function c(t,e,i,n,o,s){t=t||"",e=e||"",t===e?d(!1):void 0;var u=r(e,t);u||r(t,e)?void 0:d(!1);for(var c=0,h=u?a:l,p=t;;p=h(p,e)){var f;if(o&&p===t||s&&p===e||(f=i(p,u,n)),f===!1||p===e)break;c++<g?void 0:d(!1)}}var h=i(53),d=i(1),p=".",f=p.length,g=1e4,m={createReactRootID:function(){return n(h.createReactRootIndex())},createReactID:function(t,e){return t+e},getReactRootIDFromNodeID:function(t){if(t&&t.charAt(0)===p&&t.length>1){var e=t.indexOf(p,1);return e>-1?t.substr(0,e):t}return null},traverseEnterLeave:function(t,e,i,n,o){var s=u(t,e);s!==t&&c(t,s,i,n,!1,!0),s!==e&&c(s,e,i,o,!0,!1)},traverseTwoPhase:function(t,e,i){t&&(c("",t,e,i,!0,!1),c(t,"",e,i,!1,!0))},traverseTwoPhaseSkipTarget:function(t,e,i){t&&(c("",t,e,i,!0,!0),c(t,"",e,i,!0,!0))},traverseAncestors:function(t,e,i){c("",t,e,i,!0,!1)},getFirstCommonAncestorID:u,_getNextDescendantID:l,isAncestorIDOf:r,SEPARATOR:p};t.exports=m},function(t,e,i){"use strict";function n(t,e){return(t&e)===e}var o=i(1),s={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(t){var e=s,i=t.Properties||{},r=t.DOMAttributeNamespaces||{},l=t.DOMAttributeNames||{},u=t.DOMPropertyNames||{},c=t.DOMMutationMethods||{};t.isCustomAttribute&&a._isCustomAttributeFunctions.push(t.isCustomAttribute);for(var h in i){a.properties.hasOwnProperty(h)?o(!1):void 0;var d=h.toLowerCase(),p=i[h],f={attributeName:d,attributeNamespace:null,propertyName:h,mutationMethod:null,mustUseAttribute:n(p,e.MUST_USE_ATTRIBUTE),mustUseProperty:n(p,e.MUST_USE_PROPERTY),hasSideEffects:n(p,e.HAS_SIDE_EFFECTS),hasBooleanValue:n(p,e.HAS_BOOLEAN_VALUE),hasNumericValue:n(p,e.HAS_NUMERIC_VALUE),hasPositiveNumericValue:n(p,e.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:n(p,e.HAS_OVERLOADED_BOOLEAN_VALUE)};if(f.mustUseAttribute&&f.mustUseProperty?o(!1):void 0,!f.mustUseProperty&&f.hasSideEffects?o(!1):void 0,f.hasBooleanValue+f.hasNumericValue+f.hasOverloadedBooleanValue<=1?void 0:o(!1),l.hasOwnProperty(h)){var g=l[h];f.attributeName=g}r.hasOwnProperty(h)&&(f.attributeNamespace=r[h]),u.hasOwnProperty(h)&&(f.propertyName=u[h]),c.hasOwnProperty(h)&&(f.mutationMethod=c[h]),a.properties[h]=f}}},r={},a={ID_ATTRIBUTE_NAME:"data-reactid",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<a._isCustomAttributeFunctions.length;e++){var i=a._isCustomAttributeFunctions[e];if(i(t))return!0}return!1},getDefaultValueForProperty:function(t,e){var i,n=r[t];return n||(r[t]=n={}),e in n||(i=document.createElement(t),n[e]=i[e]),n[e]},injection:s};t.exports=a},function(t){"use strict";var e={remove:function(t){t._reactInternalInstance=void 0},get:function(t){return t._reactInternalInstance},has:function(t){return void 0!==t._reactInternalInstance},set:function(t,e){t._reactInternalInstance=e}};t.exports=e},function(t){"use strict";var e={};t.exports=e},function(t,e,i){"use strict";var n=i(54),o=i(91),s=i(56),r=i(64),a=i(65),l=i(1),u=(i(3),{}),c=null,h=function(t,e){t&&(o.executeDispatchesInOrder(t,e),t.isPersistent()||t.constructor.release(t))},d=function(t){return h(t,!0)},p=function(t){return h(t,!1)},f=null,g={injection:{injectMount:o.injection.injectMount,injectInstanceHandle:function(t){f=t},getInstanceHandle:function(){return f},injectEventPluginOrder:n.injectEventPluginOrder,injectEventPluginsByName:n.injectEventPluginsByName},eventNameDispatchConfigs:n.eventNameDispatchConfigs,registrationNameModules:n.registrationNameModules,putListener:function(t,e,i){"function"!=typeof i?l(!1):void 0;var o=u[e]||(u[e]={});o[t]=i;var s=n.registrationNameModules[e];s&&s.didPutListener&&s.didPutListener(t,e,i)},getListener:function(t,e){var i=u[e];return i&&i[t]},deleteListener:function(t,e){var i=n.registrationNameModules[e];i&&i.willDeleteListener&&i.willDeleteListener(t,e);var o=u[e];o&&delete o[t]},deleteAllListeners:function(t){for(var e in u)if(u[e][t]){var i=n.registrationNameModules[e];i&&i.willDeleteListener&&i.willDeleteListener(t,e),delete u[e][t]}},extractEvents:function(t,e,i,o,s){for(var a,l=n.plugins,u=0;u<l.length;u++){var c=l[u];if(c){var h=c.extractEvents(t,e,i,o,s);h&&(a=r(a,h))}}return a},enqueueEvents:function(t){t&&(c=r(c,t))},processEventQueue:function(t){var e=c;c=null,t?a(e,d):a(e,p),c?l(!1):void 0,s.rethrowCaughtError()},__purge:function(){u={}},__getListenerBank:function(){return u}};t.exports=g},function(t,e,i){"use strict";function n(t,e,i){var n=e.dispatchConfig.phasedRegistrationNames[i];return y(t,n)}function o(t,e,i){var o=e?v.bubbled:v.captured,s=n(t,i,o);s&&(i._dispatchListeners=g(i._dispatchListeners,s),i._dispatchIDs=g(i._dispatchIDs,t))}function s(t){t&&t.dispatchConfig.phasedRegistrationNames&&f.injection.getInstanceHandle().traverseTwoPhase(t.dispatchMarker,o,t)}function r(t){t&&t.dispatchConfig.phasedRegistrationNames&&f.injection.getInstanceHandle().traverseTwoPhaseSkipTarget(t.dispatchMarker,o,t)}function a(t,e,i){if(i&&i.dispatchConfig.registrationName){var n=i.dispatchConfig.registrationName,o=y(t,n);o&&(i._dispatchListeners=g(i._dispatchListeners,o),i._dispatchIDs=g(i._dispatchIDs,t))}}function l(t){t&&t.dispatchConfig.registrationName&&a(t.dispatchMarker,null,t)}function u(t){m(t,s)}function c(t){m(t,r)}function h(t,e,i,n){f.injection.getInstanceHandle().traverseEnterLeave(i,n,a,t,e)}function d(t){m(t,l)}var p=i(11),f=i(20),g=(i(3),i(64)),m=i(65),v=p.PropagationPhases,y=f.getListener,b={accumulateTwoPhaseDispatches:u,accumulateTwoPhaseDispatchesSkipTarget:c,accumulateDirectDispatches:d,accumulateEnterLeaveDispatches:h};t.exports=b},function(t,e,i){"use strict";function n(t,e,i,n){o.call(this,t,e,i,n)}var o=i(15),s=i(49),r={view:function(t){if(t.view)return t.view;var e=s(t);if(null!=e&&e.window===e)return e;var i=e.ownerDocument;return i?i.defaultView||i.parentWindow:window},detail:function(t){return t.detail||0}};o.augmentClass(n,r),t.exports=n},function(t){"use strict";var e=!1;t.exports=e},function(t,e,i){"use strict";var n=i(1),o=function(t){var e,i={};t instanceof Object&&!Array.isArray(t)?void 0:n(!1);for(e in t)t.hasOwnProperty(e)&&(i[e]=e);return i};t.exports=o},function(t,e,i){"use strict";function n(t){return Object.prototype.hasOwnProperty.call(t,m)||(t[m]=f++,d[t[m]]={}),d[t[m]]}var o=i(11),s=i(20),r=i(54),a=i(93),l=i(8),u=i(63),c=i(2),h=i(38),d={},p=!1,f=0,g={topAbort:"abort",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},m="_reactListenersID"+String(Math.random()).slice(2),v=c({},a,{ReactEventListener:null,injection:{injectReactEventListener:function(t){t.setHandleTopLevel(v.handleTopLevel),v.ReactEventListener=t}},setEnabled:function(t){v.ReactEventListener&&v.ReactEventListener.setEnabled(t)},isEnabled:function(){return!(!v.ReactEventListener||!v.ReactEventListener.isEnabled())},listenTo:function(t,e){for(var i=e,s=n(i),a=r.registrationNameDependencies[t],l=o.topLevelTypes,u=0;u<a.length;u++){var c=a[u];s.hasOwnProperty(c)&&s[c]||(c===l.topWheel?h("wheel")?v.ReactEventListener.trapBubbledEvent(l.topWheel,"wheel",i):h("mousewheel")?v.ReactEventListener.trapBubbledEvent(l.topWheel,"mousewheel",i):v.ReactEventListener.trapBubbledEvent(l.topWheel,"DOMMouseScroll",i):c===l.topScroll?h("scroll",!0)?v.ReactEventListener.trapCapturedEvent(l.topScroll,"scroll",i):v.ReactEventListener.trapBubbledEvent(l.topScroll,"scroll",v.ReactEventListener.WINDOW_HANDLE):c===l.topFocus||c===l.topBlur?(h("focus",!0)?(v.ReactEventListener.trapCapturedEvent(l.topFocus,"focus",i),v.ReactEventListener.trapCapturedEvent(l.topBlur,"blur",i)):h("focusin")&&(v.ReactEventListener.trapBubbledEvent(l.topFocus,"focusin",i),v.ReactEventListener.trapBubbledEvent(l.topBlur,"focusout",i)),s[l.topBlur]=!0,s[l.topFocus]=!0):g.hasOwnProperty(c)&&v.ReactEventListener.trapBubbledEvent(c,g[c],i),s[c]=!0)}},trapBubbledEvent:function(t,e,i){return v.ReactEventListener.trapBubbledEvent(t,e,i)},trapCapturedEvent:function(t,e,i){return v.ReactEventListener.trapCapturedEvent(t,e,i)},ensureScrollValueMonitoring:function(){if(!p){var t=u.refreshScrollValues;v.ReactEventListener.monitorScrollValue(t),p=!0}},eventNameDispatchConfigs:s.eventNameDispatchConfigs,registrationNameModules:s.registrationNameModules,putListener:s.putListener,getListener:s.getListener,deleteListener:s.deleteListener,deleteAllListeners:s.deleteAllListeners});l.measureMethods(v,"ReactBrowserEventEmitter",{putListener:"putListener",deleteListener:"deleteListener"}),t.exports=v},function(t){"use strict";var e={};t.exports=e},function(t,e,i){"use strict";var n=i(24),o=n({prop:null,context:null,childContext:null});t.exports=o},function(t,e,i){"use strict";var n=i(1),o={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(t,e,i,o,s,r,a,l){this.isInTransaction()?n(!1):void 0;var u,c;try{this._isInTransaction=!0,u=!0,this.initializeAll(0),c=t.call(e,i,o,s,r,a,l),u=!1}finally{try{if(u)try{this.closeAll(0)}catch(h){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(t){for(var e=this.transactionWrappers,i=t;i<e.length;i++){var n=e[i];try{this.wrapperInitData[i]=s.OBSERVED_ERROR,this.wrapperInitData[i]=n.initialize?n.initialize.call(this):null}finally{if(this.wrapperInitData[i]===s.OBSERVED_ERROR)try{this.initializeAll(i+1)}catch(o){}}}},closeAll:function(t){this.isInTransaction()?void 0:n(!1);for(var e=this.transactionWrappers,i=t;i<e.length;i++){var o,r=e[i],a=this.wrapperInitData[i];try{o=!0,a!==s.OBSERVED_ERROR&&r.close&&r.close.call(this,a),o=!1}finally{if(o)try{this.closeAll(i+1)}catch(l){}}}this.wrapperInitData.length=0}},s={Mixin:o,OBSERVED_ERROR:{}};t.exports=s},function(t,e,i){"use strict";var n=i(4),o=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,r=function(t,e){t.innerHTML=e};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(r=function(t,e){MSApp.execUnsafeLocalFunction(function(){t.innerHTML=e})}),n.canUseDOM){var a=document.createElement("div");a.innerHTML=" ",""===a.innerHTML&&(r=function(t,e){if(t.parentNode&&t.parentNode.replaceChild(t,t),o.test(e)||"<"===e[0]&&s.test(e)){t.innerHTML=String.fromCharCode(65279)+e;var i=t.firstChild;1===i.data.length?t.removeChild(i):i.deleteData(0,1)}else t.innerHTML=e})}t.exports=r},function(t,e,i){"use strict";function n(t,e,i,n){o.call(this,t,e,i,n)}var o=i(22),s=i(63),r=i(48),a={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:r,button:function(t){var e=t.button;return"which"in t?e:2===e?2:4===e?1:0},buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},pageX:function(t){return"pageX"in t?t.pageX:t.clientX+s.currentScrollLeft},pageY:function(t){return"pageY"in t?t.pageY:t.clientY+s.currentScrollTop}};o.augmentClass(n,a),t.exports=n},function(t){"use strict";function e(t){return n[t]}function i(t){return(""+t).replace(o,e)}var n={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},o=/[&><"']/g;t.exports=i},function(t,e,i){"use strict";function n(t){a.enqueueUpdate(t)}function o(t){var e=r.get(t);return e?e:null}var s=(i(10),i(5)),r=i(18),a=i(9),l=i(2),u=i(1),c=(i(3),{isMounted:function(t){var e=r.get(t);return e?!!e._renderedComponent:!1},enqueueCallback:function(t,e){"function"!=typeof e?u(!1):void 0;var i=o(t);return i?(i._pendingCallbacks?i._pendingCallbacks.push(e):i._pendingCallbacks=[e],void n(i)):null},enqueueCallbackInternal:function(t,e){"function"!=typeof e?u(!1):void 0,t._pendingCallbacks?t._pendingCallbacks.push(e):t._pendingCallbacks=[e],n(t)},enqueueForceUpdate:function(t){var e=o(t,"forceUpdate");e&&(e._pendingForceUpdate=!0,n(e))},enqueueReplaceState:function(t,e){var i=o(t,"replaceState");i&&(i._pendingStateQueue=[e],i._pendingReplaceState=!0,n(i))},enqueueSetState:function(t,e){var i=o(t,"setState");if(i){var s=i._pendingStateQueue||(i._pendingStateQueue=[]);s.push(e),n(i)}},enqueueSetProps:function(t,e){var i=o(t,"setProps");i&&c.enqueueSetPropsInternal(i,e)},enqueueSetPropsInternal:function(t,e){var i=t._topLevelWrapper;i?void 0:u(!1);var o=i._pendingElement||i._currentElement,r=o.props,a=l({},r.props,e);i._pendingElement=s.cloneAndReplaceProps(o,s.cloneAndReplaceProps(r,a)),n(i)},enqueueReplaceProps:function(t,e){var i=o(t,"replaceProps");i&&c.enqueueReplacePropsInternal(i,e)},enqueueReplacePropsInternal:function(t,e){var i=t._topLevelWrapper;i?void 0:u(!1);var o=i._pendingElement||i._currentElement,r=o.props;i._pendingElement=s.cloneAndReplaceProps(o,s.cloneAndReplaceProps(r,e)),n(i)},enqueueElementInternal:function(t,e){t._pendingElement=e,n(t)}});t.exports=c},function(t){"use strict";function e(t,e){var i=null===t||t===!1,n=null===e||e===!1;if(i||n)return i===n;var o=typeof t,s=typeof e;return"string"===o||"number"===o?"string"===s||"number"===s:"object"===s&&t.type===e.type&&t.key===e.key}t.exports=e},function(t,e,i){"use strict";function n(){this._callbacks=null,this._contexts=null}var o=i(13),s=i(2),r=i(1);s(n.prototype,{enqueue:function(t,e){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(t),this._contexts.push(e)},notifyAll:function(){var t=this._callbacks,e=this._contexts;if(t){t.length!==e.length?r(!1):void 0,this._callbacks=null,this._contexts=null;for(var i=0;i<t.length;i++)t[i].call(e[i]);t.length=0,e.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),o.addPoolingTo(n),t.exports=n},function(t,e,i){"use strict";
var n=i(1),o=!1,s={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(t){o?n(!1):void 0,s.unmountIDFromEnvironment=t.unmountIDFromEnvironment,s.replaceNodeWithMarkupByID=t.replaceNodeWithMarkupByID,s.processChildrenUpdates=t.processChildrenUpdates,o=!0}}};t.exports=s},function(t){"use strict";function e(t){var e=t&&(i&&t[i]||t[n]);return"function"==typeof e?e:void 0}var i="function"==typeof Symbol&&Symbol.iterator,n="@@iterator";t.exports=e},function(t,e,i){"use strict";function n(t){return"function"==typeof t&&"undefined"!=typeof t.prototype&&"function"==typeof t.prototype.mountComponent&&"function"==typeof t.prototype.receiveComponent}function o(t){var e;if(null===t||t===!1)e=new r(o);else if("object"==typeof t){var i=t;!i||"function"!=typeof i.type&&"string"!=typeof i.type?u(!1):void 0,e="string"==typeof i.type?a.createInternalComponent(i):n(i.type)?new i.type(i):new c}else"string"==typeof t||"number"==typeof t?e=a.createInstanceForText(t):u(!1);return e.construct(t),e._mountIndex=0,e._mountImage=null,e}var s=i(87),r=i(60),a=i(62),l=i(2),u=i(1),c=(i(3),function(){});l(c.prototype,s.Mixin,{_instantiateReactComponent:o}),t.exports=o},function(t,e,i){"use strict";function n(t,e){if(!s.canUseDOM||e&&!("addEventListener"in document))return!1;var i="on"+t,n=i in document;if(!n){var r=document.createElement("div");r.setAttribute(i,"return;"),n="function"==typeof r[i]}return!n&&o&&"wheel"===t&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var o,s=i(4);s.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=n},function(t,e,i){"use strict";function n(t){return g[t]}function o(t,e){return t&&null!=t.key?r(t.key):e.toString(36)}function s(t){return(""+t).replace(m,n)}function r(t){return"$"+s(t)}function a(t,e,i,n){var s=typeof t;if(("undefined"===s||"boolean"===s)&&(t=null),null===t||"string"===s||"number"===s||u.isValidElement(t))return i(n,t,""===e?p+o(t,0):e),1;var l,c,g=0,m=""===e?p:e+f;if(Array.isArray(t))for(var v=0;v<t.length;v++)l=t[v],c=m+o(l,v),g+=a(l,c,i,n);else{var y=h(t);if(y){var b,w=y.call(t);if(y!==t.entries)for(var _=0;!(b=w.next()).done;)l=b.value,c=m+o(l,_++),g+=a(l,c,i,n);else for(;!(b=w.next()).done;){var k=b.value;k&&(l=k[1],c=m+r(k[0])+f+o(l,0),g+=a(l,c,i,n))}}else"object"===s&&(String(t),d(!1))}return g}function l(t,e,i){return null==t?0:a(t,"",e,i)}var u=(i(10),i(5)),c=i(16),h=i(36),d=i(1),p=(i(3),c.SEPARATOR),f=":",g={"=":"=0",".":"=1",":":"=2"},m=/[=.:]/g;t.exports=l},function(t,e,i){"use strict";var n=(i(2),i(7)),o=(i(3),n);t.exports=o},function(t,e,i){"use strict";function n(t){return null==t?null:1===t.nodeType?t:o.has(t)?s.getNodeFromInstance(t):(null!=t.render&&"function"==typeof t.render?r(!1):void 0,void r(!1))}var o=(i(10),i(18)),s=i(6),r=i(1);i(3),t.exports=n},function(t,e,i){"use strict";function n(t){return c.hasOwnProperty(t)?!0:u.hasOwnProperty(t)?!1:l.test(t)?(c[t]=!0,!0):(u[t]=!0,!1)}function o(t,e){return null==e||t.hasBooleanValue&&!e||t.hasNumericValue&&isNaN(e)||t.hasPositiveNumericValue&&1>e||t.hasOverloadedBooleanValue&&e===!1}var s=i(17),r=i(8),a=i(150),l=(i(3),/^[a-zA-Z_][\w\.\-]*$/),u={},c={},h={createMarkupForID:function(t){return s.ID_ATTRIBUTE_NAME+"="+a(t)},setAttributeForID:function(t,e){t.setAttribute(s.ID_ATTRIBUTE_NAME,e)},createMarkupForProperty:function(t,e){var i=s.properties.hasOwnProperty(t)?s.properties[t]:null;if(i){if(o(i,e))return"";var n=i.attributeName;return i.hasBooleanValue||i.hasOverloadedBooleanValue&&e===!0?n+'=""':n+"="+a(e)}return s.isCustomAttribute(t)?null==e?"":t+"="+a(e):null},createMarkupForCustomAttribute:function(t,e){return n(t)&&null!=e?t+"="+a(e):""},setValueForProperty:function(t,e,i){var n=s.properties.hasOwnProperty(e)?s.properties[e]:null;if(n){var r=n.mutationMethod;if(r)r(t,i);else if(o(n,i))this.deleteValueForProperty(t,e);else if(n.mustUseAttribute){var a=n.attributeName,l=n.attributeNamespace;l?t.setAttributeNS(l,a,""+i):n.hasBooleanValue||n.hasOverloadedBooleanValue&&i===!0?t.setAttribute(a,""):t.setAttribute(a,""+i)}else{var u=n.propertyName;n.hasSideEffects&&""+t[u]==""+i||(t[u]=i)}}else s.isCustomAttribute(e)&&h.setValueForAttribute(t,e,i)},setValueForAttribute:function(t,e,i){n(e)&&(null==i?t.removeAttribute(e):t.setAttribute(e,""+i))},deleteValueForProperty:function(t,e){var i=s.properties.hasOwnProperty(e)?s.properties[e]:null;if(i){var n=i.mutationMethod;if(n)n(t,void 0);else if(i.mustUseAttribute)t.removeAttribute(i.attributeName);else{var o=i.propertyName,r=s.getDefaultValueForProperty(t.nodeName,o);i.hasSideEffects&&""+t[o]===r||(t[o]=r)}}else s.isCustomAttribute(e)&&t.removeAttribute(e)}};r.measureMethods(h,"DOMPropertyOperations",{setValueForProperty:"setValueForProperty",setValueForAttribute:"setValueForAttribute",deleteValueForProperty:"deleteValueForProperty"}),t.exports=h},function(t,e,i){"use strict";function n(t){null!=t.checkedLink&&null!=t.valueLink?u(!1):void 0}function o(t){n(t),null!=t.value||null!=t.onChange?u(!1):void 0}function s(t){n(t),null!=t.checked||null!=t.onChange?u(!1):void 0}function r(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}var a=i(83),l=i(27),u=i(1),c=(i(3),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),h={value:function(t,e){return!t[e]||c[t.type]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(t,e){return!t[e]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:a.func},d={},p={checkPropTypes:function(t,e,i){for(var n in h){if(h.hasOwnProperty(n))var o=h[n](e,n,t,l.prop);o instanceof Error&&!(o.message in d)&&(d[o.message]=!0,r(i))}},getValue:function(t){return t.valueLink?(o(t),t.valueLink.value):t.value},getChecked:function(t){return t.checkedLink?(s(t),t.checkedLink.value):t.checked},executeOnChange:function(t,e){return t.valueLink?(o(t),t.valueLink.requestChange(e.target.value)):t.checkedLink?(s(t),t.checkedLink.requestChange(e.target.checked)):t.onChange?t.onChange.call(void 0,e):void 0}};t.exports=p},function(t,e,i){"use strict";var n=i(45),o=i(6),s={processChildrenUpdates:n.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:n.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(t){o.purgeID(t)}};t.exports=s},function(t,e,i){"use strict";var n=i(71),o=i(42),s=i(6),r=i(8),a=i(1),l={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},u={updatePropertyByID:function(t,e,i){var n=s.getNode(t);l.hasOwnProperty(e)?a(!1):void 0,null!=i?o.setValueForProperty(n,e,i):o.deleteValueForProperty(n,e)},dangerouslyReplaceNodeWithMarkupByID:function(t,e){var i=s.getNode(t);n.dangerouslyReplaceNodeWithMarkup(i,e)},dangerouslyProcessChildrenUpdates:function(t,e){for(var i=0;i<t.length;i++)t[i].parentNode=s.getNode(t[i].parentID);n.processUpdates(t,e)}};r.measureMethods(u,"ReactDOMIDOperations",{dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),t.exports=u},function(t){"use strict";t.exports="0.14.6"},function(t){"use strict";function e(t){var e,i=t.keyCode;return"charCode"in t?(e=t.charCode,0===e&&13===i&&(e=13)):e=i,e>=32||13===e?e:0}t.exports=e},function(t){"use strict";function e(t){var e=this,i=e.nativeEvent;if(i.getModifierState)return i.getModifierState(t);var o=n[t];return o?!!i[o]:!1}function i(){return e}var n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=i},function(t){"use strict";function e(t){var e=t.target||t.srcElement||window;return 3===e.nodeType?e.parentNode:e}t.exports=e},function(t,e,i){"use strict";var n=i(4),o=i(31),s=i(29),r=function(t,e){t.textContent=e};n.canUseDOM&&("textContent"in document.documentElement||(r=function(t,e){s(t,o(e))})),t.exports=r},function(t){"use strict";function e(t,e){if(t===e)return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),o=Object.keys(e);if(n.length!==o.length)return!1;for(var s=i.bind(e),r=0;r<n.length;r++)if(!s(n[r])||t[n[r]]!==e[n[r]])return!1;return!0}var i=Object.prototype.hasOwnProperty;t.exports=e},function(t,e,i){"use strict";function n(t){return(""+t).replace(w,"//")}function o(t,e){this.func=t,this.context=e,this.count=0}function s(t,e){var i=t.func,n=t.context;i.call(n,e,t.count++)}function r(t,e,i){if(null==t)return t;var n=o.getPooled(e,i);v(t,s,n),o.release(n)}function a(t,e,i,n){this.result=t,this.keyPrefix=e,this.func=i,this.context=n,this.count=0}function l(t,e,i){var o=t.result,s=t.keyPrefix,r=t.func,a=t.context,l=r.call(a,e,t.count++);Array.isArray(l)?u(l,o,i,m.thatReturnsArgument):null!=l&&(g.isValidElement(l)&&(l=g.cloneAndReplaceKey(l,s+(l!==e?n(l.key||"")+"/":"")+i)),o.push(l))}function u(t,e,i,o,s){var r="";null!=i&&(r=n(i)+"/");var u=a.getPooled(e,r,o,s);v(t,l,u),a.release(u)}function c(t,e,i){if(null==t)return t;var n=[];return u(t,n,null,e,i),n}function h(){return null}function d(t){return v(t,h,null)}function p(t){var e=[];return u(t,e,null,m.thatReturnsArgument),e}var f=i(13),g=i(5),m=i(7),v=i(39),y=f.twoArgumentPooler,b=f.fourArgumentPooler,w=/\/(?!\/)/g;o.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},f.addPoolingTo(o,y),a.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},f.addPoolingTo(a,b);var _={forEach:r,map:c,mapIntoWithKeyPrefixInternal:u,count:d,toArray:p};t.exports=_},function(t){"use strict";var e={injectCreateReactRootIndex:function(t){i.createReactRootIndex=t}},i={createReactRootIndex:null,injection:e};t.exports=i},function(t,e,i){"use strict";function n(){if(a)for(var t in l){var e=l[t],i=a.indexOf(t);if(i>-1?void 0:r(!1),!u.plugins[i]){e.extractEvents?void 0:r(!1),u.plugins[i]=e;var n=e.eventTypes;for(var s in n)o(n[s],e,s)?void 0:r(!1)}}}function o(t,e,i){u.eventNameDispatchConfigs.hasOwnProperty(i)?r(!1):void 0,u.eventNameDispatchConfigs[i]=t;var n=t.phasedRegistrationNames;if(n){for(var o in n)if(n.hasOwnProperty(o)){var a=n[o];s(a,e,i)}return!0}return t.registrationName?(s(t.registrationName,e,i),!0):!1}function s(t,e,i){u.registrationNameModules[t]?r(!1):void 0,u.registrationNameModules[t]=e,u.registrationNameDependencies[t]=e.eventTypes[i].dependencies}var r=i(1),a=null,l={},u={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(t){a?r(!1):void 0,a=Array.prototype.slice.call(t),n()},injectEventPluginsByName:function(t){var e=!1;for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];l.hasOwnProperty(i)&&l[i]===o||(l[i]?r(!1):void 0,l[i]=o,e=!0)}e&&n()},getPluginModuleForEvent:function(t){var e=t.dispatchConfig;if(e.registrationName)return u.registrationNameModules[e.registrationName]||null;for(var i in e.phasedRegistrationNames)if(e.phasedRegistrationNames.hasOwnProperty(i)){var n=u.registrationNameModules[e.phasedRegistrationNames[i]];if(n)return n}return null},_resetEventPlugins:function(){a=null;for(var t in l)l.hasOwnProperty(t)&&delete l[t];u.plugins.length=0;var e=u.eventNameDispatchConfigs;for(var i in e)e.hasOwnProperty(i)&&delete e[i];var n=u.registrationNameModules;for(var o in n)n.hasOwnProperty(o)&&delete n[o]}};t.exports=u},function(t){"use strict";function e(t){return!!o[t]}function i(t){o[t]=!0}function n(t){delete o[t]}var o={},s={isNullComponentID:e,registerNullComponentID:i,deregisterNullComponentID:n};t.exports=s},function(t){"use strict";function e(t,e,n,o){try{return e(n,o)}catch(s){return void(null===i&&(i=s))}}var i=null,n={invokeGuardedCallback:e,invokeGuardedCallbackWithCatch:e,rethrowCaughtError:function(){if(i){var t=i;throw i=null,t}}};t.exports=n},function(t,e,i){"use strict";function n(t,e){var i=!0;t:for(;i;){var n=t,s=e;if(i=!1,n&&s){if(n===s)return!0;if(o(n))return!1;if(o(s)){t=n,e=s.parentNode,i=!0;continue t}return n.contains?n.contains(s):n.compareDocumentPosition?!!(16&n.compareDocumentPosition(s)):!1}return!1}}var o=i(90);t.exports=n},function(t,e,i){"use strict";var n=i(74),o=i(92),s=i(128),r=i(2),a=i(147),l={};r(l,s),r(l,{findDOMNode:a("findDOMNode","ReactDOM","react-dom",n,n.findDOMNode),render:a("render","ReactDOM","react-dom",n,n.render),unmountComponentAtNode:a("unmountComponentAtNode","ReactDOM","react-dom",n,n.unmountComponentAtNode),renderToString:a("renderToString","ReactDOMServer","react-dom/server",o,o.renderToString),renderToStaticMarkup:a("renderToStaticMarkup","ReactDOMServer","react-dom/server",o,o.renderToStaticMarkup)}),l.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n,l.__SECRET_DOM_SERVER_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o,t.exports=l},function(t){"use strict";var e={useCreateElement:!1};t.exports=e},function(t,e,i){"use strict";var n,o=i(5),s=i(55),r=i(14),a=i(2),l={injectEmptyComponent:function(t){n=o.createElement(t)}},u=function(t){this._currentElement=null,this._rootNodeID=null,this._renderedComponent=t(n)};a(u.prototype,{construct:function(){},mountComponent:function(t,e,i){return s.registerNullComponentID(t),this._rootNodeID=t,r.mountComponent(this._renderedComponent,t,e,i)},receiveComponent:function(){},unmountComponent:function(){r.unmountComponent(this._renderedComponent),s.deregisterNullComponentID(this._rootNodeID),this._rootNodeID=null,this._renderedComponent=null}}),u.injection=l,t.exports=u},function(t,e,i){"use strict";var n=i(96),o=/\/?>/,s={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(t){var e=n(t);return t.replace(o," "+s.CHECKSUM_ATTR_NAME+'="'+e+'"$&')},canReuseMarkup:function(t,e){var i=e.getAttribute(s.CHECKSUM_ATTR_NAME);i=i&&parseInt(i,10);var o=n(t);return o===i}};t.exports=s},function(t,e,i){"use strict";function n(t){if("function"==typeof t.type)return t.type;var e=t.type,i=h[e];return null==i&&(h[e]=i=u(e)),i}function o(t){return c?void 0:l(!1),new c(t.type,t.props)}function s(t){return new d(t)}function r(t){return t instanceof d}var a=i(2),l=i(1),u=null,c=null,h={},d=null,p={injectGenericComponentClass:function(t){c=t},injectTextComponentClass:function(t){d=t},injectComponentClasses:function(t){a(h,t)}},f={getComponentClassForElement:n,createInternalComponent:o,createInstanceForText:s,isTextComponent:r,injection:p};t.exports=f},function(t){"use strict";var e={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(t){e.currentScrollLeft=t.x,e.currentScrollTop=t.y}};t.exports=e},function(t,e,i){"use strict";function n(t,e){if(null==e?o(!1):void 0,null==t)return e;var i=Array.isArray(t),n=Array.isArray(e);return i&&n?(t.push.apply(t,e),t):i?(t.push(e),t):n?[t].concat(e):[t,e]}var o=i(1);t.exports=n},function(t){"use strict";var e=function(t,e,i){Array.isArray(t)?t.forEach(e,i):t&&e.call(i,t)};t.exports=e},function(t,e,i){"use strict";var n=i(7),o={listen:function(t,e,i){return t.addEventListener?(t.addEventListener(e,i,!1),{remove:function(){t.removeEventListener(e,i,!1)}}):t.attachEvent?(t.attachEvent("on"+e,i),{remove:function(){t.detachEvent("on"+e,i)}}):void 0},capture:function(t,e,i){return t.addEventListener?(t.addEventListener(e,i,!0),{remove:function(){t.removeEventListener(e,i,!0)}}):{remove:n}},registerDefault:function(){}};t.exports=o},function(t){"use strict";function e(t){try{t.focus()}catch(e){}}t.exports=e},function(t){"use strict";function e(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(t){return document.body}}t.exports=e},function(t,e,i){"use strict";function n(t){return r?void 0:s(!1),d.hasOwnProperty(t)||(t="*"),a.hasOwnProperty(t)||(r.innerHTML="*"===t?"<link />":"<"+t+"></"+t+">",a[t]=!r.firstChild),a[t]?d[t]:null}var o=i(4),s=i(1),r=o.canUseDOM?document.createElement("div"):null,a={},l=[1,'<select multiple="true">',"</select>"],u=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],h=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],d={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:l,option:l,caption:u,colgroup:u,tbody:u,tfoot:u,thead:u,td:c,th:c},p=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];p.forEach(function(t){d[t]=h,a[t]=!0}),t.exports=n},function(t){"use strict";function e(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}var i={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},n=["Webkit","ms","Moz","O"];Object.keys(i).forEach(function(t){n.forEach(function(n){i[e(n,t)]=i[t]})});var o={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},s={isUnitlessNumber:i,shorthandPropertyExpansions:o};t.exports=s},function(t,e,i){"use strict";function n(t,e,i){var n=i>=t.childNodes.length?null:t.childNodes.item(i);t.insertBefore(e,n)}var o=i(112),s=i(81),r=i(8),a=i(29),l=i(50),u=i(1),c={dangerouslyReplaceNodeWithMarkup:o.dangerouslyReplaceNodeWithMarkup,updateTextContent:l,processUpdates:function(t,e){for(var i,r=null,c=null,h=0;h<t.length;h++)if(i=t[h],i.type===s.MOVE_EXISTING||i.type===s.REMOVE_NODE){var d=i.fromIndex,p=i.parentNode.childNodes[d],f=i.parentID;p?void 0:u(!1),r=r||{},r[f]=r[f]||[],r[f][d]=p,c=c||[],c.push(p)}var g;if(g=e.length&&"string"==typeof e[0]?o.dangerouslyRenderMarkup(e):e,c)for(var m=0;m<c.length;m++)c[m].parentNode.removeChild(c[m]);for(var v=0;v<t.length;v++)switch(i=t[v],i.type){case s.INSERT_MARKUP:n(i.parentNode,g[i.markupIndex],i.toIndex);break;case s.MOVE_EXISTING:n(i.parentNode,r[i.parentID][i.fromIndex],i.toIndex);break;case s.SET_MARKUP:a(i.parentNode,i.content);break;case s.TEXT_CONTENT:l(i.parentNode,i.content);break;case s.REMOVE_NODE:}}};r.measureMethods(c,"DOMChildrenOperations",{updateTextContent:"updateTextContent"}),t.exports=c},function(t,e,i){"use strict";function n(t,e){var i=k.hasOwnProperty(e)?k[e]:null;x.hasOwnProperty(e)&&(i!==w.OVERRIDE_BASE?m(!1):void 0),t.hasOwnProperty(e)&&(i!==w.DEFINE_MANY&&i!==w.DEFINE_MANY_MERGED?m(!1):void 0)}function o(t,e){if(e){"function"==typeof e?m(!1):void 0,d.isValidElement(e)?m(!1):void 0;var i=t.prototype;e.hasOwnProperty(b)&&C.mixins(t,e.mixins);for(var o in e)if(e.hasOwnProperty(o)&&o!==b){var s=e[o];if(n(i,o),C.hasOwnProperty(o))C[o](t,s);else{var r=k.hasOwnProperty(o),u=i.hasOwnProperty(o),c="function"==typeof s,h=c&&!r&&!u&&e.autobind!==!1;if(h)i.__reactAutoBindMap||(i.__reactAutoBindMap={}),i.__reactAutoBindMap[o]=s,i[o]=s;else if(u){var p=k[o];!r||p!==w.DEFINE_MANY_MERGED&&p!==w.DEFINE_MANY?m(!1):void 0,p===w.DEFINE_MANY_MERGED?i[o]=a(i[o],s):p===w.DEFINE_MANY&&(i[o]=l(i[o],s))}else i[o]=s}}}}function s(t,e){if(e)for(var i in e){var n=e[i];if(e.hasOwnProperty(i)){var o=i in C;o?m(!1):void 0;var s=i in t;s?m(!1):void 0,t[i]=n}}}function r(t,e){t&&e&&"object"==typeof t&&"object"==typeof e?void 0:m(!1);for(var i in e)e.hasOwnProperty(i)&&(void 0!==t[i]?m(!1):void 0,t[i]=e[i]);return t}function a(t,e){return function(){var i=t.apply(this,arguments),n=e.apply(this,arguments);if(null==i)return n;if(null==n)return i;var o={};return r(o,i),r(o,n),o}}function l(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function u(t,e){var i=e.bind(t);return i}function c(t){for(var e in t.__reactAutoBindMap)if(t.__reactAutoBindMap.hasOwnProperty(e)){var i=t.__reactAutoBindMap[e];t[e]=u(t,i)}}var h=i(73),d=i(5),p=(i(27),i(26),i(82)),f=i(2),g=i(19),m=i(1),v=i(24),y=i(12),b=(i(3),y({mixins:null})),w=v({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),_=[],k={mixins:w.DEFINE_MANY,statics:w.DEFINE_MANY,propTypes:w.DEFINE_MANY,contextTypes:w.DEFINE_MANY,childContextTypes:w.DEFINE_MANY,getDefaultProps:w.DEFINE_MANY_MERGED,getInitialState:w.DEFINE_MANY_MERGED,getChildContext:w.DEFINE_MANY_MERGED,render:w.DEFINE_ONCE,componentWillMount:w.DEFINE_MANY,componentDidMount:w.DEFINE_MANY,componentWillReceiveProps:w.DEFINE_MANY,shouldComponentUpdate:w.DEFINE_ONCE,componentWillUpdate:w.DEFINE_MANY,componentDidUpdate:w.DEFINE_MANY,componentWillUnmount:w.DEFINE_MANY,updateComponent:w.OVERRIDE_BASE},C={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var i=0;i<e.length;i++)o(t,e[i])},childContextTypes:function(t,e){t.childContextTypes=f({},t.childContextTypes,e)},contextTypes:function(t,e){t.contextTypes=f({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps=t.getDefaultProps?a(t.getDefaultProps,e):e},propTypes:function(t,e){t.propTypes=f({},t.propTypes,e)},statics:function(t,e){s(t,e)},autobind:function(){}},x={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t),e&&this.updater.enqueueCallback(this,e)},isMounted:function(){return this.updater.isMounted(this)},setProps:function(t,e){this.updater.enqueueSetProps(this,t),e&&this.updater.enqueueCallback(this,e)},replaceProps:function(t,e){this.updater.enqueueReplaceProps(this,t),e&&this.updater.enqueueCallback(this,e)}},S=function(){};f(S.prototype,h.prototype,x);var T={createClass:function(t){var e=function(t,e,i){this.__reactAutoBindMap&&c(this),this.props=t,this.context=e,this.refs=g,this.updater=i||p,this.state=null;var n=this.getInitialState?this.getInitialState():null;"object"!=typeof n||Array.isArray(n)?m(!1):void 0,this.state=n};e.prototype=new S,e.prototype.constructor=e,_.forEach(o.bind(null,e)),o(e,t),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),e.prototype.render?void 0:m(!1);for(var i in k)e.prototype[i]||(e.prototype[i]=null);return e},injection:{injectMixin:function(t){_.push(t)}}};t.exports=T},function(t,e,i){"use strict";function n(t,e,i){this.props=t,this.context=e,this.refs=s,this.updater=i||o}var o=i(82),s=(i(23),i(19)),r=i(1);i(3),n.prototype.isReactComponent={},n.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t?r(!1):void 0,this.updater.enqueueSetState(this,t),e&&this.updater.enqueueCallback(this,e)},n.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this),t&&this.updater.enqueueCallback(this,t)},t.exports=n},function(t,e,i){"use strict";var n=i(10),o=i(76),s=i(78),r=i(16),a=i(6),l=i(8),u=i(14),c=i(9),h=i(46),d=i(41),p=i(151);i(3),s.inject();var f=l.measure("React","render",a.render),g={findDOMNode:d,render:f,unmountComponentAtNode:a.unmountComponentAtNode,version:h,unstable_batchedUpdates:c.batchedUpdates,unstable_renderSubtreeIntoContainer:p};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:n,InstanceHandles:r,Mount:a,Reconciler:u,TextComponent:o}),t.exports=g},function(t,e,i){"use strict";function n(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var t=this._currentElement.props,e=r.getValue(t);null!=e&&o(this,Boolean(t.multiple),e)}}function o(t,e,i){var n,o,s=a.getNode(t._rootNodeID).options;if(e){for(n={},o=0;o<i.length;o++)n[""+i[o]]=!0;for(o=0;o<s.length;o++){var r=n.hasOwnProperty(s[o].value);s[o].selected!==r&&(s[o].selected=r)}}else{for(n=""+i,o=0;o<s.length;o++)if(s[o].value===n)return void(s[o].selected=!0);s.length&&(s[0].selected=!0)}}function s(t){var e=this._currentElement.props,i=r.executeOnChange(e,t);return this._wrapperState.pendingUpdate=!0,l.asap(n,this),i}var r=i(43),a=i(6),l=i(9),u=i(2),c=(i(3),"__ReactDOMSelect_value$"+Math.random().toString(36).slice(2)),h={valueContextKey:c,getNativeProps:function(t,e){return u({},e,{onChange:t._wrapperState.onChange,value:void 0})},mountWrapper:function(t,e){var i=r.getValue(e);t._wrapperState={pendingUpdate:!1,initialValue:null!=i?i:e.defaultValue,onChange:s.bind(t),wasMultiple:Boolean(e.multiple)}},processChildContext:function(t,e,i){var n=u({},i);return n[c]=t._wrapperState.initialValue,n},postUpdateWrapper:function(t){var e=t._currentElement.props;t._wrapperState.initialValue=void 0;var i=t._wrapperState.wasMultiple;t._wrapperState.wasMultiple=Boolean(e.multiple);var n=r.getValue(e);null!=n?(t._wrapperState.pendingUpdate=!1,o(t,Boolean(e.multiple),n)):i!==Boolean(e.multiple)&&(null!=e.defaultValue?o(t,Boolean(e.multiple),e.defaultValue):o(t,Boolean(e.multiple),e.multiple?[]:""))}};t.exports=h},function(t,e,i){"use strict";var n=i(71),o=i(42),s=i(44),r=i(6),a=i(2),l=i(31),u=i(50),c=(i(40),function(){});a(c.prototype,{construct:function(t){this._currentElement=t,this._stringText=""+t,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(t,e,i){if(this._rootNodeID=t,e.useCreateElement){var n=i[r.ownerDocumentContextKey],s=n.createElement("span");return o.setAttributeForID(s,t),r.getID(s),u(s,this._stringText),s}var a=l(this._stringText);return e.renderToStaticMarkup?a:"<span "+o.createMarkupForID(t)+">"+a+"</span>"},receiveComponent:function(t){if(t!==this._currentElement){this._currentElement=t;var e=""+t;if(e!==this._stringText){this._stringText=e;var i=r.getNode(this._rootNodeID);n.updateTextContent(i,e)}}},unmountComponent:function(){s.unmountIDFromEnvironment(this._rootNodeID)}}),t.exports=c},function(t,e,i){"use strict";function n(){this.reinitializeTransaction()}var o=i(9),s=i(28),r=i(2),a=i(7),l={initialize:a,close:function(){d.isBatchingUpdates=!1}},u={initialize:a,close:o.flushBatchedUpdates.bind(o)},c=[u,l];r(n.prototype,s.Mixin,{getTransactionWrappers:function(){return c}});var h=new n,d={isBatchingUpdates:!1,batchedUpdates:function(t,e,i,n,o,s){var r=d.isBatchingUpdates;d.isBatchingUpdates=!0,r?t(e,i,n,o,s):h.perform(t,null,e,i,n,o,s)}};t.exports=d},function(t,e,i){"use strict";function n(){S||(S=!0,v.EventEmitter.injectReactEventListener(m),v.EventPluginHub.injectEventPluginOrder(a),v.EventPluginHub.injectInstanceHandle(y),v.EventPluginHub.injectMount(b),v.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:C,EnterLeaveEventPlugin:l,ChangeEventPlugin:s,SelectEventPlugin:_,BeforeInputEventPlugin:o}),v.NativeComponent.injectGenericComponentClass(f),v.NativeComponent.injectTextComponentClass(g),v.Class.injectMixin(h),v.DOMProperty.injectDOMPropertyConfig(c),v.DOMProperty.injectDOMPropertyConfig(x),v.EmptyComponent.injectEmptyComponent("noscript"),v.Updates.injectReconcileTransaction(w),v.Updates.injectBatchingStrategy(p),v.RootIndex.injectCreateReactRootIndex(u.canUseDOM?r.createReactRootIndex:k.createReactRootIndex),v.Component.injectEnvironment(d))}var o=i(108),s=i(110),r=i(111),a=i(113),l=i(114),u=i(4),c=i(116),h=i(117),d=i(44),p=i(77),f=i(120),g=i(76),m=i(126),v=i(127),y=i(16),b=i(6),w=i(130),_=i(135),k=i(136),C=i(137),x=i(134),S=!1;t.exports={inject:n}},function(t,e,i){"use strict";function n(){if(h.current){var t=h.current.getName();if(t)return" Check the render method of `"+t+"`."}return""}function o(t,e){t._store&&!t._store.validated&&null==t.key&&(t._store.validated=!0,s("uniqueKey",t,e))}function s(t,e,i){var o=n();if(!o){var s="string"==typeof i?i:i.displayName||i.name;s&&(o=" Check the top-level render call using <"+s+">.")}var r=f[t]||(f[t]={});if(r[o])return null;r[o]=!0;var a={parentOrOwner:o,url:" See https://fb.me/react-warning-keys for more information.",childOwner:null};return e&&e._owner&&e._owner!==h.current&&(a.childOwner=" It was passed a child from "+e._owner.getName()+"."),a}function r(t,e){if("object"==typeof t)if(Array.isArray(t))for(var i=0;i<t.length;i++){var n=t[i];u.isValidElement(n)&&o(n,e)}else if(u.isValidElement(t))t._store&&(t._store.validated=!0);else if(t){var s=d(t);if(s&&s!==t.entries)for(var r,a=s.call(t);!(r=a.next()).done;)u.isValidElement(r.value)&&o(r.value,e)}}function a(t,e,i,o){for(var s in e)if(e.hasOwnProperty(s)){var r;try{"function"!=typeof e[s]?p(!1):void 0,r=e[s](i,s,t,o)}catch(a){r=a}r instanceof Error&&!(r.message in g)&&(g[r.message]=!0,n())}}function l(t){var e=t.type;if("function"==typeof e){var i=e.displayName||e.name;e.propTypes&&a(i,e.propTypes,t.props,c.prop),"function"==typeof e.getDefaultProps}}var u=i(5),c=i(27),h=(i(26),i(10)),d=(i(23),i(36)),p=i(1),f=(i(3),{}),g={},m={createElement:function(t){var e="string"==typeof t||"function"==typeof t,i=u.createElement.apply(this,arguments);if(null==i)return i;if(e)for(var n=2;n<arguments.length;n++)r(arguments[n],t);return l(i),i},createFactory:function(t){var e=m.createElement.bind(null,t);return e.type=t,e},cloneElement:function(){for(var t=u.cloneElement.apply(this,arguments),e=2;e<arguments.length;e++)r(arguments[e],t.type);return l(t),t}};t.exports=m},function(t,e,i){"use strict";function n(t){return s(document.documentElement,t)}var o=i(124),s=i(57),r=i(67),a=i(68),l={hasSelectionCapabilities:function(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&"text"===t.type||"textarea"===e||"true"===t.contentEditable)},getSelectionInformation:function(){var t=a();return{focusedElem:t,selectionRange:l.hasSelectionCapabilities(t)?l.getSelection(t):null}},restoreSelection:function(t){var e=a(),i=t.focusedElem,o=t.selectionRange;e!==i&&n(i)&&(l.hasSelectionCapabilities(i)&&l.setSelection(i,o),r(i))},getSelection:function(t){var e;if("selectionStart"in t)e={start:t.selectionStart,end:t.selectionEnd};else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var i=document.selection.createRange();i.parentElement()===t&&(e={start:-i.moveStart("character",-t.value.length),end:-i.moveEnd("character",-t.value.length)})}else e=o.getOffsets(t);return e||{start:0,end:0}},setSelection:function(t,e){var i=e.start,n=e.end;if("undefined"==typeof n&&(n=i),"selectionStart"in t)t.selectionStart=i,t.selectionEnd=Math.min(n,t.value.length);else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var s=t.createTextRange();s.collapse(!0),s.moveStart("character",i),s.moveEnd("character",n-i),s.select()}else o.setOffsets(t,e)}};t.exports=l},function(t,e,i){"use strict";var n=i(24),o=n({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});t.exports=o},function(t,e,i){"use strict";function n(){}var o=(i(3),{isMounted:function(){return!1},enqueueCallback:function(){},enqueueForceUpdate:function(t){n(t,"forceUpdate")},enqueueReplaceState:function(t){n(t,"replaceState")},enqueueSetState:function(t){n(t,"setState")},enqueueSetProps:function(t){n(t,"setProps")},enqueueReplaceProps:function(t){n(t,"replaceProps")}});t.exports=o},function(t,e,i){"use strict";function n(t){function e(e,i,n,o,s,r){if(o=o||k,r=r||n,null==i[n]){var a=b[s];return e?new Error("Required "+a+" `"+r+"` was not specified in "+("`"+o+"`.")):null}return t(i,n,o,s,r)}var i=e.bind(null,!1);return i.isRequired=e.bind(null,!0),i}function o(t){function e(e,i,n,o,s){var r=e[i],a=g(r);if(a!==t){var l=b[o],u=m(r);return new Error("Invalid "+l+" `"+s+"` of type "+("`"+u+"` supplied to `"+n+"`, expected ")+("`"+t+"`."))}return null}return n(e)}function s(){return n(w.thatReturns(null))}function r(t){function e(e,i,n,o,s){var r=e[i];if(!Array.isArray(r)){var a=b[o],l=g(r);return new Error("Invalid "+a+" `"+s+"` of type "+("`"+l+"` supplied to `"+n+"`, expected an array."))}for(var u=0;u<r.length;u++){var c=t(r,u,n,o,s+"["+u+"]");if(c instanceof Error)return c}return null}return n(e)}function a(){function t(t,e,i,n,o){if(!y.isValidElement(t[e])){var s=b[n];return new Error("Invalid "+s+" `"+o+"` supplied to "+("`"+i+"`, expected a single ReactElement."))
}return null}return n(t)}function l(t){function e(e,i,n,o,s){if(!(e[i]instanceof t)){var r=b[o],a=t.name||k,l=v(e[i]);return new Error("Invalid "+r+" `"+s+"` of type "+("`"+l+"` supplied to `"+n+"`, expected ")+("instance of `"+a+"`."))}return null}return n(e)}function u(t){function e(e,i,n,o,s){for(var r=e[i],a=0;a<t.length;a++)if(r===t[a])return null;var l=b[o],u=JSON.stringify(t);return new Error("Invalid "+l+" `"+s+"` of value `"+r+"` "+("supplied to `"+n+"`, expected one of "+u+"."))}return n(Array.isArray(t)?e:function(){return new Error("Invalid argument supplied to oneOf, expected an instance of array.")})}function c(t){function e(e,i,n,o,s){var r=e[i],a=g(r);if("object"!==a){var l=b[o];return new Error("Invalid "+l+" `"+s+"` of type "+("`"+a+"` supplied to `"+n+"`, expected an object."))}for(var u in r)if(r.hasOwnProperty(u)){var c=t(r,u,n,o,s+"."+u);if(c instanceof Error)return c}return null}return n(e)}function h(t){function e(e,i,n,o,s){for(var r=0;r<t.length;r++){var a=t[r];if(null==a(e,i,n,o,s))return null}var l=b[o];return new Error("Invalid "+l+" `"+s+"` supplied to "+("`"+n+"`."))}return n(Array.isArray(t)?e:function(){return new Error("Invalid argument supplied to oneOfType, expected an instance of array.")})}function d(){function t(t,e,i,n,o){if(!f(t[e])){var s=b[n];return new Error("Invalid "+s+" `"+o+"` supplied to "+("`"+i+"`, expected a ReactNode."))}return null}return n(t)}function p(t){function e(e,i,n,o,s){var r=e[i],a=g(r);if("object"!==a){var l=b[o];return new Error("Invalid "+l+" `"+s+"` of type `"+a+"` "+("supplied to `"+n+"`, expected `object`."))}for(var u in t){var c=t[u];if(c){var h=c(r,u,n,o,s+"."+u);if(h)return h}}return null}return n(e)}function f(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(f);if(null===t||y.isValidElement(t))return!0;var e=_(t);if(!e)return!1;var i,n=e.call(t);if(e!==t.entries){for(;!(i=n.next()).done;)if(!f(i.value))return!1}else for(;!(i=n.next()).done;){var o=i.value;if(o&&!f(o[1]))return!1}return!0;default:return!1}}function g(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":e}function m(t){var e=g(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function v(t){return t.constructor&&t.constructor.name?t.constructor.name:"<<anonymous>>"}var y=i(5),b=i(26),w=i(7),_=i(36),k="<<anonymous>>",C={array:o("array"),bool:o("boolean"),func:o("function"),number:o("number"),object:o("object"),string:o("string"),any:s(),arrayOf:r,element:a(),instanceOf:l,node:d(),objectOf:c,oneOf:u,oneOfType:h,shape:p};t.exports=C},function(t,e,i){"use strict";function n(){return!s&&o.canUseDOM&&(s="textContent"in document.documentElement?"textContent":"innerText"),s}var o=i(4),s=null;t.exports=n},function(t){"use strict";function e(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&i[t.type]||"textarea"===e)}var i={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=e},function(t,e,i){"use strict";function n(t,e,i){var n=t,o=void 0===n[i];o&&null!=e&&(n[i]=e)}function o(t){if(null==t)return t;var e={};return s(t,n,e),e}var s=i(39);i(3),t.exports=o},function(t,e,i){"use strict";function n(t){var e=t._currentElement._owner||null;if(e){var i=e.getName();if(i)return" Check the render method of `"+i+"`."}return""}function o(){}var s=i(35),r=i(10),a=i(5),l=i(18),u=i(8),c=i(27),h=(i(26),i(14)),d=i(32),p=i(2),f=i(19),g=i(1),m=i(33);i(3),o.prototype.render=function(){var t=l.get(this)._currentElement.type;return t(this.props,this.context,this.updater)};var v=1,y={construct:function(t){this._currentElement=t,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null},mountComponent:function(t,e,i){this._context=i,this._mountOrder=v++,this._rootNodeID=t;var n,s,r=this._processProps(this._currentElement.props),u=this._processContext(i),c=this._currentElement.type,p="prototype"in c;p&&(n=new c(r,u,d)),(!p||null===n||n===!1||a.isValidElement(n))&&(s=n,n=new o(c)),n.props=r,n.context=u,n.refs=f,n.updater=d,this._instance=n,l.set(n,this);var m=n.state;void 0===m&&(n.state=m=null),"object"!=typeof m||Array.isArray(m)?g(!1):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,n.componentWillMount&&(n.componentWillMount(),this._pendingStateQueue&&(n.state=this._processPendingState(n.props,n.context))),void 0===s&&(s=this._renderValidatedComponent()),this._renderedComponent=this._instantiateReactComponent(s);var y=h.mountComponent(this._renderedComponent,t,e,this._processChildContext(i));return n.componentDidMount&&e.getReactMountReady().enqueue(n.componentDidMount,n),y},unmountComponent:function(){var t=this._instance;t.componentWillUnmount&&t.componentWillUnmount(),h.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._instance=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,this._topLevelWrapper=null,l.remove(t)},_maskContext:function(t){var e=null,i=this._currentElement.type,n=i.contextTypes;if(!n)return f;e={};for(var o in n)e[o]=t[o];return e},_processContext:function(t){var e=this._maskContext(t);return e},_processChildContext:function(t){var e=this._currentElement.type,i=this._instance,n=i.getChildContext&&i.getChildContext();if(n){"object"!=typeof e.childContextTypes?g(!1):void 0;for(var o in n)o in e.childContextTypes?void 0:g(!1);return p({},t,n)}return t},_processProps:function(t){return t},_checkPropTypes:function(t,e,i){var o=this.getName();for(var s in t)if(t.hasOwnProperty(s)){var r;try{"function"!=typeof t[s]?g(!1):void 0,r=t[s](e,s,o,i)}catch(a){r=a}r instanceof Error&&(n(this),i===c.prop)}},receiveComponent:function(t,e,i){var n=this._currentElement,o=this._context;this._pendingElement=null,this.updateComponent(e,n,t,o,i)},performUpdateIfNecessary:function(t){null!=this._pendingElement&&h.receiveComponent(this,this._pendingElement||this._currentElement,t,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&this.updateComponent(t,this._currentElement,this._currentElement,this._context,this._context)},updateComponent:function(t,e,i,n,o){var s,r=this._instance,a=this._context===o?r.context:this._processContext(o);e===i?s=i.props:(s=this._processProps(i.props),r.componentWillReceiveProps&&r.componentWillReceiveProps(s,a));var l=this._processPendingState(s,a),u=this._pendingForceUpdate||!r.shouldComponentUpdate||r.shouldComponentUpdate(s,l,a);u?(this._pendingForceUpdate=!1,this._performComponentUpdate(i,s,l,a,t,o)):(this._currentElement=i,this._context=o,r.props=s,r.state=l,r.context=a)},_processPendingState:function(t,e){var i=this._instance,n=this._pendingStateQueue,o=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!n)return i.state;if(o&&1===n.length)return n[0];for(var s=p({},o?n[0]:i.state),r=o?1:0;r<n.length;r++){var a=n[r];p(s,"function"==typeof a?a.call(i,s,t,e):a)}return s},_performComponentUpdate:function(t,e,i,n,o,s){var r,a,l,u=this._instance,c=Boolean(u.componentDidUpdate);c&&(r=u.props,a=u.state,l=u.context),u.componentWillUpdate&&u.componentWillUpdate(e,i,n),this._currentElement=t,this._context=s,u.props=e,u.state=i,u.context=n,this._updateRenderedComponent(o,s),c&&o.getReactMountReady().enqueue(u.componentDidUpdate.bind(u,r,a,l),u)},_updateRenderedComponent:function(t,e){var i=this._renderedComponent,n=i._currentElement,o=this._renderValidatedComponent();if(m(n,o))h.receiveComponent(i,o,t,this._processChildContext(e));else{var s=this._rootNodeID,r=i._rootNodeID;h.unmountComponent(i),this._renderedComponent=this._instantiateReactComponent(o);var a=h.mountComponent(this._renderedComponent,s,t,this._processChildContext(e));this._replaceNodeWithMarkupByID(r,a)}},_replaceNodeWithMarkupByID:function(t,e){s.replaceNodeWithMarkupByID(t,e)},_renderValidatedComponentWithoutOwnerOrContext:function(){var t=this._instance,e=t.render();return e},_renderValidatedComponent:function(){var t;r.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{r.current=null}return null===t||t===!1||a.isValidElement(t)?void 0:g(!1),t},attachRef:function(t,e){var i=this.getPublicInstance();null==i?g(!1):void 0;var n=e.getPublicInstance(),o=i.refs===f?i.refs={}:i.refs;o[t]=n},detachRef:function(t){var e=this.getPublicInstance().refs;delete e[t]},getName:function(){var t=this._currentElement.type,e=this._instance&&this._instance.constructor;return t.displayName||e&&e.displayName||t.name||e&&e.name||null},getPublicInstance:function(){var t=this._instance;return t instanceof o?null:t},_instantiateReactComponent:null};u.measureMethods(y,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var b={Mixin:y};t.exports=b},function(t,e,i){"use strict";function n(t){return o.isValidElement(t)?void 0:s(!1),t}var o=i(5),s=i(1);t.exports=n},function(t){"use strict";function e(t){return!(!t||!("function"==typeof Node?t instanceof Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName))}t.exports=e},function(t,e,i){"use strict";function n(t){return o(t)&&3==t.nodeType}var o=i(89);t.exports=n},function(t,e,i){"use strict";function n(t){return t===m.topMouseUp||t===m.topTouchEnd||t===m.topTouchCancel}function o(t){return t===m.topMouseMove||t===m.topTouchMove}function s(t){return t===m.topMouseDown||t===m.topTouchStart}function r(t,e,i,n){var o=t.type||"unknown-event";t.currentTarget=g.Mount.getNode(n),e?p.invokeGuardedCallbackWithCatch(o,i,t,n):p.invokeGuardedCallback(o,i,t,n),t.currentTarget=null}function a(t,e){var i=t._dispatchListeners,n=t._dispatchIDs;if(Array.isArray(i))for(var o=0;o<i.length&&!t.isPropagationStopped();o++)r(t,e,i[o],n[o]);else i&&r(t,e,i,n);t._dispatchListeners=null,t._dispatchIDs=null}function l(t){var e=t._dispatchListeners,i=t._dispatchIDs;if(Array.isArray(e)){for(var n=0;n<e.length&&!t.isPropagationStopped();n++)if(e[n](t,i[n]))return i[n]}else if(e&&e(t,i))return i;return null}function u(t){var e=l(t);return t._dispatchIDs=null,t._dispatchListeners=null,e}function c(t){var e=t._dispatchListeners,i=t._dispatchIDs;Array.isArray(e)?f(!1):void 0;var n=e?e(t,i):null;return t._dispatchListeners=null,t._dispatchIDs=null,n}function h(t){return!!t._dispatchListeners}var d=i(11),p=i(56),f=i(1),g=(i(3),{Mount:null,injectMount:function(t){g.Mount=t}}),m=d.topLevelTypes,v={isEndish:n,isMoveish:o,isStartish:s,executeDirectDispatch:c,executeDispatchesInOrder:a,executeDispatchesInOrderStopAtTrue:u,hasDispatches:h,getNode:function(t){return g.Mount.getNode(t)},getID:function(t){return g.Mount.getID(t)},injection:g};t.exports=v},function(t,e,i){"use strict";var n=i(78),o=i(132),s=i(46);n.inject();var r={renderToString:o.renderToString,renderToStaticMarkup:o.renderToStaticMarkup,version:s};t.exports=r},function(t,e,i){"use strict";function n(t){o.enqueueEvents(t),o.processEventQueue(!1)}var o=i(20),s={handleTopLevel:function(t,e,i,s,r){var a=o.extractEvents(t,e,i,s,r);n(a)}};t.exports=s},function(t,e,i){"use strict";var n=i(1),o={isValidOwner:function(t){return!(!t||"function"!=typeof t.attachRef||"function"!=typeof t.detachRef)},addComponentAsRefTo:function(t,e,i){o.isValidOwner(i)?void 0:n(!1),i.attachRef(e,t)},removeComponentAsRefFrom:function(t,e,i){o.isValidOwner(i)?void 0:n(!1),i.getPublicInstance().refs[e]===t.getPublicInstance()&&i.detachRef(e)}};t.exports=o},function(t,e,i){"use strict";function n(t,e,i){"function"==typeof t?t(e.getPublicInstance()):s.addComponentAsRefTo(e,t,i)}function o(t,e,i){"function"==typeof t?t(null):s.removeComponentAsRefFrom(e,t,i)}var s=i(94),r={};r.attachRefs=function(t,e){if(null!==e&&e!==!1){var i=e.ref;null!=i&&n(i,t,e._owner)}},r.shouldUpdateRefs=function(t,e){var i=null===t||t===!1,n=null===e||e===!1;return i||n||e._owner!==t._owner||e.ref!==t.ref},r.detachRefs=function(t,e){if(null!==e&&e!==!1){var i=e.ref;null!=i&&o(i,t,e._owner)}},t.exports=r},function(t){"use strict";function e(t){for(var e=1,n=0,o=0,s=t.length,r=-4&s;r>o;){for(;o<Math.min(o+4096,r);o+=4)n+=(e+=t.charCodeAt(o))+(e+=t.charCodeAt(o+1))+(e+=t.charCodeAt(o+2))+(e+=t.charCodeAt(o+3));e%=i,n%=i}for(;s>o;o++)n+=e+=t.charCodeAt(o);return e%=i,n%=i,e|n<<16}var i=65521;t.exports=e},function(t){"use strict";function e(t){return t.replace(i,function(t,e){return e.toUpperCase()})}var i=/-(.)/g;t.exports=e},function(t,e,i){"use strict";function n(t){return o(t.replace(s,"ms-"))}var o=i(97),s=/^-ms-/;t.exports=n},function(t,e,i){"use strict";function n(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"length"in t&&!("setInterval"in t)&&"number"!=typeof t.nodeType&&(Array.isArray(t)||"callee"in t||"item"in t)}function o(t){return n(t)?Array.isArray(t)?t.slice():s(t):[t]}var s=i(106);t.exports=o},function(t,e,i){"use strict";function n(t){var e=t.match(c);return e&&e[1].toLowerCase()}function o(t,e){var i=u;u?void 0:l(!1);var o=n(t),s=o&&a(o);if(s){i.innerHTML=s[1]+t+s[2];for(var c=s[0];c--;)i=i.lastChild}else i.innerHTML=t;var h=i.getElementsByTagName("script");h.length&&(e?void 0:l(!1),r(h).forEach(e));for(var d=r(i.childNodes);i.lastChild;)i.removeChild(i.lastChild);return d}var s=i(4),r=i(99),a=i(69),l=i(1),u=s.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;t.exports=o},function(t){"use strict";function e(t){return t===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:t.scrollLeft,y:t.scrollTop}}t.exports=e},function(t){"use strict";function e(t){return t.replace(i,"-$1").toLowerCase()}var i=/([A-Z])/g;t.exports=e},function(t,e,i){"use strict";function n(t){return o(t).replace(s,"-ms-")}var o=i(102),s=/^ms-/;t.exports=n},function(t){"use strict";function e(t,e,n){if(!t)return null;var o={};for(var s in t)i.call(t,s)&&(o[s]=e.call(n,t[s],s,t));return o}var i=Object.prototype.hasOwnProperty;t.exports=e},function(t){"use strict";function e(t){var e={};return function(i){return e.hasOwnProperty(i)||(e[i]=t.call(this,i)),e[i]}}t.exports=e},function(t,e,i){"use strict";function n(t){var e=t.length;if(Array.isArray(t)||"object"!=typeof t&&"function"!=typeof t?o(!1):void 0,"number"!=typeof e?o(!1):void 0,0===e||e-1 in t?void 0:o(!1),t.hasOwnProperty)try{return Array.prototype.slice.call(t)}catch(i){}for(var n=Array(e),s=0;e>s;s++)n[s]=t[s];return n}var o=i(1);t.exports=n},function(t,e,i){"use strict";var n=i(6),o=i(41),s=i(67),r={componentDidMount:function(){this.props.autoFocus&&s(o(this))}},a={Mixin:r,focusDOMComponent:function(){s(n.getNode(this._rootNodeID))}};t.exports=a},function(t,e,i){"use strict";function n(){var t=window.opera;return"object"==typeof t&&"function"==typeof t.version&&parseInt(t.version(),10)<=12}function o(t){return(t.ctrlKey||t.altKey||t.metaKey)&&!(t.ctrlKey&&t.altKey)}function s(t){switch(t){case E.topCompositionStart:return M.compositionStart;case E.topCompositionEnd:return M.compositionEnd;case E.topCompositionUpdate:return M.compositionUpdate}}function r(t,e){return t===E.topKeyDown&&e.keyCode===_}function a(t,e){switch(t){case E.topKeyUp:return-1!==w.indexOf(e.keyCode);case E.topKeyDown:return e.keyCode!==_;case E.topKeyPress:case E.topMouseDown:case E.topBlur:return!0;default:return!1}}function l(t){var e=t.detail;return"object"==typeof e&&"data"in e?e.data:null}function u(t,e,i,n,o){var u,c;if(k?u=s(t):I?a(t,n)&&(u=M.compositionEnd):r(t,n)&&(u=M.compositionStart),!u)return null;S&&(I||u!==M.compositionStart?u===M.compositionEnd&&I&&(c=I.getData()):I=m.getPooled(e));var h=v.getPooled(u,i,n,o);if(c)h.data=c;else{var d=l(n);null!==d&&(h.data=d)}return f.accumulateTwoPhaseDispatches(h),h}function c(t,e){switch(t){case E.topCompositionEnd:return l(e);case E.topKeyPress:var i=e.which;return i!==T?null:($=!0,D);case E.topTextInput:var n=e.data;return n===D&&$?null:n;default:return null}}function h(t,e){if(I){if(t===E.topCompositionEnd||a(t,e)){var i=I.getData();return m.release(I),I=null,i}return null}switch(t){case E.topPaste:return null;case E.topKeyPress:return e.which&&!o(e)?String.fromCharCode(e.which):null;case E.topCompositionEnd:return S?null:e.data;default:return null}}function d(t,e,i,n,o){var s;if(s=x?c(t,n):h(t,n),!s)return null;var r=y.getPooled(M.beforeInput,i,n,o);return r.data=s,f.accumulateTwoPhaseDispatches(r),r}var p=i(11),f=i(21),g=i(4),m=i(115),v=i(139),y=i(142),b=i(12),w=[9,13,27,32],_=229,k=g.canUseDOM&&"CompositionEvent"in window,C=null;g.canUseDOM&&"documentMode"in document&&(C=document.documentMode);var x=g.canUseDOM&&"TextEvent"in window&&!C&&!n(),S=g.canUseDOM&&(!k||C&&C>8&&11>=C),T=32,D=String.fromCharCode(T),E=p.topLevelTypes,M={beforeInput:{phasedRegistrationNames:{bubbled:b({onBeforeInput:null}),captured:b({onBeforeInputCapture:null})},dependencies:[E.topCompositionEnd,E.topKeyPress,E.topTextInput,E.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:b({onCompositionEnd:null}),captured:b({onCompositionEndCapture:null})},dependencies:[E.topBlur,E.topCompositionEnd,E.topKeyDown,E.topKeyPress,E.topKeyUp,E.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:b({onCompositionStart:null}),captured:b({onCompositionStartCapture:null})},dependencies:[E.topBlur,E.topCompositionStart,E.topKeyDown,E.topKeyPress,E.topKeyUp,E.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:b({onCompositionUpdate:null}),captured:b({onCompositionUpdateCapture:null})},dependencies:[E.topBlur,E.topCompositionUpdate,E.topKeyDown,E.topKeyPress,E.topKeyUp,E.topMouseDown]}},$=!1,I=null,P={eventTypes:M,extractEvents:function(t,e,i,n,o){return[u(t,e,i,n,o),d(t,e,i,n,o)]}};t.exports=P},function(t,e,i){"use strict";var n=i(70),o=i(4),s=i(8),r=(i(98),i(146)),a=i(103),l=i(105),u=(i(3),l(function(t){return a(t)})),c=!1,h="cssFloat";if(o.canUseDOM){var d=document.createElement("div").style;try{d.font=""}catch(p){c=!0}void 0===document.documentElement.style.cssFloat&&(h="styleFloat")}var f={createMarkupForStyles:function(t){var e="";for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];null!=n&&(e+=u(i)+":",e+=r(i,n)+";")}return e||null},setValueForStyles:function(t,e){var i=t.style;for(var o in e)if(e.hasOwnProperty(o)){var s=r(o,e[o]);if("float"===o&&(o=h),s)i[o]=s;else{var a=c&&n.shorthandPropertyExpansions[o];if(a)for(var l in a)i[l]="";else i[o]=""}}}};s.measureMethods(f,"CSSPropertyOperations",{setValueForStyles:"setValueForStyles"}),t.exports=f},function(t,e,i){"use strict";function n(t){var e=t.nodeName&&t.nodeName.toLowerCase();return"select"===e||"input"===e&&"file"===t.type}function o(t){var e=C.getPooled(M.change,I,t,x(t));w.accumulateTwoPhaseDispatches(e),k.batchedUpdates(s,e)}function s(t){b.enqueueEvents(t),b.processEventQueue(!1)}function r(t,e){$=t,I=e,$.attachEvent("onchange",o)}function a(){$&&($.detachEvent("onchange",o),$=null,I=null)}function l(t,e,i){return t===E.topChange?i:void 0}function u(t,e,i){t===E.topFocus?(a(),r(e,i)):t===E.topBlur&&a()}function c(t,e){$=t,I=e,P=t.value,L=Object.getOwnPropertyDescriptor(t.constructor.prototype,"value"),Object.defineProperty($,"value",O),$.attachEvent("onpropertychange",d)}function h(){$&&(delete $.value,$.detachEvent("onpropertychange",d),$=null,I=null,P=null,L=null)}function d(t){if("value"===t.propertyName){var e=t.srcElement.value;e!==P&&(P=e,o(t))}}function p(t,e,i){return t===E.topInput?i:void 0}function f(t,e,i){t===E.topFocus?(h(),c(e,i)):t===E.topBlur&&h()}function g(t){return t!==E.topSelectionChange&&t!==E.topKeyUp&&t!==E.topKeyDown||!$||$.value===P?void 0:(P=$.value,I)}function m(t){return t.nodeName&&"input"===t.nodeName.toLowerCase()&&("checkbox"===t.type||"radio"===t.type)}function v(t,e,i){return t===E.topClick?i:void 0}var y=i(11),b=i(20),w=i(21),_=i(4),k=i(9),C=i(15),x=i(49),S=i(38),T=i(85),D=i(12),E=y.topLevelTypes,M={change:{phasedRegistrationNames:{bubbled:D({onChange:null}),captured:D({onChangeCapture:null})},dependencies:[E.topBlur,E.topChange,E.topClick,E.topFocus,E.topInput,E.topKeyDown,E.topKeyUp,E.topSelectionChange]}},$=null,I=null,P=null,L=null,A=!1;_.canUseDOM&&(A=S("change")&&(!("documentMode"in document)||document.documentMode>8));var R=!1;_.canUseDOM&&(R=S("input")&&(!("documentMode"in document)||document.documentMode>9));var O={get:function(){return L.get.call(this)},set:function(t){P=""+t,L.set.call(this,t)}},N={eventTypes:M,extractEvents:function(t,e,i,o,s){var r,a;if(n(e)?A?r=l:a=u:T(e)?R?r=p:(r=g,a=f):m(e)&&(r=v),r){var c=r(t,e,i);if(c){var h=C.getPooled(M.change,c,o,s);return h.type="change",w.accumulateTwoPhaseDispatches(h),h}}a&&a(t,e,i)}};t.exports=N},function(t){"use strict";var e=0,i={createReactRootIndex:function(){return e++}};t.exports=i},function(t,e,i){"use strict";function n(t){return t.substring(1,t.indexOf(" "))}var o=i(4),s=i(100),r=i(7),a=i(69),l=i(1),u=/^(<[^ \/>]+)/,c="data-danger-index",h={dangerouslyRenderMarkup:function(t){o.canUseDOM?void 0:l(!1);for(var e,i={},h=0;h<t.length;h++)t[h]?void 0:l(!1),e=n(t[h]),e=a(e)?e:"*",i[e]=i[e]||[],i[e][h]=t[h];var d=[],p=0;for(e in i)if(i.hasOwnProperty(e)){var f,g=i[e];for(f in g)if(g.hasOwnProperty(f)){var m=g[f];g[f]=m.replace(u,"$1 "+c+'="'+f+'" ')}for(var v=s(g.join(""),r),y=0;y<v.length;++y){var b=v[y];b.hasAttribute&&b.hasAttribute(c)&&(f=+b.getAttribute(c),b.removeAttribute(c),d.hasOwnProperty(f)?l(!1):void 0,d[f]=b,p+=1)}}return p!==d.length?l(!1):void 0,d.length!==t.length?l(!1):void 0,d},dangerouslyReplaceNodeWithMarkup:function(t,e){o.canUseDOM?void 0:l(!1),e?void 0:l(!1),"html"===t.tagName.toLowerCase()?l(!1):void 0;var i;i="string"==typeof e?s(e,r)[0]:e,t.parentNode.replaceChild(i,t)}};t.exports=h},function(t,e,i){"use strict";var n=i(12),o=[n({ResponderEventPlugin:null}),n({SimpleEventPlugin:null}),n({TapEventPlugin:null}),n({EnterLeaveEventPlugin:null}),n({ChangeEventPlugin:null}),n({SelectEventPlugin:null}),n({BeforeInputEventPlugin:null})];t.exports=o},function(t,e,i){"use strict";var n=i(11),o=i(21),s=i(30),r=i(6),a=i(12),l=n.topLevelTypes,u=r.getFirstReactDOM,c={mouseEnter:{registrationName:a({onMouseEnter:null}),dependencies:[l.topMouseOut,l.topMouseOver]},mouseLeave:{registrationName:a({onMouseLeave:null}),dependencies:[l.topMouseOut,l.topMouseOver]}},h=[null,null],d={eventTypes:c,extractEvents:function(t,e,i,n,a){if(t===l.topMouseOver&&(n.relatedTarget||n.fromElement))return null;if(t!==l.topMouseOut&&t!==l.topMouseOver)return null;var d;if(e.window===e)d=e;else{var p=e.ownerDocument;d=p?p.defaultView||p.parentWindow:window}var f,g,m="",v="";if(t===l.topMouseOut?(f=e,m=i,g=u(n.relatedTarget||n.toElement),g?v=r.getID(g):g=d,g=g||d):(f=d,g=e,v=i),f===g)return null;var y=s.getPooled(c.mouseLeave,m,n,a);y.type="mouseleave",y.target=f,y.relatedTarget=g;var b=s.getPooled(c.mouseEnter,v,n,a);return b.type="mouseenter",b.target=g,b.relatedTarget=f,o.accumulateEnterLeaveDispatches(y,b,m,v),h[0]=y,h[1]=b,h}};t.exports=d},function(t,e,i){"use strict";function n(t){this._root=t,this._startText=this.getText(),this._fallbackText=null}var o=i(13),s=i(2),r=i(84);s(n.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[r()]},getData:function(){if(this._fallbackText)return this._fallbackText;var t,e,i=this._startText,n=i.length,o=this.getText(),s=o.length;for(t=0;n>t&&i[t]===o[t];t++);var r=n-t;for(e=1;r>=e&&i[n-e]===o[s-e];e++);var a=e>1?1-e:void 0;return this._fallbackText=o.slice(t,a),this._fallbackText}}),o.addPoolingTo(n),t.exports=n},function(t,e,i){"use strict";var n,o=i(17),s=i(4),r=o.injection.MUST_USE_ATTRIBUTE,a=o.injection.MUST_USE_PROPERTY,l=o.injection.HAS_BOOLEAN_VALUE,u=o.injection.HAS_SIDE_EFFECTS,c=o.injection.HAS_NUMERIC_VALUE,h=o.injection.HAS_POSITIVE_NUMERIC_VALUE,d=o.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(s.canUseDOM){var p=document.implementation;n=p&&p.hasFeature&&p.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var f={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:r|l,allowTransparency:r,alt:null,async:l,autoComplete:null,autoPlay:l,capture:r|l,cellPadding:null,cellSpacing:null,charSet:r,challenge:r,checked:a|l,classID:r,className:n?r:a,cols:r|h,colSpan:null,content:null,contentEditable:null,contextMenu:r,controls:a|l,coords:null,crossOrigin:null,data:null,dateTime:r,"default":l,defer:l,dir:null,disabled:r|l,download:d,draggable:null,encType:null,form:r,formAction:r,formEncType:r,formMethod:r,formNoValidate:l,formTarget:r,frameBorder:r,headers:null,height:r,hidden:r|l,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:a,inputMode:r,integrity:null,is:r,keyParams:r,keyType:r,kind:null,label:null,lang:null,list:r,loop:a|l,low:null,manifest:r,marginHeight:null,marginWidth:null,max:null,maxLength:r,media:r,mediaGroup:null,method:null,min:null,minLength:r,multiple:a|l,muted:a|l,name:null,nonce:r,noValidate:l,open:l,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:a|l,rel:null,required:l,reversed:l,role:r,rows:r|h,rowSpan:null,sandbox:null,scope:null,scoped:l,scrolling:null,seamless:r|l,selected:a|l,shape:null,size:r|h,sizes:r,span:h,spellCheck:null,src:null,srcDoc:a,srcLang:null,srcSet:r,start:c,step:null,style:null,summary:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:a|u,width:r,wmode:r,wrap:null,about:r,datatype:r,inlist:r,prefix:r,property:r,resource:r,"typeof":r,vocab:r,autoCapitalize:r,autoCorrect:r,autoSave:null,color:null,itemProp:r,itemScope:r|l,itemType:r,itemID:r,itemRef:r,results:null,security:r,unselectable:r},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoComplete:"autocomplete",autoFocus:"autofocus",autoPlay:"autoplay",autoSave:"autosave",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};t.exports=f},function(t,e,i){"use strict";var n=(i(18),i(41)),o=(i(3),"_getDOMNodeDidWarn"),s={getDOMNode:function(){return this.constructor[o]=!0,n(this)}};t.exports=s},function(t,e,i){"use strict";function n(t,e,i){var n=void 0===t[i];null!=e&&n&&(t[i]=s(e,null))}var o=i(14),s=i(37),r=i(33),a=i(39),l=(i(3),{instantiateChildren:function(t){if(null==t)return null;var e={};return a(t,n,e),e},updateChildren:function(t,e,i,n){if(!e&&!t)return null;var a;for(a in e)if(e.hasOwnProperty(a)){var l=t&&t[a],u=l&&l._currentElement,c=e[a];if(null!=l&&r(u,c))o.receiveComponent(l,c,i,n),e[a]=l;else{l&&o.unmountComponent(l,a);var h=s(c,null);e[a]=h}}for(a in t)!t.hasOwnProperty(a)||e&&e.hasOwnProperty(a)||o.unmountComponent(t[a]);return e},unmountChildren:function(t){for(var e in t)if(t.hasOwnProperty(e)){var i=t[e];o.unmountComponent(i)}}});t.exports=l},function(t){"use strict";var e={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},i={getNativeProps:function(t,i){if(!i.disabled)return i;var n={};for(var o in i)i.hasOwnProperty(o)&&!e[o]&&(n[o]=i[o]);return n}};t.exports=i},function(t,e,i){"use strict";function n(){return this}function o(){var t=this._reactInternalComponent;return!!t}function s(){}function r(t,e){var i=this._reactInternalComponent;i&&(P.enqueueSetPropsInternal(i,t),e&&P.enqueueCallbackInternal(i,e))}function a(t,e){var i=this._reactInternalComponent;i&&(P.enqueueReplacePropsInternal(i,t),e&&P.enqueueCallbackInternal(i,e))}function l(t,e){e&&(null!=e.dangerouslySetInnerHTML&&(null!=e.children?O(!1):void 0,"object"==typeof e.dangerouslySetInnerHTML&&q in e.dangerouslySetInnerHTML?void 0:O(!1)),null!=e.style&&"object"!=typeof e.style?O(!1):void 0)}function u(t,e,i,n){var o=M.findReactContainerForID(t);if(o){var s=o.nodeType===W?o.ownerDocument:o;K(e,s)}n.getReactMountReady().enqueue(c,{id:t,registrationName:e,listener:i})}function c(){var t=this;k.putListener(t.id,t.registrationName,t.listener)}function h(){var t=this;t._rootNodeID?void 0:O(!1);var e=M.getNode(t._rootNodeID);switch(e?void 0:O(!1),t._tag){case"iframe":t._wrapperState.listeners=[k.trapBubbledEvent(_.topLevelTypes.topLoad,"load",e)];break;case"video":case"audio":t._wrapperState.listeners=[];for(var i in J)J.hasOwnProperty(i)&&t._wrapperState.listeners.push(k.trapBubbledEvent(_.topLevelTypes[i],J[i],e));break;case"img":t._wrapperState.listeners=[k.trapBubbledEvent(_.topLevelTypes.topError,"error",e),k.trapBubbledEvent(_.topLevelTypes.topLoad,"load",e)];break;case"form":t._wrapperState.listeners=[k.trapBubbledEvent(_.topLevelTypes.topReset,"reset",e),k.trapBubbledEvent(_.topLevelTypes.topSubmit,"submit",e)]}}function d(){S.mountReadyWrapper(this)}function p(){D.postUpdateWrapper(this)}function f(t){Z.call(X,t)||(Q.test(t)?void 0:O(!1),X[t]=!0)}function g(t,e){return t.indexOf("-")>=0||null!=e.is}function m(t){f(t),this._tag=t.toLowerCase(),this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._rootNodeID=null,this._wrapperState=null,this._topLevelWrapper=null,this._nodeWithLegacyProperties=null}var v=i(107),y=i(109),b=i(17),w=i(42),_=i(11),k=i(25),C=i(44),x=i(119),S=i(122),T=i(123),D=i(75),E=i(125),M=i(6),$=i(129),I=i(8),P=i(32),L=i(2),A=i(23),R=i(31),O=i(1),N=(i(38),i(12)),F=i(29),B=i(50),U=(i(51),i(40),i(3),k.deleteListener),K=k.listenTo,V=k.registrationNameModules,z={string:!0,number:!0},j=N({children:null}),H=N({style:null}),q=N({__html:null}),W=1,J={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},Y={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},G={listing:!0,pre:!0,textarea:!0},Q=(L({menuitem:!0},Y),/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/),X={},Z={}.hasOwnProperty;m.displayName="ReactDOMComponent",m.Mixin={construct:function(t){this._currentElement=t},mountComponent:function(t,e,i){this._rootNodeID=t;var n=this._currentElement.props;switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":this._wrapperState={listeners:null},e.getReactMountReady().enqueue(h,this);break;case"button":n=x.getNativeProps(this,n,i);break;case"input":S.mountWrapper(this,n,i),n=S.getNativeProps(this,n,i);break;case"option":T.mountWrapper(this,n,i),n=T.getNativeProps(this,n,i);break;case"select":D.mountWrapper(this,n,i),n=D.getNativeProps(this,n,i),i=D.processChildContext(this,n,i);break;case"textarea":E.mountWrapper(this,n,i),n=E.getNativeProps(this,n,i)}l(this,n);var o;if(e.useCreateElement){var s=i[M.ownerDocumentContextKey],r=s.createElement(this._currentElement.type);w.setAttributeForID(r,this._rootNodeID),M.getID(r),this._updateDOMProperties({},n,e,r),this._createInitialChildren(e,n,i,r),o=r}else{var a=this._createOpenTagMarkupAndPutListeners(e,n),u=this._createContentMarkup(e,n,i);o=!u&&Y[this._tag]?a+"/>":a+">"+u+"</"+this._currentElement.type+">"}switch(this._tag){case"input":e.getReactMountReady().enqueue(d,this);case"button":case"select":case"textarea":n.autoFocus&&e.getReactMountReady().enqueue(v.focusDOMComponent,this)}return o},_createOpenTagMarkupAndPutListeners:function(t,e){var i="<"+this._currentElement.type;for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];if(null!=o)if(V.hasOwnProperty(n))o&&u(this._rootNodeID,n,o,t);else{n===H&&(o&&(o=this._previousStyleCopy=L({},e.style)),o=y.createMarkupForStyles(o));var s=null;null!=this._tag&&g(this._tag,e)?n!==j&&(s=w.createMarkupForCustomAttribute(n,o)):s=w.createMarkupForProperty(n,o),s&&(i+=" "+s)}}if(t.renderToStaticMarkup)return i;var r=w.createMarkupForID(this._rootNodeID);return i+" "+r},_createContentMarkup:function(t,e,i){var n="",o=e.dangerouslySetInnerHTML;if(null!=o)null!=o.__html&&(n=o.__html);else{var s=z[typeof e.children]?e.children:null,r=null!=s?null:e.children;
if(null!=s)n=R(s);else if(null!=r){var a=this.mountChildren(r,t,i);n=a.join("")}}return G[this._tag]&&"\n"===n.charAt(0)?"\n"+n:n},_createInitialChildren:function(t,e,i,n){var o=e.dangerouslySetInnerHTML;if(null!=o)null!=o.__html&&F(n,o.__html);else{var s=z[typeof e.children]?e.children:null,r=null!=s?null:e.children;if(null!=s)B(n,s);else if(null!=r)for(var a=this.mountChildren(r,t,i),l=0;l<a.length;l++)n.appendChild(a[l])}},receiveComponent:function(t,e,i){var n=this._currentElement;this._currentElement=t,this.updateComponent(e,n,t,i)},updateComponent:function(t,e,i,n){var o=e.props,s=this._currentElement.props;switch(this._tag){case"button":o=x.getNativeProps(this,o),s=x.getNativeProps(this,s);break;case"input":S.updateWrapper(this),o=S.getNativeProps(this,o),s=S.getNativeProps(this,s);break;case"option":o=T.getNativeProps(this,o),s=T.getNativeProps(this,s);break;case"select":o=D.getNativeProps(this,o),s=D.getNativeProps(this,s);break;case"textarea":E.updateWrapper(this),o=E.getNativeProps(this,o),s=E.getNativeProps(this,s)}l(this,s),this._updateDOMProperties(o,s,t,null),this._updateDOMChildren(o,s,t,n),!A&&this._nodeWithLegacyProperties&&(this._nodeWithLegacyProperties.props=s),"select"===this._tag&&t.getReactMountReady().enqueue(p,this)},_updateDOMProperties:function(t,e,i,n){var o,s,r;for(o in t)if(!e.hasOwnProperty(o)&&t.hasOwnProperty(o))if(o===H){var a=this._previousStyleCopy;for(s in a)a.hasOwnProperty(s)&&(r=r||{},r[s]="");this._previousStyleCopy=null}else V.hasOwnProperty(o)?t[o]&&U(this._rootNodeID,o):(b.properties[o]||b.isCustomAttribute(o))&&(n||(n=M.getNode(this._rootNodeID)),w.deleteValueForProperty(n,o));for(o in e){var l=e[o],c=o===H?this._previousStyleCopy:t[o];if(e.hasOwnProperty(o)&&l!==c)if(o===H)if(l?l=this._previousStyleCopy=L({},l):this._previousStyleCopy=null,c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r=r||{},r[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(r=r||{},r[s]=l[s])}else r=l;else V.hasOwnProperty(o)?l?u(this._rootNodeID,o,l,i):c&&U(this._rootNodeID,o):g(this._tag,e)?(n||(n=M.getNode(this._rootNodeID)),o===j&&(l=null),w.setValueForAttribute(n,o,l)):(b.properties[o]||b.isCustomAttribute(o))&&(n||(n=M.getNode(this._rootNodeID)),null!=l?w.setValueForProperty(n,o,l):w.deleteValueForProperty(n,o))}r&&(n||(n=M.getNode(this._rootNodeID)),y.setValueForStyles(n,r))},_updateDOMChildren:function(t,e,i,n){var o=z[typeof t.children]?t.children:null,s=z[typeof e.children]?e.children:null,r=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,a=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,l=null!=o?null:t.children,u=null!=s?null:e.children,c=null!=o||null!=r,h=null!=s||null!=a;null!=l&&null==u?this.updateChildren(null,i,n):c&&!h&&this.updateTextContent(""),null!=s?o!==s&&this.updateTextContent(""+s):null!=a?r!==a&&this.updateMarkup(""+a):null!=u&&this.updateChildren(u,i,n)},unmountComponent:function(){switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":var t=this._wrapperState.listeners;if(t)for(var e=0;e<t.length;e++)t[e].remove();break;case"input":S.unmountWrapper(this);break;case"html":case"head":case"body":O(!1)}if(this.unmountChildren(),k.deleteAllListeners(this._rootNodeID),C.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null,this._wrapperState=null,this._nodeWithLegacyProperties){var i=this._nodeWithLegacyProperties;i._reactInternalComponent=null,this._nodeWithLegacyProperties=null}},getPublicInstance:function(){if(!this._nodeWithLegacyProperties){var t=M.getNode(this._rootNodeID);t._reactInternalComponent=this,t.getDOMNode=n,t.isMounted=o,t.setState=s,t.replaceState=s,t.forceUpdate=s,t.setProps=r,t.replaceProps=a,t.props=this._currentElement.props,this._nodeWithLegacyProperties=t}return this._nodeWithLegacyProperties}},I.measureMethods(m,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),L(m.prototype,m.Mixin,$.Mixin),t.exports=m},function(t,e,i){"use strict";function n(t){return o.createFactory(t)}var o=i(5),s=(i(79),i(104)),r=s({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hgroup:"hgroup",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",image:"image",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},n);t.exports=r},function(t,e,i){"use strict";function n(){this._rootNodeID&&d.updateWrapper(this)}function o(t){var e=this._currentElement.props,i=r.executeOnChange(e,t);l.asap(n,this);var o=e.name;if("radio"===e.type&&null!=o){for(var s=a.getNode(this._rootNodeID),u=s;u.parentNode;)u=u.parentNode;for(var d=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),p=0;p<d.length;p++){var f=d[p];if(f!==s&&f.form===s.form){var g=a.getID(f);g?void 0:c(!1);var m=h[g];m?void 0:c(!1),l.asap(n,m)}}}return i}var s=i(45),r=i(43),a=i(6),l=i(9),u=i(2),c=i(1),h={},d={getNativeProps:function(t,e){var i=r.getValue(e),n=r.getChecked(e),o=u({},e,{defaultChecked:void 0,defaultValue:void 0,value:null!=i?i:t._wrapperState.initialValue,checked:null!=n?n:t._wrapperState.initialChecked,onChange:t._wrapperState.onChange});return o},mountWrapper:function(t,e){var i=e.defaultValue;t._wrapperState={initialChecked:e.defaultChecked||!1,initialValue:null!=i?i:null,onChange:o.bind(t)}},mountReadyWrapper:function(t){h[t._rootNodeID]=t},unmountWrapper:function(t){delete h[t._rootNodeID]},updateWrapper:function(t){var e=t._currentElement.props,i=e.checked;null!=i&&s.updatePropertyByID(t._rootNodeID,"checked",i||!1);var n=r.getValue(e);null!=n&&s.updatePropertyByID(t._rootNodeID,"value",""+n)}};t.exports=d},function(t,e,i){"use strict";var n=i(52),o=i(75),s=i(2),r=(i(3),o.valueContextKey),a={mountWrapper:function(t,e,i){var n=i[r],o=null;if(null!=n)if(o=!1,Array.isArray(n)){for(var s=0;s<n.length;s++)if(""+n[s]==""+e.value){o=!0;break}}else o=""+n==""+e.value;t._wrapperState={selected:o}},getNativeProps:function(t,e){var i=s({selected:void 0,children:void 0},e);null!=t._wrapperState.selected&&(i.selected=t._wrapperState.selected);var o="";return n.forEach(e.children,function(t){null!=t&&("string"==typeof t||"number"==typeof t)&&(o+=t)}),i.children=o,i}};t.exports=a},function(t,e,i){"use strict";function n(t,e,i,n){return t===i&&e===n}function o(t){var e=document.selection,i=e.createRange(),n=i.text.length,o=i.duplicate();o.moveToElementText(t),o.setEndPoint("EndToStart",i);var s=o.text.length,r=s+n;return{start:s,end:r}}function s(t){var e=window.getSelection&&window.getSelection();if(!e||0===e.rangeCount)return null;var i=e.anchorNode,o=e.anchorOffset,s=e.focusNode,r=e.focusOffset,a=e.getRangeAt(0);try{a.startContainer.nodeType,a.endContainer.nodeType}catch(l){return null}var u=n(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),c=u?0:a.toString().length,h=a.cloneRange();h.selectNodeContents(t),h.setEnd(a.startContainer,a.startOffset);var d=n(h.startContainer,h.startOffset,h.endContainer,h.endOffset),p=d?0:h.toString().length,f=p+c,g=document.createRange();g.setStart(i,o),g.setEnd(s,r);var m=g.collapsed;return{start:m?f:p,end:m?p:f}}function r(t,e){var i,n,o=document.selection.createRange().duplicate();"undefined"==typeof e.end?(i=e.start,n=i):e.start>e.end?(i=e.end,n=e.start):(i=e.start,n=e.end),o.moveToElementText(t),o.moveStart("character",i),o.setEndPoint("EndToStart",o),o.moveEnd("character",n-i),o.select()}function a(t,e){if(window.getSelection){var i=window.getSelection(),n=t[c()].length,o=Math.min(e.start,n),s="undefined"==typeof e.end?o:Math.min(e.end,n);if(!i.extend&&o>s){var r=s;s=o,o=r}var a=u(t,o),l=u(t,s);if(a&&l){var h=document.createRange();h.setStart(a.node,a.offset),i.removeAllRanges(),o>s?(i.addRange(h),i.extend(l.node,l.offset)):(h.setEnd(l.node,l.offset),i.addRange(h))}}}var l=i(4),u=i(149),c=i(84),h=l.canUseDOM&&"selection"in document&&!("getSelection"in window),d={getOffsets:h?o:s,setOffsets:h?r:a};t.exports=d},function(t,e,i){"use strict";function n(){this._rootNodeID&&c.updateWrapper(this)}function o(t){var e=this._currentElement.props,i=s.executeOnChange(e,t);return a.asap(n,this),i}var s=i(43),r=i(45),a=i(9),l=i(2),u=i(1),c=(i(3),{getNativeProps:function(t,e){null!=e.dangerouslySetInnerHTML?u(!1):void 0;var i=l({},e,{defaultValue:void 0,value:void 0,children:t._wrapperState.initialValue,onChange:t._wrapperState.onChange});return i},mountWrapper:function(t,e){var i=e.defaultValue,n=e.children;null!=n&&(null!=i?u(!1):void 0,Array.isArray(n)&&(n.length<=1?void 0:u(!1),n=n[0]),i=""+n),null==i&&(i="");var r=s.getValue(e);t._wrapperState={initialValue:""+(null!=r?r:i),onChange:o.bind(t)}},updateWrapper:function(t){var e=t._currentElement.props,i=s.getValue(e);null!=i&&r.updatePropertyByID(t._rootNodeID,"value",""+i)}});t.exports=c},function(t,e,i){"use strict";function n(t){var e=d.getID(t),i=h.getReactRootIDFromNodeID(e),n=d.findReactContainerForID(i),o=d.getFirstReactDOM(n);return o}function o(t,e){this.topLevelType=t,this.nativeEvent=e,this.ancestors=[]}function s(t){r(t)}function r(t){for(var e=d.getFirstReactDOM(g(t.nativeEvent))||window,i=e;i;)t.ancestors.push(i),i=n(i);for(var o=0;o<t.ancestors.length;o++){e=t.ancestors[o];var s=d.getID(e)||"";v._handleTopLevel(t.topLevelType,e,s,t.nativeEvent,g(t.nativeEvent))}}function a(t){var e=m(window);t(e)}var l=i(66),u=i(4),c=i(13),h=i(16),d=i(6),p=i(9),f=i(2),g=i(49),m=i(101);f(o.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(o,c.twoArgumentPooler);var v={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:u.canUseDOM?window:null,setHandleTopLevel:function(t){v._handleTopLevel=t},setEnabled:function(t){v._enabled=!!t},isEnabled:function(){return v._enabled},trapBubbledEvent:function(t,e,i){var n=i;return n?l.listen(n,e,v.dispatchEvent.bind(null,t)):null},trapCapturedEvent:function(t,e,i){var n=i;return n?l.capture(n,e,v.dispatchEvent.bind(null,t)):null},monitorScrollValue:function(t){var e=a.bind(null,t);l.listen(window,"scroll",e)},dispatchEvent:function(t,e){if(v._enabled){var i=o.getPooled(t,e);try{p.batchedUpdates(s,i)}finally{o.release(i)}}}};t.exports=v},function(t,e,i){"use strict";var n=i(17),o=i(20),s=i(35),r=i(72),a=i(60),l=i(25),u=i(62),c=i(8),h=i(53),d=i(9),p={Component:s.injection,Class:r.injection,DOMProperty:n.injection,EmptyComponent:a.injection,EventPluginHub:o.injection,EventEmitter:l.injection,NativeComponent:u.injection,Perf:c.injection,RootIndex:h.injection,Updates:d.injection};t.exports=p},function(t,e,i){"use strict";var n=i(52),o=i(73),s=i(72),r=i(121),a=i(5),l=(i(79),i(83)),u=i(46),c=i(2),h=i(88),d=a.createElement,p=a.createFactory,f=a.cloneElement,g={Children:{map:n.map,forEach:n.forEach,count:n.count,toArray:n.toArray,only:h},Component:o,createElement:d,cloneElement:f,isValidElement:a.isValidElement,PropTypes:l,createClass:s.createClass,createFactory:p,createMixin:function(t){return t},DOM:r,version:u,__spread:c};t.exports=g},function(t,e,i){"use strict";function n(t,e,i){m.push({parentID:t,parentNode:null,type:h.INSERT_MARKUP,markupIndex:v.push(e)-1,content:null,fromIndex:null,toIndex:i})}function o(t,e,i){m.push({parentID:t,parentNode:null,type:h.MOVE_EXISTING,markupIndex:null,content:null,fromIndex:e,toIndex:i})}function s(t,e){m.push({parentID:t,parentNode:null,type:h.REMOVE_NODE,markupIndex:null,content:null,fromIndex:e,toIndex:null})}function r(t,e){m.push({parentID:t,parentNode:null,type:h.SET_MARKUP,markupIndex:null,content:e,fromIndex:null,toIndex:null})}function a(t,e){m.push({parentID:t,parentNode:null,type:h.TEXT_CONTENT,markupIndex:null,content:e,fromIndex:null,toIndex:null})}function l(){m.length&&(c.processChildrenUpdates(m,v),u())}function u(){m.length=0,v.length=0}var c=i(35),h=i(81),d=(i(10),i(14)),p=i(118),f=i(86),g=0,m=[],v=[],y={Mixin:{_reconcilerInstantiateChildren:function(t,e,i){return p.instantiateChildren(t,e,i)},_reconcilerUpdateChildren:function(t,e,i,n){var o;return o=f(e),p.updateChildren(t,o,i,n)},mountChildren:function(t,e,i){var n=this._reconcilerInstantiateChildren(t,e,i);this._renderedChildren=n;var o=[],s=0;for(var r in n)if(n.hasOwnProperty(r)){var a=n[r],l=this._rootNodeID+r,u=d.mountComponent(a,l,e,i);a._mountIndex=s++,o.push(u)}return o},updateTextContent:function(t){g++;var e=!0;try{var i=this._renderedChildren;p.unmountChildren(i);for(var n in i)i.hasOwnProperty(n)&&this._unmountChild(i[n]);this.setTextContent(t),e=!1}finally{g--,g||(e?u():l())}},updateMarkup:function(t){g++;var e=!0;try{var i=this._renderedChildren;p.unmountChildren(i);for(var n in i)i.hasOwnProperty(n)&&this._unmountChildByName(i[n],n);this.setMarkup(t),e=!1}finally{g--,g||(e?u():l())}},updateChildren:function(t,e,i){g++;var n=!0;try{this._updateChildren(t,e,i),n=!1}finally{g--,g||(n?u():l())}},_updateChildren:function(t,e,i){var n=this._renderedChildren,o=this._reconcilerUpdateChildren(n,t,e,i);if(this._renderedChildren=o,o||n){var s,r=0,a=0;for(s in o)if(o.hasOwnProperty(s)){var l=n&&n[s],u=o[s];l===u?(this.moveChild(l,a,r),r=Math.max(l._mountIndex,r),l._mountIndex=a):(l&&(r=Math.max(l._mountIndex,r),this._unmountChild(l)),this._mountChildByNameAtIndex(u,s,a,e,i)),a++}for(s in n)!n.hasOwnProperty(s)||o&&o.hasOwnProperty(s)||this._unmountChild(n[s])}},unmountChildren:function(){var t=this._renderedChildren;p.unmountChildren(t),this._renderedChildren=null},moveChild:function(t,e,i){t._mountIndex<i&&o(this._rootNodeID,t._mountIndex,e)},createChild:function(t,e){n(this._rootNodeID,e,t._mountIndex)},removeChild:function(t){s(this._rootNodeID,t._mountIndex)},setTextContent:function(t){a(this._rootNodeID,t)},setMarkup:function(t){r(this._rootNodeID,t)},_mountChildByNameAtIndex:function(t,e,i,n,o){var s=this._rootNodeID+e,r=d.mountComponent(t,s,n,o);t._mountIndex=i,this.createChild(t,r)},_unmountChild:function(t){this.removeChild(t),t._mountIndex=null}}};t.exports=y},function(t,e,i){"use strict";function n(t){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=o.getPooled(null),this.useCreateElement=!t&&a.useCreateElement}var o=i(34),s=i(13),r=i(25),a=i(59),l=i(80),u=i(28),c=i(2),h={initialize:l.getSelectionInformation,close:l.restoreSelection},d={initialize:function(){var t=r.isEnabled();return r.setEnabled(!1),t},close:function(t){r.setEnabled(t)}},p={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},f=[h,d,p],g={getTransactionWrappers:function(){return f},getReactMountReady:function(){return this.reactMountReady},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null}};c(n.prototype,u.Mixin,g),s.addPoolingTo(n),t.exports=n},function(t){"use strict";var e={isBatchingUpdates:!1,batchedUpdates:function(){}};t.exports=e},function(t,e,i){"use strict";function n(t){r.isValidElement(t)?void 0:f(!1);var e;try{h.injection.injectBatchingStrategy(u);var i=a.createReactRootID();return e=c.getPooled(!1),e.perform(function(){var n=p(t,null),o=n.mountComponent(i,e,d);return l.addChecksumToMarkup(o)},null)}finally{c.release(e),h.injection.injectBatchingStrategy(s)}}function o(t){r.isValidElement(t)?void 0:f(!1);var e;try{h.injection.injectBatchingStrategy(u);var i=a.createReactRootID();return e=c.getPooled(!0),e.perform(function(){var n=p(t,null);return n.mountComponent(i,e,d)},null)}finally{c.release(e),h.injection.injectBatchingStrategy(s)}}var s=i(77),r=i(5),a=i(16),l=i(61),u=i(131),c=i(133),h=i(9),d=i(19),p=i(37),f=i(1);t.exports={renderToString:n,renderToStaticMarkup:o}},function(t,e,i){"use strict";function n(t){this.reinitializeTransaction(),this.renderToStaticMarkup=t,this.reactMountReady=s.getPooled(null),this.useCreateElement=!1}var o=i(13),s=i(34),r=i(28),a=i(2),l=i(7),u={initialize:function(){this.reactMountReady.reset()},close:l},c=[u],h={getTransactionWrappers:function(){return c},getReactMountReady:function(){return this.reactMountReady},destructor:function(){s.release(this.reactMountReady),this.reactMountReady=null}};a(n.prototype,r.Mixin,h),o.addPoolingTo(n),t.exports=n},function(t,e,i){"use strict";var n=i(17),o=n.injection.MUST_USE_ATTRIBUTE,s={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},r={Properties:{clipPath:o,cx:o,cy:o,d:o,dx:o,dy:o,fill:o,fillOpacity:o,fontFamily:o,fontSize:o,fx:o,fy:o,gradientTransform:o,gradientUnits:o,markerEnd:o,markerMid:o,markerStart:o,offset:o,opacity:o,patternContentUnits:o,patternUnits:o,points:o,preserveAspectRatio:o,r:o,rx:o,ry:o,spreadMethod:o,stopColor:o,stopOpacity:o,stroke:o,strokeDasharray:o,strokeLinecap:o,strokeOpacity:o,strokeWidth:o,textAnchor:o,transform:o,version:o,viewBox:o,x1:o,x2:o,x:o,xlinkActuate:o,xlinkArcrole:o,xlinkHref:o,xlinkRole:o,xlinkShow:o,xlinkTitle:o,xlinkType:o,xmlBase:o,xmlLang:o,xmlSpace:o,y1:o,y2:o,y:o},DOMAttributeNamespaces:{xlinkActuate:s.xlink,xlinkArcrole:s.xlink,xlinkHref:s.xlink,xlinkRole:s.xlink,xlinkShow:s.xlink,xlinkTitle:s.xlink,xlinkType:s.xlink,xmlBase:s.xml,xmlLang:s.xml,xmlSpace:s.xml},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlLang:"xml:lang",xmlSpace:"xml:space"}};t.exports=r},function(t,e,i){"use strict";function n(t){if("selectionStart"in t&&l.hasSelectionCapabilities(t))return{start:t.selectionStart,end:t.selectionEnd};if(window.getSelection){var e=window.getSelection();return{anchorNode:e.anchorNode,anchorOffset:e.anchorOffset,focusNode:e.focusNode,focusOffset:e.focusOffset}}if(document.selection){var i=document.selection.createRange();return{parentElement:i.parentElement(),text:i.text,top:i.boundingTop,left:i.boundingLeft}}}function o(t,e){if(w||null==v||v!==c())return null;var i=n(v);if(!b||!p(b,i)){b=i;var o=u.getPooled(m.select,y,t,e);return o.type="select",o.target=v,r.accumulateTwoPhaseDispatches(o),o}return null}var s=i(11),r=i(21),a=i(4),l=i(80),u=i(15),c=i(68),h=i(85),d=i(12),p=i(51),f=s.topLevelTypes,g=a.canUseDOM&&"documentMode"in document&&document.documentMode<=11,m={select:{phasedRegistrationNames:{bubbled:d({onSelect:null}),captured:d({onSelectCapture:null})},dependencies:[f.topBlur,f.topContextMenu,f.topFocus,f.topKeyDown,f.topMouseDown,f.topMouseUp,f.topSelectionChange]}},v=null,y=null,b=null,w=!1,_=!1,k=d({onSelect:null}),C={eventTypes:m,extractEvents:function(t,e,i,n,s){if(!_)return null;switch(t){case f.topFocus:(h(e)||"true"===e.contentEditable)&&(v=e,y=i,b=null);break;case f.topBlur:v=null,y=null,b=null;break;case f.topMouseDown:w=!0;break;case f.topContextMenu:case f.topMouseUp:return w=!1,o(n,s);case f.topSelectionChange:if(g)break;case f.topKeyDown:case f.topKeyUp:return o(n,s)}return null},didPutListener:function(t,e){e===k&&(_=!0)}};t.exports=C},function(t){"use strict";var e=Math.pow(2,53),i={createReactRootIndex:function(){return Math.ceil(Math.random()*e)}};t.exports=i},function(t,e,i){"use strict";var n=i(11),o=i(66),s=i(21),r=i(6),a=i(138),l=i(15),u=i(141),c=i(143),h=i(30),d=i(140),p=i(144),f=i(22),g=i(145),m=i(7),v=i(47),y=i(1),b=i(12),w=n.topLevelTypes,_={abort:{phasedRegistrationNames:{bubbled:b({onAbort:!0}),captured:b({onAbortCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:b({onBlur:!0}),captured:b({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:b({onCanPlay:!0}),captured:b({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:b({onCanPlayThrough:!0}),captured:b({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:b({onClick:!0}),captured:b({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:b({onContextMenu:!0}),captured:b({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:b({onCopy:!0}),captured:b({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:b({onCut:!0}),captured:b({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:b({onDoubleClick:!0}),captured:b({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:b({onDrag:!0}),captured:b({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:b({onDragEnd:!0}),captured:b({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:b({onDragEnter:!0}),captured:b({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:b({onDragExit:!0}),captured:b({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:b({onDragLeave:!0}),captured:b({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:b({onDragOver:!0}),captured:b({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:b({onDragStart:!0}),captured:b({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:b({onDrop:!0}),captured:b({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:b({onDurationChange:!0}),captured:b({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:b({onEmptied:!0}),captured:b({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:b({onEncrypted:!0}),captured:b({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:b({onEnded:!0}),captured:b({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:b({onError:!0}),captured:b({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:b({onFocus:!0}),captured:b({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:b({onInput:!0}),captured:b({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:b({onKeyDown:!0}),captured:b({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:b({onKeyPress:!0}),captured:b({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:b({onKeyUp:!0}),captured:b({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:b({onLoad:!0}),captured:b({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:b({onLoadedData:!0}),captured:b({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:b({onLoadedMetadata:!0}),captured:b({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:b({onLoadStart:!0}),captured:b({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:b({onMouseDown:!0}),captured:b({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:b({onMouseMove:!0}),captured:b({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:b({onMouseOut:!0}),captured:b({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:b({onMouseOver:!0}),captured:b({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:b({onMouseUp:!0}),captured:b({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:b({onPaste:!0}),captured:b({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:b({onPause:!0}),captured:b({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:b({onPlay:!0}),captured:b({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:b({onPlaying:!0}),captured:b({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:b({onProgress:!0}),captured:b({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:b({onRateChange:!0}),captured:b({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:b({onReset:!0}),captured:b({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:b({onScroll:!0}),captured:b({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:b({onSeeked:!0}),captured:b({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:b({onSeeking:!0}),captured:b({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:b({onStalled:!0}),captured:b({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:b({onSubmit:!0}),captured:b({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:b({onSuspend:!0}),captured:b({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:b({onTimeUpdate:!0}),captured:b({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:b({onTouchCancel:!0}),captured:b({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:b({onTouchEnd:!0}),captured:b({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:b({onTouchMove:!0}),captured:b({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:b({onTouchStart:!0}),captured:b({onTouchStartCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:b({onVolumeChange:!0}),captured:b({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:b({onWaiting:!0}),captured:b({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:b({onWheel:!0}),captured:b({onWheelCapture:!0})}}},k={topAbort:_.abort,topBlur:_.blur,topCanPlay:_.canPlay,topCanPlayThrough:_.canPlayThrough,topClick:_.click,topContextMenu:_.contextMenu,topCopy:_.copy,topCut:_.cut,topDoubleClick:_.doubleClick,topDrag:_.drag,topDragEnd:_.dragEnd,topDragEnter:_.dragEnter,topDragExit:_.dragExit,topDragLeave:_.dragLeave,topDragOver:_.dragOver,topDragStart:_.dragStart,topDrop:_.drop,topDurationChange:_.durationChange,topEmptied:_.emptied,topEncrypted:_.encrypted,topEnded:_.ended,topError:_.error,topFocus:_.focus,topInput:_.input,topKeyDown:_.keyDown,topKeyPress:_.keyPress,topKeyUp:_.keyUp,topLoad:_.load,topLoadedData:_.loadedData,topLoadedMetadata:_.loadedMetadata,topLoadStart:_.loadStart,topMouseDown:_.mouseDown,topMouseMove:_.mouseMove,topMouseOut:_.mouseOut,topMouseOver:_.mouseOver,topMouseUp:_.mouseUp,topPaste:_.paste,topPause:_.pause,topPlay:_.play,topPlaying:_.playing,topProgress:_.progress,topRateChange:_.rateChange,topReset:_.reset,topScroll:_.scroll,topSeeked:_.seeked,topSeeking:_.seeking,topStalled:_.stalled,topSubmit:_.submit,topSuspend:_.suspend,topTimeUpdate:_.timeUpdate,topTouchCancel:_.touchCancel,topTouchEnd:_.touchEnd,topTouchMove:_.touchMove,topTouchStart:_.touchStart,topVolumeChange:_.volumeChange,topWaiting:_.waiting,topWheel:_.wheel};for(var C in k)k[C].dependencies=[C];var x=b({onClick:null}),S={},T={eventTypes:_,extractEvents:function(t,e,i,n,o){var r=k[t];if(!r)return null;var m;switch(t){case w.topAbort:case w.topCanPlay:case w.topCanPlayThrough:case w.topDurationChange:case w.topEmptied:case w.topEncrypted:case w.topEnded:case w.topError:case w.topInput:case w.topLoad:case w.topLoadedData:case w.topLoadedMetadata:case w.topLoadStart:case w.topPause:case w.topPlay:case w.topPlaying:case w.topProgress:case w.topRateChange:case w.topReset:case w.topSeeked:case w.topSeeking:case w.topStalled:case w.topSubmit:case w.topSuspend:case w.topTimeUpdate:case w.topVolumeChange:case w.topWaiting:m=l;break;case w.topKeyPress:if(0===v(n))return null;case w.topKeyDown:case w.topKeyUp:m=c;break;case w.topBlur:case w.topFocus:m=u;break;case w.topClick:if(2===n.button)return null;case w.topContextMenu:case w.topDoubleClick:case w.topMouseDown:case w.topMouseMove:case w.topMouseOut:case w.topMouseOver:case w.topMouseUp:m=h;break;case w.topDrag:case w.topDragEnd:case w.topDragEnter:case w.topDragExit:case w.topDragLeave:case w.topDragOver:case w.topDragStart:case w.topDrop:m=d;break;case w.topTouchCancel:case w.topTouchEnd:case w.topTouchMove:case w.topTouchStart:m=p;break;case w.topScroll:m=f;break;case w.topWheel:m=g;break;case w.topCopy:case w.topCut:case w.topPaste:m=a}m?void 0:y(!1);var b=m.getPooled(r,i,n,o);return s.accumulateTwoPhaseDispatches(b),b},didPutListener:function(t,e){if(e===x){var i=r.getNode(t);S[t]||(S[t]=o.listen(i,"click",m))}},willDeleteListener:function(t,e){e===x&&(S[t].remove(),delete S[t])}};t.exports=T},function(t,e,i){"use strict";function n(t,e,i,n){o.call(this,t,e,i,n)}var o=i(15),s={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};o.augmentClass(n,s),t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){o.call(this,t,e,i,n)}var o=i(15),s={data:null};o.augmentClass(n,s),t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){o.call(this,t,e,i,n)}var o=i(30),s={dataTransfer:null};o.augmentClass(n,s),t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){o.call(this,t,e,i,n)}var o=i(22),s={relatedTarget:null};o.augmentClass(n,s),t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){o.call(this,t,e,i,n)}var o=i(15),s={data:null};o.augmentClass(n,s),t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){o.call(this,t,e,i,n)}var o=i(22),s=i(47),r=i(148),a=i(48),l={key:r,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:a,charCode:function(t){return"keypress"===t.type?s(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?s(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}};o.augmentClass(n,l),t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){o.call(this,t,e,i,n)}var o=i(22),s=i(48),r={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:s};o.augmentClass(n,r),t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){o.call(this,t,e,i,n)}var o=i(30),s={deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null};o.augmentClass(n,s),t.exports=n},function(t,e,i){"use strict";function n(t,e){var i=null==e||"boolean"==typeof e||""===e;if(i)return"";var n=isNaN(e);return n||0===e||s.hasOwnProperty(t)&&s[t]?""+e:("string"==typeof e&&(e=e.trim()),e+"px")}var o=i(70),s=o.isUnitlessNumber;t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n,o){return o}i(2),i(3),t.exports=n},function(t,e,i){"use strict";function n(t){if(t.key){var e=s[t.key]||t.key;if("Unidentified"!==e)return e}if("keypress"===t.type){var i=o(t);return 13===i?"Enter":String.fromCharCode(i)}return"keydown"===t.type||"keyup"===t.type?r[t.keyCode]||"Unidentified":""}var o=i(47),s={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},r={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=n},function(t){"use strict";function e(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function i(t){for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}}function n(t,n){for(var o=e(t),s=0,r=0;o;){if(3===o.nodeType){if(r=s+o.textContent.length,n>=s&&r>=n)return{node:o,offset:n-s};
s=r}o=e(i(o))}}t.exports=n},function(t,e,i){"use strict";function n(t){return'"'+o(t)+'"'}var o=i(31);t.exports=n},function(t,e,i){"use strict";var n=i(6);t.exports=n.renderSubtreeIntoContainer},,function(t,e,i){"use strict";t.exports=i(74)},,function(t,e,i){"use strict";t.exports=i(58)}]),function(t,e){"object"==typeof exports?module.exports=e(require("backbone"),require("react"),require("underscore")):"function"==typeof define&&define.amd?define(["backbone","react","underscore"],e):t.amdWeb=e(t.Backbone,t.React,t._)}(this,function(t,e,i){"use strict";var n={changeOptions:"add remove reset sort",updateScheduler:function(t){return i.debounce(t,0)}},o={changeOptions:"change",updateScheduler:i.identity},s=function(t,i,s){if(i){var r=e.BackboneMixin.ConsiderAsCollection(i)?n:o,a=r.updateScheduler(function(){t.isMounted()&&(t.onModelChange||t.forceUpdate).call(t)}),l=s||t.changeOptions||r.changeOptions;i.on(l,a,t)}},r=function(t,e){e&&e.off(null,null,t)};return e.BackboneMixin=function(t,e){var i,n;return"object"==typeof t?(e=t.renderOn,i=t.propName,n=t.modelOrCollection):i=t,n||(n=function(t){return t[i]}),{componentDidMount:function(){s(this,n(this.props),e)},componentWillReceiveProps:function(t){n(this.props)!==n(t)&&(r(this,n(this.props)),s(this,n(t),e),"function"==typeof this.componentWillChangeModel&&this.componentWillChangeModel())},componentDidUpdate:function(t){n(this.props)!==n(t)&&"function"==typeof this.componentDidChangeModel&&this.componentDidChangeModel()},componentWillUnmount:function(){r(this,n(this.props))}}},e.BackboneMixin.ConsiderAsCollection=function(e){return e instanceof t.Collection},e.BackboneViewMixin={getModel:function(){return this.props.model},model:function(){return this.getModel()},getCollection:function(){return this.props.collection},collection:function(){return this.getCollection()},el:function(){return this.isMounted()&&this.getDOMNode()}},e.createBackboneClass=function(t){var i=t.mixins||[];return t.mixins=i.concat([e.BackboneMixin("model"),e.BackboneMixin("collection"),e.BackboneViewMixin]),e.createClass(t)},e}),function(t,e){var i="undefined"!=typeof e.jQuery&&e.jQuery;e.ReactRailsUJS={CLASS_NAME_ATTR:"data-react-class",PROPS_ATTR:"data-react-props",findDOMNodes:function(n){var o,s;switch(typeof n){case"undefined":o="["+e.ReactRailsUJS.CLASS_NAME_ATTR+"]",s=t;break;case"object":o="["+e.ReactRailsUJS.CLASS_NAME_ATTR+"]",s=n;break;case"string":o=n+"["+e.ReactRailsUJS.CLASS_NAME_ATTR+"], "+n+" ["+e.ReactRailsUJS.CLASS_NAME_ATTR+"]",s=t}return i?i(o,s):s.querySelectorAll(o)},mountComponents:function(t){for(var i=e.ReactRailsUJS.findDOMNodes(t),n=0;n<i.length;++n){var o=i[n],s=o.getAttribute(e.ReactRailsUJS.CLASS_NAME_ATTR),r=e[s]||eval.call(e,s),a=o.getAttribute(e.ReactRailsUJS.PROPS_ATTR),l=a&&JSON.parse(a),u="object"==typeof ReactDOM?ReactDOM:React;u.render(React.createElement(r,l),o)}},unmountComponents:function(t){for(var i=e.ReactRailsUJS.findDOMNodes(t),n=0;n<i.length;++n){var o=i[n],s="object"==typeof ReactDOM?ReactDOM:React;s.unmountComponentAtNode(o)}}}}(document,window),function(t,e){e.ReactRailsUJS.Turbolinks={setup:function(){ReactRailsUJS.handleEvent("turbolinks:load",function(){e.ReactRailsUJS.mountComponents()}),ReactRailsUJS.handleEvent("turbolinks:before-cache",function(){e.ReactRailsUJS.unmountComponents()})}}}(document,window),function(t,e){e.ReactRailsUJS.TurbolinksClassic={setup:function(){ReactRailsUJS.handleEvent(Turbolinks.EVENTS.CHANGE,function(){e.ReactRailsUJS.mountComponents()}),ReactRailsUJS.handleEvent(Turbolinks.EVENTS.BEFORE_UNLOAD,function(){e.ReactRailsUJS.unmountComponents()})}}}(document,window),function(t,e){e.ReactRailsUJS.TurbolinksClassicDeprecated={setup:function(){Turbolinks.pagesCached(0),ReactRailsUJS.handleEvent("page:change",function(){e.ReactRailsUJS.mountComponents()}),ReactRailsUJS.handleEvent("page:receive",function(){e.ReactRailsUJS.unmountComponents()})}}}(document,window),function(t,e){var i="undefined"!=typeof e.jQuery&&e.jQuery;e.ReactRailsUJS.Native={setup:function(){i?i(function(){e.ReactRailsUJS.mountComponents()}):"addEventListener"in e?t.addEventListener("DOMContentLoaded",function(){e.ReactRailsUJS.mountComponents()}):e.attachEvent("onload",function(){e.ReactRailsUJS.mountComponents()})}}}(document,window),function(t,e){var i="undefined"!=typeof e.jQuery&&e.jQuery;ReactRailsUJS.handleEvent=i?function(e,n){i(t).on(e,n)}:function(e,i){t.addEventListener(e,i)},"undefined"!=typeof Turbolinks&&Turbolinks.supported?"undefined"!=typeof Turbolinks.EVENTS?ReactRailsUJS.TurbolinksClassic.setup():"undefined"!=typeof Turbolinks.controller?ReactRailsUJS.Turbolinks.setup():ReactRailsUJS.TurbolinksClassicDeprecated.setup():ReactRailsUJS.Native.setup()}(document,window),function(){Kiddi.Components.BranchNameSubText=React.createBackboneClass({render:function(){return React.DOM.div({className:"help-block"},this.getModel().get("full_name")+" thu\u1ed9c "+this.getModel().get("brand_name"))}})}.call(this),function(){Kiddi.Components.LoadingSpinner=React.createBackboneClass({render:function(){var t;return t=this.getModel().get("show")?"":"hide",React.DOM.div({className:"loading loading-over "+t},React.DOM.div({className:"sk-spinner spinner-gray"},React.DOM.div({className:"dot1"})))}})}.call(this),function(){Kiddi.Components.DashboardPaginationControls=React.createBackboneClass({onPageClicked:function(t){return this.getModel().set({current:t.target.name})},render:function(){var t,e,i;return e=this.getModel().get("current")*this.getModel().get("perPage"),t=e-this.getModel().get("perPage")+1,React.DOM.div({className:"pagination-controls "+(this.getModel().get("pages")>0?"":"hide")},React.DOM.div({className:"pagination-buttons pull-left"},React.DOM.a({name:this.getModel().get("current")-1,className:1===this.getModel().get("current")?"disabled":"",onClick:1!==this.getModel().get("current")?this.onPageClicked:void 0},"<"),function(){var t,e,n;for(n=[],i=t=1,e=this.getModel().get("pages");e>=1?e>=t:t>=e;i=e>=1?++t:--t)n.push(React.DOM.a({key:i,name:i,onClick:this.onPageClicked,className:this.getModel().get("current")===i?"active":""},i));return n}.call(this),React.DOM.a({name:this.getModel().get("current")+1,className:this.getModel().get("current")===this.getModel().get("pages")?"disabled":"",onClick:this.getModel().get("current")!==this.getModel().get("pages")?this.onPageClicked:void 0},">")),React.DOM.div({className:"pagination-summary"},React.DOM.span({className:"pull-right"},t+" - "+e+" of "+this.getModel().get("total")+" tr\u01b0\u1eddng m\u1ea7m non")))}})}.call(this),function(){Kiddi.Components.PendingBranchRow=React.createBackboneClass({render:function(){var t,e,i;return i=this.getModel().collection.status,t="in_review"===i?"success":"submitted"===i?"success":"complete"===i?"success":"",e=this.getModel().get("owner"),e||(e={full_name:"Kiddi staff",email:"info@kiddi.vn",phone:"0868989465"}),React.DOM.tr({className:t},React.DOM.td(null,React.DOM.span,moment(this.getModel().get("created_at")).format("YYYY-MM-DD")),React.DOM.td(null,React.DOM.span,moment(this.getModel().get("updated_at")).format("YYYY-MM-DD")),React.DOM.td(null,this.getModel().get("city_name")),React.DOM.td(null,React.DOM.a({href:this.getModel().get("edit_url"),title:"M\u1edf tr\xean trang qu\u1ea3n tr\u1ecb","data-toggle":"tooltip",target:"_blank"},this.getModel().get("full_name")+" ",React.DOM.small(null,React.DOM.span({className:"fa fa-external-link"})))),React.DOM.td(null,React.DOM.a({href:this.getModel().get("listing_url"),title:"M\u1edf tr\xean Kiddi","data-toggle":"tooltip",target:"_blank"},React.DOM.span({className:"fa fa-external-link"}))),React.DOM.td(null,React.DOM.a({href:this.getModel().get("admin_url"),title:"M\u1edf trong trang cho ban qu\u1ea3n tr\u1ecb","data-toggle":"tooltip",target:"_blank"},React.DOM.span({className:"fa fa-external-link"}))),React.DOM.td({className:"text-center"},React.DOM.span(null,this.getModel().get("photos_count"))),React.DOM.td(null,e.full_name),React.DOM.td(null,e.email),React.DOM.td(null,e.phone))}})}.call(this),function(){Kiddi.Components.PendingBranchesTable=React.createBackboneClass({mixins:[React.BackboneMixin("collection"),React.BackboneMixin("paginationModel")],render:function(){var t,e,i,n,o;return e=React.createFactory(Kiddi.Components.PendingBranchRow),t=React.createFactory(Kiddi.Components.DashboardPaginationControls),o=this.getCollection().status,n="in_review"===o?"\u0111ang ki\u1ec3m duy\u1ec7t":"submitted"===o?"s\u1eb5n s\xe0ng cho ki\u1ec3m duy\u1ec7t":"complete"===o?"ho\xe0n th\xe0nh nh\u01b0ng ch\u01b0a g\u1eedi y\xeau c\u1ea7u ki\u1ec3m duy\u1ec7t":"\u0111ang t\u1ea1o",React.DOM.div(null,React.DOM.h3(null,this.getCollection().paginationModel.get("total")+" Tr\u01b0\u1eddng m\u1ea7m non "+n),React.DOM.table({className:"table table-condensed.table-hover"},React.DOM.thead(null,React.DOM.tr({className:"sortable"},React.DOM.th(null,"Ng\xe0y t\u1ea1o"),React.DOM.th(null,"Ng\xe0y c\u1eadp nh\u1eadt"),React.DOM.th(null,"Th\xe0nh ph\u1ed1"),React.DOM.th(null,"T\xean"),React.DOM.th(null,""),React.DOM.th(null,""),React.DOM.th({className:"text-center"},React.DOM.span({className:"glyphicon glyphicon-camera",title:"S\u1ed1 l\u01b0\u1ee3ng \u1ea3nh"})),React.DOM.th(null,"Ng\u01b0\u1eddi t\u1ea1o"),React.DOM.th(null,"Email"),React.DOM.th(null,"\u0110i\u1ec7n tho\u1ea1i"))),React.DOM.tbody(null,function(){var t,n,o,s;for(o=this.getCollection().models,s=[],t=0,n=o.length;n>t;t++)i=o[t],s.push(e({model:i,key:i.id}));return s}.call(this))),t({model:this.props.paginationModel}))}})}.call(this),function(){Kiddi.Components.SearchInput=React.createBackboneClass({handleSumbit:function(t){var e;return t.preventDefault(),e=t.target.elements.query.value,this.getModel().set({query:e})},render:function(){return React.DOM.div({className:"search-field"},React.DOM.span({className:"magnifier fa fa-search"}),React.DOM.form({onSubmit:this.handleSumbit},React.DOM.input({type:"search",name:"query",placeholder:this.getModel().get("query")||"L\u1ecdc theo t\xean tr\u01b0\u1eddng..."}),React.DOM.input({type:"submit"})))}})}.call(this),function(){Kiddi.Components.SearchSummary=React.createBackboneClass({render:function(){return React.DOM.div({className:"search-summary"},""!==this.getModel().get("query")?"K\u1ebft qu\u1ea3 t\xecm ki\u1ebfm cho "+this.getModel().get("query"):void 0)}})}.call(this),function(){Kiddi.Components.PaginationControls=React.createBackboneClass({getCurrent:function(){return parseInt(this.getModel().get("current"),10)},getTotal:function(){return parseInt(this.getModel().get("pages"),10)},onPageClicked:function(t){return this.getModel().set({current:t.target.name})},pagesList:function(){var t,e,i,n,o,s,r,a,l;if(l=[],this.getTotal()<=this.range())for(t=e=1,o=this.getTotal();o>=1?o>=e:e>=o;t=o>=1?++e:--e)l.push({value:t,active:this.getCurrent()===t});else if(this.getCurrent()<=this.range())for(t=i=1,s=this.range();s>=1?s>=i:i>=s;t=s>=1?++i:--i)l.push({value:t,active:this.getCurrent()===t});else for(l.push({value:1,active:1===this.getCurrent()}),l.push({value:"...",disabled:!0}),t=n=r=this.getCurrent()-this.range()+3,a=this.getCurrent();a>=r?a>=n:n>=a;t=a>=r?++n:--n)l.push({value:t,active:this.getCurrent()===t});return l},range:function(){return parseInt(this.getModel().get("range"),10)},render:function(){var t,e,i,n,o;return i=this.getCurrent()*this.getModel().get("perPage"),t=i-this.getModel().get("perPage")+1,o=this.getModel().get("total"),i>o&&(i=o),React.DOM.div({className:"pagination-controls "+(this.getTotal()>0?"":"hide")},React.DOM.div({className:"pagination-buttons"},React.DOM.a({name:this.getCurrent()-1,className:1===this.getCurrent()?"disabled":"",onClick:1!==this.getCurrent()?this.onPageClicked:void 0},"<"),function(){var t,i,o,s;for(o=this.pagesList(),s=[],e=t=0,i=o.length;i>t;e=++t)n=o[e],s.push(React.DOM.a({key:e,name:n.disabled?void 0:n.value,onClick:n.disabled?void 0:this.onPageClicked,className:n.disabled?"disabled":n.active?"active":""},n.value));return s}.call(this),React.DOM.a({name:this.getCurrent()+1,className:this.getCurrent()===this.getTotal()?"disabled":"",onClick:this.getCurrent()!==this.getTotal()?this.onPageClicked:void 0},">")),React.DOM.div({className:"pagination-summary"},React.DOM.span,I18n.components.pagination_controls.pagination_summary.replace("%{first}",t).replace("%{last}",i).replace("%{total}",o)))}})}.call(this),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ahoy=e():t.ahoy=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(){return R.urlPrefix+R.visitsUrl}function s(){return R.urlPrefix+R.eventsUrl}function r(){return(R.useBeacon||R.trackNow)&&H&&"undefined"!=typeof window.navigator.sendBeacon}function a(t,e,i){A["default"].set(t,e,i,R.cookieDomain||R.domain)}function l(t){return A["default"].get(t)}function u(t){A["default"].set(t,"",-1)}function c(t){l("ahoy_debug")&&window.console.log(t)}function h(){for(var t=void 0;t=j.shift();)t();z=!0}function d(t){z?t():j.push(t)}function p(t,e){var i=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return i?i.apply(t,[e]):(c("Unable to match"),!1)}function f(t,e,i){document.addEventListener(t,function(t){p(t.target,e)&&i(t)})}function g(t){"interactive"===document.readyState||"complete"===document.readyState?t():document.addEventListener("DOMContentLoaded",t)}function m(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,i="x"==t?e:3&e|8;return i.toString(16)})}function v(){H&&a("ahoy_events",JSON.stringify(q),1)}function y(){var t=document.querySelector("meta[name=csrf-token]");return t&&t.content}function b(){var t=document.querySelector("meta[name=csrf-param]");return t&&t.content}function w(t){var e=y();e&&t.setRequestHeader("X-CSRF-Token",e)}function _(t,e,i){if(H)if(N)N.ajax({type:"POST",url:t,data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",beforeSend:w,success:i});else{var n=new XMLHttpRequest;n.open("POST",t,!0),n.setRequestHeader("Content-Type","application/json"),n.onload=function(){200===n.status&&i()},w(n),n.send(JSON.stringify(e))}}function k(t){var e={events:[t],visit_token:t.visit_token,visitor_token:t.visitor_token};return delete t.visit_token,delete t.visitor_token,e}function C(t){d(function(){_(s(),k(t),function(){for(var e=0;e<q.length;e++)if(q[e].id==t.id){q.splice(e,1);break}v()})})}function x(t){d(function(){var e=k(t),i=b(),n=y();i&&n&&(e[i]=n),e.events_json=JSON.stringify(e.events),delete e.events,window.navigator.sendBeacon(s(),P["default"](e))})}function S(){return R.page||window.location.pathname}function T(t){return t&&t.length>0?t:null}function D(t){for(var e in t)t.hasOwnProperty(e)&&null===t[e]&&delete t[e];return t}function E(t){var e=t.target;return D({tag:e.tagName.toLowerCase(),id:T(e.id),"class":T(e.className),page:S(),section:M(e)})}function M(t){for(;t&&t!==document;t=t.parentNode)if(t.hasAttribute("data-section"))return t.getAttribute("data-section");return null}function $(){if(z=!1,F=O.getVisitId(),B=O.getVisitorId(),U=l("ahoy_track"),F&&B&&!U)c("Active visit"),h();else if(F||(F=m(),a("ahoy_visit",F,K)),l("ahoy_visit")){c("Visit started"),B||(B=m(),a("ahoy_visitor",B,V));var t={visit_token:F,visitor_token:B,platform:R.platform,landing_page:window.location.href,screen_width:window.screen.width,screen_height:window.screen.height,js:!0};document.referrer.length>0&&(t.referrer=document.referrer),c(t),_(o(),t,function(){u("ahoy_track"),h()})}else c("Cookies disabled"),h()}Object.defineProperty(e,"__esModule",{value:!0});var I=i(1),P=n(I),L=i(2),A=n(L),R={urlPrefix:"",visitsUrl:"/ahoy/visits",eventsUrl:"/ahoy/events",cookieDomain:null,page:null,platform:"Web",useBeacon:!0,startOnReady:!0},O=window.ahoy||window.Ahoy||{};O.configure=function(t){for(var e in t)t.hasOwnProperty(e)&&(R[e]=t[e])},O.configure(O);var N=window.jQuery||window.Zepto||window.$,F=void 0,B=void 0,U=void 0,K=240,V=1051200,z=!1,j=[],H="undefined"!=typeof JSON&&"undefined"!=typeof JSON.stringify,q=[];O.getVisitId=O.getVisitToken=function(){return l("ahoy_visit")},O.getVisitorId=O.getVisitorToken=function(){return l("ahoy_visitor")},O.reset=function(){return u("ahoy_visit"),u("ahoy_visitor"),u("ahoy_events"),u("ahoy_track"),!0},O.debug=function(t){return t===!1?u("ahoy_debug"):a("ahoy_debug","t",525600),!0},O.track=function(t,e){var i={name:t,properties:e||{},time:(new Date).getTime()/1e3,id:m(),js:!0};return d(function(){O.getVisitId()||$(),d(function(){c(i),i.visit_token=O.getVisitId(),i.visitor_token=O.getVisitorId(),r()?x(i):(q.push(i),v(),setTimeout(function(){C(i)},1e3))})}),!0},O.trackView=function(t){var e={url:window.location.href,title:document.title,page:S()};if(t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);O.track("$view",e)},O.trackClicks=function(){f("click","a, button, input[type=submit]",function(t){var e=t.target,i=E(t);i.text="input"==i.tag?e.value:(e.textContent||e.innerText||e.innerHTML).replace(/[\s\r\n]+/g," ").trim(),i.href=e.href,O.track("$click",i)})},O.trackSubmits=function(){f("submit","form",function(t){var e=E(t);O.track("$submit",e)})},O.trackChanges=function(){f("change","input, textarea, select",function(t){var e=E(t);O.track("$change",e)})},O.trackAll=function(){O.trackView(),O.trackClicks(),O.trackSubmits(),O.trackChanges()};try{q=JSON.parse(l("ahoy_events")||"[]")}catch(W){}for(var J=0;J<q.length;J++)C(q[J]);O.start=function(){$(),O.start=function(){}},g(function(){R.startOnReady&&O.start()}),e["default"]=O},function(t){"use strict";function e(t){return void 0===t}function i(t){return t===Object(t)}function n(t){return Array.isArray(t)}function o(t){return null!=t&&"number"==typeof t.size&&"string"==typeof t.type&&"function"==typeof t.slice}function s(t){return o(t)&&"number"==typeof t.lastModified&&"string"==typeof t.name}function r(t){return t instanceof Date}function a(t,o,l){return o=o||new FormData,e(t)?o:(n(t)?t.forEach(function(t){var e=l+"[]";a(t,o,e)}):!i(t)||s(t)||r(t)?o.append(l,t):Object.keys(t).forEach(function(e){var i=t[e];if(n(i))for(;e.length>2&&e.lastIndexOf("[]")===e.length-2;)e=e.substring(0,e.length-2);var s=l?l+"["+e+"]":e;a(i,o,s)}),o)}t.exports=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={set:function(t,e,i,n){var o="",s="";if(i){var r=new Date;r.setTime(r.getTime()+60*i*1e3),o="; expires="+r.toGMTString()}n&&(s="; domain="+n),document.cookie=t+"="+escape(e)+o+s+"; path=/"},get:function(t){var e=void 0,i=void 0,n=t+"=",o=document.cookie.split(";");for(e=0;e<o.length;e++){for(i=o[e];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(n))return unescape(i.substring(n.length,i.length))}return null}}}])["default"]});